idx,idx1,idx2,address1,address2,instruction1,instruction2,matching1,src_file,srccode
1,1,1,040000,040000,jp $040045,jp $040045,jp $000000,init.asm,JP	_start				; Jump to start
2,2,2,040004,040004,"ld b,d","ld b,d","ld b,d",init.asm,"_exec_name:		DB	""BBCBASIC.BIN"", 0		; The executable name, only used in argv"
3,3,3,040005,040005,"ld b,d","ld b,d","ld b,d",init.asm,
4,4,4,040006,040006,"ld b,e","ld b,e","ld b,e",init.asm,
5,5,5,040007,040007,"ld b,d","ld b,d","ld b,d",init.asm,
5,5,5,040007,040007,"ld b,d","ld b,d","ld b,d",init.asm,
6,6,6,040008,040008,"ld b,c","ld b,c","ld b,c",init.asm,
7,7,7,040009,040009,"ld d,e","ld d,e","ld d,e",init.asm,
8,8,8,04000a,04000a,"ld.lis b,e","ld.lis b,e","ld.lis b,e",init.asm,
8,8,8,04000a,04000a,"ld.lis b,e","ld.lis b,e","ld.lis b,e",init.asm,
9,9,9,04000c,04000c,"ld l,$42","ld l,$42","ld l,$00",init.asm,
10,10,10,04000e,04000e,"ld.lis c,(hl)","ld.lis c,(hl)","ld.lis c,(hl)",,
11,11,11,040010,040010,nop,nop,nop,,
12,12,12,040011,040011,rst $38,rst $38,rst $00,init.asm,ALIGN	64
13,13,13,040012,040012,rst $38,rst $38,rst $00,init.asm,
14,14,14,040013,040013,rst $38,rst $38,rst $00,init.asm,
15,15,15,040014,040014,rst $38,rst $38,rst $00,init.asm,
15,15,15,040014,040014,rst $38,rst $38,rst $00,init.asm,
16,16,16,040015,040015,rst $38,rst $38,rst $00,init.asm,
17,17,17,040016,040016,rst $38,rst $38,rst $00,init.asm,
18,18,18,040017,040017,rst $38,rst $38,rst $00,init.asm,
18,18,18,040017,040017,rst $38,rst $38,rst $00,init.asm,
19,19,19,040018,040018,rst $38,rst $38,rst $00,init.asm,
20,20,20,040019,040019,rst $38,rst $38,rst $00,init.asm,
21,21,21,04001a,04001a,rst $38,rst $38,rst $00,init.asm,
21,21,21,04001a,04001a,rst $38,rst $38,rst $00,init.asm,
22,22,22,04001b,04001b,rst $38,rst $38,rst $00,init.asm,
23,23,23,04001c,04001c,rst $38,rst $38,rst $00,init.asm,
24,24,24,04001d,04001d,rst $38,rst $38,rst $00,init.asm,
24,24,24,04001d,04001d,rst $38,rst $38,rst $00,init.asm,
25,25,25,04001e,04001e,rst $38,rst $38,rst $00,init.asm,
26,26,26,04001f,04001f,rst $38,rst $38,rst $00,init.asm,
27,27,27,040020,040020,rst $38,rst $38,rst $00,init.asm,
27,27,27,040020,040020,rst $38,rst $38,rst $00,init.asm,
28,28,28,040021,040021,rst $38,rst $38,rst $00,init.asm,
29,29,29,040022,040022,rst $38,rst $38,rst $00,init.asm,
30,30,30,040023,040023,rst $38,rst $38,rst $00,init.asm,
30,30,30,040023,040023,rst $38,rst $38,rst $00,init.asm,
31,31,31,040024,040024,rst $38,rst $38,rst $00,init.asm,
32,32,32,040025,040025,rst $38,rst $38,rst $00,init.asm,
33,33,33,040026,040026,rst $38,rst $38,rst $00,init.asm,
33,33,33,040026,040026,rst $38,rst $38,rst $00,init.asm,
34,34,34,040027,040027,rst $38,rst $38,rst $00,init.asm,
35,35,35,040028,040028,rst $38,rst $38,rst $00,init.asm,
36,36,36,040029,040029,rst $38,rst $38,rst $00,init.asm,
36,36,36,040029,040029,rst $38,rst $38,rst $00,init.asm,
37,37,37,04002a,04002a,rst $38,rst $38,rst $00,init.asm,
38,38,38,04002b,04002b,rst $38,rst $38,rst $00,init.asm,
39,39,39,04002c,04002c,rst $38,rst $38,rst $00,init.asm,
39,39,39,04002c,04002c,rst $38,rst $38,rst $00,init.asm,
40,40,40,04002d,04002d,rst $38,rst $38,rst $00,init.asm,
41,41,41,04002e,04002e,rst $38,rst $38,rst $00,init.asm,
42,42,42,04002f,04002f,rst $38,rst $38,rst $00,init.asm,
42,42,42,04002f,04002f,rst $38,rst $38,rst $00,init.asm,
43,43,43,040030,040030,rst $38,rst $38,rst $00,init.asm,
44,44,44,040031,040031,rst $38,rst $38,rst $00,init.asm,
45,45,45,040032,040032,rst $38,rst $38,rst $00,init.asm,
45,45,45,040032,040032,rst $38,rst $38,rst $00,init.asm,
46,46,46,040033,040033,rst $38,rst $38,rst $00,init.asm,
47,47,47,040034,040034,rst $38,rst $38,rst $00,init.asm,
48,48,48,040035,040035,rst $38,rst $38,rst $00,,
49,49,49,040036,040036,rst $38,rst $38,rst $00,,
50,50,50,040037,040037,rst $38,rst $38,rst $00,,
51,51,51,040038,040038,rst $38,rst $38,rst $00,,
52,52,52,040039,040039,rst $38,rst $38,rst $00,,
53,53,53,04003a,04003a,rst $38,rst $38,rst $00,,
54,54,54,04003b,04003b,rst $38,rst $38,rst $00,,
55,55,55,04003c,04003c,rst $38,rst $38,rst $00,,
56,56,56,04003d,04003d,rst $38,rst $38,rst $00,,
57,57,57,04003e,04003e,rst $38,rst $38,rst $00,,
58,58,58,04003f,04003f,rst $38,rst $38,rst $00,,
59,59,59,040040,040040,"ld c,l","ld c,l","ld c,l",init.asm,"DB	""MOS""				; Flag for MOS - to confirm this is a valid MOS command"
60,60,60,040041,040041,"ld c,a","ld c,a","ld c,a",init.asm,
61,61,61,040042,040042,"ld d,e","ld d,e","ld d,e",init.asm,
62,62,62,040043,040043,nop,nop,nop,init.asm,DB	00h				; MOS header version 0
63,63,63,040044,040044,"ld bc,$d5c5f5","ld bc,$d5c5f5","ld bc,$000000",init.asm,"DB	01h				; Flag for run mode (0: Z80, 1: ADL)"
64,64,64,040048,040048,push ix,push ix,push ix,init.asm,PUSH		IX
65,65,65,04004a,04004a,push iy,push iy,push iy,init.asm,PUSH		IY
66,66,66,04004c,04004c,"ld ($0400d7),sp","ld ($0400d7),sp","ld ($000000),sp",init.asm,"LD		(_sps), SP 		; Preserve the 24-bit stack pointer (SPS)"
67,67,67,040051,040051,"ld ix,$0400da","ld ix,$0400da","ld ix,$000000",init.asm,"LD		IX, _argv_ptrs		; The argv array pointer address"
68,68,68,040056,040056,push ix,push ix,push ix,init.asm,PUSH		IX
69,69,69,040058,040058,call $040088,call $040088,call $000000,init.asm,CALL		_parse_params		; Parse the parameters
70,70,70,04005c,04005c,pop ix,pop ix,pop ix,init.asm,POP		IX			; IX: argv
71,71,71,04005e,04005e,"ld b,$00","ld b,$00","ld b,$00",init.asm,"LD		B, 0			;  C: argc"
72,72,72,040060,040060,call $040075,call $040075,call $000000,init.asm,CALL		_clear_ram
73,73,73,040064,040064,jp $042fb6,jp $042fe6,jp $000000,init.asm,JP		_main			; Start user code
74,74,74,040068,040068,"ld sp,($0400d7)","ld sp,($0400d7)","ld sp,($000000)",init.asm,"_end:			LD		SP, (_sps)		; Restore the stack pointer"
75,75,75,04006d,04006d,pop iy,pop iy,pop iy,init.asm,POP		IY			; Restore the registers
76,76,76,04006f,04006f,pop ix,pop ix,pop ix,init.asm,POP		IX
77,77,77,040071,040071,pop de,pop de,pop de,init.asm,POP		DE
78,78,78,040072,040072,pop bc,pop bc,pop bc,init.asm,POP		BC
79,79,79,040073,040073,pop af,pop af,pop af,init.asm,POP		AF
80,80,80,040074,040074,ret,ret,ret,init.asm,RET					; Return to MOS
81,81,81,040075,040075,push bc,push bc,push bc,init.asm,_clear_ram:		PUSH		BC
82,82,82,040076,040076,"ld hl,$044a00","ld hl,$044a00","ld hl,$000000",init.asm,"LD		HL, RAM_START"
83,83,83,04007a,04007a,"ld de,$044a01","ld de,$044a01","ld de,$000000",init.asm,"LD		DE, RAM_START + 1"
84,84,84,04007e,04007e,"ld bc,$00034f","ld bc,$00034f","ld bc,$000000",init.asm,"LD		BC, RAM_END - RAM_START - 1"
85,85,85,040082,040082,xor a,xor a,xor a,init.asm,XOR		A
86,86,86,040083,040083,"ld (hl),a","ld (hl),a","ld (hl),a",init.asm,"LD		(HL), A"
87,87,87,040084,040084,ldir,ldir,ldir,init.asm,LDIR
88,88,88,040086,040086,pop bc,pop bc,pop bc,init.asm,POP		BC
89,89,89,040087,040087,ret,ret,ret,init.asm,RET
90,90,90,040088,040088,"ld bc,$040004","ld bc,$040004","ld bc,$000000",init.asm,"_parse_params:		LD	BC, _exec_name"
91,91,91,04008c,04008c,"ld (ix),bc","ld (ix),bc","ld (ix),bc",init.asm,"LD	(IX+0), BC		; ARGV[0] = the executable name"
92,92,92,04008f,04008f,inc ix,inc ix,inc ix,init.asm,INC	IX
93,93,93,040091,040091,inc ix,inc ix,inc ix,init.asm,INC	IX
94,94,94,040093,040093,inc ix,inc ix,inc ix,init.asm,INC	IX
95,95,95,040095,040095,call $0400d0,call $0400d0,call $000000,init.asm,CALL	_skip_spaces		; Skip HL past any leading spaces
96,96,96,040099,040099,"ld bc,$000001","ld bc,$000001","ld bc,$000000",init.asm,"LD	BC, 1			; C: ARGC = 1 - also clears out top 16 bits of BCU"
97,97,97,04009d,04009d,"ld b,$0f","ld b,$0f","ld b,$00",init.asm,"LD	B, argv_ptrs_max - 1	; B: Maximum number of argv_ptrs"
98,98,98,04009f,04009f,push bc,push bc,push bc,init.asm,PUSH	BC			; Stack ARGC
99,99,99,0400a0,0400a0,push hl,push hl,push hl,init.asm,PUSH	HL			; Stack start address of token
100,100,100,0400a1,0400a1,call $0400c1,call $0400c1,call $000000,init.asm,CALL	_get_token		; Get the next token
101,101,101,0400a5,0400a5,"ld a,c","ld a,c","ld a,c",init.asm,"LD	A, C			; A: Length of the token in characters"
102,102,102,0400a6,0400a6,pop de,pop de,pop de,init.asm,POP	DE			; Start address of token (was in HL)
103,103,103,0400a7,0400a7,pop bc,pop bc,pop bc,init.asm,POP	BC			; ARGC
104,104,104,0400a8,0400a8,or a,or a,or a,init.asm,OR	A			; Check for A=0 (no token found) OR at end of string
105,105,105,0400a9,0400a9,ret z,ret z,ret z,init.asm,RET	Z
106,106,106,0400aa,0400aa,"ld (ix),de","ld (ix),de","ld (ix),de",init.asm,"LD	(IX+0), DE		; Store the pointer to the token"
107,107,107,0400ad,0400ad,push hl,push hl,push hl,init.asm,PUSH	HL			; DE=HL
108,108,108,0400ae,0400ae,pop de,pop de,pop de,init.asm,POP	DE
109,109,109,0400af,0400af,call $0400d0,call $0400d0,call $000000,init.asm,CALL	_skip_spaces		; And skip HL past any spaces onto the next character
110,110,110,0400b3,0400b3,xor a,xor a,xor a,init.asm,XOR	A
111,111,111,0400b4,0400b4,"ld (de),a","ld (de),a","ld (de),a",init.asm,"LD	(DE), A			; Zero-terminate the token"
112,112,112,0400b5,0400b5,inc ix,inc ix,inc ix,init.asm,INC	IX
113,113,113,0400b7,0400b7,inc ix,inc ix,inc ix,init.asm,INC	IX
114,114,114,0400b9,0400b9,inc ix,inc ix,inc ix,init.asm,INC	IX			; Advance to next pointer position
115,115,115,0400bb,0400bb,inc c,inc c,inc c,init.asm,INC	C			; Increment ARGC
116,116,116,0400bc,0400bc,"ld a,c","ld a,c","ld a,c",init.asm,"LD	A, C			; Check for C >= A"
117,117,117,0400bd,0400bd,cp b,cp b,cp b,init.asm,CP	B
118,118,118,0400be,0400be,"jr c,$-$1f","jr c,$-$1f","jr c,$-$00",init.asm,"JR	C, _parse_params_1	; And loop"
119,119,119,0400c0,0400c0,ret,ret,ret,init.asm,RET
120,120,120,0400c1,0400c1,"ld c,$00","ld c,$00","ld c,$00",init.asm,"_get_token:		LD	C, 0			; Initialise length"
121,121,121,0400c3,0400c3,"ld a,(hl)","ld a,(hl)","ld a,(hl)",init.asm,"@@:			LD	A, (HL)			; Get the character from the parameter string"
122,122,122,0400c4,0400c4,or a,or a,or a,init.asm,OR	A			; Exit if 0 (end of parameter string in MOS)
123,123,123,0400c5,0400c5,ret z,ret z,ret z,init.asm,RET 	Z
124,124,124,0400c6,0400c6,cp $0d,cp $0d,cp $00,init.asm,CP	13			; Exit if CR (end of parameter string in BBC BASIC)
125,125,125,0400c8,0400c8,ret z,ret z,ret z,init.asm,RET	Z
126,126,126,0400c9,0400c9,cp $20,cp $20,cp $00,init.asm,CP	' '			; Exit if space (end of token)
127,127,127,0400cb,0400cb,ret z,ret z,ret z,init.asm,RET	Z
128,128,128,0400cc,0400cc,inc hl,inc hl,inc hl,init.asm,INC	HL			; Advance to next character
129,129,129,0400cd,0400cd,inc c,inc c,inc c,init.asm,INC 	C			; Increment length
130,130,130,0400ce,0400ce,jr $-$0b,jr $-$0b,jr $-$00,init.asm,JR	@B
131,131,131,0400d0,0400d0,"ld a,(hl)","ld a,(hl)","ld a,(hl)",init.asm,"_skip_spaces:		LD	A, (HL)			; Get the character from the parameter string"
132,132,132,0400d1,0400d1,cp $20,cp $20,cp $00,init.asm,CP	' '			; Exit if not space
133,133,133,0400d3,0400d3,ret nz,ret nz,ret nz,init.asm,RET	NZ
134,134,134,0400d4,0400d4,inc hl,inc hl,inc hl,init.asm,INC	HL			; Advance to next character
135,135,135,0400d5,0400d5,jr $-$05,jr $-$05,jr $-$00,init.asm,JR	_skip_spaces		; Increment length
136,136,136,0400d7,0400d7,rst $38,rst $38,rst $00,,
137,137,137,0400d8,0400d8,rst $38,rst $38,rst $00,,
138,138,138,0400d9,0400d9,rst $38,rst $38,rst $00,,
139,139,139,0400da,0400da,nop,nop,nop,init.asm,"_argv_ptrs:		BLKP	argv_ptrs_max, 0	; Storage for the argv array pointers; --- End init.asm ---"
140,140,140,0400db,0400db,nop,nop,nop,init.asm,
141,141,141,0400dc,0400dc,nop,nop,nop,init.asm,
142,142,142,0400dd,0400dd,nop,nop,nop,init.asm,
142,142,142,0400dd,0400dd,nop,nop,nop,init.asm,
143,143,143,0400de,0400de,nop,nop,nop,init.asm,
144,144,144,0400df,0400df,nop,nop,nop,init.asm,
145,145,145,0400e0,0400e0,nop,nop,nop,init.asm,
145,145,145,0400e0,0400e0,nop,nop,nop,init.asm,
146,146,146,0400e1,0400e1,nop,nop,nop,init.asm,
147,147,147,0400e2,0400e2,nop,nop,nop,init.asm,
148,148,148,0400e3,0400e3,nop,nop,nop,init.asm,
148,148,148,0400e3,0400e3,nop,nop,nop,init.asm,
149,149,149,0400e4,0400e4,nop,nop,nop,init.asm,
150,150,150,0400e5,0400e5,nop,nop,nop,init.asm,
151,151,151,0400e6,0400e6,nop,nop,nop,init.asm,
151,151,151,0400e6,0400e6,nop,nop,nop,init.asm,
152,152,152,0400e7,0400e7,nop,nop,nop,init.asm,
153,153,153,0400e8,0400e8,nop,nop,nop,init.asm,
154,154,154,0400e9,0400e9,nop,nop,nop,init.asm,
154,154,154,0400e9,0400e9,nop,nop,nop,init.asm,
155,155,155,0400ea,0400ea,nop,nop,nop,init.asm,
156,156,156,0400eb,0400eb,nop,nop,nop,init.asm,
157,157,157,0400ec,0400ec,nop,nop,nop,init.asm,
157,157,157,0400ec,0400ec,nop,nop,nop,init.asm,
158,158,158,0400ed,0400ed,nop,nop,nop,init.asm,
159,159,159,0400ee,0400ee,nop,nop,nop,init.asm,
160,160,160,0400ef,0400ef,nop,nop,nop,init.asm,
160,160,160,0400ef,0400ef,nop,nop,nop,init.asm,
161,161,161,0400f0,0400f0,nop,nop,nop,init.asm,
162,162,162,0400f1,0400f1,nop,nop,nop,init.asm,
163,163,163,0400f2,0400f2,nop,nop,nop,init.asm,
163,163,163,0400f2,0400f2,nop,nop,nop,init.asm,
164,164,164,0400f3,0400f3,nop,nop,nop,init.asm,
165,165,165,0400f4,0400f4,nop,nop,nop,init.asm,
166,166,166,0400f5,0400f5,nop,nop,nop,init.asm,
166,166,166,0400f5,0400f5,nop,nop,nop,init.asm,
167,167,167,0400f6,0400f6,nop,nop,nop,init.asm,
168,168,168,0400f7,0400f7,nop,nop,nop,init.asm,
169,169,169,0400f8,0400f8,nop,nop,nop,init.asm,
169,169,169,0400f8,0400f8,nop,nop,nop,init.asm,
170,170,170,0400f9,0400f9,nop,nop,nop,init.asm,
171,171,171,0400fa,0400fa,nop,nop,nop,init.asm,
172,172,172,0400fb,0400fb,nop,nop,nop,init.asm,
172,172,172,0400fb,0400fb,nop,nop,nop,init.asm,
173,173,173,0400fc,0400fc,nop,nop,nop,init.asm,
174,174,174,0400fd,0400fd,nop,nop,nop,init.asm,
175,175,175,0400fe,0400fe,nop,nop,nop,init.asm,
176,176,176,0400ff,0400ff,nop,nop,nop,,
177,177,177,040100,040100,nop,nop,nop,,
178,178,178,040101,040101,nop,nop,nop,,
179,179,179,040102,040102,nop,nop,nop,,
180,180,180,040103,040103,nop,nop,nop,,
181,181,181,040104,040104,nop,nop,nop,,
182,182,182,040105,040105,nop,nop,nop,,
183,183,183,040106,040106,nop,nop,nop,,
184,184,184,040107,040107,nop,nop,nop,,
185,185,185,040108,040108,nop,nop,nop,,
186,186,186,040109,040109,nop,nop,nop,,
187,187,187,04010a,04010a,and $08,and $08,and $00,eval.asm,FUNTBL:			DW24	DECODE			; Line number
188,188,188,04010c,04010c,inc b,inc b,inc b,eval.asm,
189,189,189,04010d,04010d,sub h,sub h,sub h,eval.asm,DW24	OPENIN			; OPENIN
190,190,190,04010e,04010e,dec b,dec b,dec b,eval.asm,
191,191,191,04010f,04010f,inc b,inc b,inc b,eval.asm,
192,192,192,040110,040110,or (hl),or (hl),or (hl),eval.asm,DW24	PTR_EV			; PTR
193,193,193,040111,040111,dec b,dec b,dec b,eval.asm,
194,194,194,040112,040112,inc b,inc b,inc b,eval.asm,
195,195,195,040113,040113,"ld d,b","ld d,b","ld d,b",eval.asm,DW24	PAGEV			; PAGE
196,196,196,040114,040114,dec b,dec b,dec b,eval.asm,
197,197,197,040115,040115,inc b,inc b,inc b,eval.asm,
198,198,198,040116,040116,ret nz,ret nz,ret nz,eval.asm,DW24	TIMEV			; TIME
199,199,199,040117,040117,dec b,dec b,dec b,eval.asm,
200,200,200,040118,040118,inc b,inc b,inc b,eval.asm,
201,201,201,040119,040119,inc a,inc a,inc a,eval.asm,DW24	LOMEMV			; LOMEM
202,202,202,04011a,04011a,dec b,dec b,dec b,eval.asm,
203,203,203,04011b,04011b,inc b,inc b,inc b,eval.asm,
204,204,204,04011c,04011c,"ld b,(hl)","ld b,(hl)","ld b,(hl)",eval.asm,DW24	HIMEMV			; HIMEM
205,205,205,04011d,04011d,dec b,dec b,dec b,eval.asm,
206,206,206,04011e,04011e,inc b,inc b,inc b,eval.asm,
207,207,207,04011f,04011f,inc d,inc d,inc d,eval.asm,DW24	ABSV			; ABS
208,208,208,040120,040120,"ld b,$04","ld b,$04","ld b,$00",eval.asm,
209,209,209,040122,040122,"ld d,b","ld d,b","ld d,b",eval.asm,DW24	ACS			; ACS
210,210,210,040123,040123,"ld b,$04","ld b,$04","ld b,$00",eval.asm,
211,211,,040125,,or a,,or a,,
212,212,,040126,,"ld b,e",,"ld b,e",,
213,213,,040127,,inc b,,inc b,,
214,214,213,040128,040128,dec h,dec h,dec h,eval.asm,DW24	ASC			; ASC
215,215,214,040129,040129,dec b,dec b,dec b,eval.asm,
216,216,215,04012a,04012a,inc b,inc b,inc b,eval.asm,
217,217,216,04012b,04012b,"ld c,b","ld c,b","ld c,b",eval.asm,DW24	ASN			; ASN
218,218,217,04012c,04012c,"ld b,$04","ld b,$04","ld b,$00",eval.asm,
219,219,218,04012e,04012e,"ld c,h","ld c,h","ld c,h",eval.asm,DW24	ATN			; ATN
220,220,219,04012f,04012f,"ld b,$04","ld b,$04","ld b,$00",eval.asm,
221,221,220,040131,040131,xor $04,xor $04,xor $00,eval.asm,DW24	BGET			; BGET
222,222,221,040133,040133,inc b,inc b,inc b,eval.asm,
223,223,222,040134,040134,inc (hl),inc (hl),inc (hl),eval.asm,DW24	COS			; COS
224,224,223,040135,040135,"ld b,$04","ld b,$04","ld b,$00",eval.asm,
225,225,224,040137,040137,"ld a,e","ld a,e","ld a,e",eval.asm,DW24	COUNTV			; COUNT
226,226,225,040138,040138,dec b,dec b,dec b,eval.asm,
227,227,226,040139,040139,inc b,inc b,inc b,eval.asm,
228,228,227,04013a,04013a,inc e,inc e,inc e,eval.asm,DW24	DEG			; DEG
229,229,228,04013b,04013b,"ld b,$04","ld b,$04","ld b,$00",eval.asm,
230,230,229,04013d,04013d,"ld l,a","ld l,a","ld l,a",eval.asm,DW24	ERLV			; ERL
231,231,230,04013e,04013e,dec b,dec b,dec b,eval.asm,
232,232,231,04013f,04013f,inc b,inc b,inc b,eval.asm,
233,233,232,040140,040140,"ld (hl),l","ld (hl),l","ld (hl),l",eval.asm,DW24	ERRV			; ERR
234,234,233,040141,040141,dec b,dec b,dec b,eval.asm,
235,235,234,040142,040142,inc b,inc b,inc b,eval.asm,
236,236,235,040143,040143,"ld a,c","ld a,c","ld a,c",eval.asm,DW24	EVAL_			; EVAL
237,237,236,040144,040144,"ld b,$04","ld b,$04","ld b,$00",eval.asm,
238,238,237,040146,040146,inc a,inc a,inc a,eval.asm,DW24	EXP			; EXP
239,239,238,040147,040147,"ld b,$04","ld b,$04","ld b,$00",eval.asm,
240,240,239,040149,040149,xor h,xor h,xor h,eval.asm,DW24	EXT			; EXT
241,241,240,04014a,04014a,dec b,dec b,dec b,eval.asm,
242,242,241,04014b,04014b,inc b,inc b,inc b,eval.asm,
243,243,242,04014c,04014c,sub e,sub e,sub e,eval.asm,DW24	ZERO			; FALSE
244,244,243,04014d,04014d,"add hl,bc","add hl,bc","add hl,bc",eval.asm,
245,245,244,04014e,04014e,inc b,inc b,inc b,eval.asm,
246,246,245,04014f,04014f,"ld a,a","ld a,a","ld a,a",eval.asm,DW24	FN_EX			; FN
247,247,246,040150,040150,djnz $+$06,djnz $+$06,djnz $+$00,eval.asm,
248,248,247,040152,040152,inc c,inc c,inc c,eval.asm,DW24	GET			; GET
249,249,248,040153,040153,dec b,dec b,dec b,eval.asm,
250,250,249,040154,040154,inc b,inc b,inc b,eval.asm,
251,251,250,040155,040155,ei,ei,ei,eval.asm,DW24	INKEY			; INKEY
252,252,251,040156,040156,inc b,inc b,inc b,eval.asm,
253,253,252,040157,040157,inc b,inc b,inc b,eval.asm,
254,254,253,040158,040158,dec hl,dec hl,dec hl,eval.asm,DW24	INSTR			; INSTR(
255,255,254,040159,040159,rlca,rlca,rlca,eval.asm,
256,256,255,04015a,04015a,inc b,inc b,inc b,eval.asm,
257,257,256,04015b,04015b,"jr z,$+$08","jr z,$+$08","jr z,$+$00",eval.asm,DW24	INT_			; INT
258,258,257,04015d,04015d,inc b,inc b,inc b,eval.asm,
259,259,258,04015e,04015e,dec (hl),dec (hl),dec (hl),eval.asm,DW24	LEN			; LEN
260,260,259,04015f,04015f,dec b,dec b,dec b,eval.asm,
261,261,260,040160,040160,inc b,inc b,inc b,eval.asm,
262,262,261,040161,040161,"ld.sis b,$04","ld.sis b,$04","ld.sis b,$00",eval.asm,DW24	LN			; LN
263,263,262,040164,040164,"ld b,h","ld b,h","ld b,h",eval.asm,DW24	LOG			; LOG
264,264,263,040165,040165,"ld b,$04","ld b,$04","ld b,$00",eval.asm,
265,265,264,040167,040167,jr $+$08,jr $+$08,jr $+$00,eval.asm,DW24	NOTK			; NOT
266,266,265,040169,040169,inc b,inc b,inc b,eval.asm,
267,267,266,04016a,04016a,sub b,sub b,sub b,eval.asm,DW24	OPENUP			; OPENUP
268,268,267,04016b,04016b,dec b,dec b,dec b,eval.asm,
269,269,268,04016c,04016c,inc b,inc b,inc b,eval.asm,
270,270,269,04016d,04016d,"adc a,l","adc a,l","adc a,l",eval.asm,DW24	OPENOT			; OPENOUT
271,271,270,04016e,04016e,dec b,dec b,dec b,eval.asm,
272,272,271,04016f,04016f,inc b,inc b,inc b,eval.asm,
273,273,272,040170,040170,djnz $+$08,djnz $+$08,djnz $+$00,eval.asm,DW24	PI			; PI
274,274,273,040172,040172,inc b,inc b,inc b,eval.asm,
275,275,,040173,,"ld l,c",,"ld l,c",,
276,276,,040174,,"ld b,h",,"ld b,h",,
277,277,,040175,,inc b,,inc b,,
278,278,,040176,,call $200404,,call $000000,,
279,279,,04017a,,"ld b,$04",,"ld b,$00",,
280,280,,04017c,,xor l,,xor l,,
281,281,,04017d,,"ld b,$04",,"ld b,$00",,
282,282,,04017f,,inc h,,inc h,,
283,283,,040180,,"ld b,$04",,"ld b,$00",,
284,284,,040182,,"jr c,$+$08",,"jr c,$+$00",,
285,285,,040184,,inc b,,inc b,,
286,286,,040185,,inc l,,inc l,,
287,287,,040186,,"ld b,$04",,"ld b,$00",,
288,288,,040188,,"jr nc,$+$08",,"jr nc,$+$00",,
289,289,291,04018a,04018d,inc b,inc b,inc b,eval.asm,
290,290,,04018b,,"ld e,d",,"ld e,d",,
291,291,,04018c,,dec b,,dec b,,
292,292,,04018d,,inc b,,inc b,,
293,293,,04018e,,dec b,,dec b,,
294,294,,04018f,,"ld b,$04",,"ld b,$00",,
295,295,,040191,,"ld ($6a0415),hl",,"ld ($000000),hl",,
296,296,298,040195,040195,"ld b,$04","ld b,$04","ld b,$00",eval.asm,
297,297,299,040197,040197,sub $04,sub $04,sub $00,eval.asm,DW24	VPOS			; VPOS
298,298,300,040199,040199,inc b,inc b,inc b,eval.asm,
299,299,301,04019a,04019a,cp a,cp a,cp a,eval.asm,DW24	CHRS			; CHRS
300,300,302,04019b,04019b,rlca,rlca,rlca,eval.asm,
301,301,303,04019c,04019c,inc b,inc b,inc b,eval.asm,
302,302,304,04019d,04019d,rst $00,rst $00,rst $00,eval.asm,DW24	GETS			; GETS
303,303,305,04019e,04019e,rlca,rlca,rlca,eval.asm,
304,304,306,04019f,04019f,inc b,inc b,inc b,eval.asm,
305,305,307,0401a0,0401a0,ret c,ret c,ret c,eval.asm,DW24	INKEYS			; INKEYS
306,306,308,0401a1,0401a1,rlca,rlca,rlca,eval.asm,
307,307,309,0401a2,0401a2,inc b,inc b,inc b,eval.asm,
308,308,310,0401a3,0401a3,"ld e,l","ld e,l","ld e,l",eval.asm,DW24	LEFTS			; LEFTS(
309,309,311,0401a4,0401a4,"ex af,af'","ex af,af'","ex af,af'",eval.asm,
310,310,312,0401a5,0401a5,inc b,inc b,inc b,eval.asm,
311,311,313,0401a6,0401a6,dec h,dec h,dec h,eval.asm,DW24	MIDS			; MIDS(
312,312,314,0401a7,0401a7,"ex af,af'","ex af,af'","ex af,af'",eval.asm,
313,313,315,0401a8,0401a8,inc b,inc b,inc b,eval.asm,
314,314,316,0401a9,0401a9,"ld a,l","ld a,l","ld a,l",eval.asm,DW24	RIGHTS			; RIGHTS(
315,315,317,0401aa,0401aa,"ex af,af'","ex af,af'","ex af,af'",eval.asm,
316,316,318,0401ab,0401ab,inc b,inc b,inc b,eval.asm,
317,317,319,0401ac,0401ac,"ld c,d","ld c,d","ld c,d",eval.asm,DW24	STRS			; STR$
318,318,320,0401ad,0401ad,"add hl,bc","add hl,bc","add hl,bc",eval.asm,
319,319,321,0401ae,0401ae,inc b,inc b,inc b,eval.asm,
320,320,322,0401af,0401af,"sbc a,(hl)","sbc a,(hl)","sbc a,(hl)",eval.asm,DW24	STRING_			; STRINGS(
321,321,323,0401b0,0401b0,"ex af,af'","ex af,af'","ex af,af'",eval.asm,
322,322,324,0401b1,0401b1,inc b,inc b,inc b,eval.asm,
323,323,325,0401b2,0401b2,"sbc a,$04","sbc a,$04","sbc a,$00",eval.asm,DW24	EOF			; EOF
324,324,326,0401b4,0401b4,inc b,inc b,inc b,eval.asm,
325,325,327,0401b5,0401b5,ret p,ret p,ret p,eval.asm,SOPTBL:			DW24	SLE			; <= (STRING)
326,326,328,0401b6,0401b6,dec b,dec b,dec b,eval.asm,
327,327,329,0401b7,0401b7,inc b,inc b,inc b,eval.asm,
328,328,330,0401b8,0401b8,"ld sp,hl","ld sp,hl","ld sp,hl",eval.asm,DW24	SNE			; <>
329,329,331,0401b9,0401b9,dec b,dec b,dec b,eval.asm,
330,330,332,0401ba,0401ba,inc b,inc b,inc b,eval.asm,
331,331,333,0401bb,0401bb,jp (hl),jp (hl),jp (hl),eval.asm,DW24	SGE			; >=
332,332,334,0401bc,0401bc,dec b,dec b,dec b,eval.asm,
333,333,335,0401bd,0401bd,inc b,inc b,inc b,eval.asm,
334,334,336,0401be,0401be,"jp c,$000405","jp c,$000405","jp c,$000000",eval.asm,DW24	SLT			; <
335,335,337,0401c2,0401c2,"ld b,$04","ld b,$04","ld b,$00",eval.asm,
336,336,338,0401c4,0401c4,pop hl,pop hl,pop hl,eval.asm,DW24	SGT			; >
337,337,339,0401c5,0401c5,dec b,dec b,dec b,eval.asm,
338,338,340,0401c6,0401c6,inc b,inc b,inc b,eval.asm,
339,339,341,0401c7,0401c7,call $0401e0,call $0401e0,call $000000,eval.asm,EXPR:			CALL    EXPR1			; Get first operator by calling Level 6
340,340,342,0401cb,0401cb,cp $82,cp $82,cp $00,eval.asm,EXPR0A:			CP      EORK            	; Is operator EOR?
341,341,343,0401cd,0401cd,"jr z,$+$05","jr z,$+$05","jr z,$+$00",eval.asm,"JR      Z,EXPR0B		; Yes, so skip to next bit"
342,342,344,0401cf,0401cf,cp $84,cp $84,cp $00,eval.asm,CP      ORK			; Is operator OR
343,343,345,0401d1,0401d1,ret nz,ret nz,ret nz,eval.asm,"RET     NZ			; No, so return"
344,344,346,0401d2,0401d2,call $040a3e,call $040a3e,call $000000,eval.asm,EXPR0B:			CALL    SAVE_EV            	; Save first operand
345,345,347,0401d6,0401d6,call $0401e0,call $0401e0,call $000000,eval.asm,CALL    EXPR1           	; Get second operand
346,346,348,0401da,0401da,call $040a4d,call $040a4d,call $000000,eval.asm,CALL    DOIT            	; Do the operation
347,347,349,0401de,0401de,jr $-$13,jr $-$13,jr $-$00,eval.asm,JR      EXPR0A          	; And continue
348,348,350,0401e0,0401e0,call $0401f5,call $0401f5,call $000000,eval.asm,EXPR1:			CALL    EXPR2			; Get first operator by calling Level 5
349,349,351,0401e4,0401e4,cp $80,cp $80,cp $00,eval.asm,EXPR1A:			CP      ANDK			; Is operator AND?
350,350,352,0401e6,0401e6,ret nz,ret nz,ret nz,eval.asm,"RET     NZ			; No, so return"
351,351,353,0401e7,0401e7,call $040a3e,call $040a3e,call $000000,eval.asm,CALL    SAVE_EV			; Save first operand
352,352,354,0401eb,0401eb,call $0401f5,call $0401f5,call $000000,eval.asm,CALL    EXPR2			; Get second operand
353,353,355,0401ef,0401ef,call $040a4d,call $040a4d,call $000000,eval.asm,CALL    DOIT			; Do the operation
354,354,356,0401f3,0401f3,jr $-$0f,jr $-$0f,jr $-$00,eval.asm,JR      EXPR1A			; And continue
355,355,357,0401f5,0401f5,call $040267,call $040267,call $000000,eval.asm,EXPR2:			CALL    EXPR3			; Get first operator by calling Level 4
356,356,358,0401f9,0401f9,call $040a15,call $040a15,call $000000,eval.asm,"CALL    RELOP?			; Is it "">"", ""="" or ""<""?"
357,357,359,0401fd,0401fd,ret nz,ret nz,ret nz,eval.asm,"RET     NZ			; No, so return"
358,358,360,0401fe,0401fe,"ld b,a","ld b,a","ld b,a",eval.asm,"LD      B,A			; Store the first operator in B"
359,359,361,0401ff,0401ff,inc iy,inc iy,inc iy,eval.asm,INC     IY              	; Bump over operator
360,360,362,040201,040201,call $040a70,call $040a70,call $000000,eval.asm,CALL    NXT			;
361,361,363,040205,040205,call $040a15,call $040a15,call $000000,eval.asm,CALL    RELOP?          	; Is it a compound operator?
362,362,364,040209,040209,"jr nz,$+$0b","jr nz,$+$0b","jr nz,$+$00",eval.asm,"JR      NZ,EXPR2B		; No, so skip next bit"
363,363,365,04020b,04020b,inc iy,inc iy,inc iy,eval.asm,INC     IY			; Bump over operator
364,364,366,04020d,04020d,cp b,cp b,cp b,eval.asm,CP      B			; Compare with first
365,365,367,04020e,04020e,"jp z,$040c97","jp z,$040c97","jp z,$000000",eval.asm,"JP      Z,SYNTAX        	; Trap illegal combinations "">>"", ""=="", ""<<"" (but not ""><"", ""=>"", ""=<"")"
366,366,368,040212,040212,"add a,b","add a,b","add a,b",eval.asm,"ADD     A,B"
367,367,369,040213,040213,"ld b,a","ld b,a","ld b,a",eval.asm,"LD      B,A			; B: Unique code for the compound operator"
368,368,370,040214,040214,"ld a,b","ld a,b","ld a,b",eval.asm,"EXPR2B:			LD      A,B			; A: Code for the operator/compound operator"
369,369,371,040215,040215,"ex af,af'","ex af,af'","ex af,af'",eval.asm,"EX      AF,AF'"
370,370,372,040216,040216,"jp m,$040230","jp m,$040230","jp m,$000000",eval.asm,"JP      M,EXPR2S		; If it is a string, then branch here to handle it"
371,371,373,04021a,04021a,"ex af,af'","ex af,af'","ex af,af'",eval.asm,"EX      AF,AF'"
372,372,374,04021b,04021b,sub $04,sub $04,sub $00,eval.asm,SUB     4
373,373,375,04021d,04021d,cp $3a,cp $3a,cp $00,eval.asm,CP      '>'-4
374,374,376,04021f,04021f,"jr nz,$+$04","jr nz,$+$04","jr nz,$+$00",eval.asm,"JR      NZ,EXPR2C"
375,375,377,040221,040221,"add a,$02","add a,$02","add a,$00",eval.asm,"ADD     A,2"
376,376,378,040223,040223,call $040a40,call $040a40,call $000000,eval.asm,EXPR2C:			CALL    SAVE1
377,377,379,040227,040227,call $040267,call $040267,call $000000,eval.asm,CALL    EXPR3
378,378,380,04022b,04022b,call $040a4d,call $040a4d,call $000000,eval.asm,"CALL    DOIT            	; NB: Must NOT be ""JP DOIT"""
379,379,381,04022f,04022f,ret,ret,ret,eval.asm,RET
380,380,382,040230,040230,"ex af,af'","ex af,af'","ex af,af'",eval.asm,"EXPR2S:			EX      AF,AF'			; Handle string comparisons"
381,381,383,040231,040231,dec a,dec a,dec a,eval.asm,DEC     A
382,382,384,040232,040232,and $07,and $07,and $00,eval.asm,AND     7
383,383,385,040234,040234,call $0409b4,call $0409b4,call $000000,eval.asm,CALL    PUSHS           	; Save string on the stack
384,384,386,040238,040238,push af,push af,push af,eval.asm,PUSH    AF              	; Save the operator
385,385,387,040239,040239,call $040267,call $040267,call $000000,eval.asm,CALL    EXPR3           	; Get the second string
386,386,388,04023d,04023d,"ex af,af'","ex af,af'","ex af,af'",eval.asm,"EX      AF,AF'"
387,387,389,04023e,04023e,"jp p,$040336","jp p,$040336","jp p,$000000",eval.asm,"JP      P,TYPE_EV_"
388,388,390,040242,040242,pop af,pop af,pop af,eval.asm,POP     AF
389,389,391,040243,040243,"ld c,e","ld c,e","ld c,e",eval.asm,"LD      C,E             	; Length of string #2"
390,390,392,040244,040244,pop de,pop de,pop de,eval.asm,POP     DE
391,391,393,040245,040245,"ld hl,$000000","ld hl,$000000","ld hl,$000000",eval.asm,"LD      HL,0"
392,392,394,040249,040249,"add hl,sp","add hl,sp","add hl,sp",eval.asm,"ADD     HL,SP"
393,393,395,04024a,04024a,"ld b,e","ld b,e","ld b,e",eval.asm,"LD      B,E             	; Length of string #1"
394,394,396,04024b,04024b,push de,push de,push de,eval.asm,PUSH    DE
395,395,397,04024c,04024c,"ld de,$044a00","ld de,$044a00","ld de,$000000",eval.asm,"LD      DE,ACCS"
396,396,398,040250,040250,"ex de,hl","ex de,hl","ex de,hl",eval.asm,"EX      DE,HL"
397,397,399,040251,040251,call $040a7c,call $040a7c,call $000000,eval.asm,CALL    DISPT2
398,398,400,040255,040255,pop de,pop de,pop de,eval.asm,POP     DE
399,399,401,040256,040256,"ex de,hl","ex de,hl","ex de,hl",eval.asm,"EX      DE,HL"
400,400,402,040257,040257,"ld a,l","ld a,l","ld a,l",eval.asm,"LD	A,L"
401,401,403,040258,040258,"ld hl,$000000","ld hl,$000000","ld hl,$000000",eval.asm,"LD	HL,0"
402,402,404,04025c,04025c,"ld l,a","ld l,a","ld l,a",eval.asm,"LD	L,A"
403,403,405,04025d,04025d,"add hl,sp","add hl,sp","add hl,sp",eval.asm,"ADD     HL,SP"
404,404,406,04025e,04025e,"ld sp,hl","ld sp,hl","ld sp,hl",eval.asm,"LD      SP,HL"
405,405,407,04025f,04025f,"ex de,hl","ex de,hl","ex de,hl",eval.asm,"EX      DE,HL"
406,406,408,040260,040260,xor a,xor a,xor a,eval.asm,XOR     A               	; Numeric marker
407,407,409,040261,040261,"ld c,a","ld c,a","ld c,a",eval.asm,"LD      C,A             	; Integer marker"
408,408,410,040262,040262,"ex af,af'","ex af,af'","ex af,af'",eval.asm,"EX      AF,AF'"
409,409,411,040263,040263,"ld a,(iy)","ld a,(iy)","ld a,(iy)",eval.asm,"LD      A,(IY)"
410,410,412,040266,040266,ret,ret,ret,eval.asm,RET
411,411,413,040267,040267,call $0402c4,call $0402c4,call $000000,eval.asm,EXPR3:			CALL    EXPR4			; Get first operator by calling Level 3
412,412,414,04026b,04026b,cp $2d,cp $2d,cp $00,eval.asm,"EXPR3A:			CP      '-'			; Is it ""-""?"
413,413,415,04026d,04026d,"jr z,$+$0b","jr z,$+$0b","jr z,$+$00",eval.asm,"JR      Z,EXPR3B		; Yes, so skip the next bit"
414,414,416,04026f,04026f,cp $2b,cp $2b,cp $00,eval.asm,"CP      '+'			; Is it ""+""?"
415,415,417,040271,040271,ret nz,ret nz,ret nz,eval.asm,"RET     NZ			; No, so return"
416,416,418,040272,040272,"ex af,af'","ex af,af'","ex af,af'",eval.asm,"EX      AF,AF'			; Get the type"
417,417,419,040273,040273,"jp m,$040286","jp m,$040286","jp m,$000000",eval.asm,"JP      M,EXPR3S		; Branch here if string"
418,418,420,040277,040277,"ex af,af'","ex af,af'","ex af,af'",eval.asm,"EX      AF,AF'"
419,419,421,040278,040278,call $040a3e,call $040a3e,call $000000,eval.asm,EXPR3B:			CALL    SAVE_EV			; Save the first operator
420,420,422,04027c,04027c,call $0402c4,call $0402c4,call $000000,eval.asm,CALL    EXPR4			; Fetch the second operator
421,421,423,040280,040280,call $040a4d,call $040a4d,call $000000,eval.asm,CALL    DOIT			; Do the operation
422,422,424,040284,040284,jr $-$19,jr $-$19,jr $-$00,eval.asm,JR      EXPR3A			; And continue
423,423,425,040286,040286,"ex af,af'","ex af,af'","ex af,af'",eval.asm,"EXPR3S:			EX      AF,AF'			; Handle string concatenation"
424,424,426,040287,040287,inc iy,inc iy,inc iy,eval.asm,"INC     IY              	; Bump past the ""+"""
425,425,427,040289,040289,call $0409b4,call $0409b4,call $000000,eval.asm,CALL    PUSHS           	; Save the string on the stack
426,426,428,04028d,04028d,call $0402c4,call $0402c4,call $000000,eval.asm,CALL    EXPR4           	; Fetch the second operator
427,427,429,040291,040291,"ex af,af'","ex af,af'","ex af,af'",eval.asm,"EX      AF,AF'"
428,428,430,040292,040292,"jp p,$040336","jp p,$040336","jp p,$000000",eval.asm,"JP      P,TYPE_EV_			; If it is not a string, then Error: ""Type mismatch"""
429,429,431,040296,040296,"ld bc,$000000","ld bc,$000000","ld bc,$000000",eval.asm,"LD	BC, 0			; Clear BC"
430,430,432,04029a,04029a,"ld c,e","ld c,e","ld c,e",eval.asm,"LD      C,E             	; C: Length of the second string"
431,431,433,04029b,04029b,pop de,pop de,pop de,eval.asm,POP     DE
432,432,434,04029c,04029c,push de,push de,push de,eval.asm,PUSH    DE
433,433,435,04029d,04029d,"ld hl,$044a00","ld hl,$044a00","ld hl,$000000",eval.asm,"LD      HL,ACCS"
434,434,436,0402a1,0402a1,"ld d,h","ld d,h","ld d,h",eval.asm,"LD		D,H ; ADDED FROM BINARY"
435,435,437,0402a2,0402a2,"ld a,c","ld a,c","ld a,c",eval.asm,"LD      A,C"
436,436,438,0402a3,0402a3,or a,or a,or a,eval.asm,OR      A
437,437,439,0402a4,0402a4,"jr z,$+$11","jr z,$+$11","jr z,$+$00",eval.asm,"JR      Z,EXP3S3"
438,438,440,0402a6,0402a6,"ld l,a","ld l,a","ld l,a",eval.asm,"LD      L,A             	; Source"
439,439,441,0402a7,0402a7,"add a,e","add a,e","add a,e",eval.asm,"ADD     A,E"
440,440,442,0402a8,0402a8,"ld e,a","ld e,a","ld e,a",eval.asm,"LD      E,A             	; Destination"
441,441,443,0402a9,0402a9,"ld a,$13","ld a,$13","ld a,$00",eval.asm,"LD      A,19"
442,442,444,0402ab,0402ab,"jp c,$043760","jp c,$043790","jp c,$000000",eval.asm,"JP      C,ERROR_         	; A carry indicates string > 255 bytes, so Error: ""String too long"""
443,443,445,0402af,0402af,push de,push de,push de,eval.asm,PUSH    DE
444,444,446,0402b0,0402b0,dec e,dec e,dec e,eval.asm,DEC     E
445,445,447,0402b1,0402b1,dec l,dec l,dec l,eval.asm,DEC     L
446,446,448,0402b2,0402b2,lddr,lddr,lddr,eval.asm,LDDR                    	; Copy
447,447,449,0402b4,0402b4,pop de,pop de,pop de,eval.asm,POP     DE
448,448,450,0402b5,0402b5,exx,exx,exx,eval.asm,EXP3S3:			EXX
449,449,451,0402b6,0402b6,pop bc,pop bc,pop bc,eval.asm,POP     BC
450,450,452,0402b7,0402b7,call $0409de,call $0409de,call $000000,eval.asm,CALL    POPS            	; Restore from stack
451,451,453,0402bb,0402bb,exx,exx,exx,eval.asm,EXX
452,452,454,0402bc,0402bc,or $80,or $80,or $00,eval.asm,OR      80H             	; Flag as a string
453,453,455,0402be,0402be,"ex af,af'","ex af,af'","ex af,af'",eval.asm,"EX      AF,AF'"
454,454,456,0402bf,0402bf,"ld a,(iy)","ld a,(iy)","ld a,(iy)",eval.asm,"LD      A,(IY)			; Fetch the next character"
455,455,457,0402c2,0402c2,jr $-$57,jr $-$57,jr $-$00,eval.asm,JR      EXPR3A			; And continue
456,456,458,0402c4,0402c4,call $0402e5,call $0402e5,call $000000,eval.asm,EXPR4:			CALL    EXPR5			; Get first operator by calling Level 2
457,457,459,0402c8,0402c8,cp $2a,cp $2a,cp $00,eval.asm,"EXPR4A:			CP      '*'			; ""*"" is valid"
458,458,460,0402ca,0402ca,"jr z,$+$0d","jr z,$+$0d","jr z,$+$00",eval.asm,"JR      Z,EXPR4B"
459,459,461,0402cc,0402cc,cp $2f,cp $2f,cp $00,eval.asm,"CP      '/'			; ""/"" is valid"
460,460,462,0402ce,0402ce,"jr z,$+$09","jr z,$+$09","jr z,$+$00",eval.asm,"JR      Z,EXPR4B"
461,461,463,0402d0,0402d0,cp $83,cp $83,cp $00,eval.asm,CP      MODK			; MOD token is valid
462,462,464,0402d2,0402d2,"jr z,$+$05","jr z,$+$05","jr z,$+$00",eval.asm,"JR      Z,EXPR4B"
463,463,465,0402d4,0402d4,cp $81,cp $81,cp $00,eval.asm,CP      DIVK			; DIV token is valid
464,464,466,0402d6,0402d6,ret nz,ret nz,ret nz,eval.asm,RET     NZ			; And return if it is anything else
465,465,467,0402d7,0402d7,call $040a3e,call $040a3e,call $000000,eval.asm,EXPR4B:			CALL    SAVE_EV
466,466,468,0402db,0402db,call $0402e5,call $0402e5,call $000000,eval.asm,CALL    EXPR5
467,467,469,0402df,0402df,call $040a4d,call $040a4d,call $000000,eval.asm,CALL    DOIT
468,468,470,0402e3,0402e3,jr $-$1b,jr $-$1b,jr $-$00,eval.asm,JR      EXPR4A
469,469,471,0402e5,0402e5,call $0403c5,call $0403c5,call $000000,eval.asm,EXPR5:			CALL    ITEM			; Get variable
470,470,472,0402e9,0402e9,or a,or a,or a,eval.asm,OR      A               	; Test type
471,471,473,0402ea,0402ea,"ex af,af'","ex af,af'","ex af,af'",eval.asm,"EX      AF,AF'          	; Save type"
472,472,474,0402eb,0402eb,call $040a70,call $040a70,call $000000,eval.asm,EXPR5A:			CALL    NXT			; Skip spaces
473,473,475,0402ef,0402ef,cp $5e,cp $5e,cp $00,eval.asm,"CP      '^'			; Is the operator ""^""?"
474,474,476,0402f1,0402f1,ret nz,ret nz,ret nz,eval.asm,"RET     NZ			; No, so return"
475,475,477,0402f2,0402f2,call $040a3e,call $040a3e,call $000000,eval.asm,CALL    SAVE_EV			; Save first operand
476,476,478,0402f6,0402f6,call $0403c5,call $0403c5,call $000000,eval.asm,CALL    ITEM			; Get second operand
477,477,479,0402fa,0402fa,or a,or a,or a,eval.asm,OR      A			; Test type
478,478,480,0402fb,0402fb,"ex af,af'","ex af,af'","ex af,af'",eval.asm,"EX      AF,AF'			; Save type"
479,479,481,0402fc,0402fc,call $040a4d,call $040a4d,call $000000,eval.asm,CALL    DOIT			; Do the operation
480,480,482,040300,040300,jr $-$15,jr $-$15,jr $-$00,eval.asm,JR      EXPR5A			; And continue
481,481,483,040302,040302,call $0401c7,call $0401c7,call $000000,eval.asm,EXPRN:			CALL    EXPR			; Evaluate expression
482,482,484,040306,040306,"ex af,af'","ex af,af'","ex af,af'",eval.asm,"EX      AF,AF'			; Get the type"
483,483,485,040307,040307,ret p,ret p,ret p,eval.asm,RET     P			; And return if it is a number
484,484,486,040308,040308,jr $+$2e,jr $+$2e,jr $+$00,eval.asm,"JR      TYPE_EV_			; Otherwise Error: ""Type mismatch"""
485,485,487,04030a,04030a,call $0401c7,call $0401c7,call $000000,eval.asm,EXPRI:			CALL    EXPR			; Evaluate the expression
486,486,488,04030e,04030e,"ex af,af'","ex af,af'","ex af,af'",eval.asm,"EX      AF,AF'			; Get the type"
487,487,489,04030f,04030f,"jp p,$040662","jp p,$040662","jp p,$000000",eval.asm,"JP      P,SFIX			; If it is numeric, then convert to fixed-point notation"
488,488,490,040313,040313,jr $+$23,jr $+$23,jr $+$00,eval.asm,"JR      TYPE_EV_			; Otherwise Error: ""Type mismatch"""
489,489,491,040315,040315,call $0401c7,call $0401c7,call $000000,eval.asm,EXPRS:			CALL    EXPR			; Evaluate the expression
490,490,492,040319,040319,"ex af,af'","ex af,af'","ex af,af'",eval.asm,"EX      AF,AF'			; Get the type"
491,491,493,04031a,04031a,ret m,ret m,ret m,eval.asm,RET     M			; And return if it is a string
492,492,494,04031b,04031b,jr $+$1b,jr $+$1b,jr $+$00,eval.asm,"JR      TYPE_EV_			; Otherwise Error: ""Type mismatch"""
493,493,495,04031d,04031d,call $0403c5,call $0403c5,call $000000,eval.asm,ITEMN:			CALL    ITEM			; Get the variable
494,494,496,040321,040321,or a,or a,or a,eval.asm,OR      A			; Test the type
495,495,497,040322,040322,ret p,ret p,ret p,eval.asm,RET     P			; And return if it is a number
496,496,498,040323,040323,jr $+$13,jr $+$13,jr $+$00,eval.asm,"JR      TYPE_EV_			; Otherwise Error: ""Type mismatch"""
497,497,499,040325,040325,call $0403c5,call $0403c5,call $000000,eval.asm,ITEMI:			CALL    ITEM			; Get the variable
498,498,500,040329,040329,or a,or a,or a,eval.asm,OR      A			; Test the type
499,499,501,04032a,04032a,"jp p,$040662","jp p,$040662","jp p,$000000",eval.asm,"JP      P,SFIX			; If it is numeric, then convert to fixed-point notation"
500,500,502,04032e,04032e,jr $+$08,jr $+$08,jr $+$00,eval.asm,"JR      TYPE_EV_			; Otherwise Error: ""Type mismatch"""
501,501,503,040330,040330,call $0403c5,call $0403c5,call $000000,eval.asm,ITEMS:			CALL    ITEM			; Get the variable
502,502,504,040334,040334,or a,or a,or a,eval.asm,OR      A			; Test the type
503,503,505,040335,040335,ret m,ret m,ret m,eval.asm,"RET     M			; If it is a string, then return"
504,504,506,040336,040336,"ld a,$06","ld a,$06","ld a,$00",eval.asm,"TYPE_EV_:			LD      A,6			; Error: ""Type mismatch"""
505,505,507,040338,040338,jp $043760,jp $043790,jp $000000,eval.asm,JP      ERROR_
506,506,508,04033c,04033c,call $0401c7,call $0401c7,call $000000,eval.asm,ITEM1:			CALL    EXPR            	; Evaluate the expression
507,507,509,040340,040340,call $040a2f,call $040a2f,call $000000,eval.asm,CALL    BRAKET			; Check for closing bracket
508,508,510,040344,040344,"ex af,af'","ex af,af'","ex af,af'",eval.asm,"EX      AF,AF'"
509,509,511,040345,040345,ret,ret,ret,eval.asm,RET
510,510,512,040346,040346,call $040993,call $040993,call $000000,eval.asm,HEX:			CALL    ZERO			; Set result to 0
511,511,513,04034a,04034a,call $0409f8,call $0409f8,call $000000,eval.asm,CALL    HEXDIG			; Fetch the character from IY
512,512,514,04034e,04034e,"jr c,$+$1d","jr c,$+$1d","jr c,$+$00",eval.asm,"JR      C,BADHEX		; If invalid HEX character, then Error: ""Bad HEX"""
513,513,515,040350,040350,inc iy,inc iy,inc iy,eval.asm,HEX1:			INC     IY			; Move pointer to next character
514,514,516,040352,040352,and $0f,and $0f,and $00,eval.asm,AND     0FH			; Clear the top nibble
515,515,517,040354,040354,"ld b,$04","ld b,$04","ld b,$00",eval.asm,"LD      B,4			; Loop counter"
516,516,518,040356,040356,exx,exx,exx,eval.asm,HEX2:			EXX				; Shift the result left B (4) times. This makes
517,517,519,040357,040357,"add.sil hl,hl","add.sil hl,hl","add.sil hl,hl",eval.asm,"ADD.S   HL,HL			; space for the incoming nibble in the least significant 4 bits"
518,518,520,040359,040359,exx,exx,exx,eval.asm,EXX				; .
519,519,521,04035a,04035a,"adc.sil hl,hl","adc.sil hl,hl","adc.sil hl,hl",eval.asm,"ADC.S   HL,HL			; ."
520,520,522,04035d,04035d,djnz $-$07,djnz $-$07,djnz $-$00,eval.asm,DJNZ    HEX2			; And loop
521,521,523,04035f,04035f,exx,exx,exx,eval.asm,EXX
522,522,524,040360,040360,or l,or l,or l,eval.asm,OR      L			; OR in the digit
523,523,525,040361,040361,"ld l,a","ld l,a","ld l,a",eval.asm,"LD      L,A"
524,524,526,040362,040362,exx,exx,exx,eval.asm,EXX
525,525,527,040363,040363,call $0409f8,call $0409f8,call $000000,eval.asm,CALL    HEXDIG			; Fetch the next character
526,526,528,040367,040367,"jr nc,$-$17","jr nc,$-$17","jr nc,$-$00",eval.asm,"JR      NC,HEX1			; If it is a HEX digit then loop"
527,527,529,040369,040369,xor a,xor a,xor a,eval.asm,XOR     A			; Clear A
528,528,530,04036a,04036a,ret,ret,ret,eval.asm,RET
529,529,531,04036b,04036b,"ld a,$1c","ld a,$1c","ld a,$00",eval.asm,"BADHEX:			LD      A,28"
530,530,532,04036d,04036d,jp $043760,jp $043790,jp $000000,eval.asm,"JP      ERROR_          	; Error: ""Bad HEX"""
531,531,533,040371,040371,call $040993,call $040993,call $000000,eval.asm,BIN:			CALL    ZERO			; Set result to 0
532,532,534,040375,040375,call $040a0b,call $040a0b,call $000000,eval.asm,CALL	BINDIG			; Fetch the character from IY
533,533,535,040379,040379,"jr c,$+$15","jr c,$+$15","jr c,$+$00",eval.asm,"JR	C,BADBIN		; If invalid BIN character then Error: ""Bad Binary"""
534,534,536,04037b,04037b,inc iy,inc iy,inc iy,eval.asm,BIN1:			INC	IY			; Move pointer to next character
535,535,537,04037d,04037d,rrca,rrca,rrca,eval.asm,"RRCA				; Bit 0 of ASCII '0' is 0, and ASCII '1' is 1, so shift that bit into carry"
536,536,538,04037e,04037e,exx,exx,exx,eval.asm,EXX				;
537,537,539,04037f,04037f,"adc.sil hl,hl","adc.sil hl,hl","adc.sil hl,hl",eval.asm,"ADC.S	HL,HL			; And shift back into into H'L'HL (note the ADC)"
538,538,540,040382,040382,exx,exx,exx,eval.asm,EXX
539,539,541,040383,040383,"adc.sil hl,hl","adc.sil hl,hl","adc.sil hl,hl",eval.asm,"ADC.S	HL,HL"
540,540,542,040386,040386,call $040a0b,call $040a0b,call $000000,eval.asm,CALL	BINDIG			; Fetch the next character
541,541,543,04038a,04038a,"jr nc,$-$0f","jr nc,$-$0f","jr nc,$-$00",eval.asm,"JR	NC,BIN1"
542,542,544,04038c,04038c,xor a,xor a,xor a,eval.asm,XOR	A			; Clear A
543,543,545,04038d,04038d,ret,ret,ret,eval.asm,RET
544,544,546,04038e,04038e,"ld a,$1c","ld a,$1c","ld a,$00",eval.asm,"BADBIN:			LD	A, 28			; Error: ""Bad Binary"" - reuses same error code as Bad HEX"
545,545,547,040390,040390,call $043777,call $0437a7,call $000000,eval.asm,CALL	EXTERR
546,546,548,040394,040394,"ld b,d","ld b,d","ld b,d",eval.asm,"DB	""Bad Binary"", 0"
547,547,549,040395,040395,"ld h,c","ld h,c","ld h,c",eval.asm,
548,548,550,040396,040396,"ld h,h","ld h,h","ld h,h",eval.asm,
549,549,551,040397,040397,"jr nz,$+$44","jr nz,$+$44","jr nz,$+$00",eval.asm,
549,549,551,040397,040397,"jr nz,$+$44","jr nz,$+$44","jr nz,$+$00",eval.asm,
550,550,552,040399,040399,"ld l,c","ld l,c","ld l,c",eval.asm,
551,551,553,04039a,04039a,"ld l,(hl)","ld l,(hl)","ld l,(hl)",eval.asm,
551,551,553,04039a,04039a,"ld l,(hl)","ld l,(hl)","ld l,(hl)",eval.asm,
552,552,554,04039b,04039b,"ld h,c","ld h,c","ld h,c",eval.asm,
553,553,555,04039c,04039c,"ld (hl),d","ld (hl),d","ld (hl),d",eval.asm,
554,554,556,04039d,04039d,"ld a,c","ld a,c","ld a,c",,
555,555,557,04039e,04039e,nop,nop,nop,,
556,556,558,04039f,04039f,call $04031d,call $04031d,call $000000,eval.asm,MINUS:			CALL    ITEMN			; Get the numeric argument
557,557,559,0403a3,0403a3,dec c,dec c,dec c,eval.asm,MINUS0:			DEC     C			; Check exponent (C)
558,558,560,0403a4,0403a4,inc c,inc c,inc c,eval.asm,"INC     C			; If it is zero, then it's either a FP zero or an integer"
559,559,561,0403a5,0403a5,"jr z,$+$08","jr z,$+$08","jr z,$+$00",eval.asm,"JR      Z,NEGATE_EV        	; So do an integer negation"
560,560,562,0403a7,0403a7,"ld a,h","ld a,h","ld a,h",eval.asm,"LD      A,H			; Do a FP negation by"
561,561,563,0403a8,0403a8,xor $80,xor $80,xor $00,eval.asm,XOR     80H             	; Toggling the sign bit (H)
562,562,564,0403aa,0403aa,"ld h,a","ld h,a","ld h,a",eval.asm,"LD      H,A"
563,563,565,0403ab,0403ab,xor a,xor a,xor a,eval.asm,XOR     A               	; Numeric marker
564,564,566,0403ac,0403ac,ret,ret,ret,eval.asm,RET
565,565,567,0403ad,0403ad,exx,exx,exx,eval.asm,NEGATE_EV:			EXX				; This section does a two's complement negation on H'L'HLC
566,566,568,0403ae,0403ae,"ld a,h","ld a,h","ld a,h",eval.asm,"LD      A,H			; First do a one's complement by negating all the bytes"
567,567,569,0403af,0403af,cpl,cpl,cpl,eval.asm,CPL
568,568,570,0403b0,0403b0,"ld h,a","ld h,a","ld h,a",eval.asm,"LD      H,A"
569,569,571,0403b1,0403b1,"ld a,l","ld a,l","ld a,l",eval.asm,"LD      A,L"
570,570,572,0403b2,0403b2,cpl,cpl,cpl,eval.asm,CPL
571,571,573,0403b3,0403b3,"ld l,a","ld l,a","ld l,a",eval.asm,"LD      L,A"
572,572,574,0403b4,0403b4,exx,exx,exx,eval.asm,EXX
573,573,575,0403b5,0403b5,"ld a,h","ld a,h","ld a,h",eval.asm,"LD      A,H"
574,574,576,0403b6,0403b6,cpl,cpl,cpl,eval.asm,CPL
575,575,577,0403b7,0403b7,"ld h,a","ld h,a","ld h,a",eval.asm,"LD      H,A"
576,576,578,0403b8,0403b8,"ld a,l","ld a,l","ld a,l",eval.asm,"LD      A,L"
577,577,579,0403b9,0403b9,cpl,cpl,cpl,eval.asm,CPL
578,578,580,0403ba,0403ba,"ld l,a","ld l,a","ld l,a",eval.asm,"LD      L,A"
579,579,581,0403bb,0403bb,exx,exx,exx,eval.asm,ADD1:			EXX				; Then add 1
580,580,582,0403bc,0403bc,inc hl,inc hl,inc hl,eval.asm,INC     HL
581,581,583,0403bd,0403bd,"ld a,h","ld a,h","ld a,h",eval.asm,"LD      A,H"
582,582,584,0403be,0403be,or l,or l,or l,eval.asm,OR      L
583,583,585,0403bf,0403bf,exx,exx,exx,eval.asm,EXX
584,584,586,0403c0,0403c0,"ld a,$00","ld a,$00","ld a,$00",eval.asm,"LD      A,0             	; Numeric marker"
585,585,587,0403c2,0403c2,ret nz,ret nz,ret nz,eval.asm,RET     NZ
586,586,588,0403c3,0403c3,inc hl,inc hl,inc hl,eval.asm,INC     HL
587,587,589,0403c4,0403c4,ret,ret,ret,eval.asm,RET
588,588,590,0403c5,0403c5,call $04164f,call $041679,call $000000,eval.asm,"ITEM:			CALL    CHECK			; Check there's at least a page of free memory left and Error: ""No room"" if not"
589,589,591,0403c9,0403c9,call $040a70,call $040a70,call $000000,eval.asm,CALL    NXT			; Skip spaces
590,590,592,0403cd,0403cd,inc iy,inc iy,inc iy,eval.asm,INC     IY			; Move to the prefix character
591,591,593,0403cf,0403cf,cp $26,cp $26,cp $00,eval.asm,CP      '&'			; If `&`
592,592,594,0403d1,0403d1,"jp z,$040346","jp z,$040346","jp z,$000000",eval.asm,"JP      Z,HEX           	; Then get a HEX constant"
593,593,595,0403d5,0403d5,cp $25,cp $25,cp $00,eval.asm,CP	'%'			; If '%'
594,594,596,0403d7,0403d7,"jr z,$-$66","jr z,$-$66","jr z,$-$00",eval.asm,"JR	Z,BIN			; Then get a BINARY constant"
595,595,597,0403d9,0403d9,cp $2d,cp $2d,cp $00,eval.asm,CP      '-'			; If `-`
596,596,598,0403db,0403db,"jr z,$-$3c","jr z,$-$3c","jr z,$-$00",eval.asm,"JR      Z,MINUS         	; Then get a negative number"
597,597,599,0403dd,0403dd,cp $2b,cp $2b,cp $00,eval.asm,CP      '+'			; If `+`
598,598,600,0403df,0403df,"jp z,$04031d","jp z,$04031d","jp z,$000000",eval.asm,"JP      Z,ITEMN         	; Then just fetch the number (unary plus)"
599,599,601,0403e3,0403e3,cp $28,cp $28,cp $00,eval.asm,CP      '('			; If `(`
600,600,602,0403e5,0403e5,"jp z,$04033c","jp z,$04033c","jp z,$000000",eval.asm,"JP      Z,ITEM1         	; Start of a bracketed expression"
601,601,603,0403e9,0403e9,cp $22,cp $22,cp $00,eval.asm,"CP      34			; If `""`"
602,602,604,0403eb,0403eb,"jr z,$+$7c","jr z,$+$7c","jr z,$+$00",eval.asm,"JR      Z,CONS          	; Start of a string constant"
603,603,605,0403ed,0403ed,cp $c6,cp $c6,cp $00,eval.asm,CP      TCMD_EV			; Is it out of range of the function table?
604,604,606,0403ef,0403ef,"jp nc,$040c97","jp nc,$040c97","jp nc,$000000",eval.asm,"JP      NC,SYNTAX       	; Error: ""Syntax Error"""
605,605,607,0403f3,0403f3,cp $8d,cp $8d,cp $00,eval.asm,"CP      FUNTOK			; If it is in range, then"
606,606,608,0403f5,0403f5,"jp nc,$040a83","jp nc,$040a83","jp nc,$000000",eval.asm,"JP      NC,DISPAT       	; It's a function"
607,607,609,0403f9,0403f9,dec iy,dec iy,dec iy,eval.asm,DEC     IY
608,608,610,0403fb,0403fb,cp $3a,cp $3a,cp $00,eval.asm,CP      ':'
609,609,611,0403fd,0403fd,"jr nc,$+$0e","jr nc,$+$0e","jr nc,$+$00",eval.asm,"JR      NC,ITEM2		; VARIABLE?"
610,610,612,0403ff,0403ff,cp $30,cp $30,cp $00,eval.asm,CP      '0'
611,611,613,040401,040401,"jp nc,$04048e","jp nc,$04048e","jp nc,$000000",eval.asm,"JP      NC,CON			; NUMERIC CONSTANT"
612,612,614,040405,040405,cp $2e,cp $2e,cp $00,eval.asm,CP      '.'
613,613,615,040407,040407,"jp z,$04048e","jp z,$04048e","jp z,$000000",eval.asm,"JP      Z,CON			; NUMERIC CONSTANT"
614,614,616,04040b,04040b,call $043a3a,call $043a6a,call $000000,eval.asm,ITEM2:			CALL    GETVAR			; VARIABLE
615,615,617,04040f,04040f,"jr nz,$+$39","jr nz,$+$39","jr nz,$+$00",eval.asm,"JR      NZ,NOSUCH"
616,616,618,040411,040411,or a,or a,or a,eval.asm,OR      A
617,617,619,040412,040412,"jp m,$0404a0","jp m,$0404a0","jp m,$000000",eval.asm,"JP      M,LOADS			; STRING VARIABLE"
618,618,620,040416,040416,or a,or a,or a,eval.asm,LOADN:			OR      A
619,619,621,040417,040417,"jr z,$+$22","jr z,$+$22","jr z,$+$00",eval.asm,"JR      Z,LOAD1			; BYTE VARIABLE"
620,620,622,040419,040419,"ld c,$00","ld c,$00","ld c,$00",eval.asm,"LD      C,0"
621,621,623,04041b,04041b,"bit 0,a","bit 0,a","bit 0,a",eval.asm,"BIT     0,A"
622,622,624,04041d,04041d,"jr z,$+$05","jr z,$+$05","jr z,$+$00",eval.asm,"JR      Z,LOAD4			; INTEGER VARIABLE"
623,623,625,04041f,04041f,"ld c,(ix+$04)","ld c,(ix+$04)","ld c,(ix+$00)",eval.asm,"LOAD5:			LD      C,(IX+4)"
624,624,626,040422,040422,exx,exx,exx,eval.asm,LOAD4:			EXX
625,625,627,040423,040423,"ld hl,$000000","ld hl,$000000","ld hl,$000000",eval.asm,"LD	HL, 0			; TODO: Optimise"
626,626,628,040427,040427,"ld l,(ix)","ld l,(ix)","ld l,(ix)",eval.asm,"LD      L,(IX+0)"
627,627,629,04042a,04042a,"ld h,(ix+$01)","ld h,(ix+$01)","ld h,(ix+$00)",eval.asm,"LD      H,(IX+1)"
628,628,630,04042d,04042d,exx,exx,exx,eval.asm,EXX
629,629,631,04042e,04042e,"ld hl,$000000","ld hl,$000000","ld hl,$000000",eval.asm,"LD	HL, 0			; TODO: Optimise"
630,630,632,040432,040432,"ld l,(ix+$02)","ld l,(ix+$02)","ld l,(ix+$00)",eval.asm,"LD      L,(IX+2)"
631,631,633,040435,040435,"ld h,(ix+$03)","ld h,(ix+$03)","ld h,(ix+$00)",eval.asm,"LD      H,(IX+3)"
632,632,634,040438,040438,ret,ret,ret,eval.asm,RET
633,633,635,040439,040439,"ld hl,$000000","ld hl,$000000","ld hl,$000000",eval.asm,"LOAD1:			LD      HL,0"
634,634,636,04043d,04043d,exx,exx,exx,eval.asm,EXX
635,635,637,04043e,04043e,"ld hl,$000000","ld hl,$000000","ld hl,$000000",eval.asm,"LD      HL,0			; TODO: Optimise"
636,636,638,040442,040442,"ld l,(ix)","ld l,(ix)","ld l,(ix)",eval.asm,"LD      L,(IX+0)"
637,637,639,040445,040445,exx,exx,exx,eval.asm,EXX
638,638,640,040446,040446,"ld c,h","ld c,h","ld c,h",eval.asm,"LD      C,H"
639,639,641,040447,040447,ret,ret,ret,eval.asm,RET
640,640,642,040448,040448,"jp c,$040c97","jp c,$040c97","jp c,$000000",eval.asm,"NOSUCH:			JP      C,SYNTAX"
641,641,643,04044c,04044c,"ld a,($044d40)","ld a,($044d40)","ld a,($000000)",eval.asm,"LD      A,(LISTON)"
642,642,644,040450,040450,"bit 5,a","bit 5,a","bit 5,a",eval.asm,"BIT     5,A"
643,643,645,040452,040452,"ld a,$1a","ld a,$1a","ld a,$00",eval.asm,"LD      A,26"
644,644,646,040454,040454,"jr nz,$+$28","jr nz,$+$28","jr nz,$+$00",eval.asm,"JR      NZ,ERROR0_EV		; Throw ""No such variable"""
645,645,647,040456,040456,inc iy,inc iy,inc iy,eval.asm,NOS1:			INC     IY
646,646,648,040458,040458,call $043c6f,call $043c9f,call $000000,eval.asm,CALL    RANGE
647,647,649,04045c,04045c,"jr nc,$-$06","jr nc,$-$06","jr nc,$-$00",eval.asm,"JR      NC,NOS1"
648,648,650,04045e,04045e,"ld ix,$044c40","ld ix,$113040","ld ix,$000000",eval.asm,"LD      IX,PC"
649,649,651,040463,040463,xor a,xor a,xor a,eval.asm,XOR     A
650,650,652,040464,040464,"ld c,a","ld c,a","ld c,a",eval.asm,"LD      C,A"
651,651,653,040465,040465,jr $-$43,jr $-$43,jr $-$00,eval.asm,JR      LOAD4
652,652,654,040467,040467,"ld de,$044a00","ld de,$044a00","ld de,$000000",eval.asm,"CONS:			LD      DE,ACCS			; DE: Pointer to the string accumulator"
653,653,655,04046b,04046b,"ld a,(iy)","ld a,(iy)","ld a,(iy)",eval.asm,"CONS3:			LD      A,(IY)			; Fetch the first character and"
654,654,656,04046e,04046e,inc iy,inc iy,inc iy,eval.asm,INC     IY			; Increment the pointer
655,655,657,040470,040470,cp $22,cp $22,cp $00,eval.asm,"CP      '""'			; Check for start quote"
656,656,658,040472,040472,"jr z,$+$0e","jr z,$+$0e","jr z,$+$00",eval.asm,"JR      Z,CONS2			; Yes, so jump to the bit that parses the string"
657,657,659,040474,040474,"ld (de),a","ld (de),a","ld (de),a",eval.asm,"CONS1:			LD      (DE),A			; Store the character in the string accumulator"
658,658,660,040475,040475,inc e,inc e,inc e,eval.asm,INC     E			; Increment the string accumulator pointer
659,659,661,040476,040476,cp $0d,cp $0d,cp $00,eval.asm,CP      CR			; Is it CR
660,660,662,040478,040478,"jr nz,$-$0d","jr nz,$-$0d","jr nz,$-$00",eval.asm,"JR      NZ,CONS3		; No, so keep looping"
661,661,663,04047a,04047a,"ld a,$09","ld a,$09","ld a,$00",eval.asm,"LD      A,9"
662,662,664,04047c,04047c,jp $043760,jp $043790,jp $000000,eval.asm,"ERROR0_EV:			JP      ERROR_           	; Throw error ""Missing '""'"
663,663,665,040480,040480,"ld a,(iy)","ld a,(iy)","ld a,(iy)",eval.asm,"CONS2:			LD      A,(IY)			; Fetch the next character"
664,664,666,040483,040483,cp $22,cp $22,cp $00,eval.asm,"CP      '""'			; Check for end quote?"
665,665,667,040485,040485,inc iy,inc iy,inc iy,eval.asm,INC     IY			; Increment the pointer
666,666,668,040487,040487,"jr z,$-$13","jr z,$-$13","jr z,$-$00",eval.asm,"JR      Z,CONS1			; It is the end of string marker so jump to the end routine"
667,667,669,040489,040489,dec iy,dec iy,dec iy,eval.asm,DEC     IY			;
668,668,670,04048b,04048b,"ld a,$80","ld a,$80","ld a,$00",eval.asm,"LD      A,80H           	; String marker"
669,669,671,04048d,04048d,ret,ret,ret,eval.asm,RET
670,670,672,04048e,04048e,push iy,push iy,push iy,eval.asm,CON:			PUSH    IY
671,671,673,040490,040490,pop ix,pop ix,pop ix,eval.asm,POP     IX
672,672,674,040492,040492,"ld a,$24","ld a,$24","ld a,$00",eval.asm,"LD      A,36"
673,673,675,040494,040494,call $04206a,call $04209a,call $000000,eval.asm,CALL    FPP
674,674,676,040498,040498,"jr c,$-$1c","jr c,$-$1c","jr c,$-$00",eval.asm,"JR      C,ERROR0_EV"
675,675,677,04049a,04049a,push ix,push ix,push ix,eval.asm,PUSH    IX
676,676,678,04049c,04049c,pop iy,pop iy,pop iy,eval.asm,POP     IY
677,677,679,04049e,04049e,xor a,xor a,xor a,eval.asm,XOR     A
678,678,680,04049f,04049f,ret,ret,ret,eval.asm,RET
679,679,681,0404a0,0404a0,"ld de,$044a00","ld de,$044a00","ld de,$000000",eval.asm,"LOADS:			LD      DE,ACCS			; Where to store the string"
680,680,682,0404a4,0404a4,rra,rra,rra,eval.asm,RRA
681,681,683,0404a5,0404a5,"jr nc,$+$1c","jr nc,$+$1c","jr nc,$+$00",eval.asm,"JR      NC,LOADS2       	; Skip if it is a fixed string"
682,682,684,0404a7,0404a7,exx,exx,exx,eval.asm,EXX				; This block was a call to LOAD4
683,683,685,0404a8,0404a8,"ld l,(ix)","ld l,(ix)","ld l,(ix)",eval.asm,"LD      L,(IX+0)		; The length of the string currently stored in the allocated space"
684,684,686,0404ab,0404ab,"ld h,(ix+$01)","ld h,(ix+$01)","ld h,(ix+$00)",eval.asm,"LD      H,(IX+1)		; The maximum original string length"
685,685,687,0404ae,0404ae,exx,exx,exx,eval.asm,EXX
686,686,688,0404af,0404af,"ld hl,(ix+$02)","ld hl,(ix+$02)","ld hl,(ix+$00)",eval.asm,"LD	HL,(IX+2)		; Address of the string (24-bit)"
687,687,689,0404b2,0404b2,exx,exx,exx,eval.asm,EXX
688,688,690,0404b3,0404b3,"ld a,l","ld a,l","ld a,l",eval.asm,"LD      A,L"
689,689,691,0404b4,0404b4,exx,exx,exx,eval.asm,EXX
690,690,692,0404b5,0404b5,or a,or a,or a,eval.asm,OR      A
691,691,693,0404b6,0404b6,"ld bc,$000000","ld bc,$000000","ld bc,$000000",eval.asm,"LD	BC,0			; BC: Number of bytes to copy"
692,692,694,0404ba,0404ba,"ld c,a","ld c,a","ld c,a",eval.asm,"LD      C,A"
693,693,695,0404bb,0404bb,"ld a,$80","ld a,$80","ld a,$00",eval.asm,"LD      A,80H           	; String marker"
694,694,696,0404bd,0404bd,ret z,ret z,ret z,eval.asm,RET     Z
695,695,697,0404be,0404be,ldir,ldir,ldir,eval.asm,LDIR
696,696,698,0404c0,0404c0,ret,ret,ret,eval.asm,RET
697,697,699,0404c1,0404c1,"ld a,(hl)","ld a,(hl)","ld a,(hl)",eval.asm,"LOADS2:			LD      A,(HL)"
698,698,700,0404c2,0404c2,"ld (de),a","ld (de),a","ld (de),a",eval.asm,"LD      (DE),A"
699,699,701,0404c3,0404c3,inc hl,inc hl,inc hl,eval.asm,INC     HL
700,700,702,0404c4,0404c4,cp $0d,cp $0d,cp $00,eval.asm,CP      CR
701,701,703,0404c6,0404c6,"ld a,$80","ld a,$80","ld a,$00",eval.asm,"LD      A,80H           	; String marker"
702,702,704,0404c8,0404c8,ret z,ret z,ret z,eval.asm,RET     Z
703,703,705,0404c9,0404c9,inc e,inc e,inc e,eval.asm,INC     E
704,704,706,0404ca,0404ca,"jr nz,$-$09","jr nz,$-$09","jr nz,$-$00",eval.asm,"JR      NZ,LOADS2"
705,705,707,0404cc,0404cc,ret,ret,ret,eval.asm,RET                     	; Return null string
706,706,708,0404cd,0404cd,call $043ecc,call $043efc,call $000000,eval.asm,POS:			CALL    GETCSR			; Return the horizontal cursor position
707,707,709,0404d1,0404d1,"ex de,hl","ex de,hl","ex de,hl",eval.asm,"EX      DE,HL			;  L: The X cursor position"
708,708,710,0404d2,0404d2,jp $040581,jp $040581,jp $000000,eval.asm,JP      COUNT1			; Return an 8-bit value
709,709,711,0404d6,0404d6,call $043ecc,call $043efc,call $000000,eval.asm,VPOS:			CALL    GETCSR			; Return the vertical cursor position
710,710,712,0404da,0404da,jp $040581,jp $040581,jp $000000,eval.asm,JP      COUNT1			; Return an 8-bit value
711,711,713,0404de,0404de,call $041886,call $0418b0,call $000000,eval.asm,EOF:			CALL    CHANEL			; Check for EOF
712,712,714,0404e2,0404e2,call $044344,call $044385,call $000000,eval.asm,CALL    OSSTAT
713,713,715,0404e6,0404e6,"jp z,$040605","jp z,$040605","jp z,$000000",eval.asm,"JP      Z,TRUE			; Yes, so return true"
714,714,716,0404ea,0404ea,jp $040993,jp $040993,jp $000000,eval.asm,JP      ZERO			; Otherwise return false (zero)
715,715,717,0404ee,0404ee,call $041886,call $0418b0,call $000000,eval.asm,BGET:			CALL    CHANEL          	; Channel number
716,716,718,0404f2,0404f2,call $044333,call $044374,call $000000,eval.asm,CALL    OSBGET
717,717,719,0404f6,0404f6,"ld l,a","ld l,a","ld l,a",eval.asm,"LD      L,A"
718,718,720,0404f7,0404f7,jp $04057f,jp $04057f,jp $000000,eval.asm,JP      COUNT0			; Return an 8-bit value
719,719,721,0404fb,0404fb,call $040325,call $040325,call $000000,eval.asm,INKEY:			CALL    ITEMI			; Get the argument
720,720,722,0404ff,0404ff,"bit 7,h","bit 7,h","bit 7,h",eval.asm,"BIT	7, H			; Check the sign"
721,721,723,040501,040501,exx,exx,exx,eval.asm,EXX				; HL: The argument
722,722,724,040502,040502,"jp nz,$0407eb","jp nz,$0407eb","jp nz,$000000",eval.asm,"JP	NZ, INKEYM		; It's negative, so do INKEY(-n)"
723,723,725,040506,040506,call $0407dd,call $0407dd,call $000000,eval.asm,CALL	INKEY0 			; Do INKEY(n)
724,724,726,04050a,04050a,jr $+$1f,jr $+$1f,jr $+$00,eval.asm,JR      ASC0			; Return a numeric value
725,725,727,04050c,04050c,call $040a70,call $040a70,call $000000,eval.asm,GET:			CALL    NXT			; Skip whitespace
726,726,728,040510,040510,cp $28,cp $28,cp $00,eval.asm,CP      '('			; Is it GET(
727,727,729,040512,040512,"jr nz,$+$0d","jr nz,$+$0d","jr nz,$+$00",eval.asm,"JR      NZ,GET0			; No, so get a keyboard character"
728,728,730,040514,040514,call $040325,call $040325,call $000000,eval.asm,"CALL    ITEMI           	; Yes, so fetch the port address"
729,729,731,040518,040518,exx,exx,exx,eval.asm,EXX
730,730,732,040519,040519,"ld b,h","ld b,h","ld b,h",eval.asm,"LD      B,H			; BC: The port address"
731,731,733,04051a,04051a,"ld c,l","ld c,l","ld c,l",eval.asm,"LD      C,L"
732,732,734,04051b,04051b,"in l,(bc)","in l,(bc)","in l,(bc)",eval.asm,"IN      L,(C)           	;  L: Input from port BC"
733,733,735,04051d,04051d,jr $+$62,jr $+$62,jr $+$00,eval.asm,JR      COUNT0			; Return an 8-bit value
734,734,736,04051f,04051f,call $0407c7,call $0407c7,call $000000,eval.asm,GET0:			CALL    GETS			; Read the keyboard character
735,735,737,040523,040523,jr $+$0c,jr $+$0c,jr $+$00,eval.asm,JR      ASC1			; And return the value
736,736,738,040525,040525,call $040330,call $040330,call $000000,eval.asm,ASC:			CALL    ITEMS			; Get the string argument argument
737,737,739,040529,040529,xor a,xor a,xor a,eval.asm,ASC0:			XOR     A			; Quickly check the length of the string in ACCS
738,738,740,04052a,04052a,cp e,cp e,cp e,eval.asm,CP      E			; Is the pointer 0
739,739,741,04052b,04052b,"jp z,$040605","jp z,$040605","jp z,$000000",eval.asm,"JP      Z,TRUE          	; Yes, so return -1 as it is a null string"
740,740,742,04052f,04052f,"ld hl,($044a00)","ld hl,($044a00)","ld hl,($000000)",eval.asm,"ASC1:			LD      HL,(ACCS)		;  L: The first character (H will be discarded in COUNT0"
741,741,743,040533,040533,jr $+$4c,jr $+$4c,jr $+$00,eval.asm,JR      COUNT0			; An 8-bit value
742,742,744,040535,040535,call $040330,call $040330,call $000000,eval.asm,LEN:			CALL    ITEMS			; Get the string argument
743,743,745,040539,040539,"ex de,hl","ex de,hl","ex de,hl",eval.asm,"EX      DE,HL			; HL: Pointer into ACCS"
744,744,746,04053a,04053a,jr $+$45,jr $+$45,jr $+$00,eval.asm,JR      COUNT0			; Return L
745,745,747,04053c,04053c,"ld hl,($044d1a)","ld hl,($044d1a)","ld hl,($000000)",eval.asm,"LOMEMV:			LD      HL,(LOMEM)		; Return the LOMEM system variable"
746,746,748,040540,040540,"ld a,($044d1c)","ld a,($044d1c)","ld a,($000000)",eval.asm,"LD	A, (LOMEM+2)"
747,747,749,040544,040544,jr $+$43,jr $+$43,jr $+$00,eval.asm,JR      COUNT2			; A 24-bit value
748,748,750,040546,040546,"ld hl,($044d20)","ld hl,($044d20)","ld hl,($000000)",eval.asm,"HIMEMV:			LD      HL,(HIMEM)		; Return the HIMEM system variable"
749,749,751,04054a,04054a,"ld a,($044d22)","ld a,($044d22)","ld a,($000000)",eval.asm,"LD	A, (HIMEM+2)"
750,750,752,04054e,04054e,jr $+$39,jr $+$39,jr $+$00,eval.asm,JR      COUNT2			; A 24-bit value
751,751,753,040550,040550,"ld hl,($044d14)","ld hl,($044d14)","ld hl,($000000)",eval.asm,"PAGEV:			LD    	HL,(PAGE_)		; Return the PAGE system variable"
752,752,754,040554,040554,"ld a,($044d16)","ld a,($044d16)","ld a,($000000)",eval.asm,"LD	A, (PAGE_+2)		; A 24-bit value"
753,753,755,040558,040558,jr $+$2f,jr $+$2f,jr $+$00,eval.asm,JR      COUNT2
754,754,756,04055a,04055a,"ld a,(iy)","ld a,(iy)","ld a,(iy)",eval.asm,"TOPV:			LD      A,(IY)			; Return the TOP system variable"
755,755,757,04055d,04055d,inc iy,inc iy,inc iy,eval.asm,"INC     IY              	; Skip ""P"""
756,756,758,04055f,04055f,cp $50,cp $50,cp $00,eval.asm,CP      'P'
757,757,759,040561,040561,"jp nz,$040c97","jp nz,$040c97","jp nz,$000000",eval.asm,"JP      NZ,SYNTAX       	; Throw ""Syntax Error"""
758,758,760,040565,040565,"ld hl,($044d17)","ld hl,($044d17)","ld hl,($000000)",eval.asm,"LD      HL,(TOP)"
759,759,761,040569,040569,"ld a,($044d19)","ld a,($044d19)","ld a,($000000)",eval.asm,"LD	A, (TOP+2)"
760,760,762,04056d,04056d,jr $+$1a,jr $+$1a,jr $+$00,eval.asm,JR      COUNT2
761,761,763,04056f,04056f,"ld hl,($044d33)","ld hl,($044d33)","ld hl,($000000)",eval.asm,"ERLV:			LD      HL,(ERL)		; Return the error line"
762,762,764,040573,040573,jr $+$0e,jr $+$0e,jr $+$00,eval.asm,JR      COUNT1			; A 16-bit value
763,763,765,040575,040575,"ld hl,($044d3f)","ld hl,($044d3f)","ld hl,($000000)",eval.asm,"ERRV:			LD      HL,(ERR)		; Return the error value"
764,764,766,040579,040579,jr $+$06,jr $+$06,jr $+$00,eval.asm,JR      COUNT0			; An 8-bit value
765,765,767,04057b,04057b,"ld hl,($044d3d)","ld hl,($044d3d)","ld hl,($000000)",eval.asm,"COUNTV:			LD      HL,(COUNT)		; Return the print position sysvar"
766,766,768,04057f,04057f,"ld h,$00","ld h,$00","ld h,$00",eval.asm,"COUNT0:			LD      H,0			; Return L"
767,767,769,040581,040581,exx,exx,exx,eval.asm,COUNT1:			EXX				; Return HL
768,768,770,040582,040582,xor a,xor a,xor a,eval.asm,XOR     A
769,769,771,040583,040583,"ld c,a","ld c,a","ld c,a",eval.asm,"LD      C,A             	; Integer marker"
770,770,772,040584,040584,"ld h,a","ld h,a","ld h,a",eval.asm,"LD      H,A"
771,771,773,040585,040585,"ld l,a","ld l,a","ld l,a",eval.asm,"LD      L,A"
772,772,774,040586,040586,ret,ret,ret,eval.asm,RET
773,773,775,040587,040587,exx,exx,exx,eval.asm,COUNT2:			EXX
774,774,776,040588,040588,"ld l,a","ld l,a","ld l,a",eval.asm,"LD	L,A"
775,775,777,040589,040589,xor a,xor a,xor a,eval.asm,XOR	A
776,776,778,04058a,04058a,"ld c,a","ld c,a","ld c,a",eval.asm,"LD	C,A			; Integer marker"
777,777,779,04058b,04058b,"ld h,a","ld h,a","ld h,a",eval.asm,"LD	H,A"
778,778,780,04058c,04058c,ret,ret,ret,eval.asm,RET
779,779,781,04058d,04058d,xor a,xor a,xor a,eval.asm,OPENOT:			XOR     A			; Open for writing
780,780,782,04058e,04058e,jr $+$08,jr $+$08,jr $+$00,eval.asm,JR	OPENIN_1
781,781,783,040590,040590,"ld a,$02","ld a,$02","ld a,$00",eval.asm,"OPENUP:			LD      A,2			; Open for reading / writing"
782,782,784,040592,040592,jr $+$04,jr $+$04,jr $+$00,eval.asm,JR	OPENIN_1
783,783,785,040594,040594,"ld a,$01","ld a,$01","ld a,$00",eval.asm,"OPENIN:			LD      A,1			; Open for reading"
784,784,786,040596,040596,push af,push af,push af,eval.asm,OPENIN_1:		PUSH    AF              	; Save OPEN type
785,785,787,040597,040597,call $040330,call $040330,call $000000,eval.asm,CALL    ITEMS           	; Fetch the filename
786,786,788,04059b,04059b,"ld a,$0d","ld a,$0d","ld a,$00",eval.asm,"LD      A,CR"
787,787,789,04059d,04059d,"ld (de),a","ld (de),a","ld (de),a",eval.asm,"LD      (DE),A"
788,788,790,04059e,04059e,pop af,pop af,pop af,eval.asm,POP     AF              	; Restore the OPEN type
789,789,791,04059f,04059f,"add a,$ff","add a,$ff","add a,$00",eval.asm,"ADD     A,-1            	; Affect the flags"
790,790,792,0405a1,0405a1,"ld hl,$044a00","ld hl,$044a00","ld hl,$000000",eval.asm,"LD      HL,ACCS"
791,791,793,0405a5,0405a5,call $04431c,call $04435d,call $000000,eval.asm,CALL    OSOPEN			; Call the OS specific OPEN routine in patch.asm
792,792,794,0405a9,0405a9,"ld l,a","ld l,a","ld l,a",eval.asm,"LD      L,A			; L: Channel number"
793,793,795,0405aa,0405aa,jr $-$2b,jr $-$2b,jr $-$00,eval.asm,JR      COUNT0			; Return channel number to BASIC
794,794,796,0405ac,0405ac,call $041886,call $0418b0,call $000000,eval.asm,EXT:			CALL    CHANEL
795,795,797,0405b0,0405b0,call $04437a,call $0443bb,call $000000,eval.asm,CALL    GETEXT
796,796,798,0405b4,0405b4,jr $+$17,jr $+$17,jr $+$00,eval.asm,JR      TIME0
797,797,799,0405b6,0405b6,call $041886,call $0418b0,call $000000,eval.asm,PTR_EV:			CALL    CHANEL
798,798,800,0405ba,0405ba,call $04434e,call $04438f,call $000000,eval.asm,CALL    GETPTR
799,799,801,0405be,0405be,jr $+$0d,jr $+$0d,jr $+$00,eval.asm,JR      TIME0
800,800,802,0405c0,0405c0,"ld a,(iy)","ld a,(iy)","ld a,(iy)",eval.asm,"TIMEV:			LD      A,(IY)"
801,801,803,0405c3,0405c3,cp $24,cp $24,cp $00,eval.asm,CP      '$'
802,802,804,0405c5,0405c5,"jr z,$+$0c","jr z,$+$0c","jr z,$+$00",eval.asm,"JR      Z,TIMEVS"
803,803,805,0405c7,0405c7,call $043eac,call $043edc,call $000000,eval.asm,CALL    GETIME
804,804,806,0405cb,0405cb,push de,push de,push de,eval.asm,TIME0:			PUSH    DE
805,805,807,0405cc,0405cc,exx,exx,exx,eval.asm,EXX
806,806,808,0405cd,0405cd,pop hl,pop hl,pop hl,eval.asm,POP     HL
807,807,809,0405ce,0405ce,xor a,xor a,xor a,eval.asm,XOR     A
808,808,810,0405cf,0405cf,"ld c,a","ld c,a","ld c,a",eval.asm,"LD      C,A"
809,809,811,0405d0,0405d0,ret,ret,ret,eval.asm,RET
810,810,812,0405d1,0405d1,inc iy,inc iy,inc iy,eval.asm,TIMEVS:			INC     IY              ;SKIP $
811,811,813,0405d3,0405d3,call $044393,call $0443d4,call $000000,eval.asm,CALL    GETIMS
812,812,814,0405d7,0405d7,"ld a,$80","ld a,$80","ld a,$00",eval.asm,"LD      A,80H           ;MARK STRING"
813,813,815,0405d9,0405d9,ret,ret,ret,eval.asm,RET
814,814,816,0405da,0405da,call $04098f,call $04098f,call $000000,eval.asm,SLT:			CALL    SCP
815,815,817,0405de,0405de,ret nc,ret nc,ret nc,eval.asm,RET     NC
816,816,818,0405df,0405df,jr $+$26,jr $+$26,jr $+$00,eval.asm,JR      TRUE
817,817,819,0405e1,0405e1,call $04098f,call $04098f,call $000000,eval.asm,SGT:			CALL    SCP
818,818,820,0405e5,0405e5,ret z,ret z,ret z,eval.asm,RET     Z
819,819,821,0405e6,0405e6,ret c,ret c,ret c,eval.asm,RET     C
820,820,822,0405e7,0405e7,jr $+$1e,jr $+$1e,jr $+$00,eval.asm,JR      TRUE
821,821,823,0405e9,0405e9,call $04098f,call $04098f,call $000000,eval.asm,SGE:			CALL    SCP
822,822,824,0405ed,0405ed,ret c,ret c,ret c,eval.asm,RET     C
823,823,825,0405ee,0405ee,jr $+$17,jr $+$17,jr $+$00,eval.asm,JR      TRUE
824,824,826,0405f0,0405f0,call $04098f,call $04098f,call $000000,eval.asm,SLE:			CALL    SCP
825,825,827,0405f4,0405f4,"jr z,$+$11","jr z,$+$11","jr z,$+$00",eval.asm,"JR      Z,TRUE"
826,826,828,0405f6,0405f6,ret nc,ret nc,ret nc,eval.asm,RET     NC
827,827,829,0405f7,0405f7,jr $+$0e,jr $+$0e,jr $+$00,eval.asm,JR      TRUE
828,828,830,0405f9,0405f9,call $04098f,call $04098f,call $000000,eval.asm,SNE:			CALL    SCP
829,829,831,0405fd,0405fd,ret z,ret z,ret z,eval.asm,RET     Z
830,830,832,0405fe,0405fe,jr $+$07,jr $+$07,jr $+$00,eval.asm,JR      TRUE
831,831,833,040600,040600,call $04098f,call $04098f,call $000000,eval.asm,SEQ:			CALL    SCP
832,832,834,040604,040604,ret nz,ret nz,ret nz,eval.asm,RET     NZ
833,833,835,040605,040605,"ld a,$ff","ld a,$ff","ld a,$00",eval.asm,"TRUE:			LD      A,-1"
834,834,836,040607,040607,exx,exx,exx,eval.asm,EXX
835,835,837,040608,040608,"ld h,a","ld h,a","ld h,a",eval.asm,"LD      H,A"
836,836,838,040609,040609,"ld l,a","ld l,a","ld l,a",eval.asm,"LD      L,A"
837,837,839,04060a,04060a,exx,exx,exx,eval.asm,EXX
838,838,840,04060b,04060b,"ld h,a","ld h,a","ld h,a",eval.asm,"LD      H,A"
839,839,841,04060c,04060c,"ld l,a","ld l,a","ld l,a",eval.asm,"LD      L,A"
840,840,842,04060d,04060d,inc a,inc a,inc a,eval.asm,INC     A
841,841,843,04060e,04060e,"ld c,a","ld c,a","ld c,a",eval.asm,"LD      C,A"
842,842,844,04060f,04060f,ret,ret,ret,eval.asm,RET
843,843,845,040610,040610,"ld a,$23","ld a,$23","ld a,$00",eval.asm,"PI:			LD      A,35"
844,844,846,040612,040612,jr $+$46,jr $+$46,jr $+$00,eval.asm,JR      FPP1
845,845,847,040614,040614,"ld a,$10","ld a,$10","ld a,$00",eval.asm,"ABSV:			LD      A,16"
846,846,848,040616,040616,jr $+$3c,jr $+$3c,jr $+$00,eval.asm,JR      FPPN
847,847,849,040618,040618,"ld a,$1a","ld a,$1a","ld a,$00",eval.asm,"NOTK:			LD      A,26"
848,848,850,04061a,04061a,jr $+$38,jr $+$38,jr $+$00,eval.asm,JR      FPPN
849,849,851,04061c,04061c,"ld a,$15","ld a,$15","ld a,$00",eval.asm,"DEG:			LD      A,21"
850,850,852,04061e,04061e,jr $+$34,jr $+$34,jr $+$00,eval.asm,JR      FPPN
851,851,853,040620,040620,"ld a,$1b","ld a,$1b","ld a,$00",eval.asm,"RAD:			LD      A,27"
852,852,854,040622,040622,jr $+$30,jr $+$30,jr $+$00,eval.asm,JR      FPPN
853,853,855,040624,040624,"ld a,$1c","ld a,$1c","ld a,$00",eval.asm,"SGN:			LD      A,28"
854,854,856,040626,040626,jr $+$2c,jr $+$2c,jr $+$00,eval.asm,JR      FPPN
855,855,857,040628,040628,"ld a,$17","ld a,$17","ld a,$00",eval.asm,"INT_:			LD      A,23"
856,856,858,04062a,04062a,jr $+$28,jr $+$28,jr $+$00,eval.asm,JR      FPPN
857,857,859,04062c,04062c,"ld a,$1e","ld a,$1e","ld a,$00",eval.asm,"SQR:			LD      A,30"
858,858,860,04062e,04062e,jr $+$24,jr $+$24,jr $+$00,eval.asm,JR      FPPN
859,859,861,040630,040630,"ld a,$1f","ld a,$1f","ld a,$00",eval.asm,"TAN:			LD      A,31"
860,860,862,040632,040632,jr $+$20,jr $+$20,jr $+$00,eval.asm,JR      FPPN
861,861,863,040634,040634,"ld a,$14","ld a,$14","ld a,$00",eval.asm,"COS:			LD      A,20"
862,862,864,040636,040636,jr $+$1c,jr $+$1c,jr $+$00,eval.asm,JR      FPPN
863,863,865,040638,040638,"ld a,$1d","ld a,$1d","ld a,$00",eval.asm,"SIN:			LD      A,29"
864,864,866,04063a,04063a,jr $+$18,jr $+$18,jr $+$00,eval.asm,JR      FPPN
865,865,867,04063c,04063c,"ld a,$16","ld a,$16","ld a,$00",eval.asm,"EXP:			LD      A,22"
866,866,868,04063e,04063e,jr $+$14,jr $+$14,jr $+$00,eval.asm,JR      FPPN
867,867,869,040640,040640,"ld a,$18","ld a,$18","ld a,$00",eval.asm,"LN:			LD      A,24"
868,868,870,040642,040642,jr $+$10,jr $+$10,jr $+$00,eval.asm,JR      FPPN
869,869,871,040644,040644,"ld a,$19","ld a,$19","ld a,$00",eval.asm,"LOG:			LD      A,25"
870,870,872,040646,040646,jr $+$0c,jr $+$0c,jr $+$00,eval.asm,JR      FPPN
871,871,873,040648,040648,"ld a,$12","ld a,$12","ld a,$00",eval.asm,"ASN:			LD      A,18"
872,872,874,04064a,04064a,jr $+$08,jr $+$08,jr $+$00,eval.asm,JR      FPPN
873,873,875,04064c,04064c,"ld a,$13","ld a,$13","ld a,$00",eval.asm,"ATN:			LD      A,19"
874,874,876,04064e,04064e,jr $+$04,jr $+$04,jr $+$00,eval.asm,JR      FPPN
875,875,877,040650,040650,"ld a,$11","ld a,$11","ld a,$00",eval.asm,"ACS:			LD      A,17"
876,876,878,040652,040652,push af,push af,push af,eval.asm,FPPN:			PUSH    AF
877,877,879,040653,040653,call $04031d,call $04031d,call $000000,eval.asm,CALL    ITEMN
878,878,880,040657,040657,pop af,pop af,pop af,eval.asm,POP     AF
879,879,881,040658,040658,call $04206a,call $04209a,call $000000,eval.asm,FPP1:			CALL    FPP
880,880,882,04065c,04065c,"jp c,$043760","jp c,$043790","jp c,$000000",eval.asm,"JP      C,ERROR_"
881,881,883,040660,040660,xor a,xor a,xor a,eval.asm,XOR     A
882,882,884,040661,040661,ret,ret,ret,eval.asm,RET
883,883,885,040662,040662,"ld a,$26","ld a,$26","ld a,$00",eval.asm,"SFIX:			LD      A,38"
884,884,886,040664,040664,jr $-$0c,jr $-$0c,jr $-$00,eval.asm,JR      FPP1
885,885,887,040666,040666,"ld a,$27","ld a,$27","ld a,$00",eval.asm,"SFLOAT:			LD      A,39"
886,886,888,040668,040668,jr $-$10,jr $-$10,jr $-$00,eval.asm,JR      FPP1
887,887,889,04066a,04066a,call $040330,call $040330,call $000000,eval.asm,VAL:			CALL    ITEMS
888,888,890,04066e,04066e,xor a,xor a,xor a,eval.asm,VAL0:			XOR     A
889,889,891,04066f,04066f,"ld (de),a","ld (de),a","ld (de),a",eval.asm,"LD      (DE),A"
890,890,892,040670,040670,"ld ix,$044a00","ld ix,$044a00","ld ix,$000000",eval.asm,"LD      IX,ACCS"
891,891,893,040675,040675,"ld a,$24","ld a,$24","ld a,$00",eval.asm,"LD      A,36"
892,892,894,040677,040677,jr $-$1f,jr $-$1f,jr $-$00,eval.asm,JR      FPP1
893,893,895,040679,040679,call $040330,call $040330,call $000000,eval.asm,EVAL_:			CALL    ITEMS
894,894,896,04067d,04067d,"ld a,$0d","ld a,$0d","ld a,$00",eval.asm,"LD      A,CR"
895,895,897,04067f,04067f,"ld (de),a","ld (de),a","ld (de),a",eval.asm,"LD      (DE),A"
896,896,898,040680,040680,push iy,push iy,push iy,eval.asm,PUSH    IY
897,897,899,040682,040682,"ld de,$044a00","ld de,$044a00","ld de,$000000",eval.asm,"LD      DE,ACCS"
898,898,900,040686,040686,"ld iy,$044a00","ld iy,$044a00","ld iy,$000000",eval.asm,"LD      IY,ACCS"
899,899,901,04068b,04068b,"ld c,$00","ld c,$00","ld c,$00",eval.asm,"LD      C,0"
900,900,902,04068d,04068d,call $043c9f,call $043ccf,call $000000,eval.asm,CALL    LEXAN2          ;TOKENISE
901,901,903,040691,040691,"ld (de),a","ld (de),a","ld (de),a",eval.asm,"LD      (DE),A"
902,902,904,040692,040692,inc de,inc de,inc de,eval.asm,INC     DE
903,903,905,040693,040693,xor a,xor a,xor a,eval.asm,XOR     A
904,904,906,040694,040694,call $0409b4,call $0409b4,call $000000,eval.asm,CALL    PUSHS           ;PUT ON STACK
905,905,907,040698,040698,"ld iy,$000003","ld iy,$000003","ld iy,$000000",eval.asm,"LD      IY,SIZEW	;WAS 2"
906,906,908,04069d,04069d,"add iy,sp","add iy,sp","add iy,sp",eval.asm,"ADD     IY,SP"
907,907,909,04069f,04069f,call $0401c7,call $0401c7,call $000000,eval.asm,CALL    EXPR
908,908,910,0406a3,0406a3,pop iy,pop iy,pop iy,eval.asm,POP     IY
909,909,911,0406a5,0406a5,"add iy,sp","add iy,sp","add iy,sp",eval.asm,"ADD     IY,SP"
910,910,912,0406a7,0406a7,"ld sp,iy","ld sp,iy","ld sp,iy",eval.asm,"LD      SP,IY           ;ADJUST STACK POINTER"
911,911,913,0406a9,0406a9,pop iy,pop iy,pop iy,eval.asm,POP     IY
912,912,914,0406ab,0406ab,"ex af,af'","ex af,af'","ex af,af'",eval.asm,"EX      AF,AF'"
913,913,915,0406ac,0406ac,ret,ret,ret,eval.asm,RET
914,914,916,0406ad,0406ad,"ld ix,$044d38","ld ix,$044d38","ld ix,$000000",eval.asm,"RND:			LD      IX,RANDOM"
915,915,917,0406b2,0406b2,call $040a70,call $040a70,call $000000,eval.asm,CALL    NXT
916,916,918,0406b6,0406b6,cp $28,cp $28,cp $00,eval.asm,CP      '('
917,917,919,0406b8,0406b8,"jr z,$+$22","jr z,$+$22","jr z,$+$00",eval.asm,"JR      Z,RND5          ;ARGUMENT FOLLOWS"
918,918,920,0406ba,0406ba,call $04041f,call $04041f,call $000000,eval.asm,CALL    LOAD5
919,919,921,0406be,0406be,rr c,rr c,rr c,eval.asm,RND1:			RR      C
920,920,922,0406c0,0406c0,"ld b,$20","ld b,$20","ld b,$00",eval.asm,"LD      B,32"
921,921,923,0406c2,0406c2,exx,exx,exx,eval.asm,RND2:			EXX                     ;CALCULATE NEXT
922,922,924,0406c3,0406c3,"adc.sil hl,hl","adc.sil hl,hl","adc.sil hl,hl",eval.asm,"ADC.S   HL,HL"
923,923,925,0406c6,0406c6,exx,exx,exx,eval.asm,EXX
924,924,926,0406c7,0406c7,"adc.sil hl,hl","adc.sil hl,hl","adc.sil hl,hl",eval.asm,"ADC.S   HL,HL"
925,925,927,0406ca,0406ca,"bit 3,l","bit 3,l","bit 3,l",eval.asm,"BIT     3,L"
926,926,928,0406cc,0406cc,"jr z,$+$03","jr z,$+$03","jr z,$+$00",eval.asm,"JR      Z,RND3"
927,927,929,0406ce,0406ce,ccf,ccf,ccf,eval.asm,CCF
928,928,930,0406cf,0406cf,djnz $-$0d,djnz $-$0d,djnz $-$00,eval.asm,RND3:			DJNZ    RND2
929,929,931,0406d1,0406d1,rl c,rl c,rl c,eval.asm,RND4:			RL      C               ;SAVE CARRY
930,930,932,0406d3,0406d3,call $0415db,call $041605,call $000000,eval.asm,CALL    STORE5          ;STORE NEW NUMBER
931,931,933,0406d7,0406d7,xor a,xor a,xor a,eval.asm,XOR     A
932,932,934,0406d8,0406d8,"ld c,a","ld c,a","ld c,a",eval.asm,"LD      C,A"
933,933,935,0406d9,0406d9,ret,ret,ret,eval.asm,RET
934,934,936,0406da,0406da,call $040325,call $040325,call $000000,eval.asm,RND5:			CALL    ITEMI
935,935,937,0406de,0406de,"ld ix,$044d38","ld ix,$044d38","ld ix,$000000",eval.asm,"LD      IX,RANDOM"
936,936,938,0406e3,0406e3,"bit 7,h","bit 7,h","bit 7,h",eval.asm,"BIT     7,H             ;NEGATIVE?"
937,937,939,0406e5,0406e5,scf,scf,scf,eval.asm,SCF
938,938,940,0406e6,0406e6,"jr nz,$-$15","jr nz,$-$15","jr nz,$-$00",eval.asm,"JR      NZ,RND4         ;SEED"
939,939,941,0406e8,0406e8,call $0408df,call $0408df,call $000000,eval.asm,CALL    TEST
940,940,942,0406ec,0406ec,push af,push af,push af,eval.asm,PUSH    AF
941,941,943,0406ed,0406ed,call $0408d7,call $0408d7,call $000000,eval.asm,CALL    SWAP
942,942,944,0406f1,0406f1,exx,exx,exx,eval.asm,EXX
943,943,945,0406f2,0406f2,call $04041f,call $04041f,call $000000,eval.asm,CALL    LOAD5
944,944,946,0406f6,0406f6,"call nz,$0406be","call nz,$0406be","call nz,$000000",eval.asm,"CALL    NZ,RND1         ;NEXT IF NON-ZERO"
945,945,947,0406fa,0406fa,exx,exx,exx,eval.asm,EXX                     ;SCRAMBLE (CARE!)
946,946,948,0406fb,0406fb,"ld c,$7f","ld c,$7f","ld c,$00",eval.asm,"LD      C,7FH"
947,947,949,0406fd,0406fd,"bit 7,h","bit 7,h","bit 7,h",eval.asm,"RND6:			BIT     7,H             ;FLOAT"
948,948,950,0406ff,0406ff,"jr nz,$+$0c","jr nz,$+$0c","jr nz,$+$00",eval.asm,"JR      NZ,RND7"
949,949,951,040701,040701,exx,exx,exx,eval.asm,EXX
950,950,952,040702,040702,"add.sil hl,hl","add.sil hl,hl","add.sil hl,hl",eval.asm,"ADD.S   HL,HL"
951,951,953,040704,040704,exx,exx,exx,eval.asm,EXX
952,952,954,040705,040705,"adc.sil hl,hl","adc.sil hl,hl","adc.sil hl,hl",eval.asm,"ADC.S   HL,HL"
953,953,955,040708,040708,dec c,dec c,dec c,eval.asm,DEC     C
954,954,956,040709,040709,"jr nz,$-$0c","jr nz,$-$0c","jr nz,$-$00",eval.asm,"JR      NZ,RND6"
955,955,957,04070b,04070b,"res 7,h","res 7,h","res 7,h",eval.asm,"RND7:			RES     7,H             ;POSITIVE 0-0.999999"
956,956,958,04070d,04070d,pop af,pop af,pop af,eval.asm,POP     AF
957,957,959,04070e,04070e,ret z,ret z,ret z,eval.asm,RET     Z               ;ZERO ARGUMENT
958,958,960,04070f,04070f,exx,exx,exx,eval.asm,EXX
959,959,961,040710,040710,"ld a,e","ld a,e","ld a,e",eval.asm,"LD      A,E"
960,960,962,040711,040711,dec a,dec a,dec a,eval.asm,DEC     A
961,961,963,040712,040712,or d,or d,or d,eval.asm,OR      D
962,962,964,040713,040713,exx,exx,exx,eval.asm,EXX
963,963,965,040714,040714,or e,or e,or e,eval.asm,OR      E
964,964,966,040715,040715,or d,or d,or d,eval.asm,OR      D
965,965,967,040716,040716,ret z,ret z,ret z,eval.asm,RET     Z               ;ARGUMENT=1
966,966,968,040717,040717,"ld b,$00","ld b,$00","ld b,$00",eval.asm,"LD      B,0             ;INTEGER MARKER"
967,967,969,040719,040719,"ld a,$0a","ld a,$0a","ld a,$00",eval.asm,"LD      A,10"
968,968,970,04071b,04071b,call $04206a,call $04209a,call $000000,eval.asm,CALL    FPP             ;MULTIPLY
969,969,971,04071f,04071f,"jp c,$043760","jp c,$043790","jp c,$000000",eval.asm,"JP      C,ERROR_"
970,970,972,040723,040723,call $040662,call $040662,call $000000,eval.asm,CALL    SFIX
971,971,973,040727,040727,jp $0403bb,jp $0403bb,jp $000000,eval.asm,JP      ADD1
972,972,974,04072b,04072b,call $040a1e,call $040a1e,call $000000,eval.asm,INSTR:			CALL    EXPRSC			; Get the first string expression
973,973,975,04072f,04072f,call $0409b4,call $0409b4,call $000000,eval.asm,CALL    PUSHS           	; Push the string onto the stack
974,974,976,040733,040733,call $040315,call $040315,call $000000,eval.asm,CALL    EXPRS           	; Get the second string expression
975,975,977,040737,040737,pop bc,pop bc,pop bc,eval.asm,"POP     BC			;  C: String length, B: Value of A before PUSHS was called"
976,976,978,040738,040738,"ld hl,$000000","ld hl,$000000","ld hl,$000000",eval.asm,"LD      HL,0"
977,977,979,04073c,04073c,"add hl,sp","add hl,sp","add hl,sp",eval.asm,"ADD     HL,SP           	; HL: Pointer to main string"
978,978,980,04073d,04073d,push bc,push bc,push bc,eval.asm,PUSH    BC              	;  C: Main string length
979,979,981,04073e,04073e,"ld b,e","ld b,e","ld b,e",eval.asm,"LD      B,E             	;  B: Sub-string length"
980,980,982,04073f,04073f,call $040a70,call $040a70,call $000000,eval.asm,CALL    NXT			; Skip whitespace
981,981,983,040743,040743,cp $2c,cp $2c,cp $00,eval.asm,"CP      ','			; Check if there is a comma for the third parameter"
982,982,984,040745,040745,"ld a,$00","ld a,$00","ld a,$00",eval.asm,"LD      A,0			;  A: Default start position in string"
983,983,985,040747,040747,"jr nz,$+$1c","jr nz,$+$1c","jr nz,$+$00",eval.asm,"JR      NZ,INSTR1		; No, so skip the next bit"
984,984,986,040749,040749,inc iy,inc iy,inc iy,eval.asm,INC     IY              	; Skip the comma
985,985,987,04074b,04074b,push bc,push bc,push bc,eval.asm,PUSH    BC              	; Save the lengths
986,986,988,04074c,04074c,push hl,push hl,push hl,eval.asm,PUSH    HL              	; Save the pointer to the main string
987,987,989,04074d,04074d,call $0409b4,call $0409b4,call $000000,eval.asm,CALL    PUSHS			; Push the string onto the stack
988,988,990,040751,040751,call $04030a,call $04030a,call $000000,eval.asm,CALL    EXPRI			; Get the third (numeric) parameter - the starting position
989,989,991,040755,040755,pop bc,pop bc,pop bc,eval.asm,"POP     BC			;  C: String length, B: Value of A before PUSHS was called (discarded)"
990,990,992,040756,040756,call $0409de,call $0409de,call $000000,eval.asm,CALL    POPS			; Pop the string off the stack
991,991,993,04075a,04075a,pop hl,pop hl,pop hl,eval.asm,POP     HL              	; Restore the pointer to the main string
992,992,994,04075b,04075b,pop bc,pop bc,pop bc,eval.asm,POP     BC              	; Restore the lengths
993,993,995,04075c,04075c,exx,exx,exx,eval.asm,EXX
994,994,996,04075d,04075d,"ld a,l","ld a,l","ld a,l",eval.asm,"LD      A,L			; A: The start position in the  string"
995,995,997,04075e,04075e,exx,exx,exx,eval.asm,EXX
996,996,998,04075f,04075f,or a,or a,or a,eval.asm,OR      A			; Set the flags
997,997,999,040760,040760,"jr z,$+$03","jr z,$+$03","jr z,$+$00",eval.asm,"JR      Z,INSTR1		; If it is zero, then skip"
998,998,1000,040762,040762,dec a,dec a,dec a,eval.asm,DEC     A
999,999,1001,040763,040763,"ld de,$044a00","ld de,$044a00","ld de,$000000",eval.asm,"INSTR1:			LD      DE,ACCS         	; DE: Pointer to the sub string"
1000,1000,1002,040767,040767,call $040785,call $040785,call $000000,eval.asm,CALL    SEARCH			; Do the search
1001,1001,1003,04076b,04076b,pop de,pop de,pop de,eval.asm,POP     DE
1002,1002,1004,04076c,04076c,"jr z,$+$05","jr z,$+$05","jr z,$+$00",eval.asm,"JR      Z,INSTR2        	; NB: Carry cleared"
1003,1003,1005,04076e,04076e,"sbc hl,hl","sbc hl,hl","sbc hl,hl",eval.asm,"SBC     HL,HL"
1004,1004,1006,040770,040770,"add hl,sp","add hl,sp","add hl,sp",eval.asm,"ADD     HL,SP"
1005,1005,1007,040771,040771,"sbc hl,sp","sbc hl,sp","sbc hl,sp",eval.asm,"INSTR2:			SBC     HL,SP"
1006,1006,1008,040773,040773,"ex de,hl","ex de,hl","ex de,hl",eval.asm,"EX      DE,HL"
1007,1007,1009,040774,040774,"ld a,l","ld a,l","ld a,l",eval.asm,"LD	A,L"
1008,1008,1010,040775,040775,"ld hl,$000000","ld hl,$000000","ld hl,$000000",eval.asm,"LD      HL,0"
1009,1009,1011,040779,040779,"ld l,a","ld l,a","ld l,a",eval.asm,"LD	L,A"
1010,1010,1012,04077a,04077a,"add hl,sp","add hl,sp","add hl,sp",eval.asm,"ADD     HL,SP"
1011,1011,1013,04077b,04077b,"ld sp,hl","ld sp,hl","ld sp,hl",eval.asm,"LD      SP,HL"
1012,1012,1014,04077c,04077c,"ex de,hl","ex de,hl","ex de,hl",eval.asm,"EX      DE,HL"
1013,1013,1015,04077d,04077d,call $040a2f,call $040a2f,call $000000,eval.asm,CALL    BRAKET			; Check for closing bracket
1014,1014,1016,040781,040781,jp $040581,jp $040581,jp $000000,eval.asm,JP      COUNT1			; Return a numeric integer
1015,1015,1017,040785,040785,push bc,push bc,push bc,eval.asm,SEARCH:			PUSH    BC			; Add the starting offset to HL
1016,1016,1018,040786,040786,"ld bc,$000000","ld bc,$000000","ld bc,$000000",eval.asm,"LD      BC,0"
1017,1017,1019,04078a,04078a,"ld c,a","ld c,a","ld c,a",eval.asm,"LD      C,A"
1018,1018,1020,04078b,04078b,"add hl,bc","add hl,bc","add hl,bc",eval.asm,"ADD     HL,BC           	; New start address"
1019,1019,1021,04078c,04078c,pop bc,pop bc,pop bc,eval.asm,POP     BC
1020,1020,1022,04078d,04078d,sub c,sub c,sub c,eval.asm,"SUB     C			; If the starting offset > main string length, then do nothing"
1021,1021,1023,04078e,04078e,"jr nc,$+$2e","jr nc,$+$2e","jr nc,$+$00",eval.asm,"JR      NC,SRCH4"
1022,1022,1024,040790,040790,neg,neg,neg,eval.asm,NEG
1023,1023,1025,040792,040792,"ld c,a","ld c,a","ld c,a",eval.asm,"LD      C,A             	; Remaining length"
1024,1024,1026,040793,040793,push bc,push bc,push bc,eval.asm,SRCH1:			PUSH    BC
1025,1025,1027,040794,040794,"ld a,c","ld a,c","ld a,c",eval.asm,"LD	A,C"
1026,1026,1028,040795,040795,"ld bc,$000000","ld bc,$000000","ld bc,$000000",eval.asm,"LD	BC,0"
1027,1027,1029,040799,040799,"ld c,a","ld c,a","ld c,a",eval.asm,"LD	C,A"
1028,1028,1030,04079a,04079a,"ld a,(de)","ld a,(de)","ld a,(de)",eval.asm,"LD      A,(DE)"
1029,1029,1031,04079b,04079b,cpir,cpir,cpir,eval.asm,CPIR                    	; Find the first character
1030,1030,1032,04079d,04079d,"ld a,c","ld a,c","ld a,c",eval.asm,"LD      A,C"
1031,1031,1033,04079e,04079e,pop bc,pop bc,pop bc,eval.asm,POP     BC
1032,1032,1034,04079f,04079f,"jr nz,$+$1d","jr nz,$+$1d","jr nz,$+$00",eval.asm,"JR      NZ,SRCH4"
1033,1033,1035,0407a1,0407a1,"ld c,a","ld c,a","ld c,a",eval.asm,"LD      C,A"
1034,1034,1036,0407a2,0407a2,dec b,dec b,dec b,eval.asm,DEC     B			; Bug fix
1035,1035,1037,0407a3,0407a3,cp b,cp b,cp b,eval.asm,CP      B			; Bug fix
1036,1036,1038,0407a4,0407a4,inc b,inc b,inc b,eval.asm,INC     B			; Bug fix
1037,1037,1039,0407a5,0407a5,"jr c,$+$17","jr c,$+$17","jr c,$+$00",eval.asm,"JR      C,SRCH4			; Bug fix"
1038,1038,1040,0407a7,0407a7,push bc,push bc,push bc,eval.asm,PUSH    BC
1039,1039,1041,0407a8,0407a8,push de,push de,push de,eval.asm,PUSH    DE
1040,1040,1042,0407a9,0407a9,push hl,push hl,push hl,eval.asm,PUSH    HL
1041,1041,1043,0407aa,0407aa,dec b,dec b,dec b,eval.asm,DEC     B
1042,1042,1044,0407ab,0407ab,"jr z,$+$0a","jr z,$+$0a","jr z,$+$00",eval.asm,"JR      Z,SRCH3         	; Found!"
1043,1043,1045,0407ad,0407ad,inc de,inc de,inc de,eval.asm,SRCH2:			INC     DE
1044,1044,1046,0407ae,0407ae,"ld a,(de)","ld a,(de)","ld a,(de)",eval.asm,"LD      A,(DE)"
1045,1045,1047,0407af,0407af,cp (hl),cp (hl),cp (hl),eval.asm,CP      (HL)
1046,1046,1048,0407b0,0407b0,"jr nz,$+$05","jr nz,$+$05","jr nz,$+$00",eval.asm,"JR      NZ,SRCH3"
1047,1047,1049,0407b2,0407b2,inc hl,inc hl,inc hl,eval.asm,INC     HL
1048,1048,1050,0407b3,0407b3,djnz $-$06,djnz $-$06,djnz $-$00,eval.asm,DJNZ    SRCH2
1049,1049,1051,0407b5,0407b5,pop hl,pop hl,pop hl,eval.asm,SRCH3:			POP     HL
1050,1050,1052,0407b6,0407b6,pop de,pop de,pop de,eval.asm,POP     DE
1051,1051,1053,0407b7,0407b7,pop bc,pop bc,pop bc,eval.asm,POP     BC
1052,1052,1054,0407b8,0407b8,"jr nz,$-$25","jr nz,$-$25","jr nz,$-$00",eval.asm,"JR      NZ,SRCH1"
1053,1053,1055,0407ba,0407ba,xor a,xor a,xor a,eval.asm,"XOR     A               	; Flags: Z, NC"
1054,1054,1056,0407bb,0407bb,ret,ret,ret,eval.asm,RET                     	; Found
1055,1055,1057,0407bc,0407bc,or $ff,or $ff,or $00,eval.asm,"SRCH4:			OR      0FFH            	; Flags: NZ, NC"
1056,1056,1058,0407be,0407be,ret,ret,ret,eval.asm,RET                     	; Not found
1057,1057,1059,0407bf,0407bf,call $040325,call $040325,call $000000,eval.asm,CHRS:			CALL    ITEMI
1058,1058,1060,0407c3,0407c3,exx,exx,exx,eval.asm,EXX
1059,1059,1061,0407c4,0407c4,"ld a,l","ld a,l","ld a,l",eval.asm,"LD      A,L"
1060,1060,1062,0407c5,0407c5,jr $+$10,jr $+$10,jr $+$00,eval.asm,JR      GET1
1061,1061,1063,0407c7,0407c7,call $040a70,call $040a70,call $000000,eval.asm,"GETS:			CALL	NXT		;NEW CODE FOR GET$(X,Y)"
1062,1062,1064,0407cb,0407cb,cp $28,cp $28,cp $00,eval.asm,CP	'('
1063,1063,1065,0407cd,0407cd,"jp z,$0443fc","jp z,$044432","jp z,$000000",eval.asm,"JP	Z, GETSCHR	;CALL FUNCTION IN PATCH.Z80"
1064,1064,1066,0407d1,0407d1,call $043f29,call $043f59,call $000000,eval.asm,CALL    OSRDCH
1065,1065,1067,0407d5,0407d5,scf,scf,scf,eval.asm,GET1:			SCF
1066,1066,1068,0407d6,0407d6,jr $+$0b,jr $+$0b,jr $+$00,eval.asm,JR      INKEY1
1067,1067,1069,0407d8,0407d8,call $040325,call $040325,call $000000,eval.asm,INKEYS:			CALL    ITEMI			; Fetch the argument
1068,1068,1070,0407dc,0407dc,exx,exx,exx,eval.asm,EXX
1069,1069,1071,0407dd,0407dd,call $043f32,call $043f62,call $000000,eval.asm,INKEY0:			CALL    OSKEY			; This is the entry point for INKEY(n)
1070,1070,1072,0407e1,0407e1,"ld de,$044a00","ld de,$044a00","ld de,$000000",eval.asm,"INKEY1:			LD      DE,ACCS			; Store the result in the string accumulator"
1071,1071,1073,0407e5,0407e5,"ld (de),a","ld (de),a","ld (de),a",eval.asm,"LD      (DE),A"
1072,1072,1074,0407e6,0407e6,"ld a,$80","ld a,$80","ld a,$00",eval.asm,"LD      A,80H"
1073,1073,1075,0407e8,0407e8,ret nc,ret nc,ret nc,eval.asm,RET     NC
1074,1074,1076,0407e9,0407e9,inc e,inc e,inc e,eval.asm,INC     E
1075,1075,1077,0407ea,0407ea,ret,ret,ret,eval.asm,RET
1076,1076,1078,0407eb,0407eb,"ld a,$1e","ld a,$1e","ld a,$00",eval.asm,"LD	A, function"
1077,1077,1079,0407ed,0407ed,rst.lis $08,rst.lis $08,rst.lis $00,eval.asm,RST.LIS	08h
1078,1078,1080,0407ef,0407ef,inc hl,inc hl,inc hl,eval.asm,INC	HL			; Index from 0
1079,1079,1081,0407f0,0407f0,"ld a,l","ld a,l","ld a,l",eval.asm,"LD	A, L			; Negate the LSB of the answer"
1080,1080,1082,0407f1,0407f1,neg,neg,neg,eval.asm,NEG
1081,1081,1083,0407f3,0407f3,"ld c,a","ld c,a","ld c,a",eval.asm,"LD	C, A			;  E: The positive keycode value"
1082,1082,1084,0407f4,0407f4,"ld a,$01","ld a,$01","ld a,$00",eval.asm,"LD	A, 1			; Throw an ""Out of range"" error"
1083,1083,1085,0407f6,0407f6,"jp m,$043760","jp m,$043790","jp m,$000000",eval.asm,"JP	M, ERROR_		; if the argument < - 128"
1084,1084,1086,0407fa,0407fa,"ld hl,$04081d","ld hl,$04081d","ld hl,$000000",eval.asm,"LD	HL, BITLOOKUP		; HL: The bit lookup table"
1085,1085,1087,0407fe,0407fe,"ld de,$000000","ld de,$000000","ld de,$000000",eval.asm,"LD	DE, 0"
1086,1086,1088,040802,040802,"ld a,c","ld a,c","ld a,c",eval.asm,"LD	A, C"
1087,1087,1089,040803,040803,and $07,and $07,and $00,eval.asm,AND	00000111b		; Just need the first three bits
1088,1088,1090,040805,040805,"ld e,a","ld e,a","ld e,a",eval.asm,"LD	E, A			; DE: The bit number"
1089,1089,1091,040806,040806,"add hl,de","add hl,de","add hl,de",eval.asm,"ADD	HL, DE"
1090,1090,1092,040807,040807,"ld b,(hl)","ld b,(hl)","ld b,(hl)",eval.asm,"LD	B, (HL)			;  B: The mask"
1091,1091,1093,040808,040808,"ld a,c","ld a,c","ld a,c",eval.asm,"LD	A, C			; Fetch the keycode again"
1092,1092,1094,040809,040809,and $78,and $78,and $00,eval.asm,AND	01111000b		; And divide by 8
1093,1093,1095,04080b,04080b,rrca,rrca,rrca,eval.asm,RRCA
1094,1094,1096,04080c,04080c,rrca,rrca,rrca,eval.asm,RRCA
1095,1095,1097,04080d,04080d,rrca,rrca,rrca,eval.asm,RRCA
1096,1096,1098,04080e,04080e,"ld e,a","ld e,a","ld e,a",eval.asm,"LD	E, A			; DE: The offset (the MSW has already been cleared previously)"
1097,1097,1099,04080f,04080f,"add ix,de","add ix,de","add ix,de",eval.asm,"ADD	IX, DE			; IX: The address"
1098,1098,1100,040811,040811,"ld a,b","ld a,b","ld a,b",eval.asm,"LD	A, B			;  B: The mask"
1099,1099,1101,040812,040812,and (ix),and (ix),and (ix),eval.asm,AND	(IX+0)			; Check whether the bit is set
1100,1100,1102,040815,040815,"jp z,$040993","jp z,$040993","jp z,$000000",eval.asm,"JP	Z, ZERO			; No, so return 0"
1101,1101,1103,040819,040819,jp $040605,jp $040605,jp $000000,eval.asm,JP	TRUE			; Otherwise return -1
1102,1102,1104,04081d,04081d,"ld bc,$080402","ld bc,$080402","ld bc,$000000",eval.asm,"BITLOOKUP:		DB	01h, 02h, 04h, 08h"
1103,1103,1105,040821,040821,djnz $+$22,djnz $+$22,djnz $+$00,eval.asm,"DB	10h, 20h, 40h, 80h"
1104,1104,1106,040823,040823,"add.sis a,b","add.sis a,b","add.sis a,b",eval.asm,
1105,1105,1107,040825,040825,call $040a1e,call $040a1e,call $000000,eval.asm,MIDS:			CALL    EXPRSC			; Get the first string expression
1106,1106,1108,040829,040829,call $0409b4,call $0409b4,call $000000,eval.asm,CALL    PUSHS           	; Push the string onto the stack from the string accumulator (ACCS)
1107,1107,1109,04082d,04082d,call $04030a,call $04030a,call $000000,eval.asm,CALL    EXPRI			; Get the second expression
1108,1108,1110,040831,040831,pop bc,pop bc,pop bc,eval.asm,"POP     BC			; C: String length, B: Value of A before PUSHS was called"
1109,1109,1111,040832,040832,call $0409de,call $0409de,call $000000,eval.asm,CALL    POPS			; Pop the string back off the stack to the string accumulator
1110,1110,1112,040836,040836,exx,exx,exx,eval.asm,EXX
1111,1111,1113,040837,040837,"ld a,l","ld a,l","ld a,l",eval.asm,"LD      A,L			; A: The start index"
1112,1112,1114,040838,040838,exx,exx,exx,eval.asm,EXX
1113,1113,1115,040839,040839,or a,or a,or a,eval.asm,"OR      A			; If the start index is 0, then we don't need to do the next bit"
1114,1114,1116,04083a,04083a,"jr z,$+$10","jr z,$+$10","jr z,$+$00",eval.asm,"JR      Z,MIDS1"
1115,1115,1117,04083c,04083c,dec a,dec a,dec a,eval.asm,DEC     A
1116,1116,1118,04083d,04083d,"ld l,a","ld l,a","ld l,a",eval.asm,"LD      L,A			; L: The start index - 1"
1117,1117,1119,04083e,04083e,sub e,sub e,sub e,eval.asm,SUB     E			; Subtract from the string length
1118,1118,1120,04083f,04083f,"ld e,$00","ld e,$00","ld e,$00",eval.asm,"LD      E,0			; Preemptively set the string length to 0"
1119,1119,1121,040841,040841,"jr nc,$+$09","jr nc,$+$09","jr nc,$+$00",eval.asm,"JR      NC,MIDS1		; If the first parameter is greater than the string length, then do nothing"
1120,1120,1122,040843,040843,neg,neg,neg,eval.asm,NEG				; Negate the answer and
1121,1121,1123,040845,040845,"ld c,a","ld c,a","ld c,a",eval.asm,"LD      C,A			; C: Number of bytes to copy"
1122,1122,1124,040846,040846,call $040889,call $040889,call $000000,eval.asm,CALL    RIGHT1			; We can do a RIGHT$ at this point with the result
1123,1123,1125,04084a,04084a,call $040a70,call $040a70,call $000000,eval.asm,MIDS1:			CALL    NXT			; Skip whitespace
1124,1124,1126,04084e,04084e,cp $2c,cp $2c,cp $00,eval.asm,"CP      ','			; Check for a comma"
1125,1125,1127,040850,040850,inc iy,inc iy,inc iy,eval.asm,INC     IY			; Advance to the next character in the BASIC line
1126,1126,1128,040852,040852,"jr z,$+$0f","jr z,$+$0f","jr z,$+$00",eval.asm,"JR      Z,LEFT1			; If there is a comma then we do a LEFT$ on the remainder"
1127,1127,1129,040854,040854,dec iy,dec iy,dec iy,eval.asm,DEC     IY			; Restore the BASIC program pointer
1128,1128,1130,040856,040856,call $040a2f,call $040a2f,call $000000,eval.asm,CALL    BRAKET			; Check for a bracket
1129,1129,1131,04085a,04085a,"ld a,$80","ld a,$80","ld a,$00",eval.asm,"LD      A,80H			; String marker"
1130,1130,1132,04085c,04085c,ret,ret,ret,eval.asm,RET
1131,1131,1133,04085d,04085d,call $040a1e,call $040a1e,call $000000,eval.asm,LEFTS:			CALL    EXPRSC			; Get the first string expression
1132,1132,1134,040861,040861,call $0409b4,call $0409b4,call $000000,eval.asm,LEFT1:			CALL    PUSHS           	; Push the string onto the stack from the string accumulator (ACCS)
1133,1133,1135,040865,040865,call $04030a,call $04030a,call $000000,eval.asm,CALL    EXPRI			; Get the second expression
1134,1134,1136,040869,040869,pop bc,pop bc,pop bc,eval.asm,"POP     BC			; C: String length, B: Value of A before PUSHS was called"
1135,1135,1137,04086a,04086a,call $0409de,call $0409de,call $000000,eval.asm,CALL    POPS			; Pop the string back off the stack to the string accumulator (ACCS)
1136,1136,1138,04086e,04086e,call $040a2f,call $040a2f,call $000000,eval.asm,CALL    BRAKET			; Check for closing bracket
1137,1137,1139,040872,040872,exx,exx,exx,eval.asm,EXX
1138,1138,1140,040873,040873,"ld a,l","ld a,l","ld a,l",eval.asm,"LD      A,L			; L: The second parameter"
1139,1139,1141,040874,040874,exx,exx,exx,eval.asm,EXX
1140,1140,1142,040875,040875,cp e,cp e,cp e,eval.asm,CP      E			; Compare with the string length
1141,1141,1143,040876,040876,"jr nc,$+$04","jr nc,$+$04","jr nc,$+$00",eval.asm,"JR      NC,LEFT3		; If it is greater than or equal then do nothing"
1142,1142,1144,040878,040878,"ld l,e","ld l,e","ld l,e",eval.asm,"LD      L,E             	; For RIGHTS, no effect in LEFTS"
1143,1143,1145,040879,040879,"ld e,a","ld e,a","ld e,a",eval.asm,"LEFT2:			LD      E,A			; E: The new length of string"
1144,1144,1146,04087a,04087a,"ld a,$80","ld a,$80","ld a,$00",eval.asm,"LEFT3:			LD      A,80H           	; String marker"
1145,1145,1147,04087c,04087c,ret,ret,ret,eval.asm,RET
1146,1146,1148,04087d,04087d,call $04085d,call $04085d,call $000000,eval.asm,RIGHTS:			CALL    LEFTS			; Call LEFTS to get the string
1147,1147,1149,040881,040881,ret nc,ret nc,ret nc,eval.asm,RET     NC			; Do nothing if the second parameter is >= string length
1148,1148,1150,040882,040882,inc e,inc e,inc e,eval.asm,INC     E			; Check for a zero length string
1149,1149,1151,040883,040883,dec e,dec e,dec e,eval.asm,DEC     E
1150,1150,1152,040884,040884,ret z,ret z,ret z,eval.asm,"RET     Z			; Yes, so do nothing"
1151,1151,1153,040885,040885,"ld c,e","ld c,e","ld c,e",eval.asm,"LD      C,E			;  C: Number of bytes to copy"
1152,1152,1154,040886,040886,"ld a,l","ld a,l","ld a,l",eval.asm,"LD      A,L"
1153,1153,1155,040887,040887,sub e,sub e,sub e,eval.asm,SUB     E
1154,1154,1156,040888,040888,"ld l,a","ld l,a","ld l,a",eval.asm,"LD      L,A			;  L: Index into the string"
1155,1155,1157,040889,040889,"ld a,c","ld a,c","ld a,c",eval.asm,"RIGHT1:			LD	A,C"
1156,1156,1158,04088a,04088a,"ld bc,$000000","ld bc,$000000","ld bc,$000000",eval.asm,"LD	BC,0"
1157,1157,1159,04088e,04088e,"ld c,a","ld c,a","ld c,a",eval.asm,"LD	C,A			; BC: Number of bytes to copy (with top word cleared)"
1158,1158,1160,04088f,04088f,"ld a,l","ld a,l","ld a,l",eval.asm,"LD	A,L"
1159,1159,1161,040890,040890,"ld hl,$044a00","ld hl,$044a00","ld hl,$000000",eval.asm,"LD	HL,ACCS"
1160,1160,1162,040894,040894,"ld l,a","ld l,a","ld l,a",eval.asm,"LD	L,A			; HL: Source (in ACCS)"
1161,1161,1163,040895,040895,"ld de,$044a00","ld de,$044a00","ld de,$000000",eval.asm,"LD      DE,ACCS			; DE: Destination (start of ACCS)"
1162,1162,1164,040899,040899,ldir,ldir,ldir,eval.asm,LDIR                    	; Copy
1163,1163,1165,04089b,04089b,"ld a,$80","ld a,$80","ld a,$00",eval.asm,"LD      A,80H			; String marker"
1164,1164,1166,04089d,04089d,ret,ret,ret,eval.asm,RET
1165,1165,1167,04089e,04089e,call $04030a,call $04030a,call $000000,eval.asm,STRING_:		CALL    EXPRI			; Get number of times to replicate
1166,1166,1168,0408a2,0408a2,call $040a22,call $040a22,call $000000,eval.asm,CALL    COMMA			; Check for comma
1167,1167,1169,0408a6,0408a6,exx,exx,exx,eval.asm,EXX
1168,1168,1170,0408a7,0408a7,"ld a,l","ld a,l","ld a,l",eval.asm,"LD      A,L			; L: Number of iterations of string"
1169,1169,1171,0408a8,0408a8,exx,exx,exx,eval.asm,EXX
1170,1170,1172,0408a9,0408a9,push af,push af,push af,eval.asm,PUSH    AF
1171,1171,1173,0408aa,0408aa,call $040315,call $040315,call $000000,eval.asm,CALL    EXPRS			; Get the string
1172,1172,1174,0408ae,0408ae,call $040a2f,call $040a2f,call $000000,eval.asm,CALL    BRAKET			; Check for closing bracket
1173,1173,1175,0408b2,0408b2,pop af,pop af,pop af,eval.asm,POP     AF			; A: Number of iterations of string
1174,1174,1176,0408b3,0408b3,or a,or a,or a,eval.asm,OR      A			; Set flags
1175,1175,1177,0408b4,0408b4,"jr z,$-$3b","jr z,$-$3b","jr z,$-$00",eval.asm,"JR      Z,LEFT2         	; If iterations is 0, then this will return an empty string"
1176,1176,1178,0408b6,0408b6,dec a,dec a,dec a,eval.asm,DEC     A
1177,1177,1179,0408b7,0408b7,"ld c,a","ld c,a","ld c,a",eval.asm,"LD      C,A			; C: Loop counter"
1178,1178,1180,0408b8,0408b8,"ld a,$80","ld a,$80","ld a,$00",eval.asm,"LD      A,80H			; String marker"
1179,1179,1181,0408ba,0408ba,ret z,ret z,ret z,eval.asm,RET     Z
1180,1180,1182,0408bb,0408bb,inc e,inc e,inc e,eval.asm,INC     E			; Check for empty string
1181,1181,1183,0408bc,0408bc,dec e,dec e,dec e,eval.asm,DEC     E
1182,1182,1184,0408bd,0408bd,ret z,ret z,ret z,eval.asm,RET     Z              		; And return
1183,1183,1185,0408be,0408be,"ld b,e","ld b,e","ld b,e",eval.asm,"LD      B,E			; B: String length tally"
1184,1184,1186,0408bf,0408bf,"ld hl,$044a00","ld hl,$044a00","ld hl,$000000",eval.asm,"LD	HL,ACCS"
1185,1185,1187,0408c3,0408c3,push bc,push bc,push bc,eval.asm,STRIN1:			PUSH    BC
1186,1186,1188,0408c4,0408c4,"ld a,(hl)","ld a,(hl)","ld a,(hl)",eval.asm,"STRIN2:			LD      A,(HL)"
1187,1187,1189,0408c5,0408c5,inc hl,inc hl,inc hl,eval.asm,INC     HL
1188,1188,1190,0408c6,0408c6,"ld (de),a","ld (de),a","ld (de),a",eval.asm,"LD      (DE),A"
1189,1189,1191,0408c7,0408c7,inc e,inc e,inc e,eval.asm,INC     E
1190,1190,1192,0408c8,0408c8,"ld a,$13","ld a,$13","ld a,$00",eval.asm,"LD      A,19"
1191,1191,1193,0408ca,0408ca,"jp z,$043760","jp z,$043790","jp z,$000000",eval.asm,"JP      Z,ERROR_         	; Throw a ""String too long"" error"
1192,1192,1194,0408ce,0408ce,djnz $-$0a,djnz $-$0a,djnz $-$00,eval.asm,DJNZ    STRIN2
1193,1193,1195,0408d0,0408d0,pop bc,pop bc,pop bc,eval.asm,POP     BC
1194,1194,1196,0408d1,0408d1,dec c,dec c,dec c,eval.asm,DEC     C
1195,1195,1197,0408d2,0408d2,"jr nz,$-$0f","jr nz,$-$0f","jr nz,$-$00",eval.asm,"JR      NZ,STRIN1"
1196,1196,1198,0408d4,0408d4,"ld a,$80","ld a,$80","ld a,$00",eval.asm,"LD      A,80H"
1197,1197,1199,0408d6,0408d6,ret,ret,ret,eval.asm,RET
1198,1198,1200,0408d7,0408d7,"ld a,c","ld a,c","ld a,c",eval.asm,"SWAP:			LD      A,C"
1199,1199,1201,0408d8,0408d8,"ld c,b","ld c,b","ld c,b",eval.asm,"LD      C,B"
1200,1200,1202,0408d9,0408d9,"ld b,a","ld b,a","ld b,a",eval.asm,"LD      B,A"
1201,1201,1203,0408da,0408da,"ex de,hl","ex de,hl","ex de,hl",eval.asm,"EX      DE,HL"
1202,1202,1204,0408db,0408db,exx,exx,exx,eval.asm,EXX
1203,1203,1205,0408dc,0408dc,"ex de,hl","ex de,hl","ex de,hl",eval.asm,"EX      DE,HL"
1204,1204,1206,0408dd,0408dd,exx,exx,exx,eval.asm,EXX
1205,1205,1207,0408de,0408de,ret,ret,ret,eval.asm,RET
1206,1206,1208,0408df,0408df,"ld a,h","ld a,h","ld a,h",eval.asm,"TEST:			LD      A,H"
1207,1207,1209,0408e0,0408e0,or l,or l,or l,eval.asm,OR      L
1208,1208,1210,0408e1,0408e1,exx,exx,exx,eval.asm,EXX
1209,1209,1211,0408e2,0408e2,or h,or h,or h,eval.asm,OR      H
1210,1210,1212,0408e3,0408e3,or l,or l,or l,eval.asm,OR      L
1211,1211,1213,0408e4,0408e4,exx,exx,exx,eval.asm,EXX
1212,1212,1214,0408e5,0408e5,ret,ret,ret,eval.asm,RET
1213,1213,1215,0408e6,0408e6,exx,exx,exx,eval.asm,DECODE:			EXX
1214,1214,1216,0408e7,0408e7,"ld hl,$000000","ld hl,$000000","ld hl,$000000",eval.asm,"LD	HL, 0"
1215,1215,1217,0408eb,0408eb,"ld a,(iy)","ld a,(iy)","ld a,(iy)",eval.asm,"LD      A,(IY)"
1216,1216,1218,0408ee,0408ee,inc iy,inc iy,inc iy,eval.asm,INC     IY
1217,1217,1219,0408f0,0408f0,rla,rla,rla,eval.asm,RLA
1218,1218,1220,0408f1,0408f1,rla,rla,rla,eval.asm,RLA
1219,1219,1221,0408f2,0408f2,"ld h,a","ld h,a","ld h,a",eval.asm,"LD      H,A"
1220,1220,1222,0408f3,0408f3,and $c0,and $c0,and $00,eval.asm,AND     0C0H
1221,1221,1223,0408f5,0408f5,xor (iy),xor (iy),xor (iy),eval.asm,XOR     (IY)
1222,1222,1224,0408f8,0408f8,inc iy,inc iy,inc iy,eval.asm,INC     IY
1223,1223,1225,0408fa,0408fa,"ld l,a","ld l,a","ld l,a",eval.asm,"LD      L,A"
1224,1224,1226,0408fb,0408fb,"ld a,h","ld a,h","ld a,h",eval.asm,"LD      A,H"
1225,1225,1227,0408fc,0408fc,rla,rla,rla,eval.asm,RLA
1226,1226,1228,0408fd,0408fd,rla,rla,rla,eval.asm,RLA
1227,1227,1229,0408fe,0408fe,and $c0,and $c0,and $00,eval.asm,AND     0C0H
1228,1228,1230,040900,040900,xor (iy),xor (iy),xor (iy),eval.asm,XOR     (IY)
1229,1229,1231,040903,040903,inc iy,inc iy,inc iy,eval.asm,INC     IY
1230,1230,1232,040905,040905,"ld h,a","ld h,a","ld h,a",eval.asm,"LD      H,A"
1231,1231,1233,040906,040906,exx,exx,exx,eval.asm,EXX
1232,1232,1234,040907,040907,"ld hl,$000000","ld hl,$000000","ld hl,$000000",eval.asm,"LD	HL, 0"
1233,1233,1235,04090b,04090b,"ld c,l","ld c,l","ld c,l",eval.asm,"LD	C, L"
1234,1234,1236,04090c,04090c,ret,ret,ret,eval.asm,RET
1235,1235,1237,04090d,04090d,inc iy,inc iy,inc iy,eval.asm,HEXSTS:			INC     IY              ;SKIP TILDE
1236,1236,1238,04090f,04090f,call $04031d,call $04031d,call $000000,eval.asm,CALL    ITEMN
1237,1237,1239,040913,040913,call $04091a,call $04091a,call $000000,eval.asm,CALL    HEXSTR
1238,1238,1240,040917,040917,"ld a,$80","ld a,$80","ld a,$00",eval.asm,"LD      A,80H"
1239,1239,1241,040919,040919,ret,ret,ret,eval.asm,RET
1240,1240,1242,04091a,04091a,call $040662,call $040662,call $000000,eval.asm,HEXSTR:			CALL    SFIX
1241,1241,1243,04091e,04091e,"ld bc,$000008","ld bc,$000008","ld bc,$000000",eval.asm,"LD      BC,8"
1242,1242,1244,040922,040922,"ld de,$044a00","ld de,$044a00","ld de,$000000",eval.asm,"LD      DE,ACCS"
1243,1243,1245,040926,040926,push bc,push bc,push bc,eval.asm,HEXST1:			PUSH    BC
1244,1244,1246,040927,040927,"ld b,$04","ld b,$04","ld b,$00",eval.asm,"LD      B,4"
1245,1245,1247,040929,040929,xor a,xor a,xor a,eval.asm,XOR     A
1246,1246,1248,04092a,04092a,exx,exx,exx,eval.asm,HEXST2:			EXX
1247,1247,1249,04092b,04092b,"add.sil hl,hl","add.sil hl,hl","add.sil hl,hl",eval.asm,"ADD.S	HL,HL"
1248,1248,1250,04092d,04092d,exx,exx,exx,eval.asm,EXX
1249,1249,1251,04092e,04092e,"adc.sil hl,hl","adc.sil hl,hl","adc.sil hl,hl",eval.asm,"ADC.S	HL,HL"
1250,1250,1252,040931,040931,rla,rla,rla,eval.asm,RLA
1251,1251,1253,040932,040932,djnz $-$08,djnz $-$08,djnz $-$00,eval.asm,DJNZ    HEXST2
1252,1252,1254,040934,040934,pop bc,pop bc,pop bc,eval.asm,POP     BC
1253,1253,1255,040935,040935,dec c,dec c,dec c,eval.asm,DEC     C
1254,1254,1256,040936,040936,ret m,ret m,ret m,eval.asm,RET     M
1255,1255,1257,040937,040937,"jr z,$+$08","jr z,$+$08","jr z,$+$00",eval.asm,"JR      Z,HEXST3"
1256,1256,1258,040939,040939,or a,or a,or a,eval.asm,OR      A
1257,1257,1259,04093a,04093a,"jr nz,$+$05","jr nz,$+$05","jr nz,$+$00",eval.asm,"JR      NZ,HEXST3"
1258,1258,1260,04093c,04093c,cp b,cp b,cp b,eval.asm,CP      B
1259,1259,1261,04093d,04093d,"jr z,$-$17","jr z,$-$17","jr z,$-$00",eval.asm,"JR      Z,HEXST1"
1260,1260,1262,04093f,04093f,"add a,$90","add a,$90","add a,$00",eval.asm,"HEXST3:			ADD     A,90H"
1261,1261,1263,040941,040941,daa,daa,daa,eval.asm,DAA
1262,1262,1264,040942,040942,"adc a,$40","adc a,$40","adc a,$00",eval.asm,"ADC     A,40H"
1263,1263,1265,040944,040944,daa,daa,daa,eval.asm,DAA
1264,1264,1266,040945,040945,"ld (de),a","ld (de),a","ld (de),a",eval.asm,"LD      (DE),A"
1265,1265,1267,040946,040946,inc de,inc de,inc de,eval.asm,INC     DE
1266,1266,1268,040947,040947,"ld b,a","ld b,a","ld b,a",eval.asm,"LD      B,A"
1267,1267,1269,040948,040948,jr $-$22,jr $-$22,jr $-$00,eval.asm,JR      HEXST1
1268,1268,1270,04094a,04094a,call $040a70,call $040a70,call $000000,eval.asm,STRS:			CALL    NXT
1269,1269,1271,04094e,04094e,cp $7e,cp $7e,cp $00,eval.asm,CP      '~'
1270,1270,1272,040950,040950,"jr z,$-$43","jr z,$-$43","jr z,$-$00",eval.asm,"JR      Z,HEXSTS"
1271,1271,1273,040952,040952,call $04031d,call $04031d,call $000000,eval.asm,CALL    ITEMN
1272,1272,1274,040956,040956,"ld ix,$044c00","ld ix,$044c00","ld ix,$000000",eval.asm,"LD      IX,STAVAR"
1273,1273,1275,04095b,04095b,"ld a,(ix+$03)","ld a,(ix+$03)","ld a,(ix+$00)",eval.asm,"LD      A,(IX+3)"
1274,1274,1276,04095e,04095e,or a,or a,or a,eval.asm,OR      A
1275,1275,1277,04095f,04095f,"ld ix,$04098c","ld ix,$04098c","ld ix,$000000",eval.asm,"LD      IX,G9-1         ;G9 FORMAT"
1276,1276,1278,040964,040964,"jr z,$+$07","jr z,$+$07","jr z,$+$00",eval.asm,"JR      Z,STR0"
1277,1277,1279,040966,040966,"ld ix,$044c00","ld ix,$044c00","ld ix,$000000",eval.asm,"STR:			LD      IX,STAVAR"
1278,1278,1280,04096b,04096b,"ld de,$044a00","ld de,$044a00","ld de,$000000",eval.asm,"STR0:			LD      DE,ACCS"
1279,1279,1281,04096f,04096f,"ld a,$25","ld a,$25","ld a,$00",eval.asm,"LD      A,37"
1280,1280,1282,040971,040971,call $04206a,call $04209a,call $000000,eval.asm,CALL    FPP
1281,1281,1283,040975,040975,"jp c,$043760","jp c,$043790","jp c,$000000",eval.asm,"JP      C,ERROR_"
1282,1282,1284,040979,040979,"bit 0,(ix+$02)","bit 0,(ix+$02)","bit 0,(ix+$00)",eval.asm,"BIT     0,(IX+2)"
1283,1283,1285,04097d,04097d,"ld a,$80","ld a,$80","ld a,$00",eval.asm,"STR1:			LD      A,80H           ;STRING MARKER"
1284,1284,1286,04097f,04097f,ret z,ret z,ret z,eval.asm,RET     Z
1285,1285,1287,040980,040980,"ld a,c","ld a,c","ld a,c",eval.asm,"LD      A,C"
1286,1286,1288,040981,040981,"add a,$04","add a,$04","add a,$00",eval.asm,"ADD     A,4"
1287,1287,1289,040983,040983,cp e,cp e,cp e,eval.asm,STR2:			CP      E
1288,1288,1290,040984,040984,"jr z,$-$07","jr z,$-$07","jr z,$-$00",eval.asm,"JR      Z,STR1"
1289,1289,1291,040986,040986,"ex de,hl","ex de,hl","ex de,hl",eval.asm,"EX      DE,HL"
1290,1290,1292,040987,040987,"ld (hl),$20","ld (hl),$20","ld (hl),$00",eval.asm,"LD      (HL),' '        ;TRAILING SPACE"
1291,1291,1293,040989,040989,inc hl,inc hl,inc hl,eval.asm,INC     HL
1292,1292,1294,04098a,04098a,"ex de,hl","ex de,hl","ex de,hl",eval.asm,"EX      DE,HL"
1293,1293,1295,04098b,04098b,jr $-$08,jr $-$08,jr $-$00,eval.asm,JR      STR2
1294,1294,1296,04098d,04098d,"add hl,bc","add hl,bc","add hl,bc",eval.asm,G9:			DW    9
1295,1295,1297,04098e,04098e,nop,nop,nop,eval.asm,
1296,1296,1298,04098f,04098f,call $04099d,call $04099d,call $000000,eval.asm,SCP:			CALL	SCP0
1297,1297,1299,040993,040993,"ld a,$00","ld a,$00","ld a,$00",eval.asm,"ZERO:			LD      A,0"
1298,1298,1300,040995,040995,exx,exx,exx,eval.asm,EXX
1299,1299,1301,040996,040996,"ld h,a","ld h,a","ld h,a",eval.asm,"LD      H,A"
1300,1300,1302,040997,040997,"ld l,a","ld l,a","ld l,a",eval.asm,"LD      L,A"
1301,1301,1303,040998,040998,exx,exx,exx,eval.asm,EXX
1302,1302,1304,040999,040999,"ld h,a","ld h,a","ld h,a",eval.asm,"LD      H,A"
1303,1303,1305,04099a,04099a,"ld l,a","ld l,a","ld l,a",eval.asm,"LD      L,A"
1304,1304,1306,04099b,04099b,"ld c,a","ld c,a","ld c,a",eval.asm,"LD      C,A"
1305,1305,1307,04099c,04099c,ret,ret,ret,eval.asm,RET
1306,1306,1308,04099d,04099d,inc b,inc b,inc b,eval.asm,SCP0:			INC     B
1307,1307,1309,04099e,04099e,inc c,inc c,inc c,eval.asm,INC     C
1308,1308,1310,04099f,04099f,dec b,dec b,dec b,eval.asm,SCP1:			DEC     B
1309,1309,1311,0409a0,0409a0,"jr z,$+$0c","jr z,$+$0c","jr z,$+$00",eval.asm,"JR      Z,SCP2"
1310,1310,1312,0409a2,0409a2,dec c,dec c,dec c,eval.asm,DEC     C
1311,1311,1313,0409a3,0409a3,"jr z,$+$0e","jr z,$+$0e","jr z,$+$00",eval.asm,"JR      Z,SCP3"
1312,1312,1314,0409a5,0409a5,"ld a,(de)","ld a,(de)","ld a,(de)",eval.asm,"LD      A,(DE)"
1313,1313,1315,0409a6,0409a6,cp (hl),cp (hl),cp (hl),eval.asm,CP      (HL)
1314,1314,1316,0409a7,0409a7,ret nz,ret nz,ret nz,eval.asm,RET     NZ
1315,1315,1317,0409a8,0409a8,inc de,inc de,inc de,eval.asm,INC     DE
1316,1316,1318,0409a9,0409a9,inc hl,inc hl,inc hl,eval.asm,INC     HL
1317,1317,1319,0409aa,0409aa,jr $-$0b,jr $-$0b,jr $-$00,eval.asm,JR      SCP1
1318,1318,1320,0409ac,0409ac,or a,or a,or a,eval.asm,SCP2:			OR      A
1319,1319,1321,0409ad,0409ad,dec c,dec c,dec c,eval.asm,DEC     C
1320,1320,1322,0409ae,0409ae,ret z,ret z,ret z,eval.asm,RET     Z
1321,1321,1323,0409af,0409af,scf,scf,scf,eval.asm,SCF
1322,1322,1324,0409b0,0409b0,ret,ret,ret,eval.asm,RET
1323,1323,1325,0409b1,0409b1,or a,or a,or a,eval.asm,SCP3:			OR      A
1324,1324,1326,0409b2,0409b2,inc c,inc c,inc c,eval.asm,INC     C
1325,1325,1327,0409b3,0409b3,ret,ret,ret,eval.asm,RET
1326,1326,1328,0409b4,0409b4,call $04164f,call $041679,call $000000,eval.asm,PUSHS:			CALL    CHECK			; Check if there is sufficient space on the stack
1327,1327,1329,0409b8,0409b8,pop ix,pop ix,pop ix,eval.asm,POP     IX              	; IX: Return address
1328,1328,1330,0409ba,0409ba,or a,or a,or a,eval.asm,OR      A               	; Clear the carry flag
1329,1329,1331,0409bb,0409bb,"ld bc,$000000","ld bc,$000000","ld bc,$000000",eval.asm,"LD	BC,0			; BC: Length of the string"
1330,1330,1332,0409bf,0409bf,"ld c,e","ld c,e","ld c,e",eval.asm,"LD	C,E"
1331,1331,1333,0409c0,0409c0,"ld hl,$044a00","ld hl,$044a00","ld hl,$000000",eval.asm,"LD      HL,ACCS			; HL: Pointer to the string accumulator"
1332,1332,1334,0409c4,0409c4,"ld de,$044a00","ld de,$044a00","ld de,$000000",eval.asm,"LD	DE,ACCS"
1333,1333,1335,0409c8,0409c8,"ld e,c","ld e,c","ld e,c",eval.asm,"LD	E,C 			; DE: Pointer to the end of the string in the accumulator"
1334,1334,1336,0409c9,0409c9,"sbc hl,de","sbc hl,de","sbc hl,de",eval.asm,"SBC     HL,DE			; HL: Number of bytes to reserve on the stack (a negative number)"
1335,1335,1337,0409cb,0409cb,"add hl,sp","add hl,sp","add hl,sp",eval.asm,"ADD     HL,SP			; Grow the stack"
1336,1336,1338,0409cc,0409cc,"ld sp,hl","ld sp,hl","ld sp,hl",eval.asm,"LD      SP,HL"
1337,1337,1339,0409cd,0409cd,"ld d,a","ld d,a","ld d,a",eval.asm,"LD      D,A			;  D: This needs to be set to A for some functions"
1338,1338,1340,0409ce,0409ce,push de,push de,push de,eval.asm,PUSH 	DE ; ADDED FROM BINARY
1339,1339,1341,0409cf,0409cf,"jr z,$+$0d","jr z,$+$0d","jr z,$+$00",eval.asm,"JR      Z,PUSHS1        	; Is it zero length?"
1340,1340,1342,0409d1,0409d1,"ld de,$044a00","ld de,$044a00","ld de,$000000",eval.asm,"LD      DE,ACCS			; DE: Destination"
1341,1341,1343,0409d5,0409d5,"ex de,hl","ex de,hl","ex de,hl",eval.asm,"EX      DE,HL			; HL: Destination, DE: Address on stack"
1342,1342,1344,0409d6,0409d6,ldir,ldir,ldir,eval.asm,LDIR	                    	; Copy to stack
1343,1343,1345,0409d8,0409d8,call $04164f,call $041679,call $000000,eval.asm,CALL    CHECK			; Final check to see if there is sufficient space on the stack
1344,1344,1346,0409dc,0409dc,jp (ix),jp (ix),jp (ix),eval.asm,"PUSHS1:			JP      (IX)            	; Effectively ""RET"" (IX contains the return address)"
1345,1345,1347,0409de,0409de,pop ix,pop ix,pop ix,eval.asm,POPS:			POP     IX              	; IX: Return address
1346,1346,1348,0409e0,0409e0,"ld l,c","ld l,c","ld l,c",eval.asm,"LD	L,C			; Temporarily store string length in L"
1347,1347,1349,0409e1,0409e1,"ld bc,$000000","ld bc,$000000","ld bc,$000000",eval.asm,"LD	BC,0"
1348,1348,1350,0409e5,0409e5,"ld c,l","ld c,l","ld c,l",eval.asm,"LD	C,L			; BC: Number of bytes to copy"
1349,1349,1351,0409e6,0409e6,"ld hl,$000000","ld hl,$000000","ld hl,$000000",eval.asm,"LD      HL,0			; HL: 0"
1350,1350,1352,0409ea,0409ea,"add hl,sp","add hl,sp","add hl,sp",eval.asm,"ADD     HL,SP			; HL: Stack address"
1351,1351,1353,0409eb,0409eb,"ld de,$044a00","ld de,$044a00","ld de,$000000",eval.asm,"LD      DE,ACCS			; DE: Destination"
1352,1352,1354,0409ef,0409ef,inc c,inc c,inc c,eval.asm,INC     C			; Quick check to see if this is a zero length string
1353,1353,1355,0409f0,0409f0,dec c,dec c,dec c,eval.asm,DEC     C
1354,1354,1356,0409f1,0409f1,"jr z,$+$04","jr z,$+$04","jr z,$+$00",eval.asm,"JR      Z,POPS1         	; Yes it is, so skip"
1355,1355,1357,0409f3,0409f3,ldir,ldir,ldir,eval.asm,"LDIR                    	; No, so copy from the stack"
1356,1356,1358,0409f5,0409f5,"ld sp,hl","ld sp,hl","ld sp,hl",eval.asm,"POPS1:			LD      SP,HL			; Shrink the stack"
1357,1357,1359,0409f6,0409f6,jp (ix),jp (ix),jp (ix),eval.asm,"JP      (IX)            	; Effectively ""RET"" (IX contains the return address)"
1358,1358,1360,0409f8,0409f8,"ld a,(iy)","ld a,(iy)","ld a,(iy)",eval.asm,"HEXDIG:			LD      A,(IY)"
1359,1359,1361,0409fb,0409fb,cp $30,cp $30,cp $00,eval.asm,CP      '0'
1360,1360,1362,0409fd,0409fd,ret c,ret c,ret c,eval.asm,RET     C
1361,1361,1363,0409fe,0409fe,cp $3a,cp $3a,cp $00,eval.asm,CP      '9'+1
1362,1362,1364,040a00,040a00,ccf,ccf,ccf,eval.asm,CCF
1363,1363,1365,040a01,040a01,ret nc,ret nc,ret nc,eval.asm,RET     NC
1364,1364,1366,040a02,040a02,cp $41,cp $41,cp $00,eval.asm,CP      'A'
1365,1365,1367,040a04,040a04,ret c,ret c,ret c,eval.asm,RET     C
1366,1366,1368,040a05,040a05,sub $37,sub $37,sub $00,eval.asm,SUB     'A'-10
1367,1367,1369,040a07,040a07,cp $10,cp $10,cp $00,eval.asm,CP      16
1368,1368,1370,040a09,040a09,ccf,ccf,ccf,eval.asm,CCF
1369,1369,1371,040a0a,040a0a,ret,ret,ret,eval.asm,RET
1370,1370,1372,040a0b,040a0b,"ld a,(iy)","ld a,(iy)","ld a,(iy)",eval.asm,"BINDIG:			LD	A,(IY)"
1371,1371,1373,040a0e,040a0e,cp $30,cp $30,cp $00,eval.asm,CP	'0'
1372,1372,1374,040a10,040a10,ret c,ret c,ret c,eval.asm,RET	C
1373,1373,1375,040a11,040a11,cp $32,cp $32,cp $00,eval.asm,CP	'1'+1
1374,1374,1376,040a13,040a13,ccf,ccf,ccf,eval.asm,CCF
1375,1375,1377,040a14,040a14,ret,ret,ret,eval.asm,RET
1376,1376,1378,040a15,040a15,cp $3e,cp $3e,cp $00,eval.asm,RELOP?:			CP      '>'
1377,1377,1379,040a17,040a17,ret nc,ret nc,ret nc,eval.asm,RET     NC
1378,1378,1380,040a18,040a18,cp $3d,cp $3d,cp $00,eval.asm,CP      '='
1379,1379,1381,040a1a,040a1a,ret nc,ret nc,ret nc,eval.asm,RET     NC
1380,1380,1382,040a1b,040a1b,cp $3c,cp $3c,cp $00,eval.asm,CP      '<'
1381,1381,1383,040a1d,040a1d,ret,ret,ret,eval.asm,RET
1382,1382,1384,040a1e,040a1e,call $040315,call $040315,call $000000,eval.asm,EXPRSC:			CALL    EXPRS
1383,1383,1385,040a22,040a22,call $040a70,call $040a70,call $000000,eval.asm,COMMA:			CALL    NXT
1384,1384,1386,040a26,040a26,inc iy,inc iy,inc iy,eval.asm,INC     IY
1385,1385,1387,040a28,040a28,cp $2c,cp $2c,cp $00,eval.asm,"CP      ','"
1386,1386,1388,040a2a,040a2a,ret z,ret z,ret z,eval.asm,RET     Z
1387,1387,1389,040a2b,040a2b,"ld a,$05","ld a,$05","ld a,$00",eval.asm,"LD      A,5"
1388,1388,1390,040a2d,040a2d,jr $+$0d,jr $+$0d,jr $+$00,eval.asm,"JR      ERROR1_EV          ;""Missing ,"""
1389,1389,1391,040a2f,040a2f,call $040a70,call $040a70,call $000000,eval.asm,BRAKET:			CALL    NXT
1390,1390,1392,040a33,040a33,inc iy,inc iy,inc iy,eval.asm,INC     IY
1391,1391,1393,040a35,040a35,cp $29,cp $29,cp $00,eval.asm,CP      ')'
1392,1392,1394,040a37,040a37,ret z,ret z,ret z,eval.asm,RET     Z
1393,1393,1395,040a38,040a38,"ld a,$1b","ld a,$1b","ld a,$00",eval.asm,"LD      A,27"
1394,1394,1396,040a3a,040a3a,jp $043760,jp $043790,jp $000000,eval.asm,"ERROR1_EV:			JP      ERROR_           ;""Missing )"""
1395,1395,1397,040a3e,040a3e,inc iy,inc iy,inc iy,eval.asm,SAVE_EV:			INC     IY
1396,1396,1398,040a40,040a40,"ex af,af'","ex af,af'","ex af,af'",eval.asm,"SAVE1:			EX      AF,AF'"
1397,1397,1399,040a41,040a41,"jp m,$040336","jp m,$040336","jp m,$000000",eval.asm,"JP      M,TYPE_EV_"
1398,1398,1400,040a45,040a45,"ex af,af'","ex af,af'","ex af,af'",eval.asm,"EX      AF,AF'"
1399,1399,1401,040a46,040a46,"ex (sp),hl","ex (sp),hl","ex (sp),hl",eval.asm,"EX      (SP),HL"
1400,1400,1402,040a47,040a47,exx,exx,exx,eval.asm,EXX
1401,1401,1403,040a48,040a48,push hl,push hl,push hl,eval.asm,PUSH    HL
1402,1402,1404,040a49,040a49,exx,exx,exx,eval.asm,EXX
1403,1403,1405,040a4a,040a4a,push af,push af,push af,eval.asm,PUSH    AF
1404,1404,1406,040a4b,040a4b,push bc,push bc,push bc,eval.asm,PUSH    BC
1405,1405,1407,040a4c,040a4c,jp (hl),jp (hl),jp (hl),eval.asm,JP      (HL)
1406,1406,1408,040a4d,040a4d,"ex af,af'","ex af,af'","ex af,af'",eval.asm,"DOIT:			EX      AF,AF'"
1407,1407,1409,040a4e,040a4e,"jp m,$040336","jp m,$040336","jp m,$000000",eval.asm,"JP      M,TYPE_EV_"
1408,1408,1410,040a52,040a52,exx,exx,exx,eval.asm,EXX
1409,1409,1411,040a53,040a53,pop bc,pop bc,pop bc,eval.asm,POP     BC              ;RETURN ADDRESS
1410,1410,1412,040a54,040a54,exx,exx,exx,eval.asm,EXX
1411,1411,1413,040a55,040a55,"ld a,c","ld a,c","ld a,c",eval.asm,"LD      A,C"
1412,1412,1414,040a56,040a56,pop bc,pop bc,pop bc,eval.asm,POP     BC
1413,1413,1415,040a57,040a57,"ld b,a","ld b,a","ld b,a",eval.asm,"LD      B,A"
1414,1414,1416,040a58,040a58,pop af,pop af,pop af,eval.asm,POP     AF              ;OPERATOR
1415,1415,1417,040a59,040a59,exx,exx,exx,eval.asm,EXX
1416,1416,1418,040a5a,040a5a,"ex de,hl","ex de,hl","ex de,hl",eval.asm,"EX      DE,HL"
1417,1417,1419,040a5b,040a5b,pop hl,pop hl,pop hl,eval.asm,POP     HL
1418,1418,1420,040a5c,040a5c,exx,exx,exx,eval.asm,EXX
1419,1419,1421,040a5d,040a5d,"ex de,hl","ex de,hl","ex de,hl",eval.asm,"EX      DE,HL"
1420,1420,1422,040a5e,040a5e,pop hl,pop hl,pop hl,eval.asm,POP     HL
1421,1421,1423,040a5f,040a5f,exx,exx,exx,eval.asm,EXX
1422,1422,1424,040a60,040a60,push bc,push bc,push bc,eval.asm,PUSH    BC
1423,1423,1425,040a61,040a61,exx,exx,exx,eval.asm,EXX
1424,1424,1426,040a62,040a62,and $0f,and $0f,and $00,eval.asm,AND     0FH
1425,1425,1427,040a64,040a64,call $04206a,call $04209a,call $000000,eval.asm,CALL    FPP
1426,1426,1428,040a68,040a68,"jr c,$-$2e","jr c,$-$2e","jr c,$-$00",eval.asm,"JR      C,ERROR1_EV"
1427,1427,1429,040a6a,040a6a,xor a,xor a,xor a,eval.asm,XOR     A
1428,1428,1430,040a6b,040a6b,"ex af,af'","ex af,af'","ex af,af'",eval.asm,"EX      AF,AF'          ;TYPE"
1429,1429,1431,040a6c,040a6c,"ld a,(iy)","ld a,(iy)","ld a,(iy)",eval.asm,"LD      A,(IY)"
1430,1430,1432,040a6f,040a6f,ret,ret,ret,eval.asm,RET
1431,1431,1433,040a70,040a70,"ld a,(iy)","ld a,(iy)","ld a,(iy)",eval.asm,"NXT:			LD      A,(IY)			; Fetch the character"
1432,1432,1434,040a73,040a73,cp $20,cp $20,cp $00,eval.asm,"CP      ' '			; If it is space, then return"
1433,1433,1435,040a75,040a75,ret nz,ret nz,ret nz,eval.asm,RET     NZ
1434,1434,1436,040a76,040a76,inc iy,inc iy,inc iy,eval.asm,INC     IY			; Increment the pointer and
1435,1435,1437,040a78,040a78,jp $040a70,jp $040a70,jp $000000,eval.asm,JP      NXT			; Loop
1436,1436,1438,040a7c,040a7c,push hl,push hl,push hl,eval.asm,DISPT2:			PUSH    HL
1437,1437,1439,040a7d,040a7d,"ld hl,$0401b5","ld hl,$0401b5","ld hl,$000000",eval.asm,"LD      HL,SOPTBL"
1438,1438,1440,040a81,040a81,jr $+$09,jr $+$09,jr $+$00,eval.asm,JR      DISPT0
1439,1439,1441,040a83,040a83,push hl,push hl,push hl,eval.asm,DISPAT:			PUSH    HL
1440,1440,1442,040a84,040a84,sub $8d,sub $8d,sub $00,eval.asm,SUB     FUNTOK
1441,1441,1443,040a86,040a86,"ld hl,$04010a","ld hl,$04010a","ld hl,$000000",eval.asm,"LD      HL,FUNTBL"
1442,1442,1444,040a8a,040a8a,push bc,push bc,push bc,eval.asm,DISPT0:			PUSH    BC
1443,1443,1445,040a8b,040a8b,"ld bc,$000003","ld bc,$000003","ld bc,$000000",eval.asm,"LD	BC, 3"
1444,1444,1446,040a8f,040a8f,"ld b,a","ld b,a","ld b,a",eval.asm,"LD	B, A"
1445,1445,1447,040a90,040a90,mlt bc,mlt bc,mlt bc,eval.asm,MLT	BC
1446,1446,1448,040a92,040a92,"add hl,bc","add hl,bc","add hl,bc",eval.asm,"ADD	HL, BC"
1447,1447,1449,040a93,040a93,"ld hl,(hl)","ld hl,(hl)","ld hl,(hl)",eval.asm,"LD	HL, (HL)"
1448,1448,1450,040a95,040a95,pop bc,pop bc,pop bc,eval.asm,POP     BC
1449,1449,1451,040a96,040a96,"ex (sp),hl","ex (sp),hl","ex (sp),hl",eval.asm,"EX      (SP),HL"
1450,1450,1452,040a97,040a97,ret,ret,ret,eval.asm,RET                     ;OFF TO ROUTINE
1451,1451,,040a98,,jp (hl),,jp (hl),,
1452,1452,,040a99,,"ld (hl),$04",,"ld (hl),$00",,
1453,1453,,040a9b,,"ld c,h",,"ld c,h",,
1454,1454,,040a9c,,dec (hl),,dec (hl),,
1455,1455,,040a9d,,inc b,,inc b,,
1456,1456,,040a9e,,"ld hl,($870437)",,"ld hl,($000000)",,
1457,1457,,040aa2,,dec (hl),,dec (hl),,
1458,1458,,040aa3,,inc b,,inc b,,
1459,1459,,040aa4,,rlca,,rlca,,
1460,1460,,040aa5,,scf,,scf,,
1461,1461,,040aa6,,inc b,,inc b,,
1462,1462,,040aa7,,dec c,,dec c,,
1463,1463,,040aa8,,scf,,scf,,
1464,1464,,040aa9,,inc b,,inc b,,
1465,1465,,040aaa,,"ld d,$36",,"ld d,$00",,
1466,1466,,040aac,,inc b,,inc b,,
1467,1467,,040aad,,dec sp,,dec sp,,
1468,1468,,040aae,,scf,,scf,,
1469,1469,,040aaf,,inc b,,inc b,,
1470,1470,,040ab0,,xor b,,xor b,,
1471,1471,,040ab1,,dec d,,dec d,,
1472,1472,,040ab2,,inc b,,inc b,,
1473,1473,,040ab3,,ret z,,ret z,,
1474,1474,,040ab4,,inc de,,inc de,,
1475,1475,,040ab5,,inc b,,inc b,,
1476,1476,,040ab6,,"jp po,$f50413",,"jp po,$000000",,
1477,1477,,040aba,,inc de,,inc de,,
1478,1478,,040abb,,inc b,,inc b,,
1479,1479,,040abc,,"ld e,$14",,"ld e,$00",,
1480,1480,,040abe,,inc b,,inc b,,
1481,1481,,040abf,,scf,,scf,,
1482,1482,,040ac0,,inc d,,inc d,,
1483,1483,,040ac1,,inc b,,inc b,,
1484,1484,,040ac2,,"ld h,$46",,"ld h,$00",,
1485,1485,,040ac4,,inc b,,inc b,,
1486,1486,,040ac5,,"jp nz,$da0414",,"jp nz,$000000",,
1487,1487,,040ac9,,inc d,,inc d,,
1488,1488,,040aca,,inc b,,inc b,,
1489,1489,,040acb,,"ld c,h",,"ld c,h",,
1490,1490,,040acc,,dec bc,,dec bc,,
1491,1491,1498,040acd,040ad0,inc b,inc b,inc b,exec.asm,
1492,1492,,040ace,,sub a,,sub a,,
1493,1493,,040acf,,inc de,,inc de,,
1494,1494,1501,040ad0,040ad3,inc b,inc b,inc b,exec.asm,
1495,1495,,040ad1,,or (hl),,or (hl),,
1496,1496,,040ad2,,inc d,,inc d,,
1497,1497,1504,040ad3,040ad6,inc b,inc b,inc b,exec.asm,
1498,1498,,040ad4,,"jp nz,$6a0443",,"jp nz,$000000",,
1499,1499,1506,040ad8,040ad8,inc de,inc de,inc de,exec.asm,
1500,1500,1507,040ad9,040ad9,inc b,inc b,inc b,exec.asm,
1501,1501,1508,040ada,040ada,dec hl,dec hl,dec hl,exec.asm,DW24  REM_EX             		; DCH: DATA
1502,1502,1509,040adb,040adb,inc c,inc c,inc c,exec.asm,
1503,1503,1510,040adc,040adc,inc b,inc b,inc b,exec.asm,
1504,1504,1511,040add,040add,dec hl,dec hl,dec hl,exec.asm,DW24  REM_EX             		; DDH: DEF
1505,1505,1512,040ade,040ade,inc c,inc c,inc c,exec.asm,
1506,1506,1513,040adf,040adf,inc b,inc b,inc b,exec.asm,
1507,1507,1514,040ae0,040ae0,pop af,pop af,pop af,exec.asm,DW24  DIM_EX			; DEH
1508,1508,1515,040ae1,040ae1,inc c,inc c,inc c,exec.asm,
1509,1509,1516,040ae2,040ae2,inc b,inc b,inc b,exec.asm,
1510,1510,,040ae3,,"call pe,$c60445",,"call pe,$000000",,
1511,1511,1518,040ae7,040ae7,dec bc,dec bc,dec bc,exec.asm,
1512,1512,1519,040ae8,040ae8,inc b,inc b,inc b,exec.asm,
1513,1513,1520,040ae9,040ae9,"add a,d","add a,d","add a,d",exec.asm,DW24  ENDPRO			; E1H
1514,1514,1521,040aea,040aea,"ld de,$43b704","ld de,$497c04","ld de,$000000",exec.asm,
1515,1515,1522,040aee,040aee,inc b,inc b,inc b,exec.asm,
1516,1516,1523,040aef,040aef,sub a,sub a,sub a,exec.asm,DW24  FOR_EX			; E3H
1517,1517,1524,040af0,040af0,rrca,rrca,rrca,exec.asm,
1518,1518,1525,040af1,040af1,inc b,inc b,inc b,exec.asm,
1519,1519,1526,040af2,040af2,"ld b,a","ld b,a","ld b,a",exec.asm,DW24  GOSUB_EX			; E4H
1520,1520,1527,040af3,040af3,rrca,rrca,rrca,exec.asm,
1521,1521,1528,040af4,040af4,inc b,inc b,inc b,exec.asm,
1522,1522,1529,040af5,040af5,dec hl,dec hl,dec hl,exec.asm,DW24  GOTO_EX			; E5H
1523,1523,1530,040af6,040af6,rrca,rrca,rrca,exec.asm,
1524,1524,1531,040af7,040af7,inc b,inc b,inc b,exec.asm,
1525,1525,,040af8,,"add a,b",,"add a,b",,
1526,1526,,040af9,,"ld b,l",,"ld b,l",,
1527,1527,,040afa,,inc b,,inc b,,
1528,1528,,040afb,,"ld (hl),$13",,"ld (hl),$00",,
1529,1529,,040afd,,inc b,,inc b,,
1530,1530,,040afe,,inc h,,inc h,,
1531,1531,,040aff,,"ld (de),a",,"ld (de),a",,
1532,1532,,040b00,,inc b,,inc b,,
1533,1533,,040b01,,"ld c,h",,"ld c,h",,
1534,1534,,040b02,,inc c,,inc c,,
1535,1535,1545,040b03,040b09,inc b,inc b,inc b,exec.asm,
1536,1536,,040b04,,daa,,daa,,
1537,1537,,040b05,,"ld de,$43d204",,"ld de,$000000",,
1538,1538,1548,040b09,040b0c,inc b,inc b,inc b,exec.asm,
1539,1539,,040b0a,,"call po,$e50445",,"call po,$000000",,
1540,1540,1550,040b0e,040b0e,rrca,rrca,rrca,exec.asm,
1541,1541,1551,040b0f,040b0f,inc b,inc b,inc b,exec.asm,
1542,1542,1552,040b10,040b10,cp (hl),cp (hl),cp (hl),exec.asm,DW24  ON_EX_			; EEH
1543,1543,1553,040b11,040b11,"ld c,$04","ld c,$04","ld c,$00",exec.asm,
1544,1544,,040b13,,sub b,,sub b,,
1545,1545,1555,040b14,040b14,inc d,inc d,inc d,exec.asm,
1546,1546,1556,040b15,040b15,inc b,inc b,inc b,exec.asm,
1547,1547,,040b16,,or d,,or d,,
1548,1548,1558,040b17,040b17,"ld b,l","ld b,l","ld b,l",exec.asm,
1549,1549,1559,040b18,040b18,inc b,inc b,inc b,exec.asm,
1550,1550,1560,040b19,040b19,rst $00,rst $00,rst $00,exec.asm,DW24  PRINT_			; F1H
1551,1551,1561,040b1a,040b1a,dec c,dec c,dec c,exec.asm,
1552,1552,1562,040b1b,040b1b,inc b,inc b,inc b,exec.asm,
1553,1553,1563,040b1c,040b1c,"add a,h","add a,h","add a,h",exec.asm,DW24  PROC_EX			; F2H
1554,1554,1564,040b1d,040b1d,djnz $+$06,djnz $+$06,djnz $+$00,exec.asm,
1555,1555,1565,040b1f,040b1f,sub $12,sub $12,sub $00,exec.asm,DW24  READ			; F3H
1556,1556,1566,040b21,040b21,inc b,inc b,inc b,exec.asm,
1557,1557,1567,040b22,040b22,dec hl,dec hl,dec hl,exec.asm,DW24  REM_EX			; F4H
1558,1558,1568,040b23,040b23,inc c,inc c,inc c,exec.asm,
1559,1559,1569,040b24,040b24,inc b,inc b,inc b,exec.asm,
1560,1560,1570,040b25,040b25,"ld h,a","ld h,a","ld h,a",exec.asm,DW24  REPEAT_EX			; F5H
1561,1561,1571,040b26,040b26,rrca,rrca,rrca,exec.asm,
1562,1562,1572,040b27,040b27,inc b,inc b,inc b,exec.asm,
1563,1563,1573,040b28,040b28,"adc a,a","adc a,a","adc a,a",exec.asm,DW24  REPOR			; F6H
1564,1564,1574,040b29,040b29,inc de,inc de,inc de,exec.asm,
1565,1565,1575,040b2a,040b2a,inc b,inc b,inc b,exec.asm,
1566,1566,1576,040b2b,040b2b,and c,and c,and c,exec.asm,DW24  RESTOR_EX			; F7H
1567,1567,1577,040b2c,040b2c,inc de,inc de,inc de,exec.asm,
1568,1568,1578,040b2d,040b2d,inc b,inc b,inc b,exec.asm,
1569,1569,1579,040b2e,040b2e,"ld d,l","ld d,l","ld d,l",exec.asm,DW24  RETURN			; F8H
1570,1570,1580,040b2f,040b2f,rrca,rrca,rrca,exec.asm,
1571,1571,1581,040b30,040b30,inc b,inc b,inc b,exec.asm,
1572,1572,1582,040b31,040b31,"ld b,(hl)","ld b,(hl)","ld b,(hl)",exec.asm,DW24  RUN			; F9H
1573,1573,1583,040b32,040b32,dec bc,dec bc,dec bc,exec.asm,
1574,1574,1584,040b33,040b33,inc b,inc b,inc b,exec.asm,
1575,1575,1585,040b34,040b34,"ld (hl),a","ld (hl),a","ld (hl),a",exec.asm,DW24  STOP			; FAH
1576,1576,1586,040b35,040b35,inc de,inc de,inc de,exec.asm,
1577,1577,1587,040b36,040b36,inc b,inc b,inc b,exec.asm,
1578,1578,,040b37,,"adc a,$44",,"adc a,$00",,
1579,1579,1590,040b39,040b39,inc b,inc b,inc b,exec.asm,
1580,1580,,040b3a,,"ld (hl),d",,"ld (hl),d",,
1581,1581,1592,040b3b,040b3b,inc d,inc d,inc d,exec.asm,
1582,1582,1593,040b3c,040b3c,inc b,inc b,inc b,exec.asm,
1583,1583,1594,040b3d,040b3d,"ld (hl),c","ld (hl),c","ld (hl),c",exec.asm,DW24  UNTIL_EX			; FDH
1584,1584,1595,040b3e,040b3e,rrca,rrca,rrca,exec.asm,
1585,1585,1596,040b3f,040b3f,inc b,inc b,inc b,exec.asm,
1586,1586,,040b40,,"ld h,h",,"ld h,h",,
1587,1587,1598,040b41,040b41,inc d,inc d,inc d,exec.asm,
1588,1588,1599,040b42,040b42,inc b,inc b,inc b,exec.asm,
1589,1589,1600,040b43,040b43,"ld de,$cd040c","ld de,$cd040c","ld de,$000000",exec.asm,DW24  CLI             		; FFH: OSCLI
1590,1590,,040b47,,"ld a,d",,"ld a,d",,
1591,1591,1602,040b48,040b48,rla,rla,rla,exec.asm,
1592,1592,1603,040b49,040b49,inc b,inc b,inc b,exec.asm,
1593,1593,1604,040b4a,040b4a,"jr z,$+$12","jr z,$+$12","jr z,$+$00",exec.asm,"JR      Z,RUN0			; Yes, so just RUN the code"
1594,1594,1605,040b4c,040b4c,call $040315,call $040315,call $000000,exec.asm,CHAIN:			CALL    EXPRS			; Get the filename
1595,1595,1606,040b50,040b50,"ld a,$0d","ld a,$0d","ld a,$00",exec.asm,"LD      A,CR			; Terminate it with a CR"
1596,1596,1607,040b52,040b52,"ld (de),a","ld (de),a","ld (de),a",exec.asm,"LD      (DE),A"
1597,1597,1608,040b53,040b53,"ld sp,($044d20)","ld sp,($044d20)","ld sp,($000000)",exec.asm,"CHAIN0:			LD      SP,(HIMEM)		; Reset SP"
1598,1598,1609,040b58,040b58,call $04381f,call $04384f,call $000000,exec.asm,CALL    LOAD0			; And load the file in
1599,1599,1610,040b5c,040b5c,"ld sp,($044d20)","ld sp,($044d20)","ld sp,($000000)",exec.asm,"RUN0:			LD      SP,(HIMEM)      	; Prepare for RUN"
1600,1600,1611,040b61,040b61,"ld ix,$044d38","ld ix,$044d38","ld ix,$000000",exec.asm,"LD      IX,RANDOM		; Pointer to the RANDOM sysvar"
1601,1601,1612,040b66,040b66,"ld a,r","ld a,r","ld a,r",exec.asm,"@@:			LD      A, R			; Use the R register to seed the random number generator"
1602,1602,1613,040b68,040b68,"jr z,$-$02","jr z,$-$02","jr z,$-$00",exec.asm,"JR      Z, @B			; Loop unti we get a non-zero value in A"
1603,1603,1614,040b6a,040b6a,rlca,rlca,rlca,exec.asm,RLCA				; Rotate it
1604,1604,1615,040b6b,040b6b,rlca,rlca,rlca,exec.asm,RLCA
1605,1605,1616,040b6c,040b6c,"ld (ix+$03),a","ld (ix+$03),a","ld (ix+$00),a",exec.asm,"LD      (IX+3),A		; And store"
1606,1606,1617,040b6f,040b6f,"sbc a,a","sbc a,a","sbc a,a",exec.asm,"SBC     A,A			; Depending upon the C flag, this will either be 00h or FFh"
1607,1607,1618,040b70,040b70,"ld (ix+$04),a","ld (ix+$04),a","ld (ix+$00),a",exec.asm,"LD      (IX+4),A		; And store"
1608,1608,1619,040b73,040b73,call $043876,call $0438a6,call $000000,exec.asm,CALL    CLEAR
1609,1609,1620,040b77,040b77,"ld hl,$000000","ld hl,$000000","ld hl,$000000",exec.asm,"LD      HL,0			; Clear the error trap sysvar"
1610,1610,1621,040b7b,040b7b,"ld ($044d2c),hl","ld ($044d2c),hl","ld ($000000),hl",exec.asm,"LD      (ERRTRP),HL"
1611,1611,1622,040b7f,040b7f,"ld hl,($044d14)","ld hl,($044d14)","ld hl,($000000)",exec.asm,"LD      HL,(PAGE_)		; Load HL with the start of program memory (PAGE)"
1612,1612,1623,040b83,040b83,"ld a,$dc","ld a,$dc","ld a,$00",exec.asm,"LD      A,DATA_EX_			; The DATA token value"
1613,1613,1624,040b85,040b85,call $04184e,call $041878,call $000000,exec.asm,CALL    SEARCH_EX          	; Search for the first DATA token in the tokenised listing
1614,1614,1625,040b89,040b89,"ld ($044d31),hl","ld ($044d31),hl","ld ($000000),hl",exec.asm,"LD      (DATPTR),HL     	; Set data pointer"
1615,1615,1626,040b8d,040b8d,"ld iy,($044d14)","ld iy,($044d14)","ld iy,($000000)",exec.asm,"LD      IY,(PAGE_)		; Load IY with the start of program memory"
1616,1616,1627,040b92,040b92,call $040bda,call $040bda,call $000000,exec.asm,XEQ0:			CALL    NEWLIN
1617,1617,1628,040b96,040b96,"ld ($044d35),iy","ld ($044d35),iy","ld ($000000),iy",exec.asm,"XEQ:			LD      (ERRLIN),IY     	; Error pointer"
1618,1618,1629,040b9b,040b9b,call $043f6d,call $043f9d,call $000000,exec.asm,CALL    TRAP           		; Check keyboard
1619,1619,1630,040b9f,040b9f,call $040a70,call $040a70,call $000000,exec.asm,XEQ1:			CALL    NXT
1620,1620,1631,040ba3,040ba3,inc iy,inc iy,inc iy,exec.asm,INC     IY
1621,1621,1632,040ba5,040ba5,cp $3a,cp $3a,cp $00,exec.asm,CP      ':'             	; Seperator
1622,1622,1633,040ba7,040ba7,"jr z,$-$08","jr z,$-$08","jr z,$-$00",exec.asm,"JR      Z,XEQ1"
1623,1623,1634,040ba9,040ba9,cp $0d,cp $0d,cp $00,exec.asm,CP      CR
1624,1624,1635,040bab,040bab,"jr z,$-$19","jr z,$-$19","jr z,$-$00",exec.asm,"JR      Z,XEQ0          	; New program line"
1625,1625,1636,040bad,040bad,sub $c6,sub $c6,sub $00,exec.asm,SUB     TCMD_EX
1626,1626,1637,040baf,040baf,"jp c,$040c3a","jp c,$040c3a","jp c,$000000",exec.asm,"JP      C,LET0          	; Implied ""LET"""
1627,1627,1638,040bb3,040bb3,"ld bc,$000003","ld bc,$000003","ld bc,$000000",exec.asm,"LD	BC, 3"
1628,1628,1639,040bb7,040bb7,"ld b,a","ld b,a","ld b,a",exec.asm,"LD	B, A"
1629,1629,1640,040bb8,040bb8,mlt bc,mlt bc,mlt bc,exec.asm,MLT	BC
1630,1630,1641,040bba,040bba,"ld hl,$040a98","ld hl,$040a98","ld hl,$000000",exec.asm,"LD	HL,CMDTAB"
1631,1631,1642,040bbe,040bbe,"add hl,bc","add hl,bc","add hl,bc",exec.asm,"ADD	HL, BC"
1632,1632,1643,040bbf,040bbf,"ld hl,(hl)","ld hl,(hl)","ld hl,(hl)",exec.asm,"LD	HL, (HL)		; Table entry"
1633,1633,1644,040bc1,040bc1,call $040a70,call $040a70,call $000000,exec.asm,CALL    NXT
1634,1634,1645,040bc5,040bc5,jp (hl),jp (hl),jp (hl),exec.asm,JP      (HL)            	; Execute the statement
1635,1635,1646,040bc6,040bc6,call $0439ae,call $0439de,call $000000,exec.asm,END_:			CALL    SETLIN          ;FIND CURRENT LINE
1636,1636,1647,040bca,040bca,"ld a,h","ld a,h","ld a,h",exec.asm,"LD      A,H"
1637,1637,1648,040bcb,040bcb,or l,or l,or l,exec.asm,OR      L               ;DIRECT?
1638,1638,1649,040bcc,040bcc,"jp z,$043080","jp z,$0430b0","jp z,$000000",exec.asm,"JP      Z,CLOOP"
1639,1639,1650,040bd0,040bd0,"ld e,$00","ld e,$00","ld e,$00",exec.asm,"LD      E,0"
1640,1640,1651,040bd2,040bd2,call $04432b,call $04436c,call $000000,exec.asm,CALL    OSSHUT          ;CLOSE ALL FILES
1641,1641,1652,040bd6,040bd6,jp $04307f,jp $0430af,jp $000000,exec.asm,"JP      WARM            ;""Ready"""
1642,1642,1653,040bda,040bda,"ld a,(iy)","ld a,(iy)","ld a,(iy)",exec.asm,"NEWLIN:			LD      A,(IY+0)        ;A=LINE LENGTH"
1643,1643,1654,040bdd,040bdd,"ld bc,$000003","ld bc,$000003","ld bc,$000000",exec.asm,"LD      BC,3"
1644,1644,1655,040be1,040be1,"add iy,bc","add iy,bc","add iy,bc",exec.asm,"ADD     IY,BC"
1645,1645,1656,040be3,040be3,or a,or a,or a,exec.asm,OR      A
1646,1646,1657,040be4,040be4,"jr z,$-$1e","jr z,$-$1e","jr z,$-$00",exec.asm,"JR      Z,END_           ;LENGTH=0, EXIT"
1647,1647,1658,040be6,040be6,"ld hl,($044d26)","ld hl,($044d26)","ld hl,($000000)",exec.asm,"LD      HL,(TRACEN)"
1648,1648,1659,040bea,040bea,"ld a,h","ld a,h","ld a,h",exec.asm,"LD      A,H"
1649,1649,1660,040beb,040beb,or l,or l,or l,exec.asm,OR      L
1650,1650,1661,040bec,040bec,ret z,ret z,ret z,exec.asm,RET     Z
1651,1651,1662,040bed,040bed,"ld de,$000000","ld de,$000000","ld de,$000000",exec.asm,"LD	DE, 0		;Clear DE"
1652,1652,1663,040bf1,040bf1,"ld d,(iy-$01)","ld d,(iy-$01)","ld d,(iy-$00)",exec.asm,"LD      D,(IY-1)        ;DE = LINE NUMBER"
1653,1653,1664,040bf4,040bf4,"ld e,(iy-$02)","ld e,(iy-$02)","ld e,(iy-$00)",exec.asm,"LD      E,(IY-2)"
1654,1654,1665,040bf7,040bf7,"sbc hl,de","sbc hl,de","sbc hl,de",exec.asm,"SBC     HL,DE"
1655,1655,1666,040bf9,040bf9,ret c,ret c,ret c,exec.asm,RET     C
1656,1656,1667,040bfa,040bfa,"ex de,hl","ex de,hl","ex de,hl",exec.asm,"EX      DE,HL"
1657,1657,1668,040bfb,040bfb,"ld a,$5b","ld a,$5b","ld a,$00",exec.asm,"LD      A,'['           ;TRACE"
1658,1658,1669,040bfd,040bfd,call $04394f,call $04397f,call $000000,exec.asm,CALL    OUTCHR
1659,1659,1670,040c01,040c01,call $0439f7,call $043a27,call $000000,exec.asm,CALL    PBCDL
1660,1660,1671,040c05,040c05,"ld a,$5d","ld a,$5d","ld a,$00",exec.asm,"LD      A,']'"
1661,1661,1672,040c07,040c07,call $04394f,call $04397f,call $000000,exec.asm,CALL    OUTCHR
1662,1662,1673,040c0b,040c0b,"ld a,$20","ld a,$20","ld a,$00",exec.asm,"LD      A,' '"
1663,1663,1674,040c0d,040c0d,jp $04394f,jp $04397f,jp $000000,exec.asm,JP      OUTCHR
1664,1664,1675,040c11,040c11,call $040315,call $040315,call $000000,exec.asm,CLI:			CALL    EXPRS
1665,1665,1676,040c15,040c15,"ld a,$0d","ld a,$0d","ld a,$00",exec.asm,"LD      A,CR"
1666,1666,1677,040c17,040c17,"ld (de),a","ld (de),a","ld (de),a",exec.asm,"LD      (DE),A"
1667,1667,1678,040c18,040c18,"ld hl,$044a00","ld hl,$044a00","ld hl,$000000",exec.asm,"LD      HL,ACCS"
1668,1668,1679,040c1c,040c1c,call $043f90,call $043fc0,call $000000,exec.asm,CALL    OSCLI
1669,1669,1680,040c20,040c20,jp $040b96,jp $040b96,jp $000000,exec.asm,JP      XEQ
1670,1670,1681,040c24,040c24,push iy,push iy,push iy,exec.asm,EXT_EX:			PUSH    IY
1671,1671,1682,040c26,040c26,pop hl,pop hl,pop hl,exec.asm,POP     HL
1672,1672,1683,040c27,040c27,call $043f90,call $043fc0,call $000000,exec.asm,CALL    OSCLI
1673,1673,1684,040c2b,040c2b,push iy,push iy,push iy,exec.asm,REM_EX:			PUSH    IY
1674,1674,1685,040c2d,040c2d,pop hl,pop hl,pop hl,exec.asm,POP     HL
1675,1675,1686,040c2e,040c2e,"ld a,$0d","ld a,$0d","ld a,$00",exec.asm,"LD      A,CR"
1676,1676,1687,040c30,040c30,"ld b,a","ld b,a","ld b,a",exec.asm,"LD      B,A"
1677,1677,1688,040c31,040c31,cpir,cpir,cpir,exec.asm,CPIR                    ;FIND LINE END
1678,1678,1689,040c33,040c33,push hl,push hl,push hl,exec.asm,PUSH    HL
1679,1679,1690,040c34,040c34,pop iy,pop iy,pop iy,exec.asm,POP     IY
1680,1680,1691,040c36,040c36,jp $040b92,jp $040b92,jp $000000,exec.asm,JP      XEQ0
1681,1681,1692,040c3a,040c3a,cp $c5,cp $c5,cp $00,exec.asm,LET0:			CP      ELSE_EX_-TCMD_EX
1682,1682,1693,040c3c,040c3c,"jr z,$-$11","jr z,$-$11","jr z,$-$00",exec.asm,"JR      Z,REM_EX"
1683,1683,1694,040c3e,040c3e,cp $64,cp $64,cp $00,exec.asm,CP      '*'-TCMD_EX & 0FFH
1684,1684,1695,040c40,040c40,"jr z,$-$1c","jr z,$-$1c","jr z,$-$00",exec.asm,"JR      Z,EXT_EX"
1685,1685,1696,040c42,040c42,cp $77,cp $77,cp $00,exec.asm,CP      '='-TCMD_EX & 0FFH
1686,1686,1697,040c44,040c44,"jr z,$+$5d","jr z,$+$5d","jr z,$+$00",exec.asm,"JR      Z,FNEND"
1687,1687,1698,040c46,040c46,cp $95,cp $95,cp $00,exec.asm,CP      '['-TCMD_EX & 0FFH
1688,1688,1699,040c48,040c48,"jr z,$+$27","jr z,$+$27","jr z,$+$00",exec.asm,"JR      Z,ASM"
1689,1689,1700,040c4a,040c4a,dec iy,dec iy,dec iy,exec.asm,DEC     IY
1690,1690,1701,040c4c,040c4c,call $0415be,call $0415e8,call $000000,exec.asm,LET:			CALL    ASSIGN			; Assign the variable
1691,1691,1702,040c50,040c50,"jp z,$040b96","jp z,$040b96","jp z,$000000",exec.asm,"JP      Z,XEQ			; Return if Z as it is a numeric variable that has been assigned in ASSIGN"
1692,1692,1703,040c54,040c54,"jr c,$+$43","jr c,$+$43","jr c,$+$00",exec.asm,"JR      C,SYNTAX        	; Return if C as it is an illegal variable"
1693,1693,1704,040c56,040c56,push af,push af,push af,exec.asm,PUSH    AF              	; At this point we're dealing with a string type (A=81h)
1694,1694,1705,040c57,040c57,call $041790,call $0417ba,call $000000,exec.asm,CALL    EQUALS			; Check if the variable is followed by an '=' symbol; this will throw a 'Mistake' error if not
1695,1695,1706,040c5b,040c5b,push hl,push hl,push hl,exec.asm,PUSH    HL			; HL: Address of the variable
1696,1696,1707,040c5c,040c5c,call $040315,call $040315,call $000000,exec.asm,CALL    EXPRS
1697,1697,1708,040c60,040c60,pop ix,pop ix,pop ix,exec.asm,POP     IX			; IX: Address of the variable
1698,1698,1709,040c62,040c62,pop af,pop af,pop af,exec.asm,POP     AF			; AF: The variable type
1699,1699,1710,040c63,040c63,call $041600,call $04162a,call $000000,exec.asm,CALL    STACCS			; Copy the string from ACCS to the variable area
1700,1700,1711,040c67,040c67,jp $040b96,jp $040b96,jp $000000,exec.asm,XEQR:			JP      XEQ
1701,1701,1712,040c6b,040c6b,call $040bda,call $040bda,call $000000,exec.asm,ASM0:			CALL    NEWLIN
1702,1702,1713,040c6f,040c6f,"ld ($044d35),iy","ld ($044d35),iy","ld ($000000),iy",exec.asm,"ASM:			LD      (ERRLIN),IY"
1703,1703,1714,040c74,040c74,call $043f6d,call $043f9d,call $000000,exec.asm,CALL    TRAP
1704,1704,1715,040c78,040c78,call $04189b,call $0418c5,call $000000,exec.asm,CALL    ASSEM
1705,1705,1716,040c7c,040c7c,"jr c,$+$1b","jr c,$+$1b","jr c,$+$00",exec.asm,"JR      C,SYNTAX"
1706,1706,1717,040c7e,040c7e,cp $0d,cp $0d,cp $00,exec.asm,CP      CR
1707,1707,1718,040c80,040c80,"jr z,$-$15","jr z,$-$15","jr z,$-$00",exec.asm,"JR      Z,ASM0"
1708,1708,1719,040c82,040c82,"ld hl,$044d40","ld hl,$044d40","ld hl,$000000",exec.asm,"LD      HL,LISTON"
1709,1709,1720,040c86,040c86,"ld a,(hl)","ld a,(hl)","ld a,(hl)",exec.asm,"LD      A,(HL)"
1710,1710,1721,040c87,040c87,and $0f,and $0f,and $00,exec.asm,AND     0FH
1711,1711,1722,040c89,040c89,or $b0,or $b0,or $00,exec.asm,OR      B0H
1712,1712,1723,040c8b,040c8b,"ld (hl),a","ld (hl),a","ld (hl),a",exec.asm,"LD      (HL),A"
1713,1713,1724,040c8c,040c8c,jr $-$25,jr $-$25,jr $-$00,exec.asm,JR      XEQR
1714,1714,1725,040c8e,040c8e,call $043a3a,call $043a6a,call $000000,exec.asm,VAR_:			CALL    GETVAR
1715,1715,1726,040c92,040c92,ret z,ret z,ret z,exec.asm,RET     Z
1716,1716,1727,040c93,040c93,"jp nc,$043a29","jp nc,$043a59","jp nc,$000000",exec.asm,"JP      NC,PUTVAR"
1717,1717,1728,040c97,040c97,"ld a,$10","ld a,$10","ld a,$00",exec.asm,"SYNTAX:			LD      A,16            ;""Syntax error"""
1718,1718,1729,040c99,040c99,jr $+$04,jr $+$04,jr $+$00,exec.asm,JR	ERROR0_EX
1719,1719,1730,040c9b,040c9b,"ld a,$11","ld a,$11","ld a,$00",exec.asm,"ESCAPE:			LD      A,17            ;""Escape"""
1720,1720,1731,040c9d,040c9d,jp $043760,jp $043790,jp $000000,exec.asm,ERROR0_EX:			JP      ERROR_
1721,1721,1732,040ca1,040ca1,call $0401c7,call $0401c7,call $000000,exec.asm,FNEND:			CALL    EXPR            ;FUNCTION RESULT
1722,1722,1733,040ca5,040ca5,"ld b,e","ld b,e","ld b,e",exec.asm,"LD      B,E"
1723,1723,1734,040ca6,040ca6,"ex de,hl","ex de,hl","ex de,hl",exec.asm,"EX      DE,HL"
1724,1724,1735,040ca7,040ca7,exx,exx,exx,exec.asm,EXX                     ;SAVE RESULT
1725,1725,1736,040ca8,040ca8,"ex de,hl","ex de,hl","ex de,hl",exec.asm,"EX      DE,HL           ; IN DEB'C'D'E'"
1726,1726,1737,040ca9,040ca9,pop bc,pop bc,pop bc,exec.asm,FNEND5:			POP     BC
1727,1727,1738,040caa,040caa,"ld hl,$041758","ld hl,$041782","ld hl,$000000",exec.asm,"LD      HL,LOCCHK"
1728,1728,1739,040cae,040cae,or a,or a,or a,exec.asm,OR      A
1729,1729,1740,040caf,040caf,"sbc hl,bc","sbc hl,bc","sbc hl,bc",exec.asm,"SBC     HL,BC"
1730,1730,1741,040cb1,040cb1,"jr z,$+$1e","jr z,$+$1e","jr z,$+$00",exec.asm,"JR      Z,FNEND0        ;LOCAL VARIABLE"
1731,1731,1742,040cb3,040cb3,"ld hl,$041084","ld hl,$041084","ld hl,$000000",exec.asm,"LD      HL,FNCHK"
1732,1732,1743,040cb7,040cb7,or a,or a,or a,exec.asm,OR      A
1733,1733,1744,040cb8,040cb8,"sbc hl,bc","sbc hl,bc","sbc hl,bc",exec.asm,"SBC     HL,BC"
1734,1734,1745,040cba,040cba,"ld a,$07","ld a,$07","ld a,$00",exec.asm,"LD      A,7"
1735,1735,1746,040cbc,040cbc,"jr nz,$-$1f","jr nz,$-$1f","jr nz,$-$00",exec.asm,"JR      NZ,ERROR0_EX       ;""No FN"""
1736,1736,1747,040cbe,040cbe,pop iy,pop iy,pop iy,exec.asm,POP     IY
1737,1737,1748,040cc0,040cc0,"ld ($044d35),iy","ld ($044d35),iy","ld ($000000),iy",exec.asm,"LD      (ERRLIN),IY     ;IN CASE OF ERROR"
1738,1738,1749,040cc5,040cc5,"ex de,hl","ex de,hl","ex de,hl",exec.asm,"EX      DE,HL"
1739,1739,1750,040cc6,040cc6,exx,exx,exx,exec.asm,EXX
1740,1740,1751,040cc7,040cc7,"ex de,hl","ex de,hl","ex de,hl",exec.asm,"EX      DE,HL"
1741,1741,1752,040cc8,040cc8,"ld de,$044a00","ld de,$044a00","ld de,$000000",exec.asm,"LD      DE,ACCS"
1742,1742,1753,040ccc,040ccc,"ld e,b","ld e,b","ld e,b",exec.asm,"LD      E,B"
1743,1743,1754,040ccd,040ccd,"ex af,af'","ex af,af'","ex af,af'",exec.asm,"EX      AF,AF'"
1744,1744,1755,040cce,040cce,ret,ret,ret,exec.asm,RET
1745,1745,1756,040ccf,040ccf,pop ix,pop ix,pop ix,exec.asm,FNEND0:			POP     IX
1746,1746,1757,040cd1,040cd1,pop bc,pop bc,pop bc,exec.asm,POP     BC
1747,1747,1758,040cd2,040cd2,"ld a,b","ld a,b","ld a,b",exec.asm,"LD      A,B"
1748,1748,1759,040cd3,040cd3,or a,or a,or a,exec.asm,OR      A
1749,1749,1760,040cd4,040cd4,"jp m,$040ce2","jp m,$040ce2","jp m,$000000",exec.asm,"JP      M,FNEND1        ;STRING"
1750,1750,1761,040cd8,040cd8,pop hl,pop hl,pop hl,exec.asm,POP     HL
1751,1751,1762,040cd9,040cd9,exx,exx,exx,exec.asm,EXX
1752,1752,1763,040cda,040cda,pop hl,pop hl,pop hl,exec.asm,POP     HL
1753,1753,1764,040cdb,040cdb,exx,exx,exx,exec.asm,EXX
1754,1754,1765,040cdc,040cdc,call $0415d6,call $041600,call $000000,exec.asm,CALL    STORE
1755,1755,1766,040ce0,040ce0,jr $-$37,jr $-$37,jr $-$00,exec.asm,JR      FNEND5
1756,1756,1767,040ce2,040ce2,"ld hl,$000000","ld hl,$000000","ld hl,$000000",exec.asm,"FNEND1:			LD      HL,0"
1757,1757,1768,040ce6,040ce6,"add hl,sp","add hl,sp","add hl,sp",exec.asm,"ADD     HL,SP"
1758,1758,1769,040ce7,040ce7,push de,push de,push de,exec.asm,PUSH    DE
1759,1759,1770,040ce8,040ce8,"ld e,c","ld e,c","ld e,c",exec.asm,"LD      E,C"
1760,1760,1771,040ce9,040ce9,call $041604,call $04162e,call $000000,exec.asm,CALL    STORES
1761,1761,1772,040ced,040ced,pop de,pop de,pop de,exec.asm,POP     DE
1762,1762,1773,040cee,040cee,"ld sp,hl","ld sp,hl","ld sp,hl",exec.asm,"LD      SP,HL"
1763,1763,1774,040cef,040cef,jr $-$46,jr $-$46,jr $-$00,exec.asm,JR      FNEND5
1764,1764,1775,040cf1,040cf1,call $043a3a,call $043a6a,call $000000,exec.asm,DIM_EX:			CALL    GETVAR          	; Get the variable
1765,1765,1776,040cf5,040cf5,"jp c,$040d81","jp c,$040d81","jp c,$000000",exec.asm,"JP      C,BADDIM		; Throw a ""Bad Dim"" error"
1766,1766,1777,040cf9,040cf9,"jp z,$040d8b","jp z,$040d8b","jp z,$000000",exec.asm,"JP      Z,DIM4			; If Z then the command is DIM var% expr, so don't need to create an entity"
1767,1767,1778,040cfd,040cfd,call $043bae,call $043bde,call $000000,exec.asm,CALL    CREATE			; Create a new entity
1768,1768,1779,040d01,040d01,push hl,push hl,push hl,exec.asm,PUSH    HL			; HL: Address of the entity
1769,1769,1780,040d02,040d02,pop ix,pop ix,pop ix,exec.asm,POP     IX			; IX: Address of the entity
1770,1770,1781,040d04,040d04,"ld a,(iy)","ld a,(iy)","ld a,(iy)",exec.asm,"LD      A,(IY)			; Fetch the next character from the tokenised string"
1771,1771,1782,040d07,040d07,cp $28,cp $28,cp $00,exec.asm,CP      '('			; Check for opening brackets
1772,1772,1783,040d09,040d09,"ld a,d","ld a,d","ld a,d",exec.asm,"LD      A,D			;  A: The dimension variable type (04h = Integer, 05h = Float, 81h = String)"
1773,1773,1784,040d0a,040d0a,"jr nz,$+$81","jr nz,$+$81","jr nz,$+$00",exec.asm,"JR      NZ,DIM4			; It is not a bracket; the command is DIM var expr"
1774,1774,1785,040d0c,040d0c,push hl,push hl,push hl,exec.asm,PUSH    HL			; HL: Address of the entity
1775,1775,1786,040d0d,040d0d,push af,push af,push af,exec.asm,"PUSH    AF           	   	;  A: Entity type (04h = Integer, 05h = Float, 81h = String)"
1776,1776,1787,040d0e,040d0e,"ld de,$000001","ld de,$000001","ld de,$000000",exec.asm,"LD      DE,1			; DE: Total size of array accumulator (important for multi-dimensioned arrays)"
1777,1777,1788,040d12,040d12,"ld b,d","ld b,d","ld b,d",exec.asm,"LD      B,D			;  B: The number of dimensions in the array"
1778,1778,1789,040d13,040d13,inc iy,inc iy,inc iy,exec.asm,DIM1:			INC     IY			; Skip to the next token
1779,1779,1790,040d15,040d15,push bc,push bc,push bc,exec.asm,PUSH    BC			; Stack the dimension counter
1780,1780,1791,040d16,040d16,push de,push de,push de,exec.asm,PUSH    DE			; Stack the total size of array accumulator
1781,1781,1792,040d17,040d17,push ix,push ix,push ix,exec.asm,PUSH    IX			; Stack the entity address
1782,1782,1793,040d19,040d19,call $04030a,call $04030a,call $000000,exec.asm,CALL    EXPRI           	; Fetch the size of this dimension
1783,1783,1794,040d1d,040d1d,"bit 7,h","bit 7,h","bit 7,h",exec.asm,"BIT     7,H			; If it is negative then"
1784,1784,1795,040d1f,040d1f,"jr nz,$+$62","jr nz,$+$62","jr nz,$+$00",exec.asm,"JR      NZ,BADDIM		; Throw a ""Bad Dim"" error"
1785,1785,1796,040d21,040d21,exx,exx,exx,exec.asm,EXX
1786,1786,1797,040d22,040d22,inc hl,inc hl,inc hl,exec.asm,INC     HL			; HL: Size of this dimension; increment (BBC BASIC DIMs are always one bigger)
1787,1787,1798,040d23,040d23,pop ix,pop ix,pop ix,exec.asm,POP     IX			; IX: The entity address
1788,1788,1799,040d25,040d25,inc ix,inc ix,inc ix,exec.asm,INC     IX
1789,1789,1800,040d27,040d27,"ld (ix),l","ld (ix),l","ld (ix),l",exec.asm,"LD      (IX),L          	; Save the size of this dimension in the entity"
1790,1790,1801,040d2a,040d2a,inc ix,inc ix,inc ix,exec.asm,INC     IX
1791,1791,1802,040d2c,040d2c,"ld (ix),h","ld (ix),h","ld (ix),h",exec.asm,"LD      (IX),H"
1792,1792,1803,040d2f,040d2f,pop bc,pop bc,pop bc,exec.asm,POP     BC
1793,1793,1804,040d30,040d30,call $041872,call $04189c,call $000000,exec.asm,CALL    MUL16           	; HL = HL * BC (Number of Dimensions * Total size of array accumulator)
1794,1794,1805,040d34,040d34,"jr c,$+$51","jr c,$+$51","jr c,$+$00",exec.asm,"JR      C,NOROOM        	; Throw a ""No Room"" error if overflow"
1795,1795,1806,040d36,040d36,"ex de,hl","ex de,hl","ex de,hl",exec.asm,"EX      DE,HL           	; DE: The new total size of array accumulator"
1796,1796,1807,040d37,040d37,pop bc,pop bc,pop bc,exec.asm,POP     BC
1797,1797,1808,040d38,040d38,inc b,inc b,inc b,exec.asm,INC     B               	;  B: The dimension counter; increment
1798,1798,1809,040d39,040d39,"ld a,(iy)","ld a,(iy)","ld a,(iy)",exec.asm,"LD      A,(IY)			; Fetch the nex token"
1799,1799,1810,040d3c,040d3c,cp $2c,cp $2c,cp $00,exec.asm,"CP      ','             	; Check for another dimension in the array"
1800,1800,1811,040d3e,040d3e,"jr z,$-$2b","jr z,$-$2b","jr z,$-$00",exec.asm,"JR      Z,DIM1			; And loop"
1801,1801,1812,040d40,040d40,call $040a2f,call $040a2f,call $000000,exec.asm,CALL    BRAKET          	; Check for closing bracket
1802,1802,1813,040d44,040d44,pop af,pop af,pop af,exec.asm,POP     AF              	; Restore the type
1803,1803,1814,040d45,040d45,inc ix,inc ix,inc ix,exec.asm,INC     IX
1804,1804,1815,040d47,040d47,"ex (sp),ix","ex (sp),ix","ex (sp),ix",exec.asm,"EX      (SP),IX"
1805,1805,1816,040d49,040d49,"ld (ix),b","ld (ix),b","ld (ix),b",exec.asm,"LD      (IX),B          	; Number of dimensions"
1806,1806,1817,040d4c,040d4c,call $041865,call $04188f,call $000000,exec.asm,CALL    X4OR5           	; Dimension Accumulator Value * 4 or * 5 depending on type
1807,1807,1818,040d50,040d50,pop hl,pop hl,pop hl,exec.asm,POP     HL			; Restore the entity address
1808,1808,1819,040d51,040d51,"jr c,$+$34","jr c,$+$34","jr c,$+$00",exec.asm,"JR      C,NOROOM		; Throw a ""No Room"" error if there is an overflow"
1809,1809,1820,040d53,040d53,"add hl,de","add hl,de","add hl,de",exec.asm,"DIM3:			ADD     HL,DE"
1810,1810,1821,040d54,040d54,"jr c,$+$31","jr c,$+$31","jr c,$+$00",exec.asm,"JR      C,NOROOM"
1811,1811,1822,040d56,040d56,push hl,push hl,push hl,exec.asm,PUSH    HL
1812,1812,1823,040d57,040d57,inc h,inc h,inc h,exec.asm,INC     H
1813,1813,1824,040d58,040d58,"jr z,$+$2d","jr z,$+$2d","jr z,$+$00",exec.asm,"JR      Z,NOROOM"
1814,1814,1825,040d5a,040d5a,"sbc hl,sp","sbc hl,sp","sbc hl,sp",exec.asm,"SBC     HL,SP"
1815,1815,1826,040d5c,040d5c,"jr nc,$+$29","jr nc,$+$29","jr nc,$+$00",exec.asm,"JR      NC,NOROOM       	; Throw an ""Out of Space"" error"
1816,1816,1827,040d5e,040d5e,pop hl,pop hl,pop hl,exec.asm,POP     HL
1817,1817,1828,040d5f,040d5f,"ld ($044d1d),hl","ld ($044d1d),hl","ld ($000000),hl",exec.asm,"LD      (FREE),HL"
1818,1818,1829,040d63,040d63,"ld a,d","ld a,d","ld a,d",exec.asm,"DIM2:			LD      A,D"
1819,1819,1830,040d64,040d64,or e,or e,or e,exec.asm,OR      E
1820,1820,1831,040d65,040d65,"jr z,$+$08","jr z,$+$08","jr z,$+$00",exec.asm,"JR      Z,DIM5"
1821,1821,1832,040d67,040d67,dec hl,dec hl,dec hl,exec.asm,DEC     HL
1822,1822,1833,040d68,040d68,"ld (hl),$00","ld (hl),$00","ld (hl),$00",exec.asm,"LD      (HL),0         		; Initialise the array"
1823,1823,1834,040d6a,040d6a,dec de,dec de,dec de,exec.asm,DEC     DE
1824,1824,1835,040d6b,040d6b,jr $-$08,jr $-$08,jr $-$00,exec.asm,JR      DIM2
1825,1825,1836,040d6d,040d6d,call $040a70,call $040a70,call $000000,exec.asm,DIM5:			CALL    NXT
1826,1826,1837,040d71,040d71,cp $2c,cp $2c,cp $00,exec.asm,"CP      ','            		; Another variable?"
1827,1827,1838,040d73,040d73,"jp nz,$040b96","jp nz,$040b96","jp nz,$000000",exec.asm,"JP      NZ,XEQ"
1828,1828,1839,040d77,040d77,inc iy,inc iy,inc iy,exec.asm,INC     IY
1829,1829,1840,040d79,040d79,call $040a70,call $040a70,call $000000,exec.asm,CALL    NXT
1830,1830,1841,040d7d,040d7d,jp $040cf1,jp $040cf1,jp $000000,exec.asm,JP      DIM_EX
1831,1831,1842,040d81,040d81,"ld a,$0a","ld a,$0a","ld a,$00",exec.asm,"BADDIM:			LD      A,10            	; Throw a ""Bad DIM"" error"
1832,1832,1843,040d83,040d83,jr $+$04,jr $+$04,jr $+$00,exec.asm,JR	ERROR1_EX
1833,1833,1844,040d85,040d85,"ld a,$0b","ld a,$0b","ld a,$00",exec.asm,"NOROOM:			LD      A,11            	; Throw a ""DIM space"" error"
1834,1834,1845,040d87,040d87,jp $043760,jp $043790,jp $000000,exec.asm,ERROR1_EX:			JP      ERROR_
1835,1835,1846,040d8b,040d8b,or a,or a,or a,exec.asm,DIM4:			OR      A			;  A: The dimension variable type
1836,1836,1847,040d8c,040d8c,"jr z,$-$0b","jr z,$-$0b","jr z,$-$00",exec.asm,"JR      Z,BADDIM		; Throw ""Bad Dim"" if variable is an 8-bit indirection"
1837,1837,1848,040d8e,040d8e,"jp m,$040d81","jp m,$040d81","jp m,$000000",exec.asm,"JP      M,BADDIM        	; or a string"
1838,1838,1849,040d92,040d92,"ld b,a","ld b,a","ld b,a",exec.asm,"LD      B,A			; Temporarily store the dimension variable type in B"
1839,1839,1850,040d93,040d93,"ld a,(iy-$01)","ld a,(iy-$01)","ld a,(iy-$00)",exec.asm,"LD      A,(IY-1)		; Get the last character but one"
1840,1840,1851,040d96,040d96,cp $29,cp $29,cp $00,exec.asm,CP      ')'			; Check if it is a trailing bracket
1841,1841,1852,040d98,040d98,"jr z,$-$17","jr z,$-$17","jr z,$-$00",exec.asm,"JR      Z,BADDIM		; And throw a ""Bad Dim"" error if there is a trailing bracket"
1842,1842,1853,040d9a,040d9a,"ld hl,$000000","ld hl,$000000","ld hl,$000000",exec.asm,"LD	HL,0			; Clear HL"
1843,1843,1854,040d9e,040d9e,"ld a,($044d1d)","ld a,($044d1d)","ld a,($000000)",exec.asm,"LD	A,(FREE+0)		; HL: Lower 16 bits of FREE"
1844,1844,1855,040da2,040da2,"ld l,a","ld l,a","ld l,a",exec.asm,"LD	L,A"
1845,1845,1856,040da3,040da3,"ld a,($044d1e)","ld a,($044d1e)","ld a,($000000)",exec.asm,"LD	A,(FREE+1)"
1846,1846,1857,040da7,040da7,"ld h,a","ld h,a","ld h,a",exec.asm,"LD	H,A"
1847,1847,1858,040da8,040da8,"ld a,b","ld a,b","ld a,b",exec.asm,"LD	A,B			; Restore the dimension variable type"
1848,1848,1859,040da9,040da9,exx,exx,exx,exec.asm,EXX
1849,1849,1860,040daa,040daa,"ld hl,$000000","ld hl,$000000","ld hl,$000000",exec.asm,"LD	HL,0			; Clear HL"
1850,1850,1861,040dae,040dae,"ld b,a","ld b,a","ld b,a",exec.asm,"LD	B,A			; Temporarily store the dimension variable type in B"
1851,1851,1862,040daf,040daf,"ld a,($044d1f)","ld a,($044d1f)","ld a,($000000)",exec.asm,"LD	A,(FREE+2)		; HL: Upper 8 bits of FREE (bits 16-23)"
1852,1852,1863,040db3,040db3,"ld l,a","ld l,a","ld l,a",exec.asm,"LD	L,A"
1853,1853,1864,040db4,040db4,"ld a,b","ld a,b","ld a,b",exec.asm,"LD	A,B			; Restore the dimension variable type"
1854,1854,1865,040db5,040db5,"ld c,h","ld c,h","ld c,h",exec.asm,"LD	C,H"
1855,1855,1866,040db6,040db6,call $0415d6,call $041600,call $000000,exec.asm,CALL    STORE           	; Store the address
1856,1856,1867,040dba,040dba,call $04030a,call $04030a,call $000000,exec.asm,CALL    EXPRI			; Get the number of bytes to store
1857,1857,1868,040dbe,040dbe,exx,exx,exx,exec.asm,EXX
1858,1858,1869,040dbf,040dbf,inc hl,inc hl,inc hl,exec.asm,INC     HL			; Add one to it
1859,1859,1870,040dc0,040dc0,"ex de,hl","ex de,hl","ex de,hl",exec.asm,"EX      DE,HL"
1860,1860,1871,040dc1,040dc1,"ld hl,($044d1d)","ld hl,($044d1d)","ld hl,($000000)",exec.asm,"LD      HL,(FREE)"
1861,1861,1872,040dc5,040dc5,jr $-$72,jr $-$72,jr $-$00,exec.asm,JR      DIM3			; Continue with the DIM
1862,1862,1873,040dc7,040dc7,cp $23,cp $23,cp $00,exec.asm,PRINT_:			CP      '#'
1863,1863,1874,040dc9,040dc9,"jr nz,$+$7e","jr nz,$+$7e","jr nz,$+$00",exec.asm,"JR      NZ,PRINT0"
1864,1864,1875,040dcb,040dcb,call $041892,call $0418bc,call $000000,exec.asm,CALL    CHNL            ;CHANNEL NO. = E
1865,1865,1876,040dcf,040dcf,call $040a70,call $040a70,call $000000,exec.asm,PRNTN1:			CALL    NXT
1866,1866,1877,040dd3,040dd3,cp $2c,cp $2c,cp $00,exec.asm,"CP      ','"
1867,1867,1878,040dd5,040dd5,"jp nz,$040b96","jp nz,$040b96","jp nz,$000000",exec.asm,"JP      NZ,XEQ"
1868,1868,1879,040dd9,040dd9,inc iy,inc iy,inc iy,exec.asm,INC     IY
1869,1869,1880,040ddb,040ddb,push de,push de,push de,exec.asm,PUSH    DE
1870,1870,1881,040ddc,040ddc,call $0401c7,call $0401c7,call $000000,exec.asm,CALL    EXPR            ;ITEM TO PRINT
1871,1871,1882,040de0,040de0,"ex af,af'","ex af,af'","ex af,af'",exec.asm,"EX      AF,AF'"
1872,1872,1883,040de1,040de1,"jp m,$040e07","jp m,$040e07","jp m,$000000",exec.asm,"JP      M,PRNTN2        ;STRING"
1873,1873,1884,040de5,040de5,pop de,pop de,pop de,exec.asm,POP     DE
1874,1874,1885,040de6,040de6,push bc,push bc,push bc,exec.asm,PUSH    BC
1875,1875,1886,040de7,040de7,exx,exx,exx,exec.asm,EXX
1876,1876,1887,040de8,040de8,"ld a,l","ld a,l","ld a,l",exec.asm,"LD      A,L"
1877,1877,1888,040de9,040de9,exx,exx,exx,exec.asm,EXX
1878,1878,1889,040dea,040dea,call $04433b,call $04437c,call $000000,exec.asm,CALL    OSBPUT
1879,1879,1890,040dee,040dee,exx,exx,exx,exec.asm,EXX
1880,1880,1891,040def,040def,"ld a,h","ld a,h","ld a,h",exec.asm,"LD      A,H"
1881,1881,1892,040df0,040df0,exx,exx,exx,exec.asm,EXX
1882,1882,1893,040df1,040df1,call $04433b,call $04437c,call $000000,exec.asm,CALL    OSBPUT
1883,1883,1894,040df5,040df5,"ld a,l","ld a,l","ld a,l",exec.asm,"LD      A,L"
1884,1884,1895,040df6,040df6,call $04433b,call $04437c,call $000000,exec.asm,CALL    OSBPUT
1885,1885,1896,040dfa,040dfa,"ld a,h","ld a,h","ld a,h",exec.asm,"LD      A,H"
1886,1886,1897,040dfb,040dfb,call $04433b,call $04437c,call $000000,exec.asm,CALL    OSBPUT
1887,1887,1898,040dff,040dff,pop bc,pop bc,pop bc,exec.asm,POP     BC
1888,1888,1899,040e00,040e00,"ld a,c","ld a,c","ld a,c",exec.asm,"LD      A,C"
1889,1889,1900,040e01,040e01,call $04433b,call $04437c,call $000000,exec.asm,CALL    OSBPUT
1890,1890,1901,040e05,040e05,jr $-$36,jr $-$36,jr $-$00,exec.asm,JR      PRNTN1
1891,1891,1902,040e07,040e07,"ld c,e","ld c,e","ld c,e",exec.asm,"PRNTN2:			LD      C,E"
1892,1892,1903,040e08,040e08,pop de,pop de,pop de,exec.asm,POP     DE
1893,1893,1904,040e09,040e09,"ld hl,$044a00","ld hl,$044a00","ld hl,$000000",exec.asm,"LD      HL,ACCS"
1894,1894,1905,040e0d,040e0d,inc c,inc c,inc c,exec.asm,INC     C
1895,1895,1906,040e0e,040e0e,dec c,dec c,dec c,exec.asm,PRNTN3:			DEC     C
1896,1896,1907,040e0f,040e0f,"jr z,$+$0c","jr z,$+$0c","jr z,$+$00",exec.asm,"JR      Z,PRNTN4"
1897,1897,1908,040e11,040e11,"ld a,(hl)","ld a,(hl)","ld a,(hl)",exec.asm,"LD      A,(HL)"
1898,1898,1909,040e12,040e12,inc hl,inc hl,inc hl,exec.asm,INC     HL
1899,1899,1910,040e13,040e13,push bc,push bc,push bc,exec.asm,PUSH    BC
1900,1900,1911,040e14,040e14,call $04433b,call $04437c,call $000000,exec.asm,CALL    OSBPUT
1901,1901,1912,040e18,040e18,pop bc,pop bc,pop bc,exec.asm,POP     BC
1902,1902,1913,040e19,040e19,jr $-$0b,jr $-$0b,jr $-$00,exec.asm,JR      PRNTN3
1903,1903,1914,040e1b,040e1b,"ld a,$0d","ld a,$0d","ld a,$00",exec.asm,"PRNTN4:			LD      A,CR"
1904,1904,1915,040e1d,040e1d,call $04433b,call $04437c,call $000000,exec.asm,CALL    OSBPUT
1905,1905,1916,040e21,040e21,jr $-$52,jr $-$52,jr $-$00,exec.asm,JR      PRNTN1
1906,1906,1917,040e23,040e23,"ld b,$02","ld b,$02","ld b,$00",exec.asm,"PRINT6:			LD      B,2"
1907,1907,1918,040e25,040e25,jr $+$29,jr $+$29,jr $+$00,exec.asm,JR      PRINTC
1908,1908,1919,040e27,040e27,"ld bc,$000100","ld bc,$000100","ld bc,$000000",exec.asm,"PRINT8:			LD      BC,100H"
1909,1909,1920,040e2b,040e2b,jr $+$23,jr $+$23,jr $+$00,exec.asm,JR      PRINTC
1910,1910,1921,040e2d,040e2d,"ld hl,$044c00","ld hl,$044c00","ld hl,$000000",exec.asm,"PRINT9:			LD      HL,STAVAR"
1911,1911,1922,040e31,040e31,xor a,xor a,xor a,exec.asm,XOR     A
1912,1912,1923,040e32,040e32,cp (hl),cp (hl),cp (hl),exec.asm,CP      (HL)
1913,1913,1924,040e33,040e33,"jr z,$+$14","jr z,$+$14","jr z,$+$00",exec.asm,"JR      Z,PRINT0"
1914,1914,1925,040e35,040e35,"ld a,($044d3d)","ld a,($044d3d)","ld a,($000000)",exec.asm,"LD      A,(COUNT)"
1915,1915,1926,040e39,040e39,or a,or a,or a,exec.asm,OR      A
1916,1916,1927,040e3a,040e3a,"jr z,$+$0d","jr z,$+$0d","jr z,$+$00",exec.asm,"JR      Z,PRINT0"
1917,1917,1928,040e3c,040e3c,sub (hl),sub (hl),sub (hl),exec.asm,PRINTA:			SUB     (HL)
1918,1918,1929,040e3d,040e3d,"jr z,$+$0a","jr z,$+$0a","jr z,$+$00",exec.asm,"JR      Z,PRINT0"
1919,1919,1930,040e3f,040e3f,"jr nc,$-$03","jr nc,$-$03","jr nc,$-$00",exec.asm,"JR      NC,PRINTA"
1920,1920,1931,040e41,040e41,neg,neg,neg,exec.asm,NEG
1921,1921,1932,040e43,040e43,call $0417ef,call $041819,call $000000,exec.asm,CALL    FILL
1922,1922,1933,040e47,040e47,"ld a,($044c00)","ld a,($044c00)","ld a,($000000)",exec.asm,"PRINT0:			LD      A,(STAVAR)"
1923,1923,1934,040e4b,040e4b,"ld c,a","ld c,a","ld c,a",exec.asm,"LD      C,A             ;PRINTS"
1924,1924,1935,040e4c,040e4c,"ld b,$00","ld b,$00","ld b,$00",exec.asm,"LD      B,0             ;PRINTF"
1925,1925,1936,040e4e,040e4e,call $04177a,call $0417a4,call $000000,exec.asm,PRINTC:			CALL    TERMQ
1926,1926,1937,040e52,040e52,"jr z,$+$41","jr z,$+$41","jr z,$+$00",exec.asm,"JR      Z,PRINT4"
1927,1927,1938,040e54,040e54,"res 0,b","res 0,b","res 0,b",exec.asm,"RES     0,B"
1928,1928,1939,040e56,040e56,inc iy,inc iy,inc iy,exec.asm,INC     IY
1929,1929,1940,040e58,040e58,cp $7e,cp $7e,cp $00,exec.asm,CP      '~'
1930,1930,1941,040e5a,040e5a,"jr z,$-$37","jr z,$-$37","jr z,$-$00",exec.asm,"JR      Z,PRINT6"
1931,1931,1942,040e5c,040e5c,cp $3b,cp $3b,cp $00,exec.asm,CP      ';'
1932,1932,1943,040e5e,040e5e,"jr z,$-$37","jr z,$-$37","jr z,$-$00",exec.asm,"JR      Z,PRINT8"
1933,1933,1944,040e60,040e60,cp $2c,cp $2c,cp $00,exec.asm,"CP      ','"
1934,1934,1945,040e62,040e62,"jr z,$-$35","jr z,$-$35","jr z,$-$00",exec.asm,"JR      Z,PRINT9"
1935,1935,1946,040e64,040e64,call $04179f,call $0417c9,call $000000,exec.asm,"CALL    FORMAT          ;SPC, TAB, '"
1936,1936,1947,040e68,040e68,"jr z,$-$1a","jr z,$-$1a","jr z,$-$00",exec.asm,"JR      Z,PRINTC"
1937,1937,1948,040e6a,040e6a,dec iy,dec iy,dec iy,exec.asm,DEC     IY
1938,1938,1949,040e6c,040e6c,push bc,push bc,push bc,exec.asm,PUSH    BC
1939,1939,1950,040e6d,040e6d,call $0401c7,call $0401c7,call $000000,exec.asm,CALL    EXPR            ;VARIABLE TYPE
1940,1940,1951,040e71,040e71,"ex af,af'","ex af,af'","ex af,af'",exec.asm,"EX      AF,AF'"
1941,1941,1952,040e72,040e72,"jp m,$040e8c","jp m,$040e8c","jp m,$000000",exec.asm,"JP      M,PRINT3        ;STRING"
1942,1942,1953,040e76,040e76,pop de,pop de,pop de,exec.asm,POP     DE
1943,1943,1954,040e77,040e77,push de,push de,push de,exec.asm,PUSH    DE
1944,1944,1955,040e78,040e78,"bit 1,d","bit 1,d","bit 1,d",exec.asm,"BIT     1,D"
1945,1945,1956,040e7a,040e7a,push af,push af,push af,exec.asm,PUSH    AF
1946,1946,1957,040e7b,040e7b,"call z,$040966","call z,$040966","call z,$000000",exec.asm,"CALL    Z,STR           ;DECIMAL"
1947,1947,1958,040e7f,040e7f,pop af,pop af,pop af,exec.asm,POP     AF
1948,1948,1959,040e80,040e80,"call nz,$04091a","call nz,$04091a","call nz,$000000",exec.asm,"CALL    NZ,HEXSTR       ;HEX"
1949,1949,1960,040e84,040e84,pop bc,pop bc,pop bc,exec.asm,POP     BC
1950,1950,1961,040e85,040e85,push bc,push bc,push bc,exec.asm,PUSH    BC
1951,1951,1962,040e86,040e86,"ld a,c","ld a,c","ld a,c",exec.asm,"LD      A,C"
1952,1952,1963,040e87,040e87,sub e,sub e,sub e,exec.asm,SUB     E
1953,1953,1964,040e88,040e88,"call nc,$0417ef","call nc,$041819","call nc,$000000",exec.asm,"CALL    NC,FILL         ;RIGHT JUSTIFY"
1954,1954,1965,040e8c,040e8c,pop bc,pop bc,pop bc,exec.asm,PRINT3:			POP     BC
1955,1955,1966,040e8d,040e8d,call $0417fe,call $041828,call $000000,exec.asm,CALL    PTEXT           ;PRINT
1956,1956,1967,040e91,040e91,jr $-$43,jr $-$43,jr $-$00,exec.asm,JR      PRINTC
1957,1957,1968,040e93,040e93,"bit 0,b","bit 0,b","bit 0,b",exec.asm,"PRINT4:			BIT     0,B"
1958,1958,1969,040e95,040e95,"call z,$043947","call z,$043977","call z,$000000",exec.asm,"CALL    Z,CRLF"
1959,1959,1970,040e99,040e99,jp $040b96,jp $040b96,jp $000000,exec.asm,JP      XEQ
1960,1960,1971,040e9d,040e9d,inc iy,inc iy,inc iy,exec.asm,"ONERR:			INC     IY              ;SKIP ""ERROR"""
1961,1961,1972,040e9f,040e9f,"ld hl,$000000","ld hl,$000000","ld hl,$000000",exec.asm,"LD      HL,0"
1962,1962,1973,040ea3,040ea3,"ld ($044d2c),hl","ld ($044d2c),hl","ld ($000000),hl",exec.asm,"LD      (ERRTRP),HL"
1963,1963,1974,040ea7,040ea7,call $040a70,call $040a70,call $000000,exec.asm,CALL    NXT
1964,1964,1975,040eab,040eab,cp $87,cp $87,cp $00,exec.asm,CP      OFF_
1965,1965,1976,040ead,040ead,inc iy,inc iy,inc iy,exec.asm,INC     IY
1966,1966,1977,040eaf,040eaf,"jp z,$040b96","jp z,$040b96","jp z,$000000",exec.asm,"JP      Z,XEQ"
1967,1967,1978,040eb3,040eb3,dec iy,dec iy,dec iy,exec.asm,DEC     IY
1968,1968,1979,040eb5,040eb5,"ld ($044d2c),iy","ld ($044d2c),iy","ld ($000000),iy",exec.asm,"LD      (ERRTRP),IY"
1969,1969,1980,040eba,040eba,jp $040c2b,jp $040c2b,jp $000000,exec.asm,JP      REM_EX
1970,1970,1981,040ebe,040ebe,cp $85,cp $85,cp $00,exec.asm,ON_EX_:			CP      TERROR_EX
1971,1971,1982,040ec0,040ec0,"jr z,$-$23","jr z,$-$23","jr z,$-$00",exec.asm,"JR      Z,ONERR         ;""ON ERROR"""
1972,1972,1983,040ec2,040ec2,call $04030a,call $04030a,call $000000,exec.asm,CALL    EXPRI
1973,1973,1984,040ec6,040ec6,"ld a,(iy)","ld a,(iy)","ld a,(iy)",exec.asm,"LD      A,(IY)"
1974,1974,1985,040ec9,040ec9,inc iy,inc iy,inc iy,exec.asm,INC     IY
1975,1975,1986,040ecb,040ecb,"ld e,$2c","ld e,$2c","ld e,$00",exec.asm,"LD      E,','           ;SEPARATOR"
1976,1976,1987,040ecd,040ecd,cp $e5,cp $e5,cp $00,exec.asm,CP      TGOTO
1977,1977,1988,040ecf,040ecf,"jr z,$+$0d","jr z,$+$0d","jr z,$+$00",exec.asm,"JR      Z,ON1"
1978,1978,1989,040ed1,040ed1,cp $e4,cp $e4,cp $00,exec.asm,CP      TGOSUB
1979,1979,1990,040ed3,040ed3,"jr z,$+$09","jr z,$+$09","jr z,$+$00",exec.asm,"JR      Z,ON1"
1980,1980,1991,040ed5,040ed5,"ld e,$f2","ld e,$f2","ld e,$00",exec.asm,"LD      E,TPROC"
1981,1981,1992,040ed7,040ed7,cp e,cp e,cp e,exec.asm,CP      E
1982,1982,1993,040ed8,040ed8,"ld a,$27","ld a,$27","ld a,$00",exec.asm,"LD      A,39"
1983,1983,1994,040eda,040eda,"jr nz,$+$47","jr nz,$+$47","jr nz,$+$00",exec.asm,"JR      NZ,ERROR2_EX       ;""ON syntax"""
1984,1984,1995,040edc,040edc,"ld d,a","ld d,a","ld d,a",exec.asm,"ON1:			LD      D,A"
1985,1985,1996,040edd,040edd,exx,exx,exx,exec.asm,EXX
1986,1986,1997,040ede,040ede,push hl,push hl,push hl,exec.asm,PUSH    HL
1987,1987,1998,040edf,040edf,exx,exx,exx,exec.asm,EXX
1988,1988,1999,040ee0,040ee0,pop bc,pop bc,pop bc,exec.asm,POP     BC              ;ON INDEX
1989,1989,2000,040ee1,040ee1,"ld a,b","ld a,b","ld a,b",exec.asm,"LD      A,B"
1990,1990,2001,040ee2,040ee2,or h,or h,or h,exec.asm,OR      H
1991,1991,2002,040ee3,040ee3,or l,or l,or l,exec.asm,OR      L
1992,1992,2003,040ee4,040ee4,"jr nz,$+$2c","jr nz,$+$2c","jr nz,$+$00",exec.asm,"JR      NZ,ON4          ;OUT OF RANGE"
1993,1993,2004,040ee6,040ee6,or c,or c,or c,exec.asm,OR      C
1994,1994,2005,040ee7,040ee7,"jr z,$+$29","jr z,$+$29","jr z,$+$00",exec.asm,"JR      Z,ON4"
1995,1995,2006,040ee9,040ee9,dec c,dec c,dec c,exec.asm,DEC     C
1996,1996,2007,040eea,040eea,"jr z,$+$10","jr z,$+$10","jr z,$+$00",exec.asm,"JR      Z,ON3           ;INDEX=1"
1997,1997,2008,040eec,040eec,call $04177a,call $0417a4,call $000000,exec.asm,ON2:			CALL    TERMQ
1998,1998,2009,040ef0,040ef0,"jr z,$+$20","jr z,$+$20","jr z,$+$00",exec.asm,"JR      Z,ON4           ;OUT OF RANGE"
1999,1999,2010,040ef2,040ef2,inc iy,inc iy,inc iy,exec.asm,INC     IY              ;SKIP DELIMITER
2000,2000,2011,040ef4,040ef4,cp e,cp e,cp e,exec.asm,CP      E
2001,2001,2012,040ef5,040ef5,"jr nz,$-$09","jr nz,$-$09","jr nz,$-$00",exec.asm,"JR      NZ,ON2"
2002,2002,2013,040ef7,040ef7,dec c,dec c,dec c,exec.asm,DEC     C
2003,2003,2014,040ef8,040ef8,"jr nz,$-$0c","jr nz,$-$0c","jr nz,$-$00",exec.asm,"JR      NZ,ON2"
2004,2004,2015,040efa,040efa,"ld a,e","ld a,e","ld a,e",exec.asm,"ON3:			LD      A,E"
2005,2005,2016,040efb,040efb,cp $f2,cp $f2,cp $00,exec.asm,CP      TPROC
2006,2006,2017,040efd,040efd,"jr z,$+$28","jr z,$+$28","jr z,$+$00",exec.asm,"JR      Z,ONPROC"
2007,2007,2018,040eff,040eff,push de,push de,push de,exec.asm,PUSH    DE
2008,2008,2019,040f00,040f00,call $040325,call $040325,call $000000,exec.asm,CALL    ITEMI           ;LINE NUMBER
2009,2009,2020,040f04,040f04,pop de,pop de,pop de,exec.asm,POP     DE
2010,2010,2021,040f05,040f05,"ld a,d","ld a,d","ld a,d",exec.asm,"LD      A,D"
2011,2011,2022,040f06,040f06,cp $e5,cp $e5,cp $00,exec.asm,CP      TGOTO
2012,2012,2023,040f08,040f08,"jr z,$+$2f","jr z,$+$2f","jr z,$+$00",exec.asm,"JR      Z,GOTO2"
2013,2013,2024,040f0a,040f0a,call $041787,call $0417b1,call $000000,exec.asm,CALL    SPAN            ;SKIP REST OF LIST
2014,2014,2025,040f0e,040f0e,jr $+$3d,jr $+$3d,jr $+$00,exec.asm,JR      GOSUB1
2015,2015,2026,040f10,040f10,"ld a,(iy)","ld a,(iy)","ld a,(iy)",exec.asm,"ON4:			LD      A,(IY)"
2016,2016,2027,040f13,040f13,inc iy,inc iy,inc iy,exec.asm,INC     IY
2017,2017,2028,040f15,040f15,cp $8b,cp $8b,cp $00,exec.asm,CP      ELSE_EX_
2018,2018,2029,040f17,040f17,"jp z,$04134b","jp z,$04134b","jp z,$000000",exec.asm,"JP      Z,IF1           ;ELSE CLAUSE"
2019,2019,2030,040f1b,040f1b,cp $0d,cp $0d,cp $00,exec.asm,CP      CR
2020,2020,2031,040f1d,040f1d,"jr nz,$-$0d","jr nz,$-$0d","jr nz,$-$00",exec.asm,"JR      NZ,ON4"
2021,2021,2032,040f1f,040f1f,"ld a,$28","ld a,$28","ld a,$00",exec.asm,"LD      A,40"
2022,2022,2033,040f21,040f21,jp $043760,jp $043790,jp $000000,exec.asm,"ERROR2_EX:			JP      ERROR_           ;""ON range"""
2023,2023,2034,040f25,040f25,"ld a,$ee","ld a,$ee","ld a,$00",exec.asm,"ONPROC:			LD      A,TON"
2024,2024,2035,040f27,040f27,jp $041084,jp $041084,jp $000000,exec.asm,JP      PROC_EX
2025,2025,2036,040f2b,040f2b,call $040325,call $040325,call $000000,exec.asm,GOTO_EX:			CALL    ITEMI           	; Fetch the line number
2026,2026,2037,040f2f,040f2f,call $04177a,call $0417a4,call $000000,exec.asm,GOTO1:			CALL    TERMQ			; Check for terminator
2027,2027,2038,040f33,040f33,"jp nz,$040c97","jp nz,$040c97","jp nz,$000000",exec.asm,"JP      NZ,SYNTAX		; Throw a ""Syntax Error"" if not found"
2028,2028,2039,040f37,040f37,exx,exx,exx,exec.asm,GOTO2:			EXX
2029,2029,2040,040f38,040f38,call $04398f,call $0439bf,call $000000,exec.asm,CALL    FINDL			; HL: Line number - Find the line
2030,2030,2041,040f3c,040f3c,push hl,push hl,push hl,exec.asm,PUSH    HL			; HL: Address of the line
2031,2031,2042,040f3d,040f3d,pop iy,pop iy,pop iy,exec.asm,POP     IY			; IY = HL
2032,2032,2043,040f3f,040f3f,"jp z,$040b92","jp z,$040b92","jp z,$000000",exec.asm,"JP      Z,XEQ0			; If the line is found, then continue execution at that point"
2033,2033,2044,040f43,040f43,"ld a,$29","ld a,$29","ld a,$00",exec.asm,"LD      A,41			; Otherwise throw a ""No such line"" error"
2034,2034,2045,040f45,040f45,jr $-$24,jr $-$24,jr $-$00,exec.asm,JR      ERROR2_EX
2035,2035,2046,040f47,040f47,call $040325,call $040325,call $000000,exec.asm,GOSUB_EX:			CALL    ITEMI			; Fetch the line number
2036,2036,2047,040f4b,040f4b,push iy,push iy,push iy,exec.asm,GOSUB1:			PUSH    IY              	; Push the current execution address onto the execution stack
2037,2037,2048,040f4d,040f4d,call $04164f,call $041679,call $000000,exec.asm,CALL    CHECK           	; Check there is enough room
2038,2038,2049,040f51,040f51,call $040f2f,call $040f2f,call $000000,exec.asm,CALL    GOTO1           	; Push the marker (address of GOSCHK) onto the execution stack and GOTO the line number
2039,2039,2050,040f55,040f55,pop de,pop de,pop de,exec.asm,RETURN:			POP     DE			; Pop the marker off the execution stack
2040,2040,2051,040f56,040f56,"ld hl,$040f55","ld hl,$040f55","ld hl,$000000",exec.asm,"LD      HL,GOSCHK		; Compare with GOSCHK"
2041,2041,2052,040f5a,040f5a,or a,or a,or a,exec.asm,OR      A
2042,2042,2053,040f5b,040f5b,"sbc hl,de","sbc hl,de","sbc hl,de",exec.asm,"SBC     HL,DE"
2043,2043,2054,040f5d,040f5d,pop iy,pop iy,pop iy,exec.asm,POP     IY			; Pop the return address off the execution stack
2044,2044,2055,040f5f,040f5f,"jp z,$040b96","jp z,$040b96","jp z,$000000",exec.asm,"JP      Z,XEQ			; Provided this has been called by a GOSUB then continue execution at the return address"
2045,2045,2056,040f63,040f63,"ld a,$26","ld a,$26","ld a,$00",exec.asm,"LD      A,38			; Otherwise throw a ""No GOSUB"" error"
2046,2046,2057,040f65,040f65,jr $-$44,jr $-$44,jr $-$00,exec.asm,JR      ERROR2_EX
2047,2047,2058,040f67,040f67,push iy,push iy,push iy,exec.asm,REPEAT_EX:			PUSH    IY			; Push the current execution address onto the execution stack
2048,2048,2059,040f69,040f69,call $04164f,call $041679,call $000000,exec.asm,CALL    CHECK			; Check if there is enough room
2049,2049,2060,040f6d,040f6d,call $040b96,call $040b96,call $000000,exec.asm,CALL    XEQ			; Push the marker (address of REPCHK) onto the execution stack and continue execution
2050,2050,2061,040f71,040f71,pop bc,pop bc,pop bc,exec.asm,UNTIL_EX:			POP     BC			; Fetch the marker
2051,2051,2062,040f72,040f72,push bc,push bc,push bc,exec.asm,PUSH    BC			; And push it back onto the execution stack
2052,2052,2063,040f73,040f73,"ld hl,$040f71","ld hl,$040f71","ld hl,$000000",exec.asm,"LD      HL,REPCHK		; Compare with REPCHK"
2053,2053,2064,040f77,040f77,or a,or a,or a,exec.asm,OR      A
2054,2054,2065,040f78,040f78,"sbc hl,bc","sbc hl,bc","sbc hl,bc",exec.asm,"SBC     HL,BC"
2055,2055,2066,040f7a,040f7a,"ld a,$2b","ld a,$2b","ld a,$00",exec.asm,"LD      A,43"
2056,2056,2067,040f7c,040f7c,"jr nz,$-$5b","jr nz,$-$5b","jr nz,$-$00",exec.asm,"JR      NZ,ERROR2_EX		; Throw a ""No REPEAT"" if this value does not match"
2057,2057,2068,040f7e,040f7e,call $04030a,call $04030a,call $000000,exec.asm,CALL    EXPRI			; Fetch the expression
2058,2058,2069,040f82,040f82,call $0408df,call $0408df,call $000000,exec.asm,CALL    TEST			; Test if the expression evaluates to zero
2059,2059,2070,040f86,040f86,pop bc,pop bc,pop bc,exec.asm,POP     BC			; Pop the marker
2060,2060,2071,040f87,040f87,pop de,pop de,pop de,exec.asm,POP     DE			; Pop the address of the REPEAT instruction
2061,2061,2072,040f88,040f88,"jr nz,$+$07","jr nz,$+$07","jr nz,$+$00",exec.asm,"JR      NZ,XEQ2         	; If it is TRUE, then continue execution after the UNTIL instruction (we're done looping)"
2062,2062,2073,040f8a,040f8a,push de,push de,push de,exec.asm,PUSH    DE			; Push the address of the REPEAT instruction back on the stack
2063,2063,2074,040f8b,040f8b,push bc,push bc,push bc,exec.asm,PUSH    BC			; Push the marker back on the stack
2064,2064,2075,040f8c,040f8c,push de,push de,push de,exec.asm,PUSH    DE			; IY = DE
2065,2065,2076,040f8d,040f8d,pop iy,pop iy,pop iy,exec.asm,POP     IY			; This sets the execution address back to the REPEAT instruction
2066,2066,2077,040f8f,040f8f,jp $040b96,jp $040b96,jp $000000,exec.asm,XEQ2:			JP      XEQ			; Continue execution
2067,2067,2078,040f93,040f93,"ld a,$22","ld a,$22","ld a,$00",exec.asm,"FORVAR:			LD      A,34"
2068,2068,2079,040f95,040f95,jr $-$74,jr $-$74,jr $-$00,exec.asm,"JR      ERROR2_EX          	; Throw ""FOR variable"" error"
2069,2069,2080,040f97,040f97,call $0415be,call $0415e8,call $000000,exec.asm,FOR_EX:			CALL    ASSIGN			; Assign the START expression value to a variable
2070,2070,2081,040f9b,040f9b,"jr nz,$-$08","jr nz,$-$08","jr nz,$-$00",exec.asm,"JR      NZ,FORVAR       	; If the variable is a string, or invalid, then throw a ""FOR variable"" error"
2071,2071,2082,040f9d,040f9d,push af,push af,push af,exec.asm,PUSH    AF              	; Save the variable type
2072,2072,2083,040f9e,040f9e,"ld a,(iy)","ld a,(iy)","ld a,(iy)",exec.asm,"LD      A,(IY)			; Check the next token"
2073,2073,2084,040fa1,040fa1,cp $b8,cp $b8,cp $00,exec.asm,"CP      TO_EX			; Compare with the token value for ""TO"""
2074,2074,2085,040fa3,040fa3,"ld a,$24","ld a,$24","ld a,$00",exec.asm,"LD      A,36			; Set the error code to 36 (""No TO"")"
2075,2075,2086,040fa5,040fa5,"jp nz,$040f21","jp nz,$040f21","jp nz,$000000",exec.asm,"JP      NZ,ERROR2_EX       	; And throw the error if that token is missing"
2076,2076,2087,040fa9,040fa9,inc iy,inc iy,inc iy,exec.asm,INC     IY			; Skip to the next token
2077,2077,2088,040fab,040fab,push ix,push ix,push ix,exec.asm,PUSH    IX
2078,2078,2089,040fad,040fad,call $040302,call $040302,call $000000,exec.asm,CALL    EXPRN           	; Fetch the LIMIT expression value
2079,2079,2090,040fb1,040fb1,pop ix,pop ix,pop ix,exec.asm,POP     IX
2080,2080,2091,040fb3,040fb3,pop af,pop af,pop af,exec.asm,POP     AF
2081,2081,2092,040fb4,040fb4,"ld b,a","ld b,a","ld b,a",exec.asm,"LD      B,A             	; B: LIMIT value type (04h = Integer, 05h = Float)"
2082,2082,2093,040fb5,040fb5,push bc,push bc,push bc,exec.asm,PUSH    BC              	; Stack the LIMIT value
2083,2083,2094,040fb6,040fb6,push hl,push hl,push hl,exec.asm,PUSH    HL
2084,2084,2095,040fb7,040fb7,"ld hl,$000000","ld hl,$000000","ld hl,$000000",exec.asm,"LD      HL,0"
2085,2085,2096,040fbb,040fbb,"ld c,h","ld c,h","ld c,h",exec.asm,"LD      C,H"
2086,2086,2097,040fbc,040fbc,exx,exx,exx,exec.asm,EXX
2087,2087,2098,040fbd,040fbd,push hl,push hl,push hl,exec.asm,PUSH    HL
2088,2088,2099,040fbe,040fbe,"ld hl,$000001","ld hl,$000001","ld hl,$000000",exec.asm,"LD      HL,1            	; The preset STEP value is 1"
2089,2089,2100,040fc2,040fc2,exx,exx,exx,exec.asm,EXX
2090,2090,2101,040fc3,040fc3,"ld a,(iy)","ld a,(iy)","ld a,(iy)",exec.asm,"LD      A,(IY)			; Fetch the next token"
2091,2091,2102,040fc6,040fc6,cp $88,cp $88,cp $00,exec.asm,"CP      STEP			; Compare with the token value for ""STEP"""
2092,2092,2103,040fc8,040fc8,"jr nz,$+$0c","jr nz,$+$0c","jr nz,$+$00",exec.asm,"JR      NZ,FOR1			; If there is no STEP token, then skip the next bit"
2093,2093,2104,040fca,040fca,inc iy,inc iy,inc iy,exec.asm,INC     IY			; Skip past the STEP token
2094,2094,2105,040fcc,040fcc,push ix,push ix,push ix,exec.asm,PUSH    IX
2095,2095,2106,040fce,040fce,call $040302,call $040302,call $000000,exec.asm,CALL    EXPRN          		; Fetch the STEP expression value
2096,2096,2107,040fd2,040fd2,pop ix,pop ix,pop ix,exec.asm,POP     IX
2097,2097,2108,040fd4,040fd4,push bc,push bc,push bc,exec.asm,FOR1:			PUSH    BC			; Stack the STEP value
2098,2098,2109,040fd5,040fd5,push hl,push hl,push hl,exec.asm,PUSH    HL
2099,2099,2110,040fd6,040fd6,exx,exx,exx,exec.asm,EXX
2100,2100,2111,040fd7,040fd7,push hl,push hl,push hl,exec.asm,PUSH    HL
2101,2101,2112,040fd8,040fd8,exx,exx,exx,exec.asm,EXX
2102,2102,2113,040fd9,040fd9,push iy,push iy,push iy,exec.asm,PUSH    IY              	; Stack the current execution address
2103,2103,2114,040fdb,040fdb,push ix,push ix,push ix,exec.asm,PUSH    IX              	; Stack the loop variable
2104,2104,2115,040fdd,040fdd,call $04164f,call $041679,call $000000,exec.asm,CALL    CHECK
2105,2105,2116,040fe1,040fe1,call $040b96,call $040b96,call $000000,exec.asm,CALL    XEQ
2106,2106,2117,040fe5,040fe5,pop bc,pop bc,pop bc,exec.asm,NEXT_EX:			POP     BC              	; Pop the marker off the execution stack
2107,2107,2118,040fe6,040fe6,"ld hl,$040fe5","ld hl,$040fe5","ld hl,$000000",exec.asm,"LD      HL,FORCHK		; Compare with FORCHK"
2108,2108,2119,040fea,040fea,or a,or a,or a,exec.asm,OR      A
2109,2109,2120,040feb,040feb,"sbc hl,bc","sbc hl,bc","sbc hl,bc",exec.asm,"SBC     HL,BC"
2110,2110,2121,040fed,040fed,"ld a,$20","ld a,$20","ld a,$00",exec.asm,"LD      A,32"
2111,2111,2122,040fef,040fef,"jp nz,$04107b","jp nz,$04107b","jp nz,$000000",exec.asm,"JP      NZ,ERROR3_EX      		; If this does not match, throw a ""No FOR"" error"
2112,2112,2123,040ff3,040ff3,call $04177a,call $0417a4,call $000000,exec.asm,CALL    TERMQ			; Check for terminator (a NEXT without a variable)
2113,2113,2124,040ff7,040ff7,pop hl,pop hl,pop hl,exec.asm,POP     HL			; Pop the address of the loop variable off the execution stack
2114,2114,2125,040ff8,040ff8,push hl,push hl,push hl,exec.asm,PUSH    HL			; Push it back onto the execution stack
2115,2115,2126,040ff9,040ff9,push bc,push bc,push bc,exec.asm,PUSH    BC			; Push the marker back onto the execution stack
2116,2116,2127,040ffa,040ffa,push hl,push hl,push hl,exec.asm,PUSH    HL			; HL: Address of the loop variable off the stack
2117,2117,2128,040ffb,040ffb,"call nz,$043a3a","call nz,$043a6a","call nz,$000000",exec.asm,"CALL    NZ,GETVAR       	; If there is no terminator, get the variable from the args"
2118,2118,2129,040fff,040fff,pop de,pop de,pop de,exec.asm,POP     DE			; DE: Address of the loop variable off the stack
2119,2119,2130,041000,041000,"ex de,hl","ex de,hl","ex de,hl",exec.asm,"EX      DE,HL			; HL: Address of the loop variable off the stack, DE: Address of the variable from args"
2120,2120,2131,041001,041001,or a,or a,or a,exec.asm,OR      A
2121,2121,2132,041002,041002,"sbc hl,de","sbc hl,de","sbc hl,de",exec.asm,"NEXT0:			SBC     HL,DE			; Compare to make sure that the variables match"
2122,2122,2133,041004,041004,"jr nz,$+$63","jr nz,$+$63","jr nz,$+$00",exec.asm,"JR      NZ,NEXT1		; They don't, so jump to NEXT1"
2123,2123,2134,041006,041006,push de,push de,push de,exec.asm,PUSH    DE
2124,2124,2135,041007,041007,"ld ix,$00000c","ld ix,$00000c","ld ix,$000000",exec.asm,"LD      IX,9+3			; IX: Address of the STEP value on the execution stack"
2125,2125,2136,04100c,04100c,"add ix,sp","add ix,sp","add ix,sp",exec.asm,"ADD     IX,SP"
2126,2126,2137,04100e,04100e,call $0429e1,call $042a11,call $000000,exec.asm,CALL    DLOAD5_SPL      	; Load the STEP value
2127,2127,2138,041012,041012,"ld a,(ix+$10)","ld a,(ix+$10)","ld a,(ix+$00)",exec.asm,"LD      A,(IX+16)       	; Get the STEP type"
2128,2128,2139,041015,041015,pop ix,pop ix,pop ix,exec.asm,POP     IX
2129,2129,2140,041017,041017,call $040416,call $040416,call $000000,exec.asm,CALL    LOADN           	; Load the LOOP variable
2130,2130,2141,04101b,04101b,"bit 7,d","bit 7,d","bit 7,d",exec.asm,"BIT     7,D             	; Check the sign"
2131,2131,2142,04101d,04101d,push af,push af,push af,exec.asm,PUSH    AF
2132,2132,2143,04101e,04101e,"ld a,$0b","ld a,$0b","ld a,$00",exec.asm,"LD      A,'+' & 0FH"
2133,2133,2144,041020,041020,call $04206a,call $04209a,call $000000,exec.asm,CALL    FPP             	; Add the STEP
2134,2134,2145,041024,041024,"jr c,$+$57","jr c,$+$57","jr c,$+$00",exec.asm,"JR      C,ERROR3_EX"
2135,2135,2146,041026,041026,pop af,pop af,pop af,exec.asm,POP     AF              	; Restore TYPE
2136,2136,2147,041027,041027,push af,push af,push af,exec.asm,PUSH    AF
2137,2137,2148,041028,041028,call $0415d6,call $041600,call $000000,exec.asm,CALL    STORE           	; Update the variable
2138,2138,2149,04102c,04102c,"ld ix,$000015","ld ix,$000015","ld ix,$000000",exec.asm,"LD      IX,18+3			; IX: Address of the LIMIT value on the execution stack"
2139,2139,2150,041031,041031,"add ix,sp","add ix,sp","add ix,sp",exec.asm,"ADD     IX,SP"
2140,2140,2151,041033,041033,call $0429e1,call $042a11,call $000000,exec.asm,CALL    DLOAD5_SPL      	; Load the LIMIT value
2141,2141,2152,041037,041037,pop af,pop af,pop af,exec.asm,POP     AF
2142,2142,2153,041038,041038,"call z,$0408d7","call z,$0408d7","call z,$000000",exec.asm,"CALL    Z,SWAP			; Swap the arguments if the sign is ?"
2143,2143,2154,04103c,04103c,"ld a,$08","ld a,$08","ld a,$00",exec.asm,"LD      A,0+'<'-4 & 0FH ; ez80asm doesn't do () in expressions"
2144,2144,2155,04103e,04103e,call $04206a,call $04209a,call $000000,exec.asm,CALL    FPP             	; Test against the limit
2145,2145,2156,041042,041042,"jr c,$+$39","jr c,$+$39","jr c,$+$00",exec.asm,"JR      C,ERROR3_EX		; Throw an error if FPP returns bad"
2146,2146,2157,041044,041044,inc h,inc h,inc h,exec.asm,INC     H
2147,2147,2158,041045,041045,"jr nz,$+$16","jr nz,$+$16","jr nz,$+$00",exec.asm,"JR      NZ,LOOP_        	; Keep looping"
2148,2148,2159,041047,041047,"ld hl,$00001b","ld hl,$00001b","ld hl,$000000",exec.asm,"LD      HL,27			; Adjust the stack"
2149,2149,2160,04104b,04104b,"add hl,sp","add hl,sp","add hl,sp",exec.asm,"ADD     HL,SP"
2150,2150,2161,04104c,04104c,"ld sp,hl","ld sp,hl","ld sp,hl",exec.asm,"LD      SP,HL"
2151,2151,2162,04104d,04104d,call $040a70,call $040a70,call $000000,exec.asm,CALL    NXT
2152,2152,2163,041051,041051,cp $2c,cp $2c,cp $00,exec.asm,"CP      ','			; Check for multiple variables"
2153,2153,2164,041053,041053,"jp nz,$040b96","jp nz,$040b96","jp nz,$000000",exec.asm,"JP      NZ,XEQ			; No, so we are done at ths point"
2154,2154,2165,041057,041057,inc iy,inc iy,inc iy,exec.asm,INC     IY			; Increment to the next variable
2155,2155,2166,041059,041059,jr $-$74,jr $-$74,jr $-$00,exec.asm,JR      NEXT_EX			; And continue
2156,2156,2167,04105b,04105b,pop bc,pop bc,pop bc,exec.asm,LOOP_:			POP     BC
2157,2157,2168,04105c,04105c,pop de,pop de,pop de,exec.asm,POP     DE
2158,2158,2169,04105d,04105d,pop iy,pop iy,pop iy,exec.asm,POP     IY
2159,2159,2170,04105f,04105f,push iy,push iy,push iy,exec.asm,PUSH    IY
2160,2160,2171,041061,041061,push de,push de,push de,exec.asm,PUSH    DE
2161,2161,2172,041062,041062,push bc,push bc,push bc,exec.asm,PUSH    BC
2162,2162,2173,041063,041063,jp $040b96,jp $040b96,jp $000000,exec.asm,JP      XEQ
2163,2163,2174,041067,041067,"ld hl,$00001b","ld hl,$00001b","ld hl,$000000",exec.asm,"NEXT1:			LD      HL,27			; TODO: What does this do?"
2164,2164,2175,04106b,04106b,"add hl,sp","add hl,sp","add hl,sp",exec.asm,"ADD     HL,SP"
2165,2165,2176,04106c,04106c,"ld sp,hl","ld sp,hl","ld sp,hl",exec.asm,"LD      SP,HL			; Adjust the stack"
2166,2166,2177,04106d,04106d,pop bc,pop bc,pop bc,exec.asm,POP     BC
2167,2167,2178,04106e,04106e,"ld hl,$040fe5","ld hl,$040fe5","ld hl,$000000",exec.asm,"LD      HL,FORCHK"
2168,2168,2179,041072,041072,"sbc hl,bc","sbc hl,bc","sbc hl,bc",exec.asm,"SBC     HL,BC"
2169,2169,2180,041074,041074,pop hl,pop hl,pop hl,exec.asm,POP     HL              	; Variable pointer
2170,2170,2181,041075,041075,push hl,push hl,push hl,exec.asm,PUSH    HL
2171,2171,2182,041076,041076,push bc,push bc,push bc,exec.asm,PUSH    BC
2172,2172,2183,041077,041077,"jr z,$-$75","jr z,$-$75","jr z,$-$00",exec.asm,"JR      Z,NEXT0"
2173,2173,2184,041079,041079,"ld a,$21","ld a,$21","ld a,$00",exec.asm,"LD      A,33"
2174,2174,2185,04107b,04107b,jp $043760,jp $043790,jp $000000,exec.asm,"ERROR3_EX:			JP      ERROR_           	; Throw the error ""Can't match FOR"""
2175,2175,2186,04107f,04107f,push af,push af,push af,exec.asm,FN_EX:			PUSH    AF              	; Push A onto the stack; this'll be checked for the token ON (TON) in PROC5
2176,2176,2187,041080,041080,call $041089,call $041089,call $000000,exec.asm,CALL    PROC1
2177,2177,2188,041084,041084,push af,push af,push af,exec.asm,"PROC_EX:			PUSH    AF			; Push A onto the stack; this'll be checked for the token ON (TON) in PROC5,"
2178,2178,2189,041085,041085,call $041089,call $041089,call $000000,exec.asm,CALL    PROC1			; and is also space reserved on the stack for the return address
2179,2179,2190,041089,041089,call $04164f,call $041679,call $000000,exec.asm,PROC1:			CALL    CHECK			; Check there is space for this
2180,2180,2191,04108d,04108d,dec iy,dec iy,dec iy,exec.asm,DEC     IY			; Decrement IY to the PROC token
2181,2181,2192,04108f,04108f,push iy,push iy,push iy,exec.asm,PUSH    IY			; Stack the pointer
2182,2182,2193,041091,041091,call $043afb,call $043b2b,call $000000,exec.asm,CALL    GETDEF			; Search for this PROC/FN entry in the dynamic area
2183,2183,2194,041095,041095,pop bc,pop bc,pop bc,exec.asm,POP     BC			; BC = IY
2184,2184,2195,041096,041096,"jr z,$+$43","jr z,$+$43","jr z,$+$00",exec.asm,"JR      Z,PROC4			; If found in the dynamic area then skip to PROC4"
2185,2185,2196,041098,041098,"ld a,$1e","ld a,$1e","ld a,$00",exec.asm,"LD      A,30"
2186,2186,2197,04109a,04109a,"jr c,$-$1f","jr c,$-$1f","jr c,$-$00",exec.asm,"JR      C,ERROR3_EX        	; Throw error ""Bad call"" if invalid PROC/FN call"
2187,2187,2198,04109c,04109c,push bc,push bc,push bc,exec.asm,PUSH    BC			; BC: Still pointing to the PROC token in the tokenised line
2188,2188,2199,04109d,04109d,"ld hl,($044d14)","ld hl,($044d14)","ld hl,($000000)",exec.asm,"LD      HL,(PAGE_)		; HL: Start of program memory"
2189,2189,2200,0410a1,0410a1,"ld a,$dd","ld a,$dd","ld a,$00",exec.asm,"PROC2:			LD      A,DEF_			;  A: The token to search for"
2190,2190,2201,0410a3,0410a3,call $04184e,call $041878,call $000000,exec.asm,"CALL    SEARCH_EX          	; Look for ""DEF"" as the first token in a program line"
2191,2191,2202,0410a7,0410a7,"jr c,$+$28","jr c,$+$28","jr c,$+$00",exec.asm,"JR      C,PROC3			; Not found, so jump to PROC3"
2192,2192,2203,0410a9,0410a9,push hl,push hl,push hl,exec.asm,PUSH    HL			; HL: Points to the DEF token in the DEFPROC
2193,2193,2204,0410aa,0410aa,pop iy,pop iy,pop iy,exec.asm,POP     IY			; IY = HL
2194,2194,2205,0410ac,0410ac,inc iy,inc iy,inc iy,exec.asm,INC     IY              	; Skip the DEF token
2195,2195,2206,0410ae,0410ae,call $040a70,call $040a70,call $000000,exec.asm,CALL    NXT			; And any whitespace
2196,2196,2207,0410b2,0410b2,call $043afb,call $043b2b,call $000000,exec.asm,CALL    GETDEF			; Search for this PROC/FN entry in the dynamic area
2197,2197,2208,0410b6,0410b6,push iy,push iy,push iy,exec.asm,PUSH    IY
2198,2198,2209,0410b8,0410b8,pop de,pop de,pop de,exec.asm,POP     DE			; DE: Points to the PROC/FN token in tokenised line of the DEFPROC
2199,2199,2210,0410b9,0410b9,"jr c,$+$0b","jr c,$+$0b","jr c,$+$00",exec.asm,"JR      C,PROC6			; Skip if there is an error (neither FN or PROC first)"
2200,2200,2211,0410bb,0410bb,"call nz,$043bae","call nz,$043bde","call nz,$000000",exec.asm,"CALL    NZ,CREATE		; Create an entity in the dynamic area"
2201,2201,2212,0410bf,0410bf,push iy,push iy,push iy,exec.asm,PUSH    IY			; IY: Pointer to the DEFPROC/FN arguments
2202,2202,2213,0410c1,0410c1,pop de,pop de,pop de,exec.asm,POP     DE			; DE = IY
2203,2203,2214,0410c2,0410c2,"ld (hl),de","ld (hl),de","ld (hl),de",exec.asm,"LD	(HL),DE			; Save address"
2204,2204,2215,0410c4,0410c4,"ex de,hl","ex de,hl","ex de,hl",exec.asm,"PROC6:			EX      DE,HL			; HL: Address of the procedure"
2205,2205,2216,0410c5,0410c5,"ld a,$0d","ld a,$0d","ld a,$00",exec.asm,"LD      A,CR			; The character to search for"
2206,2206,2217,0410c7,0410c7,"ld bc,$000100","ld bc,$000100","ld bc,$000000",exec.asm,"LD	BC,100h			; Only need to search 256 bytes or so ahead; maximum line length"
2207,2207,2218,0410cb,0410cb,cpir,cpir,cpir,exec.asm,CPIR                    	; Skip to next line
2208,2208,2219,0410cd,0410cd,jr $-$2c,jr $-$2c,jr $-$00,exec.asm,"JR      PROC2			; Rinse, lather and repeat"
2209,2209,2220,0410cf,0410cf,pop iy,pop iy,pop iy,exec.asm,PROC3:			POP     IY              	; Restore the execution address
2210,2210,2221,0410d1,0410d1,call $043afb,call $043b2b,call $000000,exec.asm,CALL    GETDEF			; Search for this PROC/FN entry in the dynamic area
2211,2211,2222,0410d5,0410d5,"ld a,$1d","ld a,$1d","ld a,$00",exec.asm,"LD      A,29"
2212,2212,2223,0410d7,0410d7,"jr nz,$-$5c","jr nz,$-$5c","jr nz,$-$00",exec.asm,"JR      NZ,ERROR3_EX      		; Throw error ""No such FN/PROC"" if not found"
2213,2213,2224,0410d9,0410d9,"ld de,(hl)","ld de,(hl)","ld de,(hl)",exec.asm,"PROC4:			LD	DE,(HL)			; HL: Address of pointer; fetch entity address in DE"
2214,2214,2225,0410db,0410db,"ld hl,$000003","ld hl,$000003","ld hl,$000000",exec.asm,"LD	HL,3"
2215,2215,2226,0410df,0410df,"add hl,sp","add hl,sp","add hl,sp",exec.asm,"ADD     HL,SP"
2216,2216,2227,0410e0,0410e0,call $040a70,call $040a70,call $000000,exec.asm,"CALL    NXT             	; Allow space before ""("""
2217,2217,2228,0410e4,0410e4,push de,push de,push de,exec.asm,PUSH    DE              	; Exchange DE and IY
2218,2218,2229,0410e5,0410e5,"ex (sp),iy","ex (sp),iy","ex (sp),iy",exec.asm,"EX      (SP),IY"
2219,2219,2230,0410e7,0410e7,cp $28,cp $28,cp $00,exec.asm,CP      '('             	; Arguments?
2220,2220,2231,0410e9,0410e9,pop de,pop de,pop de,exec.asm,POP     DE			; NB: This has been moved after the compare otherwise DE gets corrupted later? IDK why!?!
2221,2221,2232,0410ea,0410ea,"jr nz,$+$22","jr nz,$+$22","jr nz,$+$00",exec.asm,"JR      NZ,PROC5"
2222,2222,2233,0410ec,0410ec,call $040a70,call $040a70,call $000000,exec.asm,"CALL    NXT             	; Allow space before ""("""
2223,2223,2234,0410f0,0410f0,cp $28,cp $28,cp $00,exec.asm,CP      '('
2224,2224,2235,0410f2,0410f2,"jp nz,$040c97","jp nz,$040c97","jp nz,$000000",exec.asm,"JP      NZ,SYNTAX       	; Throw ""Syntax error"""
2225,2225,2236,0410f6,0410f6,push iy,push iy,push iy,exec.asm,PUSH    IY
2226,2226,2237,0410f8,0410f8,pop bc,pop bc,pop bc,exec.asm,POP     BC              	; Save IY in BC
2227,2227,2238,0410f9,0410f9,exx,exx,exx,exec.asm,EXX
2228,2228,2239,0410fa,0410fa,call $0416fa,call $041724,call $000000,exec.asm,CALL    SAVLOC          	; Save local parameters
2229,2229,2240,0410fe,0410fe,call $040a2f,call $040a2f,call $000000,exec.asm,CALL    BRAKET          	; Closing bracket
2230,2230,2241,041102,041102,exx,exx,exx,exec.asm,EXX
2231,2231,2242,041103,041103,push bc,push bc,push bc,exec.asm,PUSH    BC
2232,2232,2243,041104,041104,pop iy,pop iy,pop iy,exec.asm,POP     IY              	; Restore IY
2233,2233,2244,041106,041106,push hl,push hl,push hl,exec.asm,PUSH    HL
2234,2234,2245,041107,041107,call $041676,call $0416a0,call $000000,exec.asm,CALL    ARGUE           	; Transfer arguments
2235,2235,2246,04110b,04110b,pop hl,pop hl,pop hl,exec.asm,POP     HL
2236,2236,2247,04110c,04110c,inc hl,inc hl,inc hl,exec.asm,PROC5:			INC	HL			; Increment to the ON PROC flag address
2237,2237,2248,04110d,04110d,"ld a,(hl)","ld a,(hl)","ld a,(hl)",exec.asm,"LD	A, (HL)			; And fetch the value"
2238,2238,2249,04110e,04110e,dec hl,dec hl,dec hl,exec.asm,DEC 	HL
2239,2239,2250,04110f,04110f,"ld (hl),de","ld (hl),de","ld (hl),de",exec.asm,"LD	(HL), DE		; Save the ENDPROC return address pointer in the BASIC listing"
2240,2240,2251,041111,041111,cp $ee,cp $ee,cp $00,exec.asm,"CP	TON			; Was it ""ON PROC""?"
2241,2241,2252,041113,041113,"jp nz,$040b96","jp nz,$040b96","jp nz,$000000",exec.asm,"JP	NZ, XEQ			; No, so back to XEQ"
2242,2242,2253,041117,041117,push de,push de,push de,exec.asm,PUSH    DE			; Exchange DE and IY
2243,2243,2254,041118,041118,"ex (sp),iy","ex (sp),iy","ex (sp),iy",exec.asm,"EX      (SP),IY"
2244,2244,2255,04111a,04111a,call $041787,call $0417b1,call $000000,exec.asm,CALL    SPAN            	; Skip rest of ON list
2245,2245,2256,04111e,04111e,"ex (sp),iy","ex (sp),iy","ex (sp),iy",exec.asm,"EX      (SP),IY			; Exchange DE and IY"
2246,2246,2257,041120,041120,pop de,pop de,pop de,exec.asm,POP     DE
2247,2247,2258,041121,041121,"ld (hl),de","ld (hl),de","ld (hl),de",exec.asm,"LD	(HL), DE		; Save the return address"
2248,2248,2259,041123,041123,jp $040b96,jp $040b96,jp $000000,exec.asm,JP      XEQ
2249,2249,2260,041127,041127,pop bc,pop bc,pop bc,exec.asm,LOCAL_EX_:			POP     BC			; BC: The current check marker (on the stack)
2250,2250,2261,041128,041128,push bc,push bc,push bc,exec.asm,PUSH    BC
2251,2251,2262,041129,041129,"ld hl,$041084","ld hl,$041084","ld hl,$000000",exec.asm,"LD      HL,FNCHK		; Check if we are in a FN"
2252,2252,2263,04112d,04112d,or a,or a,or a,exec.asm,OR      A
2253,2253,2264,04112e,04112e,"sbc hl,bc","sbc hl,bc","sbc hl,bc",exec.asm,"SBC     HL,BC"
2254,2254,2265,041130,041130,"jr z,$+$18","jr z,$+$18","jr z,$+$00",exec.asm,"JR      Z,LOCAL1		; Yes, so all good, we can use local"
2255,2255,2266,041132,041132,"ld hl,$041089","ld hl,$041089","ld hl,$000000",exec.asm,"LD      HL,PROCHK		; Now check if we are in a PROC"
2256,2256,2267,041136,041136,or a,or a,or a,exec.asm,OR      A
2257,2257,2268,041137,041137,"sbc hl,bc","sbc hl,bc","sbc hl,bc",exec.asm,"SBC     HL,BC"
2258,2258,2269,041139,041139,"jr z,$+$0f","jr z,$+$0f","jr z,$+$00",exec.asm,"JR      Z,LOCAL1		; Again, all good, we can use local"
2259,2259,2270,04113b,04113b,"ld hl,$041758","ld hl,$041782","ld hl,$000000",exec.asm,"LD      HL,LOCCHK		; Finally check for the local parameters marker"
2260,2260,2271,04113f,04113f,or a,or a,or a,exec.asm,OR      A
2261,2261,2272,041140,041140,"sbc hl,bc","sbc hl,bc","sbc hl,bc",exec.asm,"SBC     HL,BC			; If it is not present, then"
2262,2262,2273,041142,041142,"ld a,$0c","ld a,$0c","ld a,$00",exec.asm,"LD      A,12"
2263,2263,2274,041144,041144,"jp nz,$043760","jp nz,$043790","jp nz,$000000",exec.asm,"JP      NZ,ERROR_        	; Then throw a ""Not LOCAL"" errr"
2264,2264,2275,041148,041148,push iy,push iy,push iy,exec.asm,LOCAL1:			PUSH    IY			; IY: BASIC pointer
2265,2265,2276,04114a,04114a,pop bc,pop bc,pop bc,exec.asm,POP     BC			; BC: Copy of the BASIC pointer
2266,2266,2277,04114b,04114b,exx,exx,exx,exec.asm,EXX
2267,2267,2278,04114c,04114c,dec iy,dec iy,dec iy,exec.asm,DEC     IY
2268,2268,2279,04114e,04114e,call $0416fa,call $041724,call $000000,exec.asm,CALL    SAVLOC
2269,2269,2280,041152,041152,exx,exx,exx,exec.asm,EXX
2270,2270,2281,041153,041153,push bc,push bc,push bc,exec.asm,PUSH    BC
2271,2271,2282,041154,041154,pop iy,pop iy,pop iy,exec.asm,POP     IY
2272,2272,2283,041156,041156,call $043a3a,call $043a6a,call $000000,exec.asm,LOCAL2:			CALL    GETVAR			; Get the variable location
2273,2273,2284,04115a,04115a,"jp nz,$040c97","jp nz,$040c97","jp nz,$000000",exec.asm,"JP      NZ,SYNTAX"
2274,2274,2285,04115e,04115e,or a,or a,or a,exec.asm,OR      A               	; Check the variable type (80h = string)
2275,2275,2286,04115f,04115f,"ex af,af'","ex af,af'","ex af,af'",exec.asm,"EX      AF,AF'"
2276,2276,2287,041160,041160,call $040993,call $040993,call $000000,exec.asm,CALL    ZERO			; Zero the variable anyway
2277,2277,2288,041164,041164,"ex af,af'","ex af,af'","ex af,af'",exec.asm,"EX      AF,AF'"
2278,2278,2289,041165,041165,push af,push af,push af,exec.asm,PUSH    AF
2279,2279,2290,041166,041166,"call p,$0415d6","call p,$041600","call p,$000000",exec.asm,"CALL    P,STORE         	; Call STORE if it is not a string"
2280,2280,2291,04116a,04116a,pop af,pop af,pop af,exec.asm,POP     AF
2281,2281,2292,04116b,04116b,"ld e,c","ld e,c","ld e,c",exec.asm,"LD      E,C"
2282,2282,2293,04116c,04116c,"call m,$041604","call m,$04162e","call m,$000000",exec.asm,"CALL    M,STORES		; Call STORES if it is a string"
2283,2283,2294,041170,041170,call $040a70,call $040a70,call $000000,exec.asm,CALL    NXT			; Skip to the next character in the expression
2284,2284,2295,041174,041174,cp $2c,cp $2c,cp $00,exec.asm,"CP      ','			; Is it a comma?"
2285,2285,2296,041176,041176,"jp nz,$040b96","jp nz,$040b96","jp nz,$000000",exec.asm,"JP      NZ,XEQ			; No, so we're done, carry on executing"
2286,2286,2297,04117a,04117a,inc iy,inc iy,inc iy,exec.asm,"INC     IY			; Yes, so skip the comma"
2287,2287,2298,04117c,04117c,call $040a70,call $040a70,call $000000,exec.asm,CALL    NXT			; And any whitespace
2288,2288,2299,041180,041180,jr $-$2a,jr $-$2a,jr $-$00,exec.asm,JR      LOCAL2			; Then loop back and handle any further local variables
2289,2289,2300,041182,041182,pop bc,pop bc,pop bc,exec.asm,ENDPRO:			POP     BC			; Pop the check value off the stack
2290,2290,2301,041183,041183,"ld hl,$041758","ld hl,$041782","ld hl,$000000",exec.asm,"LD      HL,LOCCHK		; Check if it is the LOCAL Marker"
2291,2291,2302,041187,041187,or a,or a,or a,exec.asm,OR      A
2292,2292,2303,041188,041188,"sbc hl,bc","sbc hl,bc","sbc hl,bc",exec.asm,"SBC     HL,BC"
2293,2293,2304,04118a,04118a,"jr z,$+$15","jr z,$+$15","jr z,$+$00",exec.asm,"JR      Z,UNSTK         	; Yes, it is, so first need to unstack the local variables"
2294,2294,2305,04118c,04118c,"ld hl,$041089","ld hl,$041089","ld hl,$000000",exec.asm,"LD      HL,PROCHK       	; Check if it is the PROC marker"
2295,2295,2306,041190,041190,or a,or a,or a,exec.asm,OR      A
2296,2296,2307,041191,041191,"sbc hl,bc","sbc hl,bc","sbc hl,bc",exec.asm,"SBC     HL,BC"
2297,2297,2308,041193,041193,pop iy,pop iy,pop iy,exec.asm,POP     IY
2298,2298,2309,041195,041195,"jp z,$040b96","jp z,$040b96","jp z,$000000",exec.asm,"JP      Z,XEQ			; Yes, it is, so carry on, all is good"
2299,2299,2310,041199,041199,"ld a,$0d","ld a,$0d","ld a,$00",exec.asm,"LD      A,13			; Otherwise throw the ""No PROC"" error"
2300,2300,2311,04119b,04119b,jp $043760,jp $043790,jp $000000,exec.asm,JP      ERROR_
2301,2301,2312,04119f,04119f,pop ix,pop ix,pop ix,exec.asm,UNSTK:			POP     IX			; Unstack a single local variable
2302,2302,2313,0411a1,0411a1,pop bc,pop bc,pop bc,exec.asm,POP     BC
2303,2303,2314,0411a2,0411a2,"ld a,b","ld a,b","ld a,b",exec.asm,"LD      A,B"
2304,2304,2315,0411a3,0411a3,or a,or a,or a,exec.asm,OR      A
2305,2305,2316,0411a4,0411a4,"jp m,$0411b2","jp m,$0411b2","jp m,$000000",exec.asm,"JP      M,UNSTK1        	; Jump here if it is a string? (80h)"
2306,2306,2317,0411a8,0411a8,pop hl,pop hl,pop hl,exec.asm,POP     HL			; Unstack a normal variable
2307,2307,2318,0411a9,0411a9,exx,exx,exx,exec.asm,EXX
2308,2308,2319,0411aa,0411aa,pop hl,pop hl,pop hl,exec.asm,POP     HL
2309,2309,2320,0411ab,0411ab,exx,exx,exx,exec.asm,EXX
2310,2310,2321,0411ac,0411ac,call $0415d6,call $041600,call $000000,exec.asm,CALL    STORE			; TODO: Not sure why or where it is being stored at this point
2311,2311,2322,0411b0,0411b0,jr $-$2e,jr $-$2e,jr $-$00,exec.asm,JR      ENDPRO			; And loop back to ENDPRO
2312,2312,2323,0411b2,0411b2,"ld hl,$000000","ld hl,$000000","ld hl,$000000",exec.asm,"UNSTK1:			LD      HL,0			; Unstack a string"
2313,2313,2324,0411b6,0411b6,"add hl,sp","add hl,sp","add hl,sp",exec.asm,"ADD     HL,SP"
2314,2314,2325,0411b7,0411b7,"ld e,c","ld e,c","ld e,c",exec.asm,"LD      E,C"
2315,2315,2326,0411b8,0411b8,call $041604,call $04162e,call $000000,exec.asm,CALL    STORES			; TODO: Not sure why or where it is being stored at this point
2316,2316,2327,0411bc,0411bc,"ld sp,hl","ld sp,hl","ld sp,hl",exec.asm,"LD      SP,HL"
2317,2317,2328,0411bd,0411bd,jr $-$3b,jr $-$3b,jr $-$00,exec.asm,JR      ENDPRO
2318,2318,2329,0411bf,0411bf,call $041892,call $0418bc,call $000000,exec.asm,INPUTN:			CALL    CHNL            ;E = CHANNEL NUMBER
2319,2319,2330,0411c3,0411c3,call $040a70,call $040a70,call $000000,exec.asm,INPN1:			CALL    NXT
2320,2320,2331,0411c7,0411c7,cp $2c,cp $2c,cp $00,exec.asm,"CP      ','"
2321,2321,2332,0411c9,0411c9,"jp nz,$040b96","jp nz,$040b96","jp nz,$000000",exec.asm,"JP      NZ,XEQ"
2322,2322,2333,0411cd,0411cd,inc iy,inc iy,inc iy,exec.asm,INC     IY
2323,2323,2334,0411cf,0411cf,call $040a70,call $040a70,call $000000,exec.asm,CALL    NXT
2324,2324,2335,0411d3,0411d3,push de,push de,push de,exec.asm,PUSH    DE
2325,2325,2336,0411d4,0411d4,call $040c8e,call $040c8e,call $000000,exec.asm,CALL    VAR_
2326,2326,2337,0411d8,0411d8,pop de,pop de,pop de,exec.asm,POP     DE
2327,2327,2338,0411d9,0411d9,push af,push af,push af,exec.asm,PUSH    AF              ;SAVE TYPE
2328,2328,2339,0411da,0411da,push hl,push hl,push hl,exec.asm,PUSH    HL              ;VARPTR
2329,2329,2340,0411db,0411db,or a,or a,or a,exec.asm,OR      A
2330,2330,2341,0411dc,0411dc,"jp m,$041208","jp m,$041208","jp m,$000000",exec.asm,"JP      M,INPN2         ;STRING"
2331,2331,2342,0411e0,0411e0,call $044333,call $044374,call $000000,exec.asm,CALL    OSBGET
2332,2332,2343,0411e4,0411e4,exx,exx,exx,exec.asm,EXX
2333,2333,2344,0411e5,0411e5,"ld l,a","ld l,a","ld l,a",exec.asm,"LD      L,A"
2334,2334,2345,0411e6,0411e6,exx,exx,exx,exec.asm,EXX
2335,2335,2346,0411e7,0411e7,call $044333,call $044374,call $000000,exec.asm,CALL    OSBGET
2336,2336,2347,0411eb,0411eb,exx,exx,exx,exec.asm,EXX
2337,2337,2348,0411ec,0411ec,"ld h,a","ld h,a","ld h,a",exec.asm,"LD      H,A"
2338,2338,2349,0411ed,0411ed,exx,exx,exx,exec.asm,EXX
2339,2339,2350,0411ee,0411ee,call $044333,call $044374,call $000000,exec.asm,CALL    OSBGET
2340,2340,2351,0411f2,0411f2,"ld l,a","ld l,a","ld l,a",exec.asm,"LD      L,A"
2341,2341,2352,0411f3,0411f3,call $044333,call $044374,call $000000,exec.asm,CALL    OSBGET
2342,2342,2353,0411f7,0411f7,"ld h,a","ld h,a","ld h,a",exec.asm,"LD      H,A"
2343,2343,2354,0411f8,0411f8,call $044333,call $044374,call $000000,exec.asm,CALL    OSBGET
2344,2344,2355,0411fc,0411fc,"ld c,a","ld c,a","ld c,a",exec.asm,"LD      C,A"
2345,2345,2356,0411fd,0411fd,pop ix,pop ix,pop ix,exec.asm,POP     IX
2346,2346,2357,0411ff,0411ff,pop af,pop af,pop af,exec.asm,POP     AF              ;RESTORE TYPE
2347,2347,2358,041200,041200,push de,push de,push de,exec.asm,PUSH    DE              ;SAVE CHANNEL
2348,2348,2359,041201,041201,call $0415d6,call $041600,call $000000,exec.asm,CALL    STORE
2349,2349,2360,041205,041205,pop de,pop de,pop de,exec.asm,POP     DE
2350,2350,2361,041206,041206,jr $-$43,jr $-$43,jr $-$00,exec.asm,JR      INPN1
2351,2351,2362,041208,041208,"ld hl,$044a00","ld hl,$044a00","ld hl,$000000",exec.asm,"INPN2:			LD      HL,ACCS"
2352,2352,2363,04120c,04120c,call $044333,call $044374,call $000000,exec.asm,INPN3:			CALL    OSBGET
2353,2353,2364,041210,041210,cp $0d,cp $0d,cp $00,exec.asm,CP      CR
2354,2354,2365,041212,041212,"jr z,$+$06","jr z,$+$06","jr z,$+$00",exec.asm,"JR      Z,INPN4"
2355,2355,2366,041214,041214,"ld (hl),a","ld (hl),a","ld (hl),a",exec.asm,"LD      (HL),A"
2356,2356,2367,041215,041215,inc l,inc l,inc l,exec.asm,INC     L
2357,2357,2368,041216,041216,"jr nz,$-$0a","jr nz,$-$0a","jr nz,$-$00",exec.asm,"JR      NZ,INPN3"
2358,2358,2369,041218,041218,pop ix,pop ix,pop ix,exec.asm,INPN4:			POP     IX
2359,2359,2370,04121a,04121a,pop af,pop af,pop af,exec.asm,POP     AF
2360,2360,2371,04121b,04121b,push de,push de,push de,exec.asm,PUSH    DE
2361,2361,2372,04121c,04121c,"ex de,hl","ex de,hl","ex de,hl",exec.asm,"EX      DE,HL"
2362,2362,2373,04121d,04121d,call $041600,call $04162a,call $000000,exec.asm,CALL    STACCS
2363,2363,2374,041221,041221,pop de,pop de,pop de,exec.asm,POP     DE
2364,2364,2375,041222,041222,jr $-$5f,jr $-$5f,jr $-$00,exec.asm,JR      INPN1
2365,2365,2376,041224,041224,cp $23,cp $23,cp $00,exec.asm,INPUT:			CP      '#'
2366,2366,2377,041226,041226,"jr z,$-$67","jr z,$-$67","jr z,$-$00",exec.asm,"JR      Z,INPUTN"
2367,2367,2378,041228,041228,"ld c,$00","ld c,$00","ld c,$00",exec.asm,"LD      C,0             ;FLAG PROMPT"
2368,2368,2379,04122a,04122a,cp $86,cp $86,cp $00,exec.asm,CP      LINE_EX_
2369,2369,2380,04122c,04122c,"jr nz,$+$06","jr nz,$+$06","jr nz,$+$00",exec.asm,"JR      NZ,INPUT0"
2370,2370,2381,04122e,04122e,inc iy,inc iy,inc iy,exec.asm,"INC     IY              ;SKIP ""LINE"""
2371,2371,2382,041230,041230,"ld c,$80","ld c,$80","ld c,$00",exec.asm,"LD      C,80H"
2372,2372,2383,041232,041232,"ld hl,$044b00","ld hl,$044b00","ld hl,$000000",exec.asm,"INPUT0:			LD      HL,BUFFER"
2373,2373,2384,041236,041236,"ld (hl),$0d","ld (hl),$0d","ld (hl),$00",exec.asm,"LD      (HL),CR         ;INITIALISE EMPTY"
2374,2374,2385,041238,041238,call $04177a,call $0417a4,call $000000,exec.asm,INPUT1:			CALL    TERMQ
2375,2375,2386,04123c,04123c,"jp z,$040b96","jp z,$040b96","jp z,$000000",exec.asm,"JP      Z,XEQ           ;DONE"
2376,2376,2387,041240,041240,inc iy,inc iy,inc iy,exec.asm,INC     IY
2377,2377,2388,041242,041242,cp $2c,cp $2c,cp $00,exec.asm,"CP      ','"
2378,2378,2389,041244,041244,"jr z,$+$5e","jr z,$+$5e","jr z,$+$00",exec.asm,"JR      Z,INPUT3        ;SKIP COMMA"
2379,2379,2390,041246,041246,cp $3b,cp $3b,cp $00,exec.asm,CP      ';'
2380,2380,2391,041248,041248,"jr z,$+$5a","jr z,$+$5a","jr z,$+$00",exec.asm,"JR      Z,INPUT3"
2381,2381,2392,04124a,04124a,push hl,push hl,push hl,exec.asm,PUSH    HL              ;SAVE BUFFER POINTER
2382,2382,2393,04124b,04124b,cp $22,cp $22,cp $00,exec.asm,"CP      34		;ASCII """""
2383,2383,2394,04124d,04124d,"jr nz,$+$0e","jr nz,$+$0e","jr nz,$+$00",exec.asm,"JR      NZ,INPUT6"
2384,2384,2395,04124f,04124f,push bc,push bc,push bc,exec.asm,PUSH    BC
2385,2385,2396,041250,041250,call $040467,call $040467,call $000000,exec.asm,CALL    CONS
2386,2386,2397,041254,041254,pop bc,pop bc,pop bc,exec.asm,POP     BC
2387,2387,2398,041255,041255,call $0417fe,call $041828,call $000000,exec.asm,CALL    PTEXT           ;PRINT PROMPT
2388,2388,2399,041259,041259,jr $+$08,jr $+$08,jr $+$00,exec.asm,JR      INPUT9
2389,2389,2400,04125b,04125b,call $04179f,call $0417c9,call $000000,exec.asm,"INPUT6:			CALL    FORMAT          ;SPC, TAB, '"
2390,2390,2401,04125f,04125f,"jr nz,$+$07","jr nz,$+$07","jr nz,$+$00",exec.asm,"JR      NZ,INPUT2"
2391,2391,2402,041261,041261,pop hl,pop hl,pop hl,exec.asm,INPUT9:			POP     HL
2392,2392,2403,041262,041262,"set 0,c","set 0,c","set 0,c",exec.asm,"SET     0,C             ;FLAG NO PROMPT"
2393,2393,2404,041264,041264,jr $-$32,jr $-$32,jr $-$00,exec.asm,JR      INPUT0
2394,2394,2405,041266,041266,dec iy,dec iy,dec iy,exec.asm,INPUT2:			DEC     IY
2395,2395,2406,041268,041268,push bc,push bc,push bc,exec.asm,PUSH    BC
2396,2396,2407,041269,041269,call $040c8e,call $040c8e,call $000000,exec.asm,CALL    VAR_
2397,2397,2408,04126d,04126d,pop bc,pop bc,pop bc,exec.asm,POP     BC
2398,2398,2409,04126e,04126e,pop hl,pop hl,pop hl,exec.asm,POP     HL
2399,2399,2410,04126f,04126f,push af,push af,push af,exec.asm,PUSH    AF              ;SAVE TYPE
2400,2400,2411,041270,041270,"ld a,(hl)","ld a,(hl)","ld a,(hl)",exec.asm,"LD      A,(HL)"
2401,2401,2412,041271,041271,inc hl,inc hl,inc hl,exec.asm,INC     HL
2402,2402,2413,041272,041272,cp $0d,cp $0d,cp $00,exec.asm,CP      CR              ;BUFFER EMPTY?
2403,2403,2414,041274,041274,"call z,$0412a6","call z,$0412a6","call z,$000000",exec.asm,"CALL    Z,REFILL"
2404,2404,2415,041278,041278,"bit 7,c","bit 7,c","bit 7,c",exec.asm,"BIT     7,C"
2405,2405,2416,04127a,04127a,push af,push af,push af,exec.asm,PUSH    AF
2406,2406,2417,04127b,04127b,"call nz,$041820","call nz,$04184a","call nz,$000000",exec.asm,"CALL    NZ,LINES"
2407,2407,2418,04127f,04127f,pop af,pop af,pop af,exec.asm,POP     AF
2408,2408,2419,041280,041280,"call z,$04180d","call z,$041837","call z,$000000",exec.asm,"CALL    Z,FETCHS"
2409,2409,2420,041284,041284,pop af,pop af,pop af,exec.asm,POP     AF              ;RESTORE TYPE
2410,2410,2421,041285,041285,push bc,push bc,push bc,exec.asm,PUSH    BC
2411,2411,2422,041286,041286,push hl,push hl,push hl,exec.asm,PUSH    HL
2412,2412,2423,041287,041287,or a,or a,or a,exec.asm,OR      A
2413,2413,2424,041288,041288,"jp m,$04129c","jp m,$04129c","jp m,$000000",exec.asm,"JP      M,INPUT4        ;STRING"
2414,2414,2425,04128c,04128c,push af,push af,push af,exec.asm,PUSH    AF
2415,2415,2426,04128d,04128d,push ix,push ix,push ix,exec.asm,PUSH    IX
2416,2416,2427,04128f,04128f,call $04066e,call $04066e,call $000000,exec.asm,CALL    VAL0
2417,2417,2428,041293,041293,pop ix,pop ix,pop ix,exec.asm,POP     IX
2418,2418,2429,041295,041295,pop af,pop af,pop af,exec.asm,POP     AF
2419,2419,2430,041296,041296,call $0415d6,call $041600,call $000000,exec.asm,CALL    STORE
2420,2420,2431,04129a,04129a,jr $+$06,jr $+$06,jr $+$00,exec.asm,JR      INPUT5
2421,2421,2432,04129c,04129c,call $041600,call $04162a,call $000000,exec.asm,INPUT4:			CALL    STACCS
2422,2422,2433,0412a0,0412a0,pop hl,pop hl,pop hl,exec.asm,INPUT5:			POP     HL
2423,2423,2434,0412a1,0412a1,pop bc,pop bc,pop bc,exec.asm,POP     BC
2424,2424,2435,0412a2,0412a2,"res 0,c","res 0,c","res 0,c",exec.asm,"INPUT3:			RES     0,C"
2425,2425,2436,0412a4,0412a4,jr $-$6c,jr $-$6c,jr $-$00,exec.asm,JR      INPUT1
2426,2426,2437,0412a6,0412a6,"bit 0,c","bit 0,c","bit 0,c",exec.asm,"REFILL:			BIT     0,C"
2427,2427,2438,0412a8,0412a8,"jr nz,$+$0e","jr nz,$+$0e","jr nz,$+$00",exec.asm,"JR      NZ,REFIL0       ;NO PROMPT"
2428,2428,2439,0412aa,0412aa,"ld a,$3f","ld a,$3f","ld a,$00",exec.asm,"LD      A,'?'"
2429,2429,2440,0412ac,0412ac,call $04394f,call $04397f,call $000000,exec.asm,CALL    OUTCHR          ;PROMPT
2430,2430,2441,0412b0,0412b0,"ld a,$20","ld a,$20","ld a,$00",exec.asm,"LD      A,' '"
2431,2431,2442,0412b2,0412b2,call $04394f,call $04397f,call $000000,exec.asm,CALL    OUTCHR
2432,2432,2443,0412b6,0412b6,"ld hl,$044b00","ld hl,$044b00","ld hl,$000000",exec.asm,"REFIL0:			LD      HL,BUFFER"
2433,2433,2444,0412ba,0412ba,push bc,push bc,push bc,exec.asm,PUSH    BC
2434,2434,2445,0412bb,0412bb,push hl,push hl,push hl,exec.asm,PUSH    HL
2435,2435,2446,0412bc,0412bc,push ix,push ix,push ix,exec.asm,PUSH    IX
2436,2436,2447,0412be,0412be,call $043e5f,call $043e8f,call $000000,exec.asm,CALL    OSLINE
2437,2437,2448,0412c2,0412c2,pop ix,pop ix,pop ix,exec.asm,POP     IX
2438,2438,2449,0412c4,0412c4,pop hl,pop hl,pop hl,exec.asm,POP     HL
2439,2439,2450,0412c5,0412c5,pop bc,pop bc,pop bc,exec.asm,POP     BC
2440,2440,2451,0412c6,0412c6,"ld b,a","ld b,a","ld b,a",exec.asm,"LD      B,A             ;POS AT ENTRY"
2441,2441,2452,0412c7,0412c7,xor a,xor a,xor a,exec.asm,XOR     A
2442,2442,2453,0412c8,0412c8,"ld ($044d3d),a","ld ($044d3d),a","ld ($000000),a",exec.asm,"LD      (COUNT),A"
2443,2443,2454,0412cc,0412cc,cp b,cp b,cp b,exec.asm,CP      B
2444,2444,2455,0412cd,0412cd,ret z,ret z,ret z,exec.asm,RET     Z
2445,2445,2456,0412ce,0412ce,"ld a,(hl)","ld a,(hl)","ld a,(hl)",exec.asm,"REFIL1:			LD      A,(HL)"
2446,2446,2457,0412cf,0412cf,cp $0d,cp $0d,cp $00,exec.asm,CP      CR
2447,2447,2458,0412d1,0412d1,ret z,ret z,ret z,exec.asm,RET     Z
2448,2448,2459,0412d2,0412d2,inc hl,inc hl,inc hl,exec.asm,INC     HL
2449,2449,2460,0412d3,0412d3,djnz $-$05,djnz $-$05,djnz $-$00,exec.asm,DJNZ    REFIL1
2450,2450,2461,0412d5,0412d5,ret,ret,ret,exec.asm,RET
2451,2451,2462,0412d6,0412d6,cp $23,cp $23,cp $00,exec.asm,READ:			CP      '#'
2452,2452,2463,0412d8,0412d8,"jp z,$0411bf","jp z,$0411bf","jp z,$000000",exec.asm,"JP      Z,INPUTN"
2453,2453,2464,0412dc,0412dc,"ld hl,($044d31)","ld hl,($044d31)","ld hl,($000000)",exec.asm,"LD      HL,(DATPTR)"
2454,2454,2465,0412e0,0412e0,"ld a,(hl)","ld a,(hl)","ld a,(hl)",exec.asm,"READ0:			LD      A,(HL)"
2455,2455,2466,0412e1,0412e1,inc hl,inc hl,inc hl,exec.asm,"INC     HL              ;SKIP COMMA OR ""DATA"""
2456,2456,2467,0412e2,0412e2,cp $0d,cp $0d,cp $00,exec.asm,CP      CR              ;END OF DATA STMT?
2457,2457,2468,0412e4,0412e4,"call z,$041328","call z,$041328","call z,$000000",exec.asm,"CALL    Z,GETDAT"
2458,2458,2469,0412e8,0412e8,push hl,push hl,push hl,exec.asm,PUSH    HL
2459,2459,2470,0412e9,0412e9,call $040c8e,call $040c8e,call $000000,exec.asm,CALL    VAR_
2460,2460,2471,0412ed,0412ed,pop hl,pop hl,pop hl,exec.asm,POP     HL
2461,2461,2472,0412ee,0412ee,or a,or a,or a,exec.asm,OR      A
2462,2462,2473,0412ef,0412ef,"jp m,$041308","jp m,$041308","jp m,$000000",exec.asm,"JP      M,READ1         ;STRING"
2463,2463,2474,0412f3,0412f3,push hl,push hl,push hl,exec.asm,PUSH    HL
2464,2464,2475,0412f4,0412f4,"ex (sp),iy","ex (sp),iy","ex (sp),iy",exec.asm,"EX      (SP),IY"
2465,2465,2476,0412f6,0412f6,push af,push af,push af,exec.asm,PUSH    AF              ;SAVE TYPE
2466,2466,2477,0412f7,0412f7,push ix,push ix,push ix,exec.asm,PUSH    IX
2467,2467,2478,0412f9,0412f9,call $040302,call $040302,call $000000,exec.asm,CALL    EXPRN
2468,2468,2479,0412fd,0412fd,pop ix,pop ix,pop ix,exec.asm,POP     IX
2469,2469,2480,0412ff,0412ff,pop af,pop af,pop af,exec.asm,POP     AF
2470,2470,2481,041300,041300,call $0415d6,call $041600,call $000000,exec.asm,CALL    STORE
2471,2471,2482,041304,041304,"ex (sp),iy","ex (sp),iy","ex (sp),iy",exec.asm,"EX      (SP),IY"
2472,2472,2483,041306,041306,jr $+$0b,jr $+$0b,jr $+$00,exec.asm,JR      READ2
2473,2473,2484,041308,041308,call $04180d,call $041837,call $000000,exec.asm,READ1:			CALL    FETCHS
2474,2474,2485,04130c,04130c,push hl,push hl,push hl,exec.asm,PUSH    HL
2475,2475,2486,04130d,04130d,call $041600,call $04162a,call $000000,exec.asm,CALL    STACCS
2476,2476,2487,041311,041311,pop hl,pop hl,pop hl,exec.asm,READ2:			POP     HL
2477,2477,2488,041312,041312,"ld ($044d31),hl","ld ($044d31),hl","ld ($000000),hl",exec.asm,"LD      (DATPTR),HL"
2478,2478,2489,041316,041316,call $040a70,call $040a70,call $000000,exec.asm,CALL    NXT
2479,2479,2490,04131a,04131a,cp $2c,cp $2c,cp $00,exec.asm,"CP      ','"
2480,2480,2491,04131c,04131c,"jp nz,$040b96","jp nz,$040b96","jp nz,$000000",exec.asm,"JP      NZ,XEQ"
2481,2481,2492,041320,041320,inc iy,inc iy,inc iy,exec.asm,INC     IY
2482,2482,2493,041322,041322,call $040a70,call $040a70,call $000000,exec.asm,CALL    NXT
2483,2483,2494,041326,041326,jr $-$46,jr $-$46,jr $-$00,exec.asm,JR      READ0
2484,2484,2495,041328,041328,"ld a,$dc","ld a,$dc","ld a,$00",exec.asm,"GETDAT:			LD      A,DATA_EX_"
2485,2485,2496,04132a,04132a,call $04184e,call $041878,call $000000,exec.asm,CALL    SEARCH_EX
2486,2486,2497,04132e,04132e,inc hl,inc hl,inc hl,exec.asm,INC     HL
2487,2487,2498,04132f,04132f,ret nc,ret nc,ret nc,exec.asm,RET     NC
2488,2488,2499,041330,041330,"ld a,$2a","ld a,$2a","ld a,$00",exec.asm,"LD      A,42"
2489,2489,2500,041332,041332,jp $043760,jp $043790,jp $000000,exec.asm,"ERROR4:			JP      ERROR_           ;""Out of DATA"""
2490,2490,2501,041336,041336,call $04030a,call $04030a,call $000000,exec.asm,IF_:			CALL    EXPRI
2491,2491,2502,04133a,04133a,call $0408df,call $0408df,call $000000,exec.asm,CALL    TEST
2492,2492,2503,04133e,04133e,"jr z,$+$1b","jr z,$+$1b","jr z,$+$00",exec.asm,"JR      Z,IFNOT         ;FALSE"
2493,2493,2504,041340,041340,"ld a,(iy)","ld a,(iy)","ld a,(iy)",exec.asm,"LD      A,(IY)"
2494,2494,2505,041343,041343,cp $8c,cp $8c,cp $00,exec.asm,CP      THEN_EX_
2495,2495,2506,041345,041345,"jp nz,$040b96","jp nz,$040b96","jp nz,$000000",exec.asm,"JP      NZ,XEQ"
2496,2496,2507,041349,041349,inc iy,inc iy,inc iy,exec.asm,"INC     IY              ;SKIP ""THEN"""
2497,2497,2508,04134b,04134b,call $040a70,call $040a70,call $000000,exec.asm,IF1:			CALL    NXT
2498,2498,2509,04134f,04134f,cp $8d,cp $8d,cp $00,exec.asm,CP      LINO_EX
2499,2499,2510,041351,041351,"jp nz,$040b96","jp nz,$040b96","jp nz,$000000",exec.asm,"JP      NZ,XEQ          ;STATEMENT FOLLOWS"
2500,2500,2511,041355,041355,jp $040f2b,jp $040f2b,jp $000000,exec.asm,JP      GOTO_EX            ;LINE NO. FOLLOWS
2501,2501,2512,041359,041359,"ld a,(iy)","ld a,(iy)","ld a,(iy)",exec.asm,"IFNOT:			LD      A,(IY)"
2502,2502,2513,04135c,04135c,cp $0d,cp $0d,cp $00,exec.asm,CP      CR
2503,2503,2514,04135e,04135e,inc iy,inc iy,inc iy,exec.asm,INC     IY
2504,2504,2515,041360,041360,"jp z,$040b92","jp z,$040b92","jp z,$000000",exec.asm,"JP      Z,XEQ0          ;END OF LINE"
2505,2505,2516,041364,041364,cp $8b,cp $8b,cp $00,exec.asm,CP      ELSE_EX_
2506,2506,2517,041366,041366,"jr nz,$-$0d","jr nz,$-$0d","jr nz,$-$00",exec.asm,"JR      NZ,IFNOT"
2507,2507,2518,041368,041368,jr $-$1d,jr $-$1d,jr $-$00,exec.asm,JR      IF1
2508,2508,2519,04136a,04136a,call $0443cc,call $044402,call $000000,exec.asm,CLS:		CALL    CLRSCN
2509,2509,2520,04136e,04136e,xor a,xor a,xor a,exec.asm,XOR     A
2510,2510,2521,04136f,04136f,"ld ($044d3d),a","ld ($044d3d),a","ld ($000000),a",exec.asm,"LD      (COUNT),A"
2511,2511,2522,041373,041373,jp $040b96,jp $040b96,jp $000000,exec.asm,JP      XEQ
2512,2512,2523,041377,041377,call $043d90,call $043dc0,call $000000,exec.asm,STOP:			CALL    TELL
2513,2513,2524,04137b,04137b,dec c,dec c,dec c,exec.asm,DB	CR
2514,2514,2525,04137c,04137c,"ld a,(bc)","ld a,(bc)","ld a,(bc)",exec.asm,DB	LF
2515,2515,2526,04137d,04137d,"jp m,$aecd00","jp m,$decd00","jp m,$000000",exec.asm,DB	TSTOP
2516,2516,2527,041381,041381,"add hl,sp","add hl,sp","add hl,sp",exec.asm,
2517,2517,2528,041382,041382,inc b,inc b,inc b,exec.asm,
2518,2518,2529,041383,041383,call $0439e2,call $043a12,call $000000,exec.asm,CALL    SAYLN
2519,2519,2530,041387,041387,call $043947,call $043977,call $000000,exec.asm,CALL    CRLF
2520,2520,2531,04138b,04138b,jp $043080,jp $0430b0,jp $000000,exec.asm,JP      CLOOP
2521,2521,2532,04138f,04138f,call $043d82,call $043db2,call $000000,exec.asm,REPOR:			CALL    REPORT
2522,2522,2533,041393,041393,jp $040b96,jp $040b96,jp $000000,exec.asm,JP      XEQ
2523,2523,2534,041397,041397,call $043876,call $0438a6,call $000000,exec.asm,CLR:			CALL    CLEAR
2524,2524,2535,04139b,04139b,"ld hl,($044d14)","ld hl,($044d14)","ld hl,($000000)",exec.asm,"LD      HL,(PAGE_)"
2525,2525,2536,04139f,04139f,jr $+$1b,jr $+$1b,jr $+$00,exec.asm,JR      RESTR1
2526,2526,2537,0413a1,0413a1,"ld hl,($044d14)","ld hl,($044d14)","ld hl,($000000)",exec.asm,"RESTOR_EX:			LD      HL,(PAGE_)"
2527,2527,2538,0413a5,0413a5,call $04177a,call $0417a4,call $000000,exec.asm,CALL    TERMQ
2528,2528,2539,0413a9,0413a9,"jr z,$+$11","jr z,$+$11","jr z,$+$00",exec.asm,"JR      Z,RESTR1"
2529,2529,2540,0413ab,0413ab,call $040325,call $040325,call $000000,exec.asm,CALL    ITEMI
2530,2530,2541,0413af,0413af,exx,exx,exx,exec.asm,EXX
2531,2531,2542,0413b0,0413b0,call $04398f,call $0439bf,call $000000,exec.asm,CALL    FINDL           ;SEARCH FOR LINE
2532,2532,2543,0413b4,0413b4,"ld a,$29","ld a,$29","ld a,$00",exec.asm,"LD      A,41"
2533,2533,2544,0413b6,0413b6,"jp nz,$041332","jp nz,$041332","jp nz,$000000",exec.asm,"JP      NZ,ERROR4       ;""No such line"""
2534,2534,2545,0413ba,0413ba,"ld a,$dc","ld a,$dc","ld a,$00",exec.asm,"RESTR1:			LD      A,DATA_EX_"
2535,2535,2546,0413bc,0413bc,call $04184e,call $041878,call $000000,exec.asm,CALL    SEARCH_EX
2536,2536,2547,0413c0,0413c0,"ld ($044d31),hl","ld ($044d31),hl","ld ($000000),hl",exec.asm,"LD      (DATPTR),HL"
2537,2537,2548,0413c4,0413c4,jp $040b96,jp $040b96,jp $000000,exec.asm,JP      XEQ
2538,2538,2549,0413c8,0413c8,call $041886,call $0418b0,call $000000,exec.asm,PTR_EX:			CALL    CHANEL
2539,2539,2550,0413cc,0413cc,call $041790,call $0417ba,call $000000,exec.asm,CALL    EQUALS
2540,2540,2551,0413d0,0413d0,"ld a,e","ld a,e","ld a,e",exec.asm,"LD      A,E"
2541,2541,2552,0413d1,0413d1,push af,push af,push af,exec.asm,PUSH    AF
2542,2542,2553,0413d2,0413d2,call $04030a,call $04030a,call $000000,exec.asm,CALL    EXPRI
2543,2543,2554,0413d6,0413d6,push hl,push hl,push hl,exec.asm,PUSH    HL
2544,2544,2555,0413d7,0413d7,exx,exx,exx,exec.asm,EXX
2545,2545,2556,0413d8,0413d8,pop de,pop de,pop de,exec.asm,POP     DE
2546,2546,2557,0413d9,0413d9,pop af,pop af,pop af,exec.asm,POP     AF
2547,2547,2558,0413da,0413da,call $044367,call $0443a8,call $000000,exec.asm,CALL    PUTPTR
2548,2548,2559,0413de,0413de,jp $040b96,jp $040b96,jp $000000,exec.asm,JP      XEQ
2549,2549,2560,0413e2,0413e2,call $041790,call $0417ba,call $000000,exec.asm,PAGEV_EX:			CALL    EQUALS
2550,2550,2561,0413e6,0413e6,call $04030a,call $04030a,call $000000,exec.asm,CALL    EXPRI
2551,2551,2562,0413ea,0413ea,exx,exx,exx,exec.asm,EXX
2552,2552,2563,0413eb,0413eb,"ld l,$00","ld l,$00","ld l,$00",exec.asm,"LD      L,0"
2553,2553,2564,0413ed,0413ed,"ld ($044d14),hl","ld ($044d14),hl","ld ($000000),hl",exec.asm,"LD      (PAGE_),HL"
2554,2554,2565,0413f1,0413f1,jp $040b96,jp $040b96,jp $000000,exec.asm,JP      XEQ
2555,2555,2566,0413f5,0413f5,cp $24,cp $24,cp $00,exec.asm,TIMEV_EX:			CP      '$'
2556,2556,2567,0413f7,0413f7,"jr z,$+$15","jr z,$+$15","jr z,$+$00",exec.asm,"JR      Z,TIMEVS_EX"
2557,2557,2568,0413f9,0413f9,call $041790,call $0417ba,call $000000,exec.asm,CALL    EQUALS
2558,2558,2569,0413fd,0413fd,call $04030a,call $04030a,call $000000,exec.asm,CALL    EXPRI
2559,2559,2570,041401,041401,push hl,push hl,push hl,exec.asm,PUSH    HL
2560,2560,2571,041402,041402,exx,exx,exx,exec.asm,EXX
2561,2561,2572,041403,041403,pop de,pop de,pop de,exec.asm,POP     DE
2562,2562,2573,041404,041404,call $043e97,call $043ec7,call $000000,exec.asm,CALL    PUTIME
2563,2563,2574,041408,041408,jp $040b96,jp $040b96,jp $000000,exec.asm,JP      XEQ
2564,2564,2575,04140c,04140c,inc iy,inc iy,inc iy,exec.asm,TIMEVS_EX:			INC     IY              ;SKIP '$'
2565,2565,2576,04140e,04140e,call $041790,call $0417ba,call $000000,exec.asm,CALL    EQUALS
2566,2566,2577,041412,041412,call $040315,call $040315,call $000000,exec.asm,CALL    EXPRS
2567,2567,2578,041416,041416,call $0443b7,call $04497c,call $000000,exec.asm,CALL    PUTIMS
2568,2568,2579,04141a,04141a,jp $040b96,jp $040b96,jp $000000,exec.asm,JP      XEQ
2569,2569,2580,04141e,04141e,call $041790,call $0417ba,call $000000,exec.asm,LOMEMV_EX:			CALL    EQUALS
2570,2570,2581,041422,041422,call $04030a,call $04030a,call $000000,exec.asm,CALL    EXPRI
2571,2571,2582,041426,041426,call $043876,call $0438a6,call $000000,exec.asm,CALL    CLEAR
2572,2572,2583,04142a,04142a,exx,exx,exx,exec.asm,EXX
2573,2573,2584,04142b,04142b,"ld ($044d1a),hl","ld ($044d1a),hl","ld ($000000),hl",exec.asm,"LD      (LOMEM),HL"
2574,2574,2585,04142f,04142f,"ld ($044d1d),hl","ld ($044d1d),hl","ld ($000000),hl",exec.asm,"LD      (FREE),HL"
2575,2575,2586,041433,041433,jp $040b96,jp $040b96,jp $000000,exec.asm,JP      XEQ
2576,2576,2587,041437,041437,call $041790,call $0417ba,call $000000,exec.asm,HIMEMV_EX:			CALL    EQUALS			; Check for '=' and throw an error if not found
2577,2577,2588,04143b,04143b,call $04030a,call $04030a,call $000000,exec.asm,CALL    EXPRI			; Load the expression into registers
2578,2578,,04143f,,exx,,exx,,
2579,2579,,041440,,"ld de,($044d1d)",,"ld de,($000000)",,
2580,2580,,041445,,inc d,,inc d,,
2581,2581,2598,041446,041457,xor a,xor a,xor a,exec.asm,XOR     A
2582,2582,2599,041447,041458,"sbc hl,de","sbc hl,de","sbc hl,de",exec.asm,"SBC     HL,DE"
2583,2583,2600,041449,04145a,"add hl,de","add hl,de","add hl,de",exec.asm,"ADD     HL,DE			; Do a bounds check"
2584,2584,2601,04144a,04145b,"jp c,$043760","jp c,$043790","jp c,$000000",exec.asm,"JP      C,ERROR_         	; Throw the error: ""No room"""
2585,2585,2602,04144e,04145f,"ld de,($044d20)","ld de,($044d20)","ld de,($000000)",exec.asm,"LD      DE,(HIMEM)"
2586,2586,2603,041453,041464,"ld ($044d20),hl","ld ($044d20),hl","ld ($000000),hl",exec.asm,"LD      (HIMEM),HL"
2587,2587,2604,041457,041468,"ex de,hl","ex de,hl","ex de,hl",exec.asm,"EX      DE,HL"
2588,2588,2605,041458,041469,"sbc hl,sp","sbc hl,sp","sbc hl,sp",exec.asm,"SBC     HL,SP			; Adjust the stack"
2589,2589,2606,04145a,04146b,"jp nz,$040b96","jp nz,$040b96","jp nz,$000000",exec.asm,"JP      NZ,XEQ"
2590,2590,2607,04145e,04146f,"ex de,hl","ex de,hl","ex de,hl",exec.asm,"EX      DE,HL"
2591,2591,2608,04145f,041470,"ld sp,hl","ld sp,hl","ld sp,hl",exec.asm,"LD      SP,HL           	; Load the SP"
2592,2592,2609,041460,041471,jp $040b96,jp $040b96,jp $000000,exec.asm,JP      XEQ
2593,2593,2610,041464,041475,call $04030a,call $04030a,call $000000,exec.asm,WIDTHV:			CALL    EXPRI
2594,2594,2611,041468,041479,exx,exx,exx,exec.asm,EXX
2595,2595,2612,041469,04147a,"ld a,l","ld a,l","ld a,l",exec.asm,"LD      A,L"
2596,2596,2613,04146a,04147b,"ld ($044d3e),a","ld ($044d3e),a","ld ($000000),a",exec.asm,"LD      (WIDTH),A"
2597,2597,2614,04146e,04147f,jp $040b96,jp $040b96,jp $000000,exec.asm,JP      XEQ
2598,2598,2615,041472,041483,inc iy,inc iy,inc iy,exec.asm,TRACE_EX:			INC     IY
2599,2599,2616,041474,041485,"ld hl,$000000","ld hl,$000000","ld hl,$000000",exec.asm,"LD      HL,0"
2600,2600,2617,041478,041489,cp $ee,cp $ee,cp $00,exec.asm,CP      TON
2601,2601,2618,04147a,04148b,"jr z,$+$0d","jr z,$+$0d","jr z,$+$00",exec.asm,"JR      Z,TRACE0"
2602,2602,2619,04147c,04148d,cp $87,cp $87,cp $00,exec.asm,CP      OFF_
2603,2603,2620,04147e,04148f,"jr z,$+$0a","jr z,$+$0a","jr z,$+$00",exec.asm,"JR      Z,TRACE1"
2604,2604,2621,041480,041491,dec iy,dec iy,dec iy,exec.asm,DEC     IY
2605,2605,2622,041482,041493,call $04030a,call $04030a,call $000000,exec.asm,CALL    EXPRI
2606,2606,2623,041486,041497,exx,exx,exx,exec.asm,EXX
2607,2607,2624,041487,041498,dec hl,dec hl,dec hl,exec.asm,TRACE0:			DEC     HL
2608,2608,2625,041488,041499,"ld ($044d26),hl","ld ($044d26),hl","ld ($000000),hl",exec.asm,"TRACE1:			LD      (TRACEN),HL"
2609,2609,2626,04148c,04149d,jp $040b96,jp $040b96,jp $000000,exec.asm,JP      XEQ
2610,2610,,041490,,call $04030a,,call $000000,,
2611,2611,,041494,,exx,,exx,,
2612,2612,,041495,,"ld a,l",,"ld a,l",,
2613,2613,,041496,,call $043f00,,call $000000,,
2614,2614,,04149a,,"ld a,(iy)",,"ld a,(iy)",,
2615,2615,,04149d,,cp $2c,,cp $00,,
2616,2616,,04149f,,"jr z,$+$0b",,"jr z,$+$00",,
2617,2617,,0414a1,,cp $3b,,cp $00,,
2618,2618,,0414a3,,"jr nz,$+$09",,"jr nz,$+$00",,
2619,2619,,0414a5,,"ld a,h",,"ld a,h",,
2620,2620,,0414a6,,call $043f00,,call $000000,,
2621,2621,,0414aa,,inc iy,,inc iy,,
2622,2622,,0414ac,,call $04177a,,call $000000,,
2623,2623,,0414b0,,"jr nz,$-$20",,"jr nz,$-$00",,
2624,2624,2651,0414b2,0414dc,jp $040b96,jp $040b96,jp $000000,exec.asm,VDU4:			JP      XEQ
2625,2625,2652,0414b6,0414e0,call $041886,call $0418b0,call $000000,exec.asm,CLOSE:			CALL    CHANEL			; Fetch the channel number
2626,2626,2653,0414ba,0414e4,call $04432b,call $04436c,call $000000,exec.asm,CALL    OSSHUT			; Close the channel
2627,2627,2654,0414be,0414e8,jp $040b96,jp $040b96,jp $000000,exec.asm,JP      XEQ
2628,2628,2655,0414c2,0414ec,call $041886,call $0418b0,call $000000,exec.asm,BPUT:			CALL    CHANEL          	; Fetch the channel number
2629,2629,2656,0414c6,0414f0,push de,push de,push de,exec.asm,PUSH    DE			; DE: Channel number
2630,2630,2657,0414c7,0414f1,call $040a22,call $040a22,call $000000,exec.asm,CALL    COMMA			; Skip to the next expression
2631,2631,2658,0414cb,0414f5,call $04030a,call $04030a,call $000000,exec.asm,CALL    EXPRI           	; Feth the data
2632,2632,2659,0414cf,0414f9,exx,exx,exx,exec.asm,EXX
2633,2633,2660,0414d0,0414fa,"ld a,l","ld a,l","ld a,l",exec.asm,"LD      A,L			; A: The byte to write"
2634,2634,2661,0414d1,0414fb,pop de,pop de,pop de,exec.asm,POP     DE
2635,2635,2662,0414d2,0414fc,call $04433b,call $04437c,call $000000,exec.asm,CALL    OSBPUT			; Write the byte out
2636,2636,2663,0414d6,041500,jp $040b96,jp $040b96,jp $000000,exec.asm,JP      XEQ
2637,2637,2664,0414da,041504,call $04030a,call $04030a,call $000000,exec.asm,CALL_:			CALL    EXPRI           	; Fetch the address
2638,2638,2665,0414de,041508,"ld a,l","ld a,l","ld a,l",exec.asm,"LD	A,L			;  A: MSB of address"
2639,2639,2666,0414df,041509,exx,exx,exx,exec.asm,EXX
2640,2640,2667,0414e0,04150a,"ld ($044d4a),hl","ld ($044d4a),hl","ld ($000000),hl",exec.asm,"LD	(R0+0),HL		; HL: LSW of address"
2641,2641,2668,0414e4,04150e,"ld ($044d4c),a","ld ($044d4c),a","ld ($000000),a",exec.asm,"LD	(R0+2),A"
2642,2642,2669,0414e8,041512,"ld b,$00","ld b,$00","ld b,$00",exec.asm,"LD      B,0             	;  B: The parameter counter"
2643,2643,2670,0414ea,041514,"ld de,$044b00","ld de,$044b00","ld de,$000000",exec.asm,"LD      DE,BUFFER       	; DE: Vector"
2644,2644,2671,0414ee,041518,call $040a70,call $040a70,call $000000,exec.asm,CALL1:			CALL    NXT			; Skip whitespace
2645,2645,2672,0414f2,04151c,cp $2c,cp $2c,cp $00,exec.asm,"CP      ','			; Check for comma"
2646,2646,2673,0414f4,04151e,"jr nz,$+$1d","jr nz,$+$1d","jr nz,$+$00",exec.asm,"JR      NZ,CALL2		; If no more parameters, then jump here"
2647,2647,2674,0414f6,041520,inc iy,inc iy,inc iy,exec.asm,INC     IY			; Skip to the next character
2648,2648,2675,0414f8,041522,inc b,inc b,inc b,exec.asm,INC     B			; Increment the parameter count
2649,2649,2676,0414f9,041523,call $040a70,call $040a70,call $000000,exec.asm,CALL    NXT			; Skip whitespace
2650,2650,2677,0414fd,041527,push bc,push bc,push bc,exec.asm,PUSH    BC
2651,2651,2678,0414fe,041528,push de,push de,push de,exec.asm,PUSH    DE
2652,2652,2679,0414ff,041529,call $040c8e,call $040c8e,call $000000,exec.asm,CALL    VAR_
2653,2653,2680,041503,04152d,pop de,pop de,pop de,exec.asm,POP     DE
2654,2654,2681,041504,04152e,pop bc,pop bc,pop bc,exec.asm,POP     BC
2655,2655,2682,041505,04152f,inc de,inc de,inc de,exec.asm,INC     DE
2656,2656,2683,041506,041530,"ld (de),a","ld (de),a","ld (de),a",exec.asm,"LD      (DE),A			; Save the parameter type"
2657,2657,2684,041507,041531,inc de,inc de,inc de,exec.asm,INC     DE
2658,2658,2685,041508,041532,"ex de,hl","ex de,hl","ex de,hl",exec.asm,"EX      DE,HL"
2659,2659,2686,041509,041533,"ld (hl),de","ld (hl),de","ld (hl),de",exec.asm,"LD	(HL),DE			; Save the parameter address (3 bytes)"
2660,2660,2687,04150b,041535,inc hl,inc hl,inc hl,exec.asm,INC	HL
2661,2661,2688,04150c,041536,inc hl,inc hl,inc hl,exec.asm,INC	HL
2662,2662,2689,04150d,041537,inc hl,inc hl,inc hl,exec.asm,INC	HL
2663,2663,2690,04150e,041538,"ex de,hl","ex de,hl","ex de,hl",exec.asm,"EX      DE,HL"
2664,2664,2691,04150f,041539,jr $-$21,jr $-$21,jr $-$00,exec.asm,JR      CALL1
2665,2665,2692,041511,04153b,"ld a,b","ld a,b","ld a,b",exec.asm,"CALL2:			LD      A,B"
2666,2666,2693,041512,04153c,"ld ($044b00),a","ld ($044b00),a","ld ($000000),a",exec.asm,"LD      (BUFFER),A      	; Save the parameter count"
2667,2667,2694,041516,041540,"ld hl,($044d4a)","ld hl,($044d4a)","ld hl,($000000)",exec.asm,"LD	HL,(R0)			; HL: Address of the code"
2668,2668,2695,04151a,041544,call $041534,call $04155e,call $000000,exec.asm,CALL    USR1			; And call it
2669,2669,2696,04151e,041548,jp $040b96,jp $040b96,jp $000000,exec.asm,JP      XEQ
2670,2670,2697,041522,04154c,call $040325,call $040325,call $000000,exec.asm,USR:			CALL    ITEMI			; Evaluate the expression
2671,2671,2698,041526,041550,"ld a,l","ld a,l","ld a,l",exec.asm,"LD	A,L			;  A: MSB of address"
2672,2672,2699,041527,041551,exx,exx,exx,exec.asm,EXX
2673,2673,2700,041528,041552,"ld ($044d4a),hl","ld ($044d4a),hl","ld ($000000),hl",exec.asm,"LD	(R0+0),HL		; HL: LSW of address"
2674,2674,2701,04152c,041556,"ld ($044d4c),a","ld ($044d4c),a","ld ($000000),a",exec.asm,"LD	(R0+2),A"
2675,2675,2702,041530,04155a,"ld hl,($044d4a)","ld hl,($044d4a)","ld hl,($000000)",exec.asm,"LD	HL,(R0)			; Get the 24-bit address in HL"
2676,2676,2703,041534,04155e,push hl,push hl,push hl,exec.asm,USR1:			PUSH    HL              	; Address on stack
2677,2677,2704,041535,04155f,"ex (sp),iy","ex (sp),iy","ex (sp),iy",exec.asm,"EX      (SP),IY"
2678,2678,2705,041537,041561,inc h,inc h,inc h,exec.asm,INC     H               	; Check for PAGE &00FFxx
2679,2679,2706,041538,041562,or h,or h,or h,exec.asm,OR	H
2680,2680,2707,041539,041563,"ld hl,$0415a3","ld hl,$0415cd","ld hl,$000000",exec.asm,"LD      HL,USR2         	; Return address"
2681,2681,2708,04153d,041567,push hl,push hl,push hl,exec.asm,PUSH    HL
2682,2682,2709,04153e,041568,"ld ix,$044c00","ld ix,$044c00","ld ix,$000000",exec.asm,"LD      IX,STAVAR"
2683,2683,2710,041543,04156d,"call z,$0442f1","call z,$044332","call z,$000000",exec.asm,"CALL    Z,OSCALL        	; Intercept &00FFxx"
2684,2684,2711,041547,041571,"ld c,(ix+$18)","ld c,(ix+$18)","ld c,(ix+$00)",exec.asm,"LD      C, (IX+24)		; F%"
2685,2685,2712,04154a,041574,push bc,push bc,push bc,exec.asm,PUSH    BC
2686,2686,2713,04154b,041575,"ld a,(ix+$08)","ld a,(ix+$08)","ld a,(ix+$00)",exec.asm,"LD	A, (IX+8)		; B% -> MSW"
2687,2687,2714,04154e,041578,"ld ($044d4b),a","ld ($044d4b),a","ld ($000000),a",exec.asm,"LD	(R0+1), A"
2688,2688,2715,041552,04157c,"ld a,(ix+$09)","ld a,(ix+$09)","ld a,(ix+$00)",exec.asm,"LD	A, (IX+9)"
2689,2689,2716,041555,04157f,"ld ($044d4c),a","ld ($044d4c),a","ld ($000000),a",exec.asm,"LD	(R0+2), A"
2690,2690,2717,041559,041583,"ld a,(ix+$0c)","ld a,(ix+$0c)","ld a,(ix+$00)",exec.asm,"LD	A, (IX+12)		; C% -> LSB"
2691,2691,2718,04155c,041586,"ld ($044d4a),a","ld ($044d4a),a","ld ($000000),a",exec.asm,"LD	(R0+0), A"
2692,2692,2719,041560,04158a,"ld bc,($044d4a)","ld bc,($044d4a)","ld bc,($000000)",exec.asm,"LD	BC, (R0)"
2693,2693,2720,041565,04158f,"ld a,(ix+$10)","ld a,(ix+$10)","ld a,(ix+$00)",exec.asm,"LD	A, (IX+16)		; D% -> MSW"
2694,2694,2721,041568,041592,"ld ($044d4b),a","ld ($044d4b),a","ld ($000000),a",exec.asm,"LD	(R0+1), A"
2695,2695,2722,04156c,041596,"ld a,(ix+$11)","ld a,(ix+$11)","ld a,(ix+$00)",exec.asm,"LD	A, (IX+17)"
2696,2696,2723,04156f,041599,"ld ($044d4c),a","ld ($044d4c),a","ld ($000000),a",exec.asm,"LD	(R0+2), A"
2697,2697,2724,041573,04159d,"ld a,(ix+$14)","ld a,(ix+$14)","ld a,(ix+$00)",exec.asm,"LD	A, (IX+20)		; E% -> LSB"
2698,2698,2725,041576,0415a0,"ld ($044d4a),a","ld ($044d4a),a","ld ($000000),a",exec.asm,"LD	(R0+0), A"
2699,2699,2726,04157a,0415a4,"ld de,($044d4a)","ld de,($044d4a)","ld de,($000000)",exec.asm,"LD	DE, (R0)"
2700,2700,2727,04157f,0415a9,"ld a,(ix+$20)","ld a,(ix+$20)","ld a,(ix+$00)",exec.asm,"LD	A, (IX+32)		; H% -> MSW"
2701,2701,2728,041582,0415ac,"ld ($044d4b),a","ld ($044d4b),a","ld ($000000),a",exec.asm,"LD	(R0+1), A"
2702,2702,2729,041586,0415b0,"ld a,(ix+$21)","ld a,(ix+$21)","ld a,(ix+$00)",exec.asm,"LD	A, (IX+33)"
2703,2703,2730,041589,0415b3,"ld ($044d4c),a","ld ($044d4c),a","ld ($000000),a",exec.asm,"LD	(R0+2), A"
2704,2704,2731,04158d,0415b7,"ld a,(ix+$30)","ld a,(ix+$30)","ld a,(ix+$00)",exec.asm,"LD	A, (IX+48)		; L% -> LSB"
2705,2705,2732,041590,0415ba,"ld ($044d4a),a","ld ($044d4a),a","ld ($000000),a",exec.asm,"LD	(R0+0), A"
2706,2706,2733,041594,0415be,"ld hl,($044d4a)","ld hl,($044d4a)","ld hl,($000000)",exec.asm,"LD	HL, (R0)"
2707,2707,2734,041598,0415c2,pop af,pop af,pop af,exec.asm,POP     AF			; F%
2708,2708,2735,041599,0415c3,"ld a,(ix+$04)","ld a,(ix+$04)","ld a,(ix+$00)",exec.asm,"LD      A, (IX+4)        	; A%"
2709,2709,2736,04159c,0415c6,"ld ix,$044b00","ld ix,$044b00","ld ix,$000000",exec.asm,"LD      IX,BUFFER"
2710,2710,2737,0415a1,0415cb,jp (iy),jp (iy),jp (iy),exec.asm,JP      (IY)            	; Off to user routine
2711,2711,2738,0415a3,0415cd,pop iy,pop iy,pop iy,exec.asm,USR2:			POP     IY
2712,2712,2739,0415a5,0415cf,xor a,xor a,xor a,exec.asm,XOR     A
2713,2713,2740,0415a6,0415d0,"ld c,a","ld c,a","ld c,a",exec.asm,"LD      C,A"
2714,2714,2741,0415a7,0415d1,ret,ret,ret,exec.asm,RET
2715,2715,2742,0415a8,0415d2,call $04030a,call $04030a,call $000000,exec.asm,PUT:			CALL    EXPRI           ;PORT ADDRESS
2716,2716,2743,0415ac,0415d6,exx,exx,exx,exec.asm,EXX
2717,2717,2744,0415ad,0415d7,push hl,push hl,push hl,exec.asm,PUSH    HL
2718,2718,2745,0415ae,0415d8,call $040a22,call $040a22,call $000000,exec.asm,CALL    COMMA
2719,2719,2746,0415b2,0415dc,call $04030a,call $04030a,call $000000,exec.asm,CALL    EXPRI           ;DATA
2720,2720,2747,0415b6,0415e0,exx,exx,exx,exec.asm,EXX
2721,2721,2748,0415b7,0415e1,pop bc,pop bc,pop bc,exec.asm,POP     BC
2722,2722,2749,0415b8,0415e2,"out (bc),l","out (bc),l","out (bc),l",exec.asm,"OUT     (C),L           ;OUTPUT TO PORT BC"
2723,2723,2750,0415ba,0415e4,jp $040b96,jp $040b96,jp $000000,exec.asm,JP      XEQ
2724,2724,2751,0415be,0415e8,call $043a3a,call $043a6a,call $000000,exec.asm,ASSIGN:			CALL    GETVAR          	; Try to get the variable
2725,2725,2752,0415c2,0415ec,ret c,ret c,ret c,exec.asm,RET     C               	; Return with C if it is an illegal variable
2726,2726,2753,0415c3,0415ed,"call nz,$043a29","call nz,$043a59","call nz,$000000",exec.asm,"CALL    NZ,PUTVAR		; If it does not exist, then create the variable"
2727,2727,2754,0415c7,0415f1,or a,or a,or a,exec.asm,OR      A
2728,2728,2755,0415c8,0415f2,ret m,ret m,ret m,exec.asm,RET     M               	; Return if type is string (81h)
2729,2729,2756,0415c9,0415f3,push af,push af,push af,exec.asm,PUSH    AF              	; It's a numeric type from this point on
2730,2730,2757,0415ca,0415f4,call $041790,call $0417ba,call $000000,exec.asm,CALL    EQUALS			; Check if the variable is followed by an '=' symbol; this will throw a 'Mistake' error if not
2731,2731,2758,0415ce,0415f8,push hl,push hl,push hl,exec.asm,PUSH    HL
2732,2732,2759,0415cf,0415f9,call $040302,call $040302,call $000000,exec.asm,CALL    EXPRN
2733,2733,2760,0415d3,0415fd,pop ix,pop ix,pop ix,exec.asm,POP     IX
2734,2734,2761,0415d5,0415ff,pop af,pop af,pop af,exec.asm,POP     AF
2735,2735,2762,0415d6,041600,"bit 0,a","bit 0,a","bit 0,a",exec.asm,"STORE:			BIT     0,A"
2736,2736,2763,0415d8,041602,"jr z,$+$15","jr z,$+$15","jr z,$+$00",exec.asm,"JR      Z,STOREI"
2737,2737,2764,0415da,041604,cp a,cp a,cp a,exec.asm,CP      A               	; Set the variable to 0
2738,2738,2765,0415db,041605,"ld (ix+$04),c","ld (ix+$04),c","ld (ix+$00),c",exec.asm,"STORE5:			LD      (IX+4),C"
2739,2739,2766,0415de,041608,exx,exx,exx,exec.asm,STORE4:			EXX
2740,2740,2767,0415df,041609,"ld (ix),l","ld (ix),l","ld (ix),l",exec.asm,"LD      (IX+0),L"
2741,2741,2768,0415e2,04160c,"ld (ix+$01),h","ld (ix+$01),h","ld (ix+$00),h",exec.asm,"LD      (IX+1),H"
2742,2742,2769,0415e5,04160f,exx,exx,exx,exec.asm,EXX
2743,2743,2770,0415e6,041610,"ld (ix+$02),l","ld (ix+$02),l","ld (ix+$00),l",exec.asm,"LD      (IX+2),L"
2744,2744,2771,0415e9,041613,"ld (ix+$03),h","ld (ix+$03),h","ld (ix+$00),h",exec.asm,"LD      (IX+3),H"
2745,2745,2772,0415ec,041616,ret,ret,ret,exec.asm,RET
2746,2746,2773,0415ed,041617,push af,push af,push af,exec.asm,STOREI:			PUSH    AF
2747,2747,2774,0415ee,041618,inc c,inc c,inc c,exec.asm,INC     C               ;SPEED - & PRESERVE F'
2748,2748,2775,0415ef,041619,dec c,dec c,dec c,exec.asm,DEC     C               ; WHEN CALLED BY FNEND0
2749,2749,2776,0415f0,04161a,"call nz,$040662","call nz,$040662","call nz,$000000",exec.asm,"CALL    NZ,SFIX         ;CONVERT TO INTEGER"
2750,2750,2777,0415f4,04161e,pop af,pop af,pop af,exec.asm,POP     AF
2751,2751,2778,0415f5,04161f,cp $04,cp $04,cp $00,exec.asm,CP      4
2752,2752,2779,0415f7,041621,"jr z,$-$19","jr z,$-$19","jr z,$-$00",exec.asm,"JR      Z,STORE4"
2753,2753,2780,0415f9,041623,cp a,cp a,cp a,exec.asm,CP      A               ;SET ZERO
2754,2754,2781,0415fa,041624,exx,exx,exx,exec.asm,STORE1:			EXX
2755,2755,2782,0415fb,041625,"ld (ix),l","ld (ix),l","ld (ix),l",exec.asm,"LD      (IX+0),L"
2756,2756,2783,0415fe,041628,exx,exx,exx,exec.asm,EXX
2757,2757,2784,0415ff,041629,ret,ret,ret,exec.asm,RET
2758,2758,2785,041600,04162a,"ld hl,$044a00","ld hl,$044a00","ld hl,$000000",exec.asm,"STACCS:			LD      HL,ACCS			; HL: Pointer to the string accumulator"
2759,2759,2786,041604,04162e,rra,rra,rra,exec.asm,STORES:			RRA				; Rotate right to shift bit 0 into carry
2760,2760,2787,041605,04162f,"jr nc,$+$5f","jr nc,$+$5f","jr nc,$+$00",exec.asm,"JR      NC,STORS3		; It's a fixed/static string, so skip the next bit"
2761,2761,2788,041607,041631,push hl,push hl,push hl,exec.asm,PUSH    HL			; Stack ACCS
2762,2762,2789,041608,041632,exx,exx,exx,exec.asm,EXX				; This block was a call to LOAD4
2763,2763,2790,041609,041633,"ld l,(ix)","ld l,(ix)","ld l,(ix)",exec.asm,"LD      L,(IX+0)		; The length of the string currently stored in the allocated space"
2764,2764,2791,04160c,041636,"ld h,(ix+$01)","ld h,(ix+$01)","ld h,(ix+$00)",exec.asm,"LD      H,(IX+1)		; The maximum original string length"
2765,2765,2792,04160f,041639,exx,exx,exx,exec.asm,EXX
2766,2766,2793,041610,04163a,"ld hl,(ix+$02)","ld hl,(ix+$02)","ld hl,(ix+$00)",exec.asm,"LD	HL,(IX+2)		; Address of the string (24-bit)"
2767,2767,2794,041613,04163d,"ld a,e","ld a,e","ld a,e",exec.asm,"LD      A,E             	; E : Length of string in ACCS (as passed to the function)"
2768,2768,2795,041614,04163e,exx,exx,exx,exec.asm,EXX
2769,2769,2796,041615,04163f,"ld l,a","ld l,a","ld l,a",exec.asm,"LD      L,A			; L': Length of string currently stored on the stack"
2770,2770,2797,041616,041640,"ld a,h","ld a,h","ld a,h",exec.asm,"LD      A,H             	; H': The maximum (original) string length"
2771,2771,2798,041617,041641,exx,exx,exx,exec.asm,EXX
2772,2772,2799,041618,041642,cp e,cp e,cp e,exec.asm,CP      E			; Check whether there is enough room for the string in ACCS in the allocated space
2773,2773,2800,041619,041643,"jr nc,$+$19","jr nc,$+$19","jr nc,$+$00",exec.asm,"JR      NC,STORS1       	; Yes there is, so skip the next bit"
2774,2774,2801,04161b,041645,exx,exx,exx,exec.asm,EXX
2775,2775,2802,04161c,041646,"ld h,l","ld h,l","ld h,l",exec.asm,"LD      H,L			; H: Set the maximum string length to the string length"
2776,2776,2803,04161d,041647,exx,exx,exx,exec.asm,EXX
2777,2777,2804,04161e,041648,push hl,push hl,push hl,exec.asm,PUSH    HL
2778,2778,2805,04161f,041649,"ld bc,$000000","ld bc,$000000","ld bc,$000000",exec.asm,"LD	BC, 0"
2779,2779,2806,041623,04164d,"ld c,a","ld c,a","ld c,a",exec.asm,"LD      C,A			; BC: The maximum (original) string length"
2780,2780,2807,041624,04164e,"add hl,bc","add hl,bc","add hl,bc",exec.asm,"ADD     HL,BC			; Work out whether this is the last string in memory"
2781,2781,2808,041625,04164f,"ld bc,($044d1d)","ld bc,($044d1d)","ld bc,($000000)",exec.asm,"LD      BC,(FREE)"
2782,2782,2809,04162a,041654,"sbc hl,bc","sbc hl,bc","sbc hl,bc",exec.asm,"SBC     HL,BC			; Is string last?"
2783,2783,2810,04162c,041656,pop hl,pop hl,pop hl,exec.asm,POP     HL
2784,2784,2811,04162d,041657,scf,scf,scf,exec.asm,SCF
2785,2785,2812,04162e,041658,"jr z,$+$04","jr z,$+$04","jr z,$+$00",exec.asm,"JR      Z,STORS1"
2786,2786,2813,041630,04165a,push bc,push bc,push bc,exec.asm,push bc
2787,2787,2814,041631,04165b,pop hl,pop hl,pop hl,exec.asm,pop hl
2788,2788,2815,041632,04165c,exx,exx,exx,exec.asm,STORS1:			EXX				; This block was a call to STORE4
2789,2789,2816,041633,04165d,"ld (ix),l","ld (ix),l","ld (ix),l",exec.asm,"LD      (IX+0),L		; The actual string length (must be less then H')"
2790,2790,2817,041636,041660,"ld (ix+$01),h","ld (ix+$01),h","ld (ix+$00),h",exec.asm,"LD      (IX+1),H		; The maximum (original) string length"
2791,2791,2818,041639,041663,exx,exx,exx,exec.asm,EXX
2792,2792,2819,04163a,041664,"ld (ix+$02),hl","ld (ix+$02),hl","ld (ix+$00),hl",exec.asm,"LD	(IX+2),HL		; The pointer to the original string"
2793,2793,2820,04163d,041667,"ld bc,$000000","ld bc,$000000","ld bc,$000000",exec.asm,"LD	BC, 0"
2794,2794,2821,041641,04166b,"ld c,e","ld c,e","ld c,e",exec.asm,"LD      C,E			; BC: The new string length"
2795,2795,2822,041642,04166c,"ex de,hl","ex de,hl","ex de,hl",exec.asm,"EX      DE,HL"
2796,2796,2823,041643,04166d,pop hl,pop hl,pop hl,exec.asm,POP     HL
2797,2797,2824,041644,04166e,dec c,dec c,dec c,exec.asm,"DEC     C			; Strings can only be 255 bytes long, so this is a quick way to"
2798,2798,2825,041645,04166f,inc c,inc c,inc c,exec.asm,INC     C			; check whether BC is 0 without affecting the carry flag
2799,2799,2826,041646,041670,ret z,ret z,ret z,exec.asm,"RET     Z               	; It is, so it's a NULL string, don't need to do anything else here"
2800,2800,2827,041647,041671,ldir,ldir,ldir,exec.asm,LDIR				; Replace the string in memory
2801,2801,2828,041649,041673,ret nc,ret nc,ret nc,exec.asm,RET     NC
2802,2802,2829,04164a,041674,"ld ($044d1d),de","ld ($044d1d),de","ld ($000000),de",exec.asm,"LD      (FREE),DE		; Set the new value of FREE and fall through to CHECK"
2803,2803,2830,04164f,041679,push hl,push hl,push hl,exec.asm,CHECK:			PUSH    HL
2804,2804,2831,041650,04167a,push bc,push bc,push bc,exec.asm,PUSH	BC
2805,2805,2832,041651,04167b,"ld hl,($044d1d)","ld hl,($044d1d)","ld hl,($000000)",exec.asm,"LD      HL,(FREE)		; HL: Address of first free space byte"
2806,2806,2833,041655,04167f,"ld bc,$000100","ld bc,$000100","ld bc,$000000",exec.asm,"LD	BC,100h			; BC: One page of memory"
2807,2807,2834,041659,041683,"add hl,bc","add hl,bc","add hl,bc",exec.asm,"ADD	HL,BC			; Add a page to FREE"
2808,2808,2835,04165a,041684,"sbc hl,sp","sbc hl,sp","sbc hl,sp",exec.asm,"SBC     HL,SP			; And subtract the current SP"
2809,2809,2836,04165c,041686,pop bc,pop bc,pop bc,exec.asm,POP	BC
2810,2810,2837,04165d,041687,pop hl,pop hl,pop hl,exec.asm,POP     HL
2811,2811,2838,04165e,041688,ret c,ret c,ret c,exec.asm,"RET     C			; The SP is not in the same page, so just return"
2812,2812,2839,04165f,041689,xor a,xor a,xor a,exec.asm,XOR     A			; Otherwise
2813,2813,2840,041660,04168a,jp $043760,jp $043790,jp $000000,exec.asm,"JP      ERROR_			; Throw error ""No room"""
2814,2814,2841,041664,04168e,"ld bc,$000000","ld bc,$000000","ld bc,$000000",exec.asm,"STORS3:			LD	BC,0"
2815,2815,2842,041668,041692,"ld c,e","ld c,e","ld c,e",exec.asm,"LD      C,E			; BC: String length"
2816,2816,2843,041669,041693,push ix,push ix,push ix,exec.asm,PUSH    IX
2817,2817,2844,04166b,041695,pop de,pop de,pop de,exec.asm,POP     DE			; DE: Destination
2818,2818,2845,04166c,041696,xor a,xor a,xor a,exec.asm,XOR     A			; Check if string length is 0
2819,2819,2846,04166d,041697,cp c,cp c,cp c,exec.asm,CP      C
2820,2820,2847,04166e,041698,"jr z,$+$04","jr z,$+$04","jr z,$+$00",exec.asm,"JR      Z,STORS5		; Yes, so don't copy"
2821,2821,2848,041670,04169a,ldir,ldir,ldir,exec.asm,LDIR
2822,2822,2849,041672,04169c,"ld a,$0d","ld a,$0d","ld a,$00",exec.asm,"STORS5:			LD      A,CR			; Finally add the terminator"
2823,2823,2850,041674,04169e,"ld (de),a","ld (de),a","ld (de),a",exec.asm,"LD      (DE),A"
2824,2824,2851,041675,04169f,ret,ret,ret,exec.asm,RET
2825,2825,2852,041676,0416a0,"ld a,$ff","ld a,$ff","ld a,$00",exec.asm,"ARGUE:			LD      A,-1"
2826,2826,2853,041678,0416a2,push af,push af,push af,exec.asm,PUSH    AF              	; Put marker on the stack
2827,2827,2854,041679,0416a3,inc iy,inc iy,inc iy,exec.asm,"ARGUE1:			INC     IY              	; Bump past '(' or ',''"
2828,2828,2855,04167b,0416a5,inc de,inc de,inc de,exec.asm,INC     DE
2829,2829,2856,04167c,0416a6,push de,push de,push de,exec.asm,PUSH    DE
2830,2830,2857,04167d,0416a7,call $040a70,call $040a70,call $000000,exec.asm,CALL    NXT			; Skip any whitespace
2831,2831,2858,041681,0416ab,call $043a3a,call $043a6a,call $000000,exec.asm,CALL    GETVAR			; Get the location of the variable in HL/IX
2832,2832,2859,041685,0416af,"jr c,$+$41","jr c,$+$41","jr c,$+$00",exec.asm,"JR      C,ARGERR		; If the parameter contains an illegal character then throw an error"
2833,2833,2860,041687,0416b1,"call nz,$043a29","call nz,$043a59","call nz,$000000",exec.asm,"CALL    NZ,PUTVAR"
2834,2834,2861,04168b,0416b5,pop de,pop de,pop de,exec.asm,POP     DE
2835,2835,2862,04168c,0416b6,push hl,push hl,push hl,exec.asm,PUSH    HL              	; VARPTR
2836,2836,2863,04168d,0416b7,or a,or a,or a,exec.asm,OR      A               	; Check the variable type
2837,2837,2864,04168e,0416b8,push af,push af,push af,exec.asm,PUSH    AF
2838,2838,2865,04168f,0416b9,push de,push de,push de,exec.asm,PUSH    DE
2839,2839,2866,041690,0416ba,"ex (sp),iy","ex (sp),iy","ex (sp),iy",exec.asm,"EX      (SP),IY"
2840,2840,2867,041692,0416bc,"jp m,$0416aa","jp m,$0416d4","jp m,$000000",exec.asm,"JP      M,ARGUE2        	; Jump here if it is a string"
2841,2841,2868,041696,0416c0,call $040302,call $040302,call $000000,exec.asm,"CALL    EXPRN           	; At this point it is numeric, so get the numeric expression value"
2842,2842,2869,04169a,0416c4,"ex (sp),iy","ex (sp),iy","ex (sp),iy",exec.asm,"EX      (SP),IY"
2843,2843,2870,04169c,0416c6,pop de,pop de,pop de,exec.asm,POP     DE
2844,2844,2871,04169d,0416c7,pop af,pop af,pop af,exec.asm,POP     AF
2845,2845,2872,04169e,0416c8,exx,exx,exx,exec.asm,EXX
2846,2846,2873,04169f,0416c9,push hl,push hl,push hl,exec.asm,PUSH    HL
2847,2847,2874,0416a0,0416ca,exx,exx,exx,exec.asm,EXX
2848,2848,2875,0416a1,0416cb,push hl,push hl,push hl,exec.asm,PUSH    HL
2849,2849,2876,0416a2,0416cc,"ld b,a","ld b,a","ld b,a",exec.asm,"LD      B,A"
2850,2850,2877,0416a3,0416cd,push bc,push bc,push bc,exec.asm,PUSH    BC
2851,2851,2878,0416a4,0416ce,call $04164f,call $041679,call $000000,exec.asm,CALL    CHECK           	; Check room
2852,2852,2879,0416a8,0416d2,jr $+$11,jr $+$11,jr $+$00,exec.asm,JR      ARGUE4
2853,2853,2880,0416aa,0416d4,call $040315,call $040315,call $000000,exec.asm,"ARGUE2:			CALL    EXPRS			; At this point it is a string variable, so get the string expression value"
2854,2854,2881,0416ae,0416d8,"ex (sp),iy","ex (sp),iy","ex (sp),iy",exec.asm,"EX      (SP),IY"
2855,2855,2882,0416b0,0416da,exx,exx,exx,exec.asm,EXX
2856,2856,2883,0416b1,0416db,pop de,pop de,pop de,exec.asm,POP     DE
2857,2857,2884,0416b2,0416dc,exx,exx,exx,exec.asm,EXX
2858,2858,2885,0416b3,0416dd,pop af,pop af,pop af,exec.asm,POP     AF
2859,2859,2886,0416b4,0416de,call $0409b4,call $0409b4,call $000000,exec.asm,CALL    PUSHS
2860,2860,2887,0416b8,0416e2,exx,exx,exx,exec.asm,EXX
2861,2861,2888,0416b9,0416e3,call $040a70,call $040a70,call $000000,exec.asm,ARGUE4:			CALL    NXT			; Skip whitespace
2862,2862,2889,0416bd,0416e7,cp $2c,cp $2c,cp $00,exec.asm,"CP      ','			; Check to see if the next value is a comma"
2863,2863,2890,0416bf,0416e9,"jr nz,$+$0d","jr nz,$+$0d","jr nz,$+$00",exec.asm,"JR      NZ,ARGUE5		; No, so jump here"
2864,2864,2891,0416c1,0416eb,"ld a,(de)","ld a,(de)","ld a,(de)",exec.asm,"LD      A,(DE)"
2865,2865,2892,0416c2,0416ec,cp $2c,cp $2c,cp $00,exec.asm,"CP      ','			; Are there any more arguments?"
2866,2866,2893,0416c4,0416ee,"jr z,$-$4b","jr z,$-$4b","jr z,$-$00",exec.asm,"JR      Z,ARGUE1        	; Yes, so loop"
2867,2867,2894,0416c6,0416f0,"ld a,$1f","ld a,$1f","ld a,$00",exec.asm,"ARGERR:			LD      A,31"
2868,2868,2895,0416c8,0416f2,jp $043760,jp $043790,jp $000000,exec.asm,"JP      ERROR_           	; Throw error ""Arguments"""
2869,2869,2896,0416cc,0416f6,call $040a2f,call $040a2f,call $000000,exec.asm,ARGUE5:			CALL    BRAKET			; Check for end bracket (throws an error if missing)
2870,2870,2897,0416d0,0416fa,"ld a,(de)","ld a,(de)","ld a,(de)",exec.asm,"LD      A,(DE)"
2871,2871,2898,0416d1,0416fb,cp $29,cp $29,cp $00,exec.asm,CP      ')'
2872,2872,2899,0416d3,0416fd,"jr nz,$-$0d","jr nz,$-$0d","jr nz,$-$00",exec.asm,"JR      NZ,ARGERR"
2873,2873,2900,0416d5,0416ff,inc de,inc de,inc de,exec.asm,INC     DE
2874,2874,2901,0416d6,041700,exx,exx,exx,exec.asm,EXX
2875,2875,2902,0416d7,041701,pop bc,pop bc,pop bc,exec.asm,ARGUE6:			POP     BC
2876,2876,2903,0416d8,041702,"ld a,b","ld a,b","ld a,b",exec.asm,"LD      A,B"
2877,2877,2904,0416d9,041703,inc a,inc a,inc a,exec.asm,INC     A
2878,2878,2905,0416da,041704,exx,exx,exx,exec.asm,EXX
2879,2879,2906,0416db,041705,ret z,ret z,ret z,exec.asm,RET     Z               	; Marker popped
2880,2880,2907,0416dc,041706,exx,exx,exx,exec.asm,EXX
2881,2881,2908,0416dd,041707,dec a,dec a,dec a,exec.asm,DEC     A
2882,2882,2909,0416de,041708,"jp m,$0416ee","jp m,$041718","jp m,$000000",exec.asm,"JP      M,ARGUE7        	; If it is a string, then jump here"
2883,2883,2910,0416e2,04170c,pop hl,pop hl,pop hl,exec.asm,POP     HL
2884,2884,2911,0416e3,04170d,exx,exx,exx,exec.asm,EXX
2885,2885,2912,0416e4,04170e,pop hl,pop hl,pop hl,exec.asm,POP     HL
2886,2886,2913,0416e5,04170f,exx,exx,exx,exec.asm,EXX
2887,2887,2914,0416e6,041710,pop ix,pop ix,pop ix,exec.asm,POP     IX
2888,2888,2915,0416e8,041712,call $0415d6,call $041600,call $000000,exec.asm,CALL    STORE	           	; Write to dummy variable
2889,2889,2916,0416ec,041716,jr $-$15,jr $-$15,jr $-$00,exec.asm,JR      ARGUE6
2890,2890,2917,0416ee,041718,call $0409de,call $0409de,call $000000,exec.asm,ARGUE7:			CALL    POPS
2891,2891,2918,0416f2,04171c,pop ix,pop ix,pop ix,exec.asm,POP     IX
2892,2892,2919,0416f4,04171e,call $041600,call $04162a,call $000000,exec.asm,CALL    STACCS
2893,2893,2920,0416f8,041722,jr $-$21,jr $-$21,jr $-$00,exec.asm,JR      ARGUE6
2894,2894,2921,0416fa,041724,pop de,pop de,pop de,exec.asm,SAVLOC:			POP     DE              	; DE: Return address (from the CALL)
2895,2895,2922,0416fb,041725,inc iy,inc iy,inc iy,exec.asm,"SAVLO1:			INC     IY              	; Bump past '(' or ','"
2896,2896,2923,0416fd,041727,call $040a70,call $040a70,call $000000,exec.asm,CALL    NXT			; And also any whitespace
2897,2897,2924,041701,04172b,push de,push de,push de,exec.asm,PUSH    DE			; Push the return address back onto the stack
2898,2898,2925,041702,04172c,exx,exx,exx,exec.asm,EXX
2899,2899,2926,041703,04172d,push bc,push bc,push bc,exec.asm,PUSH    BC
2900,2900,2927,041704,04172e,push de,push de,push de,exec.asm,PUSH    DE
2901,2901,2928,041705,04172f,push hl,push hl,push hl,exec.asm,PUSH    HL
2902,2902,2929,041706,041730,exx,exx,exx,exec.asm,EXX
2903,2903,2930,041707,041731,call $040c8e,call $040c8e,call $000000,exec.asm,CALL    VAR_             	; Dummy variable
2904,2904,2931,04170b,041735,exx,exx,exx,exec.asm,EXX
2905,2905,2932,04170c,041736,pop hl,pop hl,pop hl,exec.asm,POP     HL
2906,2906,2933,04170d,041737,pop de,pop de,pop de,exec.asm,POP     DE
2907,2907,2934,04170e,041738,pop bc,pop bc,pop bc,exec.asm,POP     BC
2908,2908,2935,04170f,041739,exx,exx,exx,exec.asm,EXX
2909,2909,2936,041710,04173a,pop de,pop de,pop de,exec.asm,POP     DE
2910,2910,2937,041711,04173b,or a,or a,or a,exec.asm,OR      A               	; Check the variable type
2911,2911,2938,041712,04173c,"jp m,$041725","jp m,$04174f","jp m,$000000",exec.asm,"JP      M,SAVLO2        	; 80h = string, so jump to save a local string"
2912,2912,2939,041716,041740,exx,exx,exx,exec.asm,EXX
2913,2913,2940,041717,041741,push hl,push hl,push hl,exec.asm,PUSH    HL              	; Save H'L'
2914,2914,2941,041718,041742,exx,exx,exx,exec.asm,EXX
2915,2915,2942,041719,041743,"ld b,a","ld b,a","ld b,a",exec.asm,"LD      B,A             	;  B: Variable type"
2916,2916,2943,04171a,041744,call $040416,call $040416,call $000000,exec.asm,CALL    LOADN
2917,2917,2944,04171e,041748,exx,exx,exx,exec.asm,EXX
2918,2918,2945,04171f,041749,"ex (sp),hl","ex (sp),hl","ex (sp),hl",exec.asm,"EX      (SP),HL"
2919,2919,2946,041720,04174a,exx,exx,exx,exec.asm,EXX
2920,2920,2947,041721,04174b,push hl,push hl,push hl,exec.asm,PUSH    HL
2921,2921,2948,041722,04174c,push bc,push bc,push bc,exec.asm,PUSH    BC
2922,2922,2949,041723,04174d,jr $+$2f,jr $+$2f,jr $+$00,exec.asm,JR      SAVLO4
2923,2923,2950,041725,04174f,push af,push af,push af,exec.asm,SAVLO2:			PUSH    AF              	; Save the type (string)
2924,2924,2951,041726,041750,push de,push de,push de,exec.asm,PUSH    DE
2925,2925,2952,041727,041751,exx,exx,exx,exec.asm,EXX
2926,2926,2953,041728,041752,push hl,push hl,push hl,exec.asm,PUSH    HL
2927,2927,2954,041729,041753,exx,exx,exx,exec.asm,EXX
2928,2928,2955,04172a,041754,call $0404a0,call $0404a0,call $000000,exec.asm,CALL    LOADS
2929,2929,2956,04172e,041758,exx,exx,exx,exec.asm,EXX
2930,2930,2957,04172f,041759,pop hl,pop hl,pop hl,exec.asm,POP     HL
2931,2931,2958,041730,04175a,exx,exx,exx,exec.asm,EXX
2932,2932,2959,041731,04175b,"ld bc,$000000","ld bc,$000000","ld bc,$000000",exec.asm,"LD	BC,0"
2933,2933,2960,041735,04175f,"ld c,e","ld c,e","ld c,e",exec.asm,"LD      C,E			; BC: String length"
2934,2934,2961,041736,041760,pop de,pop de,pop de,exec.asm,POP     DE
2935,2935,2962,041737,041761,call $04164f,call $041679,call $000000,exec.asm,CALL    CHECK			; Check if there is space on the stack
2936,2936,2963,04173b,041765,pop af,pop af,pop af,exec.asm,POP     AF              	; Level stack
2937,2937,2964,04173c,041766,"ld hl,$000000","ld hl,$000000","ld hl,$000000",exec.asm,"LD      HL,0"
2938,2938,2965,041740,04176a,"sbc hl,bc","sbc hl,bc","sbc hl,bc",exec.asm,"SBC     HL,BC			; HL: Number of bytes required on the stack for the string"
2939,2939,2966,041742,04176c,"add hl,sp","add hl,sp","add hl,sp",exec.asm,"ADD     HL,SP			; Make space for the string on the stack"
2940,2940,2967,041743,04176d,"ld sp,hl","ld sp,hl","ld sp,hl",exec.asm,"LD      SP,HL"
2941,2941,2968,041744,04176e,"ld b,a","ld b,a","ld b,a",exec.asm,"LD      B,A             	;  B: Variable type"
2942,2942,2969,041745,04176f,push bc,push bc,push bc,exec.asm,PUSH    BC
2943,2943,2970,041746,041770,"jr z,$+$0c","jr z,$+$0c","jr z,$+$00",exec.asm,"JR      Z,SAVLO4"
2944,2944,2971,041748,041772,push de,push de,push de,exec.asm,PUSH    DE
2945,2945,2972,041749,041773,"ld de,$044a00","ld de,$044a00","ld de,$000000",exec.asm,"LD      DE,ACCS"
2946,2946,2973,04174d,041777,"ex de,hl","ex de,hl","ex de,hl",exec.asm,"EX      DE,HL"
2947,2947,2974,04174e,041778,"ld b,l","ld b,l","ld b,l",exec.asm,"LD      B,L"
2948,2948,2975,04174f,041779,ldir,ldir,ldir,exec.asm,LDIR                    	; Save the string onto the stack
2949,2949,2976,041751,04177b,pop de,pop de,pop de,exec.asm,POP     DE
2950,2950,2977,041752,04177c,push ix,push ix,push ix,exec.asm,SAVLO4:			PUSH    IX			; VARPTR
2951,2951,2978,041754,04177e,call $041758,call $041782,call $000000,exec.asm,CALL    SAVLO5
2952,2952,2979,041758,041782,call $04164f,call $041679,call $000000,exec.asm,SAVLO5:			CALL    CHECK
2953,2953,2980,04175c,041786,call $040a70,call $040a70,call $000000,exec.asm,CALL    NXT
2954,2954,2981,041760,04178a,cp $2c,cp $2c,cp $00,exec.asm,"CP      ','             	; Are there any more local variables?"
2955,2955,2982,041762,04178c,"jr z,$-$67","jr z,$-$67","jr z,$-$00",exec.asm,"JR      Z,SAVLO1		; Yes, so loop"
2956,2956,2983,041764,04178e,"ex de,hl","ex de,hl","ex de,hl",exec.asm,"EX      DE,HL			; DE -> HL: The return address"
2957,2957,2984,041765,04178f,jp (hl),jp (hl),jp (hl),exec.asm,JP      (HL)            	; And effectvely return
2958,2958,2985,041766,041790,"ld a,(iy)","ld a,(iy)","ld a,(iy)",exec.asm,"DELIM:			LD      A,(IY)          	; Assembler delimiter"
2959,2959,2986,041769,041793,cp $20,cp $20,cp $00,exec.asm,CP      ' '
2960,2960,2987,04176b,041795,ret z,ret z,ret z,exec.asm,RET     Z
2961,2961,2988,04176c,041796,cp $2c,cp $2c,cp $00,exec.asm,"CP      ','"
2962,2962,2989,04176e,041798,ret z,ret z,ret z,exec.asm,RET     Z
2963,2963,2990,04176f,041799,cp $29,cp $29,cp $00,exec.asm,CP      ')'
2964,2964,2991,041771,04179b,ret z,ret z,ret z,exec.asm,RET     Z
2965,2965,2992,041772,04179c,cp $3b,cp $3b,cp $00,exec.asm,TERM:			CP      ';'             	; Assembler terminator
2966,2966,2993,041774,04179e,ret z,ret z,ret z,exec.asm,RET     Z
2967,2967,2994,041775,04179f,cp $5c,cp $5c,cp $00,exec.asm,CP      '\'
2968,2968,2995,041777,0417a1,ret z,ret z,ret z,exec.asm,RET     Z
2969,2969,2996,041778,0417a2,jr $+$09,jr $+$09,jr $+$00,exec.asm,JR      TERM0
2970,2970,2997,04177a,0417a4,call $040a70,call $040a70,call $000000,exec.asm,TERMQ:			CALL    NXT
2971,2971,2998,04177e,0417a8,cp $8b,cp $8b,cp $00,exec.asm,CP      ELSE_EX_
2972,2972,2999,041780,0417aa,ret nc,ret nc,ret nc,exec.asm,RET     NC
2973,2973,3000,041781,0417ab,cp $3a,cp $3a,cp $00,exec.asm,TERM0:			CP      ':'             	; Assembler seperator
2974,2974,3001,041783,0417ad,ret nc,ret nc,ret nc,exec.asm,RET     NC
2975,2975,3002,041784,0417ae,cp $0d,cp $0d,cp $00,exec.asm,CP      CR
2976,2976,3003,041786,0417b0,ret,ret,ret,exec.asm,RET
2977,2977,3004,041787,0417b1,call $04177a,call $0417a4,call $000000,exec.asm,SPAN:			CALL    TERMQ
2978,2978,3005,04178b,0417b5,ret z,ret z,ret z,exec.asm,RET     Z
2979,2979,3006,04178c,0417b6,inc iy,inc iy,inc iy,exec.asm,INC     IY
2980,2980,3007,04178e,0417b8,jr $-$07,jr $-$07,jr $-$00,exec.asm,JR      SPAN
2981,2981,3008,041790,0417ba,call $040a70,call $040a70,call $000000,exec.asm,EQUALS:			CALL    NXT			; Skip whitespace
2982,2982,3009,041794,0417be,inc iy,inc iy,inc iy,exec.asm,INC     IY			; Skip past the character in question
2983,2983,3010,041796,0417c0,cp $3d,cp $3d,cp $00,exec.asm,CP      '='			; Is it '='
2984,2984,3011,041798,0417c2,ret z,ret z,ret z,exec.asm,"RET     Z			; Yes, so return"
2985,2985,3012,041799,0417c3,"ld a,$04","ld a,$04","ld a,$00",exec.asm,"LD      A,4			; Otherwise"
2986,2986,3013,04179b,0417c5,jp $043760,jp $043790,jp $000000,exec.asm,"JP      ERROR_           	; Throw error ""Mistake"""
2987,2987,3014,04179f,0417c9,cp $8a,cp $8a,cp $00,exec.asm,FORMAT:			CP      TAB
2988,2988,3015,0417a1,0417cb,"jr z,$+$0f","jr z,$+$0f","jr z,$+$00",exec.asm,"JR      Z,DOTAB"
2989,2989,3016,0417a3,0417cd,cp $89,cp $89,cp $00,exec.asm,CP      SPC
2990,2990,3017,0417a5,0417cf,"jr z,$+$42","jr z,$+$42","jr z,$+$00",exec.asm,"JR      Z,DOSPC"
2991,2991,3018,0417a7,0417d1,cp $27,cp $27,cp $00,exec.asm,CP      '''
2992,2992,3019,0417a9,0417d3,ret nz,ret nz,ret nz,exec.asm,RET     NZ
2993,2993,3020,0417aa,0417d4,call $043947,call $043977,call $000000,exec.asm,CALL    CRLF
2994,2994,3021,0417ae,0417d8,xor a,xor a,xor a,exec.asm,XOR     A
2995,2995,3022,0417af,0417d9,ret,ret,ret,exec.asm,RET
2996,2996,3023,0417b0,0417da,push bc,push bc,push bc,exec.asm,DOTAB:			PUSH    BC
2997,2997,3024,0417b1,0417db,call $04030a,call $04030a,call $000000,exec.asm,CALL    EXPRI
2998,2998,3025,0417b5,0417df,exx,exx,exx,exec.asm,EXX
2999,2999,3026,0417b6,0417e0,pop bc,pop bc,pop bc,exec.asm,POP     BC
3000,3000,3027,0417b7,0417e1,"ld a,(iy)","ld a,(iy)","ld a,(iy)",exec.asm,"LD      A,(IY)"
3001,3001,3028,0417ba,0417e4,cp $2c,cp $2c,cp $00,exec.asm,"CP      ','"
3002,3002,3029,0417bc,0417e6,"jr z,$+$16","jr z,$+$16","jr z,$+$00",exec.asm,"JR      Z,DOTAB1"
3003,3003,3030,0417be,0417e8,call $040a2f,call $040a2f,call $000000,exec.asm,CALL    BRAKET
3004,3004,3031,0417c2,0417ec,"ld a,l","ld a,l","ld a,l",exec.asm,"LD      A,L"
3005,3005,3032,0417c3,0417ed,"ld hl,$044d3d","ld hl,$044d3d","ld hl,$000000",exec.asm,"TABIT:			LD      HL,COUNT"
3006,3006,3033,0417c7,0417f1,cp (hl),cp (hl),cp (hl),exec.asm,CP      (HL)
3007,3007,3034,0417c8,0417f2,ret z,ret z,ret z,exec.asm,RET     Z
3008,3008,3035,0417c9,0417f3,push af,push af,push af,exec.asm,PUSH    AF
3009,3009,3036,0417ca,0417f4,"call c,$043947","call c,$043977","call c,$000000",exec.asm,"CALL    C,CRLF"
3010,3010,3037,0417ce,0417f8,pop af,pop af,pop af,exec.asm,POP     AF
3011,3011,3038,0417cf,0417f9,sub (hl),sub (hl),sub (hl),exec.asm,SUB     (HL)
3012,3012,3039,0417d0,0417fa,jr $+$1f,jr $+$1f,jr $+$00,exec.asm,JR      FILL
3013,3013,3040,0417d2,0417fc,inc iy,inc iy,inc iy,exec.asm,DOTAB1:			INC     IY
3014,3014,3041,0417d4,0417fe,push bc,push bc,push bc,exec.asm,PUSH    BC
3015,3015,3042,0417d5,0417ff,push hl,push hl,push hl,exec.asm,PUSH    HL
3016,3016,3043,0417d6,041800,call $04030a,call $04030a,call $000000,exec.asm,CALL    EXPRI
3017,3017,3044,0417da,041804,exx,exx,exx,exec.asm,EXX
3018,3018,3045,0417db,041805,pop de,pop de,pop de,exec.asm,POP     DE
3019,3019,3046,0417dc,041806,pop bc,pop bc,pop bc,exec.asm,POP     BC
3020,3020,3047,0417dd,041807,call $040a2f,call $040a2f,call $000000,exec.asm,CALL    BRAKET
3021,3021,3048,0417e1,04180b,call $043ec1,call $043ef1,call $000000,exec.asm,CALL    PUTCSR
3022,3022,3049,0417e5,04180f,xor a,xor a,xor a,exec.asm,XOR     A
3023,3023,3050,0417e6,041810,ret,ret,ret,exec.asm,RET
3024,3024,3051,0417e7,041811,push bc,push bc,push bc,exec.asm,DOSPC:			PUSH    BC
3025,3025,3052,0417e8,041812,call $040325,call $040325,call $000000,exec.asm,CALL    ITEMI
3026,3026,3053,0417ec,041816,exx,exx,exx,exec.asm,EXX
3027,3027,3054,0417ed,041817,"ld a,l","ld a,l","ld a,l",exec.asm,"LD      A,L"
3028,3028,3055,0417ee,041818,pop bc,pop bc,pop bc,exec.asm,POP     BC
3029,3029,3056,0417ef,041819,or a,or a,or a,exec.asm,FILL:			OR      A
3030,3030,3057,0417f0,04181a,ret z,ret z,ret z,exec.asm,RET     Z
3031,3031,3058,0417f1,04181b,push bc,push bc,push bc,exec.asm,PUSH    BC
3032,3032,3059,0417f2,04181c,"ld b,a","ld b,a","ld b,a",exec.asm,"LD      B,A"
3033,3033,3060,0417f3,04181d,"ld a,$20","ld a,$20","ld a,$00",exec.asm,"FILL1:			LD      A,' '"
3034,3034,3061,0417f5,04181f,call $04394f,call $04397f,call $000000,exec.asm,CALL    OUTCHR
3035,3035,3062,0417f9,041823,djnz $-$06,djnz $-$06,djnz $-$00,exec.asm,DJNZ    FILL1
3036,3036,3063,0417fb,041825,pop bc,pop bc,pop bc,exec.asm,POP     BC
3037,3037,3064,0417fc,041826,xor a,xor a,xor a,exec.asm,XOR     A
3038,3038,3065,0417fd,041827,ret,ret,ret,exec.asm,RET
3039,3039,3066,0417fe,041828,"ld hl,$044a00","ld hl,$044a00","ld hl,$000000",exec.asm,"PTEXT:			LD      HL,ACCS"
3040,3040,3067,041802,04182c,inc e,inc e,inc e,exec.asm,INC     E
3041,3041,3068,041803,04182d,dec e,dec e,dec e,exec.asm,PTEXT1:			DEC     E
3042,3042,3069,041804,04182e,ret z,ret z,ret z,exec.asm,RET     Z
3043,3043,3070,041805,04182f,"ld a,(hl)","ld a,(hl)","ld a,(hl)",exec.asm,"LD      A,(HL)"
3044,3044,3071,041806,041830,inc hl,inc hl,inc hl,exec.asm,INC     HL
3045,3045,3072,041807,041831,call $04394f,call $04397f,call $000000,exec.asm,CALL    OUTCHR
3046,3046,3073,04180b,041835,jr $-$08,jr $-$08,jr $-$00,exec.asm,JR      PTEXT1
3047,3047,3074,04180d,041837,push af,push af,push af,exec.asm,FETCHS:			PUSH    AF
3048,3048,3075,04180e,041838,push bc,push bc,push bc,exec.asm,PUSH    BC
3049,3049,3076,04180f,041839,push hl,push hl,push hl,exec.asm,PUSH    HL
3050,3050,3077,041810,04183a,"ex (sp),iy","ex (sp),iy","ex (sp),iy",exec.asm,"EX      (SP),IY"
3051,3051,3078,041812,04183c,call $04182d,call $041857,call $000000,exec.asm,CALL    XTRACT
3052,3052,3079,041816,041840,call $040a70,call $040a70,call $000000,exec.asm,CALL    NXT
3053,3053,3080,04181a,041844,"ex (sp),iy","ex (sp),iy","ex (sp),iy",exec.asm,"EX      (SP),IY"
3054,3054,3081,04181c,041846,pop hl,pop hl,pop hl,exec.asm,POP     HL
3055,3055,3082,04181d,041847,pop bc,pop bc,pop bc,exec.asm,POP     BC
3056,3056,3083,04181e,041848,pop af,pop af,pop af,exec.asm,POP     AF
3057,3057,3084,04181f,041849,ret,ret,ret,exec.asm,RET
3058,3058,3085,041820,04184a,"ld de,$044a00","ld de,$044a00","ld de,$000000",exec.asm,"LINES:			LD      DE,ACCS"
3059,3059,3086,041824,04184e,"ld a,(hl)","ld a,(hl)","ld a,(hl)",exec.asm,"LINE1S:			LD      A,(HL)"
3060,3060,3087,041825,04184f,"ld (de),a","ld (de),a","ld (de),a",exec.asm,"LD      (DE),A"
3061,3061,3088,041826,041850,cp $0d,cp $0d,cp $00,exec.asm,CP      CR
3062,3062,3089,041828,041852,ret z,ret z,ret z,exec.asm,RET     Z
3063,3063,3090,041829,041853,inc hl,inc hl,inc hl,exec.asm,INC     HL
3064,3064,3091,04182a,041854,inc e,inc e,inc e,exec.asm,INC     E
3065,3065,3092,04182b,041855,jr $-$07,jr $-$07,jr $-$00,exec.asm,JR      LINE1S
3066,3066,3093,04182d,041857,call $040a70,call $040a70,call $000000,exec.asm,XTRACT:			CALL    NXT
3067,3067,3094,041831,04185b,cp $22,cp $22,cp $00,exec.asm,"CP      '""'"
3068,3068,3095,041833,04185d,inc iy,inc iy,inc iy,exec.asm,INC     IY
3069,3069,3096,041835,04185f,"jp z,$040467","jp z,$040467","jp z,$000000",exec.asm,"JP      Z,CONS"
3070,3070,3097,041839,041863,dec iy,dec iy,dec iy,exec.asm,DEC     IY
3071,3071,3098,04183b,041865,"ld de,$044a00","ld de,$044a00","ld de,$000000",exec.asm,"LD      DE,ACCS"
3072,3072,3099,04183f,041869,"ld a,(iy)","ld a,(iy)","ld a,(iy)",exec.asm,"XTRAC1:			LD      A,(IY)"
3073,3073,3100,041842,04186c,"ld (de),a","ld (de),a","ld (de),a",exec.asm,"LD      (DE),A"
3074,3074,3101,041843,04186d,cp $2c,cp $2c,cp $00,exec.asm,"CP      ','"
3075,3075,3102,041845,04186f,ret z,ret z,ret z,exec.asm,RET     Z
3076,3076,3103,041846,041870,cp $0d,cp $0d,cp $00,exec.asm,CP      CR
3077,3077,3104,041848,041872,ret z,ret z,ret z,exec.asm,RET     Z
3078,3078,3105,041849,041873,inc iy,inc iy,inc iy,exec.asm,INC     IY
3079,3079,3106,04184b,041875,inc e,inc e,inc e,exec.asm,INC     E
3080,3080,3107,04184c,041876,jr $-$0d,jr $-$0d,jr $-$00,exec.asm,JR      XTRAC1
3081,3081,3108,04184e,041878,"ld bc,$000000","ld bc,$000000","ld bc,$000000",exec.asm,"SEARCH_EX:			LD      BC,0			; Clear BC"
3082,3082,3109,041852,04187c,"ld c,(hl)","ld c,(hl)","ld c,(hl)",exec.asm,"SRCH1_EX:			LD      C,(HL)			;  C: Fetch the line length"
3083,3083,3110,041853,04187d,inc c,inc c,inc c,exec.asm,"INC     C			; Check for 0, i.e. end of program marker"
3084,3084,3111,041854,04187e,dec c,dec c,dec c,exec.asm,DEC     C
3085,3085,3112,041855,04187f,"jr z,$+$0d","jr z,$+$0d","jr z,$+$00",exec.asm,"JR      Z,SRCH2_EX         	; Not found the token, so end"
3086,3086,3113,041857,041881,inc hl,inc hl,inc hl,exec.asm,INC     HL			; Skip the line length and line number
3087,3087,3114,041858,041882,inc hl,inc hl,inc hl,exec.asm,INC     HL
3088,3088,3115,041859,041883,inc hl,inc hl,inc hl,exec.asm,INC     HL
3089,3089,3116,04185a,041884,cp (hl),cp (hl),cp (hl),exec.asm,CP      (HL)			; Compare with the token
3090,3090,3117,04185b,041885,ret z,ret z,ret z,exec.asm,"RET     Z			; Found it, so return with carry not set"
3091,3091,3118,04185c,041886,dec c,dec c,dec c,exec.asm,DEC     C			; Skip to the next line
3092,3092,3119,04185d,041887,dec c,dec c,dec c,exec.asm,DEC     C
3093,3093,3120,04185e,041888,dec c,dec c,dec c,exec.asm,DEC     C
3094,3094,3121,04185f,041889,"add hl,bc","add hl,bc","add hl,bc",exec.asm,"ADD     HL,BC"
3095,3095,3122,041860,04188a,jr $-$0e,jr $-$0e,jr $-$00,exec.asm,"JR      SRCH1_EX			; Rinse, lather and repeat"
3096,3096,3123,041862,04188c,dec hl,dec hl,dec hl,exec.asm,"SRCH2_EX:			DEC     HL              	; Token not found, so back up to the CR at the end of the last line"
3097,3097,3124,041863,04188d,scf,scf,scf,exec.asm,SCF				; And set the carry flag
3098,3098,3125,041864,04188e,ret,ret,ret,exec.asm,RET
3099,3099,3126,041865,04188f,cp $04,cp $04,cp $00,exec.asm,X4OR5:			CP      4			; Check A = 4 (Z flag is used later)
3100,3100,3127,041867,041891,push de,push de,push de,exec.asm,push de
3101,3101,3128,041868,041892,pop hl,pop hl,pop hl,exec.asm,pop hl
3102,3102,3129,041869,041893,"add hl,hl","add hl,hl","add hl,hl",exec.asm,"ADD     HL,HL			; Multiply by 2 (note this operation preserves the zero flag)"
3103,3103,3130,04186a,041894,ret c,ret c,ret c,exec.asm,RET     C			; Exit if overflow
3104,3104,3131,04186b,041895,"add hl,hl","add hl,hl","add hl,hl",exec.asm,"ADD     HL,HL			; Multiply by 2 again"
3105,3105,3132,04186c,041896,ret c,ret c,ret c,exec.asm,RET     C			; Exit if overflow
3106,3106,3133,04186d,041897,"ex de,hl","ex de,hl","ex de,hl",exec.asm,"EX      DE,HL			; DE: Product"
3107,3107,3134,04186e,041898,ret z,ret z,ret z,exec.asm,RET     Z			; Exit if A = 4
3108,3108,3135,04186f,041899,"add hl,de","add hl,de","add hl,de",exec.asm,"ADD     HL,DE			; Add original value to HL (effectively multiplying by 5)"
3109,3109,3136,041870,04189a,"ex de,hl","ex de,hl","ex de,hl",exec.asm,"EX      DE,HL			; DE: Product"
3110,3110,3137,041871,04189b,ret,ret,ret,exec.asm,RET
3111,3111,3138,041872,04189c,push bc,push bc,push bc,exec.asm,MUL16:			PUSH	BC
3112,3112,3139,041873,04189d,"ld d,c","ld d,c","ld d,c",exec.asm,"LD	D, C			; Set up the registers for the multiplies"
3113,3113,3140,041874,04189e,"ld e,l","ld e,l","ld e,l",exec.asm,"LD	E, L"
3114,3114,3141,041875,04189f,"ld l,c","ld l,c","ld l,c",exec.asm,"LD	L, C"
3115,3115,3142,041876,0418a0,"ld c,e","ld c,e","ld c,e",exec.asm,"LD	C, E"
3116,3116,3143,041877,0418a1,mlt hl,mlt hl,mlt hl,exec.asm,MLT	HL			; HL = H * C (*256)
3117,3117,3144,041879,0418a3,mlt de,mlt de,mlt de,exec.asm,MLT	DE			; DE = L * C
3118,3118,3145,04187b,0418a5,mlt bc,mlt bc,mlt bc,exec.asm,MLT	BC			; BC = B * L (*256)
3119,3119,3146,04187d,0418a7,"add hl,bc","add hl,bc","add hl,bc",exec.asm,"ADD	HL, BC			; HL = The sum of the two most significant multiplications"
3120,3120,3147,04187e,0418a8,pop bc,pop bc,pop bc,exec.asm,POP	BC
3121,3121,3148,04187f,0418a9,xor a,xor a,xor a,exec.asm,XOR	A
3122,3122,3149,041880,0418aa,"sbc a,h","sbc a,h","sbc a,h",exec.asm,SBC	H			; If H is not zero then it's an overflow
3123,3123,3150,041881,0418ab,ret c,ret c,ret c,exec.asm,RET	C
3124,3124,3151,041882,0418ac,"ld h,l","ld h,l","ld h,l",exec.asm,"LD	H, L			; HL = ((H * C) + (B * L) * 256) + (L * C)"
3125,3125,3152,041883,0418ad,"ld l,a","ld l,a","ld l,a",exec.asm,"LD	L, A"
3126,3126,3153,041884,0418ae,"add hl,de","add hl,de","add hl,de",exec.asm,"ADD	HL, DE"
3127,3127,3154,041885,0418af,ret,ret,ret,exec.asm,RET
3128,3128,3155,041886,0418b0,call $040a70,call $040a70,call $000000,exec.asm,CHANEL:			CALL    NXT			; Skip whitespace
3129,3129,3156,04188a,0418b4,cp $23,cp $23,cp $00,exec.asm,CP      '#'			; Check for the '#' symbol
3130,3130,3157,04188c,0418b6,"ld a,$2d","ld a,$2d","ld a,$00",exec.asm,"LD      A,45"
3131,3131,3158,04188e,0418b8,"jp nz,$043760","jp nz,$043790","jp nz,$000000",exec.asm,"JP      NZ,ERROR_        	; If it is missing, then throw a ""Missing #"" error"
3132,3132,3159,041892,0418bc,inc iy,inc iy,inc iy,exec.asm,CHNL:			INC     IY             		; Bump past the '#'
3133,3133,3160,041894,0418be,call $040325,call $040325,call $000000,exec.asm,CALL    ITEMI			; Get the channel number
3134,3134,3161,041898,0418c2,exx,exx,exx,exec.asm,EXX
3135,3135,3162,041899,0418c3,"ex de,hl","ex de,hl","ex de,hl",exec.asm,"EX      DE,HL			; DE: The channel number"
3136,3136,3163,04189a,0418c4,ret,ret,ret,exec.asm,RET
3137,3137,3164,04189b,0418c5,call $041db5,call $041de5,call $000000,exec.asm,ASSEM:			CALL    SKIP
3138,3138,3165,04189f,0418c9,inc iy,inc iy,inc iy,exec.asm,INC     IY
3139,3139,3166,0418a1,0418cb,cp $3a,cp $3a,cp $00,exec.asm,CP      ':'
3140,3140,3167,0418a3,0418cd,"jr z,$-$08","jr z,$-$08","jr z,$-$00",exec.asm,"JR      Z,ASSEM"
3141,3141,3168,0418a5,0418cf,cp $5d,cp $5d,cp $00,exec.asm,CP      ']'
3142,3142,3169,0418a7,0418d1,ret z,ret z,ret z,exec.asm,RET     Z
3143,3143,3170,0418a8,0418d2,cp $0d,cp $0d,cp $00,exec.asm,CP      CR
3144,3144,3171,0418aa,0418d4,ret z,ret z,ret z,exec.asm,RET     Z
3145,3145,3172,0418ab,0418d5,dec iy,dec iy,dec iy,exec.asm,DEC     IY
3146,3146,3173,0418ad,0418d7,"ld ix,($044c40)","ld ix,($113040)","ld ix,($000000)",exec.asm,"LD      IX,(PC)         	; Program counter (P% - defined in equs.inc)"
3147,3147,3174,0418b2,0418dc,"ld hl,$044d40","ld hl,$044d40","ld hl,$000000",exec.asm,"LD      HL,LISTON"
3148,3148,3175,0418b6,0418e0,"bit 6,(hl)","bit 6,(hl)","bit 6,(hl)",exec.asm,"BIT     6,(HL)"
3149,3149,3176,0418b8,0418e2,"jr z,$+$07","jr z,$+$07","jr z,$+$00",exec.asm,"JR      Z,ASSEM0"
3150,3150,3177,0418ba,0418e4,"ld ix,($044c3c)","ld ix,($11303c)","ld ix,($000000)",exec.asm,"LD      IX,(OC)         	; Code origin (O% - defined in equs.inc)"
3151,3151,3178,0418bf,0418e9,push ix,push ix,push ix,exec.asm,ASSEM0:			PUSH    IX
3152,3152,3179,0418c1,0418eb,push iy,push iy,push iy,exec.asm,PUSH    IY
3153,3153,3180,0418c3,0418ed,call $041973,call $04199d,call $000000,exec.asm,CALL    ASMB
3154,3154,3181,0418c7,0418f1,pop bc,pop bc,pop bc,exec.asm,POP     BC
3155,3155,3182,0418c8,0418f2,pop de,pop de,pop de,exec.asm,POP     DE
3156,3156,3183,0418c9,0418f3,ret c,ret c,ret c,exec.asm,RET     C
3157,3157,3184,0418ca,0418f4,call $041db5,call $041de5,call $000000,exec.asm,CALL    SKIP
3158,3158,3185,0418ce,0418f8,scf,scf,scf,exec.asm,SCF
3159,3159,3186,0418cf,0418f9,ret nz,ret nz,ret nz,exec.asm,RET     NZ
3160,3160,3187,0418d0,0418fa,dec iy,dec iy,dec iy,exec.asm,DEC     IY
3161,3161,3188,0418d2,0418fc,inc iy,inc iy,inc iy,exec.asm,ASSEM3:			INC     IY
3162,3162,3189,0418d4,0418fe,"ld a,(iy)","ld a,(iy)","ld a,(iy)",exec.asm,"LD      A,(IY)"
3163,3163,3190,0418d7,041901,call $041781,call $0417ab,call $000000,exec.asm,CALL    TERM0
3164,3164,3191,0418db,041905,"jr nz,$-$09","jr nz,$-$09","jr nz,$-$00",exec.asm,"JR      NZ,ASSEM3"
3165,3165,3192,0418dd,041907,"ld a,($044d40)","ld a,($044d40)","ld a,($000000)",exec.asm,"LD      A,(LISTON)"
3166,3166,3193,0418e1,04190b,push ix,push ix,push ix,exec.asm,PUSH    IX
3167,3167,3194,0418e3,04190d,pop hl,pop hl,pop hl,exec.asm,POP     HL
3168,3168,3195,0418e4,04190e,or a,or a,or a,exec.asm,OR      A
3169,3169,3196,0418e5,04190f,"sbc hl,de","sbc hl,de","sbc hl,de",exec.asm,"SBC     HL,DE"
3170,3170,3197,0418e7,041911,"ex de,hl","ex de,hl","ex de,hl",exec.asm,"EX      DE,HL           	; DE: Number of bytes"
3171,3171,3198,0418e8,041912,push hl,push hl,push hl,exec.asm,PUSH    HL
3172,3172,3199,0418e9,041913,"ld hl,($044c40)","ld hl,($113040)","ld hl,($000000)",exec.asm,"LD      HL,(PC)"
3173,3173,3200,0418ed,041917,push hl,push hl,push hl,exec.asm,PUSH    HL
3174,3174,3201,0418ee,041918,"add hl,de","add hl,de","add hl,de",exec.asm,"ADD     HL,DE"
3175,3175,3202,0418ef,041919,"ld ($044c40),hl","ld ($113040),hl","ld ($000000),hl",exec.asm,"LD      (PC),HL         	; Update PC"
3176,3176,3203,0418f3,04191d,"bit 6,a","bit 6,a","bit 6,a",exec.asm,"BIT     6,A"
3177,3177,3204,0418f5,04191f,"jr z,$+$0b","jr z,$+$0b","jr z,$+$00",exec.asm,"JR      Z,ASSEM5"
3178,3178,3205,0418f7,041921,"ld hl,($044c3c)","ld hl,($11303c)","ld hl,($000000)",exec.asm,"LD      HL,(OC)"
3179,3179,3206,0418fb,041925,"add hl,de","add hl,de","add hl,de",exec.asm,"ADD     HL,DE"
3180,3180,3207,0418fc,041926,"ld ($044c3c),hl","ld ($11303c),hl","ld ($000000),hl",exec.asm,"LD      (OC),HL         	; Update OC"
3181,3181,3208,041900,04192a,pop hl,pop hl,pop hl,exec.asm,ASSEM5:			POP     HL              	; Old PC
3182,3182,3209,041901,04192b,pop ix,pop ix,pop ix,exec.asm,POP     IX              	; Code here
3183,3183,3210,041903,04192d,"bit 4,a","bit 4,a","bit 4,a",exec.asm,"BIT     4,A"
3184,3184,3211,041905,04192f,"jr z,$-$6a","jr z,$-$6a","jr z,$-$00",exec.asm,"JR      Z,ASSEM"
3185,3185,3212,041907,041931,"ld ($044d4a),hl","ld ($044d4a),hl","ld ($000000),hl",exec.asm,"LD	(R0),HL			; Store HL in R0 so we can access the MSB"
3186,3186,3213,04190b,041935,"ld a,($044d4c)","ld a,($044d4c)","ld a,($000000)",exec.asm,"LD	A,(R0+2)		; Print out the address"
3187,3187,3214,04190f,041939,call $04195d,call $041987,call $000000,exec.asm,CALL	HEX_EX
3188,3188,3215,041913,04193d,"ld a,h","ld a,h","ld a,h",exec.asm,"LD      A,H"
3189,3189,3216,041914,04193e,call $04195d,call $041987,call $000000,exec.asm,CALL    HEX_EX
3190,3190,3217,041918,041942,"ld a,l","ld a,l","ld a,l",exec.asm,"LD      A,L"
3191,3191,3218,041919,041943,call $041955,call $04197f,call $000000,exec.asm,CALL    HEXSP
3192,3192,3219,04191d,041947,xor a,xor a,xor a,exec.asm,XOR     A
3193,3193,3220,04191e,041948,cp e,cp e,cp e,exec.asm,CP      E
3194,3194,3221,04191f,041949,"jr z,$+$1a","jr z,$+$1a","jr z,$+$00",exec.asm,"JR      Z,ASSEM2"
3195,3195,3222,041921,04194b,"ld a,($044d3d)","ld a,($044d3d)","ld a,($000000)",exec.asm,"ASSEM1:			LD      A,(COUNT)"
3196,3196,3223,041925,04194f,cp $14,cp $14,cp $00,exec.asm,CP      20
3197,3197,3224,041927,041951,"ld a,$07","ld a,$07","ld a,$00",exec.asm,"LD      A,7"
3198,3198,3225,041929,041953,"call nc,$0417c3","call nc,$0417ed","call nc,$000000",exec.asm,"CALL    NC,TABIT        	; Next line"
3199,3199,3226,04192d,041957,"ld a,(ix)","ld a,(ix)","ld a,(ix)",exec.asm,"LD      A,(IX)"
3200,3200,3227,041930,04195a,call $041955,call $04197f,call $000000,exec.asm,CALL    HEXSP
3201,3201,3228,041934,04195e,inc ix,inc ix,inc ix,exec.asm,INC     IX
3202,3202,3229,041936,041960,dec e,dec e,dec e,exec.asm,DEC     E
3203,3203,3230,041937,041961,"jr nz,$-$16","jr nz,$-$16","jr nz,$-$00",exec.asm,"JR      NZ,ASSEM1"
3204,3204,3231,041939,041963,"ld a,$16","ld a,$16","ld a,$00",exec.asm,"ASSEM2:			LD      A,22			; Tab to the disassembly field"
3205,3205,3232,04193b,041965,call $0417c3,call $0417ed,call $000000,exec.asm,CALL    TABIT
3206,3206,3233,04193f,041969,push iy,push iy,push iy,exec.asm,PUSH    IY
3207,3207,3234,041941,04196b,pop hl,pop hl,pop hl,exec.asm,POP     HL
3208,3208,3235,041942,04196c,"sbc hl,bc","sbc hl,bc","sbc hl,bc",exec.asm,"SBC     HL,BC"
3209,3209,3236,041944,04196e,"ld a,(bc)","ld a,(bc)","ld a,(bc)",exec.asm,"ASSEM4:			LD      A,(BC)"
3210,3210,3237,041945,04196f,call $04396c,call $04399c,call $000000,exec.asm,CALL    OUT_
3211,3211,3238,041949,041973,inc bc,inc bc,inc bc,exec.asm,INC     BC
3212,3212,3239,04194a,041974,dec l,dec l,dec l,exec.asm,DEC     L
3213,3213,3240,04194b,041975,"jr nz,$-$07","jr nz,$-$07","jr nz,$-$00",exec.asm,"JR      NZ,ASSEM4"
3214,3214,3241,04194d,041977,call $043947,call $043977,call $000000,exec.asm,CALL    CRLF
3215,3215,3242,041951,04197b,jp $04189b,jp $0418c5,jp $000000,exec.asm,JP      ASSEM
3216,3216,3243,041955,04197f,call $04195d,call $041987,call $000000,exec.asm,HEXSP:			CALL    HEX_EX
3217,3217,3244,041959,041983,"ld a,$20","ld a,$20","ld a,$00",exec.asm,"LD      A,' '"
3218,3218,3245,04195b,041985,jr $+$14,jr $+$14,jr $+$00,exec.asm,JR      OUTCH1
3219,3219,3246,04195d,041987,push af,push af,push af,exec.asm,HEX_EX:			PUSH    AF
3220,3220,3247,04195e,041988,rrca,rrca,rrca,exec.asm,RRCA
3221,3221,3248,04195f,041989,rrca,rrca,rrca,exec.asm,RRCA
3222,3222,3249,041960,04198a,rrca,rrca,rrca,exec.asm,RRCA
3223,3223,3250,041961,04198b,rrca,rrca,rrca,exec.asm,RRCA
3224,3224,3251,041962,04198c,call $041967,call $041991,call $000000,exec.asm,CALL    HEXOUT
3225,3225,3252,041966,041990,pop af,pop af,pop af,exec.asm,POP     AF
3226,3226,3253,041967,041991,and $0f,and $0f,and $00,exec.asm,HEXOUT:			AND     0FH
3227,3227,3254,041969,041993,"add a,$90","add a,$90","add a,$00",exec.asm,"ADD     A,90H"
3228,3228,3255,04196b,041995,daa,daa,daa,exec.asm,DAA
3229,3229,3256,04196c,041996,"adc a,$40","adc a,$40","adc a,$00",exec.asm,"ADC     A,40H"
3230,3230,3257,04196e,041998,daa,daa,daa,exec.asm,DAA
3231,3231,3258,04196f,041999,jp $04396c,jp $04399c,jp $000000,exec.asm,OUTCH1:			JP      OUT_
3232,3232,3259,041973,04199d,cp $2e,cp $2e,cp $00,exec.asm,ASMB:			CP      '.'			; Check for a dot; this indicates a label
3233,3233,3260,041975,04199f,"jr nz,$+$21","jr nz,$+$21","jr nz,$+$00",exec.asm,"JR      NZ,ASMB1		; No, so just process the instruction"
3234,3234,3261,041977,0419a1,inc iy,inc iy,inc iy,exec.asm,INC     IY			; Skip past the dot to the label name
3235,3235,3262,041979,0419a3,push ix,push ix,push ix,exec.asm,PUSH    IX			; Store the code destination pointer
3236,3236,3263,04197b,0419a5,call $040c8e,call $040c8e,call $000000,exec.asm,CALL    VAR_			; Create a variable
3237,3237,3264,04197f,0419a9,push af,push af,push af,exec.asm,PUSH    AF
3238,3238,3265,041980,0419aa,call $040993,call $040993,call $000000,exec.asm,CALL    ZERO			; Zero it
3239,3239,3266,041984,0419ae,"ld a,($044c42)","ld a,($113042)","ld a,($000000)",exec.asm,"LD	A,(PC+2)"
3240,3240,3267,041988,0419b2,"ld l,a","ld l,a","ld l,a",exec.asm,"LD	L,A			; The MSB of the 24-bit address"
3241,3241,3268,041989,0419b3,exx,exx,exx,exec.asm,EXX
3242,3242,3269,04198a,0419b4,"ld hl,($044c40)","ld hl,($113040)","ld hl,($000000)",exec.asm,"LD      HL,(PC)			; The LSW of the 24-bit address (only 16-bits used)"
3243,3243,3270,04198e,0419b8,exx,exx,exx,exec.asm,EXX
3244,3244,3271,04198f,0419b9,pop af,pop af,pop af,exec.asm,POP     AF
3245,3245,3272,041990,0419ba,call $0415d6,call $041600,call $000000,exec.asm,CALL    STORE			; Store the program counter
3246,3246,3273,041994,0419be,pop ix,pop ix,pop ix,exec.asm,POP     IX			; Restore the code destination pointer
3247,3247,3274,041996,0419c0,"ld a,($044d40)","ld a,($044d40)","ld a,($000000)",exec.asm,"ASMB1:			LD	A,(LISTON)		; Get the OPT flags"
3248,3248,3275,04199a,0419c4,and $80,and $80,and $00,exec.asm,AND	80H
3249,3249,3276,04199c,0419c6,"ld d,a","ld d,a","ld d,a",exec.asm,"LD      D,A     		;  D: Clear the flags and set the initial ADL mode (copied from bit 7 of LISTON)"
3250,3250,3277,04199d,0419c7,call $041db5,call $041de5,call $000000,exec.asm,CALL    SKIP			; Skip any whitespace
3251,3251,3278,0419a1,0419cb,ret z,ret z,ret z,exec.asm,RET     Z			; And return if there is nothing further to process
3252,3252,3279,0419a2,0419cc,cp $d6,cp $d6,cp $00,exec.asm,CP      TCALL			; Check if it is the token CALL (it will have been tokenised by BASIC)
3253,3253,3280,0419a4,0419ce,"ld c,$c4","ld c,$c4","ld c,$00",exec.asm,"LD      C,0C4H			;  A: The base operand"
3254,3254,3281,0419a6,0419d0,inc iy,inc iy,inc iy,exec.asm,INC     IY			; Skip past the token
3255,3255,3282,0419a8,0419d2,"jp z,$041aea","jp z,$041b1a","jp z,$000000",exec.asm,"JP      Z,GROUP13_1		; And jump to GROUP13, which handles CALL"
3256,3256,3283,0419ac,0419d6,dec iy,dec iy,dec iy,exec.asm,"DEC     IY			; Skip back, as we're not doing the above at this point"
3257,3257,3284,0419ae,0419d8,"ld hl,$041dcc","ld hl,$041dfc","ld hl,$000000",exec.asm,"LD      HL,OPCODS		; HL: Pointer to the eZ80 opcodes table"
3258,3258,3285,0419b2,0419dc,call $041d64,call $041d94,call $000000,exec.asm,CALL    FIND			; Find the opcode
3259,3259,3286,0419b6,0419e0,ret c,ret c,ret c,exec.asm,"RET     C			; If not found, then return; carry indicates an error condition"
3260,3260,3287,0419b7,0419e1,"ld c,b","ld c,b","ld c,b",exec.asm,"LD      C,B     		;  C: A copy of the opcode"
3261,3261,3288,0419b8,0419e2,sub $44,sub $44,sub $00,exec.asm,SUB     68			; The number of opcodes in GROUP0 and GROUP1
3262,3262,3289,0419ba,0419e4,"jr nc,$+$0a","jr nc,$+$0a","jr nc,$+$00",exec.asm,"JR      NC,GROUP02		; If not in that range, then check GROUP2"
3263,3263,3290,0419bc,0419e6,cp $cb,cp $cb,cp $00,exec.asm,CP      15-68			; Anything between 15 and 68 (neat compare trick here)
3264,3264,3291,0419be,0419e8,"call nc,$041cbd","call nc,$041ced","call nc,$000000",exec.asm,"CALL    NC,ED			; Needs to be prefixed with ED"
3265,3265,3292,0419c2,0419ec,jr $+$78,jr $+$78,jr $+$00,exec.asm,JR      BYTE0			; Then write the opcode byte
3266,3266,3293,0419c4,0419ee,sub $0a,sub $0a,sub $00,exec.asm,GROUP02:		SUB     10			; The number of opcodes in GROUP2 and GROUP3
3267,3267,3294,0419c6,0419f0,"jr nc,$+$14","jr nc,$+$14","jr nc,$+$00",exec.asm,"JR      NC,GROUP04		; If not in that range, then check GROUP4"
3268,3268,3295,0419c8,0419f2,cp $f9,cp $f9,cp $00,exec.asm,CP      3-10			;
3269,3269,3296,0419ca,0419f4,"call c,$041d52","call c,$041d82","call c,$000000",exec.asm,"CALL    C,BIT_"
3270,3270,3297,0419ce,0419f8,ret c,ret c,ret c,exec.asm,RET     C
3271,3271,3298,0419cf,0419f9,call $041d23,call $041d53,call $000000,exec.asm,CALL    REGLO
3272,3272,3299,0419d3,0419fd,ret c,ret c,ret c,exec.asm,RET     C
3273,3273,3300,0419d4,0419fe,call $041cc1,call $041cf1,call $000000,exec.asm,CALL    CB
3274,3274,3301,0419d8,041a02,jr $+$62,jr $+$62,jr $+$00,exec.asm,JR      BYTE0
3275,3275,3302,0419da,041a04,sub $03,sub $03,sub $00,exec.asm,GROUP04:		SUB     3			; The number of opcodes in GROUP4
3276,3276,3303,0419dc,041a06,"jr nc,$+$09","jr nc,$+$09","jr nc,$+$00",exec.asm,"JR      NC,GROUP05		; If not in that range, then check GROUP5"
3277,3277,3304,0419de,041a08,call $041d45,call $041d75,call $000000,exec.asm,GROUP04_1:		CALL    PAIR_EX
3278,3278,3305,0419e2,041a0c,ret c,ret c,ret c,exec.asm,RET     C
3279,3279,3306,0419e3,041a0d,jr $+$57,jr $+$57,jr $+$00,exec.asm,JR      BYTE0
3280,3280,3307,0419e5,041a0f,sub $0a,sub $0a,sub $00,exec.asm,GROUP05:		SUB     8+2			; The number of opcodes in GROUP5 and GROUP6
3281,3281,3308,0419e7,041a11,"jr nc,$+$3b","jr nc,$+$3b","jr nc,$+$00",exec.asm,"JR      NC,GROUP07"
3282,3282,3309,0419e9,041a13,cp $fd,cp $fd,cp $00,exec.asm,CP      5-8
3283,3283,3310,0419eb,041a15,"ld b,$07","ld b,$07","ld b,$00",exec.asm,"LD      B,7"
3284,3284,3311,0419ed,041a17,"call nc,$041cd1","call nc,$041d01","call nc,$000000",exec.asm,"CALL    NC,OPND			; Get the first operand"
3285,3285,3312,0419f1,041a1b,"ld a,b","ld a,b","ld a,b",exec.asm,"LD      A,B"
3286,3286,3313,0419f2,041a1c,cp $07,cp $07,cp $00,exec.asm,CP      7			; Is the operand 'A'?
3287,3287,3314,0419f4,041a1e,"jr nz,$+$17","jr nz,$+$17","jr nz,$+$00",exec.asm,"JR      NZ,GROUP05_HL		; No, so check for HL, IX or IY"
3288,3288,3315,0419f6,041a20,call $041d23,call $041d53,call $000000,exec.asm,"GROUP05_1:		CALL    REGLO			; Handle ADD A,?"
3289,3289,3316,0419fa,041a24,"ld a,c","ld a,c","ld a,c",exec.asm,"LD      A,C"
3290,3290,3317,0419fb,041a25,"jr nc,$+$30","jr nc,$+$30","jr nc,$+$00",exec.asm,"JR      NC,BIND1		; If it is a register, then write that out"
3291,3291,3318,0419fd,041a27,xor $46,xor $46,xor $00,exec.asm,"XOR     46H			; Handle ADD A,n"
3292,3292,3319,0419ff,041a29,call $041cc3,call $041cf3,call $000000,exec.asm,CALL    BIND
3293,3293,3320,041a03,041a2d,call $041d03,call $041d33,call $000000,exec.asm,DB_:			CALL    NUMBER
3294,3294,3321,041a07,041a31,jp $041abc,jp $041aec,jp $000000,exec.asm,JP      VAL8
3295,3295,3322,041a0b,041a35,and $3f,and $3f,and $00,exec.asm,GROUP05_HL:		AND     3FH
3296,3296,3323,041a0d,041a37,cp $0c,cp $0c,cp $00,exec.asm,CP      12
3297,3297,3324,041a0f,041a39,scf,scf,scf,exec.asm,SCF
3298,3298,3325,041a10,041a3a,ret nz,ret nz,ret nz,exec.asm,RET     NZ
3299,3299,3326,041a11,041a3b,"ld a,c","ld a,c","ld a,c",exec.asm,"LD      A,C"
3300,3300,3327,041a12,041a3c,cp $80,cp $80,cp $00,exec.asm,CP      80H
3301,3301,3328,041a14,041a3e,"ld c,$09","ld c,$09","ld c,$00",exec.asm,"LD      C,9"
3302,3302,3329,041a16,041a40,"jr z,$-$38","jr z,$-$38","jr z,$-$00",exec.asm,"JR      Z,GROUP04_1"
3303,3303,3330,041a18,041a42,xor $1c,xor $1c,xor $00,exec.asm,XOR     1CH
3304,3304,3331,041a1a,041a44,rrca,rrca,rrca,exec.asm,RRCA
3305,3305,3332,041a1b,041a45,"ld c,a","ld c,a","ld c,a",exec.asm,"LD      C,A"
3306,3306,3333,041a1c,041a46,call $041cbd,call $041ced,call $000000,exec.asm,CALL    ED
3307,3307,3334,041a20,041a4a,jr $-$42,jr $-$42,jr $-$00,exec.asm,JR      GROUP04_1
3308,3308,3335,041a22,041a4c,sub $02,sub $02,sub $00,exec.asm,GROUP07:		SUB     2			; The number of opcodes in GROUP7
3309,3309,3336,041a24,041a4e,"jr nc,$+$1b","jr nc,$+$1b","jr nc,$+$00",exec.asm,"JR      NC,GROUP08"
3310,3310,3337,041a26,041a50,call $041d2a,call $041d5a,call $000000,exec.asm,CALL    REGHI
3311,3311,3338,041a2a,041a54,"ld a,c","ld a,c","ld a,c",exec.asm,"LD      A,C"
3312,3312,3339,041a2b,041a55,"jp nc,$041cc3","jp nc,$041cf3","jp nc,$000000",exec.asm,"BIND1:			JP      NC,BIND"
3313,3313,3340,041a2f,041a59,xor $64,xor $64,xor $00,exec.asm,XOR     64H
3314,3314,3341,041a31,041a5b,rlca,rlca,rlca,exec.asm,RLCA
3315,3315,3342,041a32,041a5c,rlca,rlca,rlca,exec.asm,RLCA
3316,3316,3343,041a33,041a5d,rlca,rlca,rlca,exec.asm,RLCA
3317,3317,3344,041a34,041a5e,"ld c,a","ld c,a","ld c,a",exec.asm,"LD      C,A"
3318,3318,3345,041a35,041a5f,call $041d4a,call $041d7a,call $000000,exec.asm,CALL    PAIR1_EX
3319,3319,3346,041a39,041a63,ret c,ret c,ret c,exec.asm,RET     C
3320,3320,3347,041a3a,041a64,"ld a,c","ld a,c","ld a,c",exec.asm,"BYTE0:			LD      A,C"
3321,3321,3348,041a3b,041a65,jp $041cf2,jp $041d22,jp $000000,exec.asm,JP      BYTE_
3322,3322,3349,041a3f,041a69,sub $02,sub $02,sub $00,exec.asm,GROUP08:		SUB	2			; The number of opcodes in GROUP8
3323,3323,3350,041a41,041a6b,"jr nc,$+$28","jr nc,$+$2e","jr nc,$+$00",exec.asm,"JR	NC,GROUP09"
3324,3324,3351,041a43,041a6d,cp $ff,cp $ff,cp $00,exec.asm,CP	1-2
3325,3325,3352,041a45,041a6f,"call z,$041d03","call z,$041d33","call z,$000000",exec.asm,"CALL    Z,NUMBER		; Fetch number first if OUT"
3326,3326,3353,041a49,041a73,"ex af,af'","ex af,af'","ex af,af'",exec.asm,"EX      AF,AF'			; Save flags"
3327,3327,3354,041a4a,041a74,call $041d17,call $041d47,call $000000,exec.asm,CALL    REG			; Get the register value regardless
3328,3328,3355,041a4e,041a78,ret c,ret c,ret c,exec.asm,RET     C			; Return if not a register
3329,3329,3356,041a4f,041a79,"ex af,af'","ex af,af'","ex af,af'",exec.asm,"EX      AF,AF'			; Restore the flags"
3330,3330,3357,041a50,041a7a,"call c,$041d03","call c,$041d33","call c,$000000",exec.asm,"CALL    C,NUMBER		; Fetch number last if IN"
3331,3331,3358,041a54,041a7e,"ld a,b","ld a,b","ld a,b",exec.asm,"LD	A,B			; Get the register number"
3332,3332,3359,041a55,041a7f,cp $06,cp $06,cp $00,exec.asm,CP	6			; Fail on (HL)
3333,3333,3360,041a57,041a81,scf,scf,scf,exec.asm,SCF
3334,3334,3361,041a58,041a82,ret z,ret z,ret z,exec.asm,RET	Z
3335,3335,3362,041a59,041a83,cp $08,cp $08,cp $00,exec.asm,CP	8			; Check it is just single pairs only
3336,3336,3363,041a5b,041a85,ccf,ccf,ccf,exec.asm,CCF
3337,3337,3364,041a5c,041a86,ret c,ret c,ret c,exec.asm,RET	C			; And return if it is an invalid register
3338,3338,3365,041a5d,041a87,rlca,rlca,rlca,exec.asm,RLCA				; Bind with the operand
3339,3339,3366,041a5e,041a88,rlca,rlca,rlca,exec.asm,RLCA
3340,3340,3367,041a5f,041a89,rlca,rlca,rlca,exec.asm,RLCA
3341,3341,3368,041a60,041a8a,"add a,c","add a,c","add a,c",exec.asm,"ADD	A,C"
3342,3342,3372,041a61,041a91,call $041cf2,call $041d22,call $000000,exec.asm,CALL	BYTE_			; Write out the operand
3343,3343,3373,041a65,041a95,jp $041abc,jp $041aec,jp $000000,exec.asm,JP	VAL8			; Write out the value
3344,3344,3374,041a69,041a99,sub $02,sub $02,sub $00,exec.asm,GROUP09:		SUB     2			; The number of opcodes in GROUP09 amd GROUP10
3345,3345,3375,041a6b,041a9b,"jr nc,$+$27","jr nc,$+$27","jr nc,$+$00",exec.asm,"JR      NC,GROUP11"
3346,3346,3376,041a6d,041a9d,cp $ff,cp $ff,cp $00,exec.asm,CP      1-2			; Check if Group 9 or Group 1
3347,3347,3377,041a6f,041a9f,"call z,$041cb1","call z,$041ce1","call z,$000000",exec.asm,"CALL    Z,CORN			; Call CORN if Group 10 (OUT)"
3348,3348,3378,041a73,041aa3,"ex af,af'","ex af,af'","ex af,af'",exec.asm,"EX      AF,AF'			; Save flags"
3349,3349,3379,041a74,041aa4,call $041d2a,call $041d5a,call $000000,exec.asm,CALL    REGHI			; Get the register value regardless
3350,3350,3380,041a78,041aa8,ret c,ret c,ret c,exec.asm,RET     C			; Return if not a register
3351,3351,3381,041a79,041aa9,"ex af,af'","ex af,af'","ex af,af'",exec.asm,"EX      AF,AF'			; Restore the flags"
3352,3352,3382,041a7a,041aaa,"call c,$041cb1","call c,$041ce1","call c,$000000",exec.asm,"CALL    C,CORN			; Call CORN if Group 9 (IN)"
3353,3353,3383,041a7e,041aae,inc h,inc h,inc h,exec.asm,"INC     H			; If it is IN r,(C) or OUT (C),r then"
3354,3354,3384,041a7f,041aaf,"jr z,$-$45","jr z,$-$4b","jr z,$-$00",exec.asm,"JR      Z,BYTE0			; Just write the operand out"
3355,3355,3385,041a81,041ab1,"ld a,b","ld a,b","ld a,b",exec.asm,"LD      A,B			; Check the register"
3356,3356,3386,041a82,041ab2,cp $07,cp $07,cp $00,exec.asm,CP      7
3357,3357,3387,041a84,041ab4,scf,scf,scf,exec.asm,SCF
3358,3358,3388,041a85,041ab5,ret nz,ret nz,ret nz,exec.asm,"RET     NZ			; If it is not A, then return"
3359,3359,3389,041a86,041ab6,"ld a,c","ld a,c","ld a,c",exec.asm,"LD      A,C			; Bind the register with the operand"
3360,3360,3390,041a87,041ab7,xor $03,xor $03,xor $00,exec.asm,XOR     3
3361,3361,3391,041a89,041ab9,rlca,rlca,rlca,exec.asm,RLCA
3362,3362,3392,041a8a,041aba,rlca,rlca,rlca,exec.asm,RLCA
3363,3363,3393,041a8b,041abb,rlca,rlca,rlca,exec.asm,RLCA
3364,3364,3394,041a8c,041abc,call $041cf2,call $041d22,call $000000,exec.asm,CALL    BYTE_			; Write out the operand
3365,3365,3395,041a90,041ac0,jr $+$2c,jr $+$2c,jr $+$00,exec.asm,JR      VAL8			; And the value
3366,3366,3396,041a92,041ac2,sub $02,sub $02,sub $00,exec.asm,GROUP11:		SUB     2			; The number of opcodes in GROUP11
3367,3367,3397,041a94,041ac4,"jr nc,$+$2d","jr nc,$+$2d","jr nc,$+$00",exec.asm,"JR      NC,GROUP12"
3368,3368,3398,041a96,041ac6,cp $ff,cp $ff,cp $00,exec.asm,CP      1-2
3369,3369,3399,041a98,041ac8,"call nz,$041d31","call nz,$041d61","call nz,$000000",exec.asm,"CALL    NZ,COND_"
3370,3370,3400,041a9c,041acc,"ld a,c","ld a,c","ld a,c",exec.asm,"LD      A,C"
3371,3371,3401,041a9d,041acd,"jr nc,$+$04","jr nc,$+$04","jr nc,$+$00",exec.asm,"JR      NC,@F"
3372,3372,3402,041a9f,041acf,"ld a,$18","ld a,$18","ld a,$00",exec.asm,"LD      A,18H"
3373,3373,3403,041aa1,041ad1,call $041cf2,call $041d22,call $000000,exec.asm,@@:			CALL    BYTE_
3374,3374,3404,041aa5,041ad5,call $041d03,call $041d33,call $000000,exec.asm,CALL    NUMBER
3375,3375,3405,041aa9,041ad9,"ld de,($044c40)","ld de,($113040)","ld de,($000000)",exec.asm,"LD      DE,(PC)"
3376,3376,3406,041aae,041ade,inc de,inc de,inc de,exec.asm,INC     DE
3377,3377,3407,041aaf,041adf,scf,scf,scf,exec.asm,SCF
3378,3378,3408,041ab0,041ae0,"sbc hl,de","sbc hl,de","sbc hl,de",exec.asm,"SBC     HL,DE"
3379,3379,3409,041ab2,041ae2,"ld a,l","ld a,l","ld a,l",exec.asm,"LD      A,L"
3380,3380,3410,041ab3,041ae3,rla,rla,rla,exec.asm,RLA
3381,3381,3411,041ab4,041ae4,"sbc a,a","sbc a,a","sbc a,a",exec.asm,"SBC     A,A"
3382,3382,3412,041ab5,041ae5,cp h,cp h,cp h,exec.asm,CP      H
3383,3383,3413,041ab6,041ae6,"ld a,$01","ld a,$01","ld a,$00",exec.asm,"TOOFAR:			LD      A,1"
3384,3384,3414,041ab8,041ae8,"jp nz,$043760","jp nz,$043790","jp nz,$000000",exec.asm,"JP      NZ,ERROR_		; Throw an ""Out of range"" error"
3385,3385,3415,041abc,041aec,"ld a,l","ld a,l","ld a,l",exec.asm,"VAL8:			LD      A,L"
3386,3386,3416,041abd,041aed,jp $041cf2,jp $041d22,jp $000000,exec.asm,JP      BYTE_
3387,3387,3417,041ac1,041af1,sub $01,sub $01,sub $00,exec.asm,GROUP12:		SUB	1			; The number of opcodes in GROUP12
3388,3388,3418,041ac3,041af3,"jr nc,$+$23","jr nc,$+$23","jr nc,$+$00",exec.asm,"JR	NC,GROUP13"
3389,3389,3419,041ac5,041af5,call $041c17,call $041c47,call $000000,exec.asm,CALL	EZ80SF_PART		; Evaluate the suffix (just LIL and SIS)
3390,3390,3420,041ac9,041af9,ret c,ret c,ret c,exec.asm,RET	C			; Exit if an invalid suffix is provided
3391,3391,3421,041aca,041afa,call $041d31,call $041d61,call $000000,exec.asm,CALL    COND_			; Evaluate the conditions
3392,3392,3422,041ace,041afe,"ld a,c","ld a,c","ld a,c",exec.asm,"LD      A,C"
3393,3393,3423,041acf,041aff,"jr nc,$+$0f","jr nc,$+$0f","jr nc,$+$00",exec.asm,"JR      NC,GROUP12_1"
3394,3394,3424,041ad1,041b01,"ld a,b","ld a,b","ld a,b",exec.asm,"LD      A,B"
3395,3395,3425,041ad2,041b02,and $3f,and $3f,and $00,exec.asm,AND     3FH
3396,3396,3426,041ad4,041b04,cp $06,cp $06,cp $00,exec.asm,CP      6
3397,3397,3427,041ad6,041b06,"ld a,$e9","ld a,$e9","ld a,$00",exec.asm,"LD      A,0E9H"
3398,3398,3428,041ad8,041b08,"jp z,$041cf2","jp z,$041d22","jp z,$000000",exec.asm,"JP      Z,BYTE_"
3399,3399,3429,041adc,041b0c,"ld a,$c3","ld a,$c3","ld a,$00",exec.asm,"LD      A,0C3H"
3400,3400,3430,041ade,041b0e,call $041cf2,call $041d22,call $000000,exec.asm,GROUP12_1:		CALL    BYTE_			; Output the opcode (with conditions)
3401,3401,3431,041ae2,041b12,jp $041c6c,jp $041c9c,jp $000000,exec.asm,JP	ADDR_			; Output the address
3402,3402,3432,041ae6,041b16,sub $01,sub $01,sub $00,exec.asm,GROUP13:		SUB	1			; The number of opcodes in GROUP13
3403,3403,3433,041ae8,041b18,"jr nc,$+$0e","jr nc,$+$0e","jr nc,$+$00",exec.asm,"JR	NC,GROUP14"
3404,3404,3434,041aea,041b1a,call $041c2f,call $041c5f,call $000000,exec.asm,GROUP13_1:		CALL	EZ80SF_FULL		; Evaluate the suffix
3405,3405,3435,041aee,041b1e,call $041b11,call $041b41,call $000000,exec.asm,CALL    GROUP15_1		; Output the opcode (with conditions)
3406,3406,3436,041af2,041b22,jp $041c6c,jp $041c9c,jp $000000,exec.asm,JP	ADDR_			; Output the address
3407,3407,3437,041af6,041b26,sub $01,sub $01,sub $00,exec.asm,GROUP14:		SUB	1			; The number of opcodes in GROUP14
3408,3408,3438,041af8,041b28,"jr nc,$+$15","jr nc,$+$15","jr nc,$+$00",exec.asm,"JR	NC,GROUP15"
3409,3409,3439,041afa,041b2a,call $041c2f,call $041c5f,call $000000,exec.asm,CALL	EZ80SF_FULL		; Evaluate the suffix
3410,3410,3440,041afe,041b2e,ret c,ret c,ret c,exec.asm,RET	C			; Exit if an invalid suffix provided
3411,3411,3441,041aff,041b2f,call $041d03,call $041d33,call $000000,exec.asm,CALL    NUMBER
3412,3412,3442,041b03,041b33,and c,and c,and c,exec.asm,AND     C
3413,3413,3443,041b04,041b34,or h,or h,or h,exec.asm,OR      H
3414,3414,3444,041b05,041b35,"jr nz,$-$4f","jr nz,$-$4f","jr nz,$-$00",exec.asm,"JR      NZ,TOOFAR"
3415,3415,3445,041b07,041b37,"ld a,l","ld a,l","ld a,l",exec.asm,"LD      A,L"
3416,3416,3446,041b08,041b38,or c,or c,or c,exec.asm,OR      C
3417,3417,3447,041b09,041b39,jp $041cf2,jp $041d22,jp $000000,exec.asm,JP      BYTE_
3418,3418,3448,041b0d,041b3d,sub $01,sub $01,sub $00,exec.asm,GROUP15:		SUB	1			; The number of opcodes in GROUP15
3419,3419,3449,041b0f,041b3f,"jr nc,$+$11","jr nc,$+$11","jr nc,$+$00",exec.asm,"JR	NC,GROUP16"
3420,3420,3450,041b11,041b41,call $041d31,call $041d61,call $000000,exec.asm,GROUP15_1:		CALL    COND_
3421,3421,3451,041b15,041b45,"ld a,c","ld a,c","ld a,c",exec.asm,"LD      A,C"
3422,3422,3452,041b16,041b46,"jp nc,$041cf2","jp nc,$041d22","jp nc,$000000",exec.asm,"JP      NC,BYTE_"
3423,3423,3453,041b1a,041b4a,or $09,or $09,or $00,exec.asm,OR      9
3424,3424,3454,041b1c,041b4c,jp $041cf2,jp $041d22,jp $000000,exec.asm,JP      BYTE_
3425,3425,3455,041b20,041b50,sub $01,sub $01,sub $00,exec.asm,GROUP16:		SUB	1			; The number of opcodes in GROUP16
3426,3426,3456,041b22,041b52,"jr nc,$+$76","jr nc,$+$76","jr nc,$+$00",exec.asm,"JR	NC,GROUP17"
3427,3427,3457,041b24,041b54,call $041c2f,call $041c5f,call $000000,exec.asm,CALL	EZ80SF_FULL		; Evaluate the suffix
3428,3428,3458,041b28,041b58,call $041d60,call $041d90,call $000000,exec.asm,CALL    LDOP			; Check for accumulator loads
3429,3429,3459,041b2c,041b5c,"jp nc,$041c8c","jp nc,$041cbc","jp nc,$000000",exec.asm,"JP      NC,LDA			; Yes, so jump here"
3430,3430,3460,041b30,041b60,call $041d2a,call $041d5a,call $000000,exec.asm,CALL    REGHI
3431,3431,3461,041b34,041b64,"ex af,af'","ex af,af'","ex af,af'",exec.asm,"EX      AF,AF'"
3432,3432,3462,041b35,041b65,call $041db5,call $041de5,call $000000,exec.asm,CALL    SKIP
3433,3433,3463,041b39,041b69,cp $28,cp $28,cp $00,exec.asm,CP      '('			; Check for bracket
3434,3434,3464,041b3b,041b6b,"jr z,$+$26","jr z,$+$26","jr z,$+$00",exec.asm,"JR      Z,LDIN			; Yes, so we're doing an indirect load from memory"
3435,3435,3465,041b3d,041b6d,"ex af,af'","ex af,af'","ex af,af'",exec.asm,"EX      AF,AF'"
3436,3436,3466,041b3e,041b6e,"jp nc,$0419f6","jp nc,$041a20","jp nc,$000000",exec.asm,"JP      NC,GROUP05_1		; Load single register direct; go here"
3437,3437,3467,041b42,041b72,"ld c,$01","ld c,$01","ld c,$00",exec.asm,"LD      C,1"
3438,3438,3468,041b44,041b74,call $041d4a,call $041d7a,call $000000,exec.asm,CALL    PAIR1_EX
3439,3439,3469,041b48,041b78,ret c,ret c,ret c,exec.asm,RET     C
3440,3440,3470,041b49,041b79,"ld a,$0e","ld a,$0e","ld a,$00",exec.asm,"LD      A,14"
3441,3441,3471,041b4b,041b7b,cp b,cp b,cp b,exec.asm,CP      B
3442,3442,3472,041b4c,041b7c,"ld b,a","ld b,a","ld b,a",exec.asm,"LD      B,A"
3443,3443,3473,041b4d,041b7d,"call z,$041d45","call z,$041d75","call z,$000000",exec.asm,"CALL    Z,PAIR_EX"
3444,3444,3474,041b51,041b81,"ld a,b","ld a,b","ld a,b",exec.asm,"LD      A,B"
3445,3445,3475,041b52,041b82,and $3f,and $3f,and $00,exec.asm,AND     3FH
3446,3446,3476,041b54,041b84,cp $0c,cp $0c,cp $00,exec.asm,CP      12
3447,3447,3477,041b56,041b86,"ld a,c","ld a,c","ld a,c",exec.asm,"LD      A,C"
3448,3448,3478,041b57,041b87,"jp nz,$041ade","jp nz,$041b0e","jp nz,$000000",exec.asm,"JP      NZ,GROUP12_1		; Load register pair direct; go here"
3449,3449,3479,041b5b,041b8b,"ld a,$f9","ld a,$f9","ld a,$00",exec.asm,"LD      A,0F9H"
3450,3450,3480,041b5d,041b8d,jp $041cf2,jp $041d22,jp $000000,exec.asm,JP      BYTE_
3451,3451,3481,041b61,041b91,"ex af,af'","ex af,af'","ex af,af'",exec.asm,"LDIN:			EX      AF,AF'"
3452,3452,3482,041b62,041b92,push bc,push bc,push bc,exec.asm,PUSH    BC
3453,3453,3483,041b63,041b93,"call nc,$041d23","call nc,$041d53","call nc,$000000",exec.asm,"CALL    NC,REGLO"
3454,3454,3484,041b67,041b97,"ld a,c","ld a,c","ld a,c",exec.asm,"LD      A,C"
3455,3455,3485,041b68,041b98,pop bc,pop bc,pop bc,exec.asm,POP     BC
3456,3456,3486,041b69,041b99,"jp nc,$041cc3","jp nc,$041cf3","jp nc,$000000",exec.asm,"JP      NC,BIND"
3457,3457,3487,041b6d,041b9d,"ld c,$0a","ld c,$0a","ld c,$00",exec.asm,"LD      C,0AH"
3458,3458,3488,041b6f,041b9f,call $041d4a,call $041d7a,call $000000,exec.asm,CALL    PAIR1_EX
3459,3459,3489,041b73,041ba3,call $041c97,call $041cc7,call $000000,exec.asm,CALL    LD16
3460,3460,3490,041b77,041ba7,"jp nc,$041ade","jp nc,$041b0e","jp nc,$000000",exec.asm,"JP      NC,GROUP12_1"
3461,3461,3491,041b7b,041bab,call $041d03,call $041d33,call $000000,exec.asm,CALL    NUMBER
3462,3462,3492,041b7f,041baf,"ld c,$02","ld c,$02","ld c,$00",exec.asm,"LD      C,2"
3463,3463,3493,041b81,041bb1,call $041d45,call $041d75,call $000000,exec.asm,CALL    PAIR_EX
3464,3464,3494,041b85,041bb5,call $041c97,call $041cc7,call $000000,exec.asm,CALL    LD16
3465,3465,3495,041b89,041bb9,ret c,ret c,ret c,exec.asm,RET     C
3466,3466,3496,041b8a,041bba,call $041cf2,call $041d22,call $000000,exec.asm,CALL    BYTE_
3467,3467,3497,041b8e,041bbe,"bit 7,d","bit 7,d","bit 7,d",exec.asm,"BIT	7,D			; Check the ADL flag"
3468,3468,3498,041b90,041bc0,"jp nz,$041c81","jp nz,$041cb1","jp nz,$000000",exec.asm,"JP	NZ,VAL24 		; If it is set, then use 24-bit addresses"
3469,3469,3499,041b94,041bc4,jp $041c74,jp $041ca4,jp $000000,exec.asm,JP      VAL16			; Otherwise use 16-bit addresses
3470,3470,3500,041b98,041bc8,sub $01,sub $01,sub $00,exec.asm,GROUP17:		SUB	1			; The number of opcodes in GROUP17
3471,3471,3501,041b9a,041bca,"jr nc,$+$27","jr nc,$+$27","jr nc,$+$00",exec.asm,"JR	NC,OPTS"
3472,3472,3502,041b9c,041bcc,call $041cbd,call $041ced,call $000000,exec.asm,CALL	ED			; Needs to be prefixed with ED
3473,3473,3503,041ba0,041bd0,call $041d17,call $041d47,call $000000,exec.asm,CALL	REG			; Fetch the register
3474,3474,3504,041ba4,041bd4,"jr nc,$+$10","jr nc,$+$10","jr nc,$+$00",exec.asm,"JR	NC,GROUP17_1		; It's just a register"
3475,3475,3505,041ba6,041bd6,"ld a,$64","ld a,$64","ld a,$00",exec.asm,"LD	A,64H			; Opcode for TST n"
3476,3476,3506,041ba8,041bd8,call $041cf2,call $041d22,call $000000,exec.asm,CALL	BYTE_			; Write out the opcode
3477,3477,3507,041bac,041bdc,call $041d03,call $041d33,call $000000,exec.asm,CALL	NUMBER			; Get the number
3478,3478,3508,041bb0,041be0,jp $041abc,jp $041aec,jp $000000,exec.asm,JP	VAL8			; And write that out
3479,3479,3509,041bb4,041be4,"ld a,b","ld a,b","ld a,b",exec.asm,"GROUP17_1:		LD	A,B			; Check the register rangs"
3480,3480,3510,041bb5,041be5,cp $08,cp $08,cp $00,exec.asm,CP	8
3481,3481,3511,041bb7,041be7,ccf,ccf,ccf,exec.asm,CCF
3482,3482,3512,041bb8,041be8,ret c,ret c,ret c,exec.asm,RET	C			; Ret with carry flag set for error if out of range
3483,3483,3513,041bb9,041be9,rlca,rlca,rlca,exec.asm,RLCA				; Get the opcode value
3484,3484,3514,041bba,041bea,rlca,rlca,rlca,exec.asm,RLCA
3485,3485,3515,041bbb,041beb,rlca,rlca,rlca,exec.asm,RLCA
3486,3486,3516,041bbc,041bec,"add a,c","add a,c","add a,c",exec.asm,"ADD	A,C			; Add the opcode base in"
3487,3487,3517,041bbd,041bed,jp $041cf2,jp $041d22,jp $000000,exec.asm,JP	BYTE_
3488,3488,3518,041bc1,041bf1,sub $02,sub $02,sub $00,exec.asm,OPTS:			SUB	2
3489,3489,3519,041bc3,041bf3,"jr nc,$+$2d","jr nc,$+$2d","jr nc,$+$00",exec.asm,"JR	NC, DEFS"
3490,3490,3520,041bc5,041bf5,cp $ff,cp $ff,cp $00,exec.asm,CP	1-2			; Check for ADL opcode
3491,3491,3521,041bc7,041bf7,"jr z,$+$15","jr z,$+$15","jr z,$+$00",exec.asm,"JR	Z, ADL_"
3492,3492,3522,041bc9,041bf9,call $041d03,call $041d33,call $000000,exec.asm,OPT:			CALL    NUMBER			; Fetch the OPT value
3493,3493,3523,041bcd,041bfd,"ld hl,$044d40","ld hl,$044d40","ld hl,$000000",exec.asm,"LD      HL,LISTON		; Address of the LISTON/OPT flag"
3494,3494,3524,041bd1,041c01,and $07,and $07,and $00,exec.asm,AND	7			; Only interested in the first three bits
3495,3495,3525,041bd3,041c03,"ld c,a","ld c,a","ld c,a",exec.asm,"LD      C,A			; Store the new OPT value in C"
3496,3496,3526,041bd4,041c04,rld,rld,rld,exec.asm,RLD				; Shift the top nibble of LISTON (OPT) into A
3497,3497,3527,041bd6,041c06,and $08,and $08,and $00,exec.asm,"AND	8			; Clear the bottom three bits, preserving the ADL bit"
3498,3498,3528,041bd8,041c08,or c,or c,or c,exec.asm,OR	C			; OR in the new value
3499,3499,3529,041bd9,041c09,rrd,rrd,rrd,exec.asm,RRD				; And shift the nibble back in
3500,3500,3530,041bdb,041c0b,ret,ret,ret,exec.asm,RET
3501,3501,3531,041bdc,041c0c,call $041d03,call $041d33,call $000000,exec.asm,ADL_:			CALL	NUMBER			; Fetch the ADL value
3502,3502,3532,041be0,041c10,and $01,and $01,and $00,exec.asm,AND	1			; Only interested if it is 0 or 1
3503,3503,3533,041be2,041c12,rrca,rrca,rrca,exec.asm,RRCA				; Rotate to bit 7
3504,3504,3534,041be3,041c13,"ld c,a","ld c,a","ld c,a",exec.asm,"LD	C,A			; Store in C"
3505,3505,3535,041be4,041c14,"ld a,($044d40)","ld a,($044d40)","ld a,($000000)",exec.asm,"LD	A,(LISTON)		; Get the LISTON system variable"
3506,3506,3536,041be8,041c18,and $7f,and $7f,and $00,exec.asm,AND	7Fh			; Clear bit 7
3507,3507,3537,041bea,041c1a,or c,or c,or c,exec.asm,OR	C			; OR in the ADL value
3508,3508,3538,041beb,041c1b,"ld ($044d40),a","ld ($044d40),a","ld ($000000),a",exec.asm,"LD	(LISTON),A		; Store"
3509,3509,3539,041bef,041c1f,ret,ret,ret,exec.asm,RET
3510,3510,3540,041bf0,041c20,or a,or a,or a,exec.asm,DEFS:			OR	A			; Handle DEFB
3511,3511,3541,041bf1,041c21,"jp z,$041a03","jp z,$041a2d","jp z,$000000",exec.asm,"JP	Z, DB_"
3512,3512,3542,041bf5,041c25,dec a,dec a,dec a,exec.asm,DEC	A			; Handle DEFW
3513,3513,3543,041bf6,041c26,"jp z,$041c70","jp z,$041ca0","jp z,$000000",exec.asm,"JP	Z, ADDR16"
3514,3514,3544,041bfa,041c2a,dec a,dec a,dec a,exec.asm,DEC	A			; Handle DEFL
3515,3515,3545,041bfb,041c2b,"jp z,$041c7d","jp z,$041cad","jp z,$000000",exec.asm,"JP	Z, ADDR24"
3516,3516,3546,041bff,041c2f,push ix,push ix,push ix,exec.asm,PUSH    IX			; Handle DEFM
3517,3517,3547,041c01,041c31,call $040315,call $040315,call $000000,exec.asm,CALL    EXPRS
3518,3518,3548,041c05,041c35,pop ix,pop ix,pop ix,exec.asm,POP     IX
3519,3519,3549,041c07,041c37,"ld hl,$044a00","ld hl,$044a00","ld hl,$000000",exec.asm,"LD      HL,ACCS"
3520,3520,3550,041c0b,041c3b,xor a,xor a,xor a,exec.asm,@@:			XOR     A
3521,3521,3551,041c0c,041c3c,cp e,cp e,cp e,exec.asm,CP      E
3522,3522,3552,041c0d,041c3d,ret z,ret z,ret z,exec.asm,RET     Z
3523,3523,3553,041c0e,041c3e,"ld a,(hl)","ld a,(hl)","ld a,(hl)",exec.asm,"LD      A,(HL)"
3524,3524,3554,041c0f,041c3f,inc hl,inc hl,inc hl,exec.asm,INC     HL
3525,3525,3555,041c10,041c40,call $041cf2,call $041d22,call $000000,exec.asm,CALL    BYTE_
3526,3526,3556,041c14,041c44,dec e,dec e,dec e,exec.asm,DEC     E
3527,3527,3557,041c15,041c45,jr $-$0a,jr $-$0a,jr $-$00,exec.asm,JR      @B
3528,3528,3558,041c17,041c47,"ld a,(iy)","ld a,(iy)","ld a,(iy)",exec.asm,"EZ80SF_PART:		LD	A,(IY)			; Check for a dot"
3529,3529,3559,041c1a,041c4a,cp $2e,cp $2e,cp $00,exec.asm,CP	'.'
3530,3530,3560,041c1c,041c4c,"jr z,$+$04","jr z,$+$04","jr z,$+$00",exec.asm,"JR	Z, @F			; If present, then carry on processing the eZ80 suffix"
3531,3531,3561,041c1e,041c4e,or a,or a,or a,exec.asm,OR	A			; Reset the carry flag (no error)
3532,3532,3562,041c1f,041c4f,ret,ret,ret,exec.asm,RET				; And return
3533,3533,3563,041c20,041c50,inc iy,inc iy,inc iy,exec.asm,@@:			INC	IY			; Skip the dot
3534,3534,3564,041c22,041c52,push bc,push bc,push bc,exec.asm,PUSH	BC			; Push the operand
3535,3535,3565,041c23,041c53,"ld hl,$04204b","ld hl,$04207b","ld hl,$000000",exec.asm,"LD	HL,EZ80SFS_2		; Check the shorter fully qualified table (just LIL and SIS)"
3536,3536,3566,041c27,041c57,call $041d64,call $041d94,call $000000,exec.asm,CALL	FIND			; Look up the operand
3537,3537,3567,041c2b,041c5b,"jr nc,$+$26","jr nc,$+$26","jr nc,$+$00",exec.asm,"JR	NC,EZ80SF_OK"
3538,3538,3568,041c2d,041c5d,pop bc,pop bc,pop bc,exec.asm,"POP	BC			; Not found at this point, so will return with a C (error)"
3539,3539,3569,041c2e,041c5e,ret,ret,ret,exec.asm,RET
3540,3540,3570,041c2f,041c5f,"ld a,(iy)","ld a,(iy)","ld a,(iy)",exec.asm,"EZ80SF_FULL:		LD	A,(IY)			; Check for a dot"
3541,3541,3571,041c32,041c62,cp $2e,cp $2e,cp $00,exec.asm,CP	'.'
3542,3542,3572,041c34,041c64,"jr z,$+$04","jr z,$+$04","jr z,$+$00",exec.asm,"JR	Z,@F			; If present, then carry on processing the eZ80 suffix"
3543,3543,3573,041c36,041c66,or a,or a,or a,exec.asm,OR	A			; Reset the carry flag (no error)
3544,3544,3574,041c37,041c67,ret,ret,ret,exec.asm,RET				; And return
3545,3545,3575,041c38,041c68,inc iy,inc iy,inc iy,exec.asm,@@:			INC	IY 			; Skip the dot
3546,3546,3576,041c3a,041c6a,push bc,push bc,push bc,exec.asm,PUSH	BC			; Push the operand
3547,3547,3577,041c3b,041c6b,"ld hl,$042043","ld hl,$042073","ld hl,$000000",exec.asm,"LD	HL,EZ80SFS_1		; First check the fully qualified table"
3548,3548,3578,041c3f,041c6f,call $041d64,call $041d94,call $000000,exec.asm,CALL	FIND 			; Look up the operand
3549,3549,3579,041c43,041c73,"jr nc,$+$0e","jr nc,$+$0e","jr nc,$+$00",exec.asm,"JR	NC,EZ80SF_OK		; Yes, we've found it, so go write it out"
3550,3550,3580,041c45,041c75,call $041c60,call $041c90,call $000000,exec.asm,CALL	EZ80SF_TABLE		; Get the correct shortcut table in HL based upon the ADL mode
3551,3551,3581,041c49,041c79,call $041d64,call $041d94,call $000000,exec.asm,CALL	FIND
3552,3552,3582,041c4d,041c7d,"jr nc,$+$04","jr nc,$+$04","jr nc,$+$00",exec.asm,"JR	NC,EZ80SF_OK"
3553,3553,3583,041c4f,041c7f,pop bc,pop bc,pop bc,exec.asm,"POP	BC			; Not found at this point, so will return with a C (error)"
3554,3554,3584,041c50,041c80,ret,ret,ret,exec.asm,RET
3555,3555,3585,041c51,041c81,"ld a,b","ld a,b","ld a,b",exec.asm,"EZ80SF_OK:		LD	A,B			; The operand value"
3556,3556,3586,041c52,041c82,"call nc,$041cf2","call nc,$041d22","call nc,$000000",exec.asm,"CALL	NC,BYTE_ 		; Write it out if found"
3557,3557,3587,041c56,041c86,"res 7,d","res 7,d","res 7,d",exec.asm,"RES	7,D			; Clear the default ADL mode from the flags"
3558,3558,3588,041c58,041c88,and $02,and $02,and $00,exec.asm,AND	2			; Check the second half of the suffix (.xxL)
3559,3559,3589,041c5a,041c8a,rrca,rrca,rrca,exec.asm,RRCA				; Shift into bit 7
3560,3560,3590,041c5b,041c8b,rrca,rrca,rrca,exec.asm,RRCA
3561,3561,3591,041c5c,041c8c,or d,or d,or d,exec.asm,OR	D			; Or into bit 7 of D
3562,3562,3592,041c5d,041c8d,"ld d,a","ld d,a","ld d,a",exec.asm,"LD	D,A"
3563,3563,3593,041c5e,041c8e,pop bc,pop bc,pop bc,exec.asm,POP	BC 			; Restore the operand
3564,3564,3594,041c5f,041c8f,ret,ret,ret,exec.asm,RET
3565,3565,3595,041c60,041c90,"ld hl,$042054","ld hl,$042084","ld hl,$000000",exec.asm,"EZ80SF_TABLE:		LD	HL,EZ80SFS_ADL0		; Return with the ADL0 lookup table"
3566,3566,3596,041c64,041c94,"bit 7,d","bit 7,d","bit 7,d",exec.asm,"BIT 	7,D			; if bit 7 of D is 0"
3567,3567,3597,041c66,041c96,ret z,ret z,ret z,exec.asm,RET	Z
3568,3568,3598,041c67,041c97,"ld hl,$04205f","ld hl,$04208f","ld hl,$000000",exec.asm,"LD	HL,EZ80SFS_ADL1		; Otherwise return with the ADL1 lookup table"
3569,3569,3599,041c6b,041c9b,ret,ret,ret,exec.asm,RET
3570,3570,3600,041c6c,041c9c,"bit 7,d","bit 7,d","bit 7,d",exec.asm,"ADDR_:			BIT	7,D			; Check the ADL flag"
3571,3571,3601,041c6e,041c9e,"jr nz,$+$0f","jr nz,$+$0f","jr nz,$+$00",exec.asm,"JR	NZ,ADDR24 		; If it is set, then use 24-bit addresses"
3572,3572,3602,041c70,041ca0,call $041d03,call $041d33,call $000000,exec.asm,ADDR16:			CALL	NUMBER			; Fetch an address (16-bit) and fall through to VAL16
3573,3573,3603,041c74,041ca4,call $041abc,call $041aec,call $000000,exec.asm,VAL16:			CALL    VAL8			; Write out a 16-bit value (HL)
3574,3574,3604,041c78,041ca8,"ld a,h","ld a,h","ld a,h",exec.asm,"LD      A,H"
3575,3575,3605,041c79,041ca9,jp $041cf2,jp $041d22,jp $000000,exec.asm,JP      BYTE_
3576,3576,3606,041c7d,041cad,call $041d03,call $041d33,call $000000,exec.asm,ADDR24:			CALL    NUMBER			; Fetch an address (24-bit) and fall through to VAL24
3577,3577,3607,041c81,041cb1,call $041c74,call $041ca4,call $000000,exec.asm,VAL24:			CALL	VAL16			; Lower 16-bits are in HL
3578,3578,3608,041c85,041cb5,exx,exx,exx,exec.asm,EXX
3579,3579,3609,041c86,041cb6,"ld a,l","ld a,l","ld a,l",exec.asm,"LD	A,L			; Upper 16-bits are in HL', just need L' to make up 24-bit value"
3580,3580,3610,041c87,041cb7,exx,exx,exx,exec.asm,EXX
3581,3581,3611,041c88,041cb8,jp $041cf2,jp $041d22,jp $000000,exec.asm,JP	BYTE_
3582,3582,3612,041c8c,041cbc,cp $04,cp $04,cp $00,exec.asm,LDA:			CP      4
3583,3583,3613,041c8e,041cbe,"call c,$041cbd","call c,$041ced","call c,$000000",exec.asm,"CALL    C,ED"
3584,3584,3614,041c92,041cc2,"ld a,b","ld a,b","ld a,b",exec.asm,"LD      A,B"
3585,3585,3615,041c93,041cc3,jp $041cf2,jp $041d22,jp $000000,exec.asm,JP      BYTE_
3586,3586,3616,041c97,041cc7,"ld a,b","ld a,b","ld a,b",exec.asm,"LD16:			LD      A,B"
3587,3587,3617,041c98,041cc8,"jr c,$+$11","jr c,$+$11","jr c,$+$00",exec.asm,"JR      C,LD8"
3588,3588,3618,041c9a,041cca,"ld a,b","ld a,b","ld a,b",exec.asm,"LD      A,B"
3589,3589,3619,041c9b,041ccb,and $3f,and $3f,and $00,exec.asm,AND     3FH
3590,3590,3620,041c9d,041ccd,cp $0c,cp $0c,cp $00,exec.asm,CP      12
3591,3591,3621,041c9f,041ccf,"ld a,c","ld a,c","ld a,c",exec.asm,"LD      A,C"
3592,3592,3622,041ca0,041cd0,ret z,ret z,ret z,exec.asm,RET     Z
3593,3593,3623,041ca1,041cd1,call $041cbd,call $041ced,call $000000,exec.asm,CALL    ED
3594,3594,3624,041ca5,041cd5,"ld a,c","ld a,c","ld a,c",exec.asm,"LD      A,C"
3595,3595,3625,041ca6,041cd6,or $43,or $43,or $00,exec.asm,OR      43H
3596,3596,3626,041ca8,041cd8,ret,ret,ret,exec.asm,RET
3597,3597,3627,041ca9,041cd9,cp $07,cp $07,cp $00,exec.asm,LD8:			CP      7
3598,3598,3628,041cab,041cdb,scf,scf,scf,exec.asm,SCF
3599,3599,3629,041cac,041cdc,ret nz,ret nz,ret nz,exec.asm,RET     NZ
3600,3600,3630,041cad,041cdd,"ld a,c","ld a,c","ld a,c",exec.asm,"LD      A,C"
3601,3601,3631,041cae,041cde,or $30,or $30,or $00,exec.asm,OR      30H
3602,3602,3632,041cb0,041ce0,ret,ret,ret,exec.asm,RET
3603,3603,3633,041cb1,041ce1,push bc,push bc,push bc,exec.asm,CORN:			PUSH    BC
3604,3604,3634,041cb2,041ce2,call $041cd1,call $041d01,call $000000,exec.asm,CALL    OPND			; Get the operand
3605,3605,3635,041cb6,041ce6,"bit 5,b","bit 5,b","bit 5,b",exec.asm,"BIT     5,B"
3606,3606,3636,041cb8,041ce8,pop bc,pop bc,pop bc,exec.asm,POP     BC
3607,3607,3637,041cb9,041ce9,"jr z,$+$4a","jr z,$+$4a","jr z,$+$00",exec.asm,"JR      Z,NUMBER		; If bit 5 is clear, then it's IN A,(N) or OUT (N),A, so fetch the port number"
3608,3608,3638,041cbb,041ceb,"ld h,$ff","ld h,$ff","ld h,$00",exec.asm,"LD      H,-1			; At this point it's IN r,(C) or OUT (C),r, so flag by setting H to &FF"
3609,3609,3639,041cbd,041ced,"ld a,$ed","ld a,$ed","ld a,$00",exec.asm,"ED:			LD      A,0EDH			; Write an ED prefix out"
3610,3610,3640,041cbf,041cef,jr $+$33,jr $+$33,jr $+$00,exec.asm,JR      BYTE_
3611,3611,3641,041cc1,041cf1,"ld a,$cb","ld a,$cb","ld a,$00",exec.asm,"CB:			LD      A,0CBH"
3612,3612,3642,041cc3,041cf3,cp $76,cp $76,cp $00,exec.asm,BIND:			CP      76H
3613,3613,3643,041cc5,041cf5,scf,scf,scf,exec.asm,SCF
3614,3614,3644,041cc6,041cf6,ret z,ret z,ret z,exec.asm,"RET     Z               	; Reject LD (HL),(HL)"
3615,3615,3645,041cc7,041cf7,call $041cf2,call $041d22,call $000000,exec.asm,CALL    BYTE_
3616,3616,3646,041ccb,041cfb,"bit 6,d","bit 6,d","bit 6,d",exec.asm,"BIT	6,D			; Check the index bit in flags"
3617,3617,3647,041ccd,041cfd,ret z,ret z,ret z,exec.asm,RET     Z
3618,3618,3648,041cce,041cfe,"ld a,e","ld a,e","ld a,e",exec.asm,"LD      A,E			; If there is an index, output the offset"
3619,3619,3649,041ccf,041cff,jr $+$23,jr $+$23,jr $+$00,exec.asm,JR      BYTE_
3620,3620,3650,041cd1,041d01,push hl,push hl,push hl,exec.asm,OPND:			PUSH    HL			; Preserve HL
3621,3621,3651,041cd2,041d02,"ld hl,$041fd5","ld hl,$042005","ld hl,$000000",exec.asm,"LD      HL,OPRNDS		; The operands table"
3622,3622,3652,041cd6,041d06,call $041d64,call $041d94,call $000000,exec.asm,CALL    FIND			; Find the operand
3623,3623,3653,041cda,041d0a,pop hl,pop hl,pop hl,exec.asm,POP     HL
3624,3624,3654,041cdb,041d0b,ret c,ret c,ret c,exec.asm,RET     C			; Return if not found
3625,3625,3655,041cdc,041d0c,"bit 7,b","bit 7,b","bit 7,b",exec.asm,"BIT     7,B			; Check if it is an index register (IX, IY)"
3626,3626,3656,041cde,041d0e,ret z,ret z,ret z,exec.asm,RET     Z			; Return if it isn't
3627,3627,3657,041cdf,041d0f,"set 6,d","set 6,d","set 6,d",exec.asm,"SET	6,D			; Set flag to indicate we've got an index"
3628,3628,3658,041ce1,041d11,"bit 3,b","bit 3,b","bit 3,b",exec.asm,"BIT     3,B			; Check if an offset is required"
3629,3629,3659,041ce3,041d13,push hl,push hl,push hl,exec.asm,PUSH    HL
3630,3630,3660,041ce4,041d14,"call z,$041cf9","call z,$041d29","call z,$000000",exec.asm,"CALL    Z,OFFSET_EX		; If bit 3 of B is zero, then get the offset"
3631,3631,3661,041ce8,041d18,"ld e,l","ld e,l","ld e,l",exec.asm,"LD      E,L			; E: The offset"
3632,3632,3662,041ce9,041d19,pop hl,pop hl,pop hl,exec.asm,POP     HL
3633,3633,3663,041cea,041d1a,"ld a,$dd","ld a,$dd","ld a,$00",exec.asm,"LD	A,DDH			; IX prefix"
3634,3634,3664,041cec,041d1c,"bit 6,b","bit 6,b","bit 6,b",exec.asm,"BIT     6,B			; If bit 6 is reset then"
3635,3635,3665,041cee,041d1e,"jr z,$+$04","jr z,$+$04","jr z,$+$00",exec.asm,"JR      Z,BYTE_			; It's an IX instruction, otherwise set"
3636,3636,3666,041cf0,041d20,"ld a,$fd","ld a,$fd","ld a,$00",exec.asm,"LD	A,FDH			; IY prefix"
3637,3637,3667,041cf2,041d22,"ld (ix),a","ld (ix),a","ld (ix),a",exec.asm,"BYTE_:			LD      (IX),A			; Write a byte out"
3638,3638,3668,041cf5,041d25,inc ix,inc ix,inc ix,exec.asm,INC     IX
3639,3639,3669,041cf7,041d27,or a,or a,or a,exec.asm,OR      A
3640,3640,3670,041cf8,041d28,ret,ret,ret,exec.asm,RET
3641,3641,3671,041cf9,041d29,"ld a,(iy)","ld a,(iy)","ld a,(iy)",exec.asm,"OFFSET_EX:			LD      A,(IY)"
3642,3642,3672,041cfc,041d2c,cp $29,cp $29,cp $00,exec.asm,CP      ')'
3643,3643,3673,041cfe,041d2e,"ld hl,$000000","ld hl,$000000","ld hl,$000000",exec.asm,"LD      HL,0"
3644,3644,3674,041d02,041d32,ret z,ret z,ret z,exec.asm,RET     Z
3645,3645,3675,041d03,041d33,call $041db5,call $041de5,call $000000,exec.asm,NUMBER:			CALL    SKIP
3646,3646,3676,041d07,041d37,push bc,push bc,push bc,exec.asm,PUSH    BC
3647,3647,3677,041d08,041d38,push de,push de,push de,exec.asm,PUSH    DE
3648,3648,3678,041d09,041d39,push ix,push ix,push ix,exec.asm,PUSH    IX
3649,3649,3679,041d0b,041d3b,call $04030a,call $04030a,call $000000,exec.asm,CALL    EXPRI
3650,3650,3680,041d0f,041d3f,pop ix,pop ix,pop ix,exec.asm,POP     IX
3651,3651,3681,041d11,041d41,exx,exx,exx,exec.asm,EXX
3652,3652,3682,041d12,041d42,pop de,pop de,pop de,exec.asm,POP     DE
3653,3653,3683,041d13,041d43,pop bc,pop bc,pop bc,exec.asm,POP     BC
3654,3654,3684,041d14,041d44,"ld a,l","ld a,l","ld a,l",exec.asm,"LD      A,L"
3655,3655,3685,041d15,041d45,or a,or a,or a,exec.asm,OR      A
3656,3656,3686,041d16,041d46,ret,ret,ret,exec.asm,RET
3657,3657,3687,041d17,041d47,call $041cd1,call $041d01,call $000000,exec.asm,REG:			CALL    OPND
3658,3658,3688,041d1b,041d4b,ret c,ret c,ret c,exec.asm,RET     C
3659,3659,3689,041d1c,041d4c,"ld a,b","ld a,b","ld a,b",exec.asm,"LD      A,B"
3660,3660,3690,041d1d,041d4d,and $3f,and $3f,and $00,exec.asm,AND     3FH
3661,3661,3691,041d1f,041d4f,cp $08,cp $08,cp $00,exec.asm,CP      8
3662,3662,3692,041d21,041d51,ccf,ccf,ccf,exec.asm,CCF
3663,3663,3693,041d22,041d52,ret,ret,ret,exec.asm,RET
3664,3664,3694,041d23,041d53,call $041d17,call $041d47,call $000000,exec.asm,REGLO:			CALL    REG
3665,3665,3695,041d27,041d57,ret c,ret c,ret c,exec.asm,RET     C
3666,3666,3696,041d28,041d58,jr $+$35,jr $+$35,jr $+$00,exec.asm,JR      ORC
3667,3667,3697,041d2a,041d5a,call $041d17,call $041d47,call $000000,exec.asm,REGHI:			CALL    REG
3668,3668,3698,041d2e,041d5e,ret c,ret c,ret c,exec.asm,RET     C
3669,3669,3699,041d2f,041d5f,jr $+$2b,jr $+$2b,jr $+$00,exec.asm,JR      SHL3
3670,3670,3700,041d31,041d61,call $041cd1,call $041d01,call $000000,exec.asm,COND_:			CALL    OPND
3671,3671,3701,041d35,041d65,ret c,ret c,ret c,exec.asm,RET     C
3672,3672,3702,041d36,041d66,"ld a,b","ld a,b","ld a,b",exec.asm,"LD      A,B"
3673,3673,3703,041d37,041d67,and $1f,and $1f,and $00,exec.asm,AND     1FH
3674,3674,3704,041d39,041d69,sub $10,sub $10,sub $00,exec.asm,SUB     16
3675,3675,3705,041d3b,041d6b,"jr nc,$+$1f","jr nc,$+$1f","jr nc,$+$00",exec.asm,"JR      NC,SHL3"
3676,3676,3706,041d3d,041d6d,cp $f1,cp $f1,cp $00,exec.asm,CP      -15
3677,3677,3707,041d3f,041d6f,scf,scf,scf,exec.asm,SCF
3678,3678,3708,041d40,041d70,ret nz,ret nz,ret nz,exec.asm,RET     NZ
3679,3679,3709,041d41,041d71,"ld a,$03","ld a,$03","ld a,$00",exec.asm,"LD      A,3"
3680,3680,3710,041d43,041d73,jr $+$17,jr $+$17,jr $+$00,exec.asm,JR      SHL3
3681,3681,3711,041d45,041d75,call $041cd1,call $041d01,call $000000,exec.asm,PAIR_EX:			CALL    OPND
3682,3682,3712,041d49,041d79,ret c,ret c,ret c,exec.asm,RET     C
3683,3683,3713,041d4a,041d7a,"ld a,b","ld a,b","ld a,b",exec.asm,"PAIR1_EX:			LD      A,B"
3684,3684,3714,041d4b,041d7b,and $0f,and $0f,and $00,exec.asm,AND     0FH
3685,3685,3715,041d4d,041d7d,sub $08,sub $08,sub $00,exec.asm,SUB     8
3686,3686,3716,041d4f,041d7f,ret c,ret c,ret c,exec.asm,RET     C
3687,3687,3717,041d50,041d80,jr $+$0a,jr $+$0a,jr $+$00,exec.asm,JR      SHL3
3688,3688,3718,041d52,041d82,call $041d03,call $041d33,call $000000,exec.asm,BIT_:			CALL    NUMBER
3689,3689,3719,041d56,041d86,cp $08,cp $08,cp $00,exec.asm,CP      8
3690,3690,3720,041d58,041d88,ccf,ccf,ccf,exec.asm,CCF
3691,3691,3721,041d59,041d89,ret c,ret c,ret c,exec.asm,RET     C
3692,3692,3722,041d5a,041d8a,rlca,rlca,rlca,exec.asm,SHL3:			RLCA
3693,3693,3723,041d5b,041d8b,rlca,rlca,rlca,exec.asm,RLCA
3694,3694,3724,041d5c,041d8c,rlca,rlca,rlca,exec.asm,RLCA
3695,3695,3725,041d5d,041d8d,or c,or c,or c,exec.asm,ORC:			OR      C
3696,3696,3726,041d5e,041d8e,"ld c,a","ld c,a","ld c,a",exec.asm,"LD      C,A"
3697,3697,3727,041d5f,041d8f,ret,ret,ret,exec.asm,RET
3698,3698,3728,041d60,041d90,"ld hl,$04201a","ld hl,$04204a","ld hl,$000000",exec.asm,"LDOP:			LD      HL,LDOPS"
3699,3699,3729,041d64,041d94,call $041db5,call $041de5,call $000000,exec.asm,FIND:			CALL    SKIP			; Skip delimiters
3700,3700,3730,041d68,041d98,"ld b,$00","ld b,$00","ld b,$00",exec.asm,"EXIT_:			LD      B,0			; Set B to 0"
3701,3701,3731,041d6a,041d9a,scf,scf,scf,exec.asm,SCF				; Set the carry flag
3702,3702,3732,041d6b,041d9b,ret z,ret z,ret z,exec.asm,RET     Z			; Returns if Z
3703,3703,3733,041d6c,041d9c,cp $dd,cp $dd,cp $00,exec.asm,"CP      DEF_			; Special case for token DEF (used in DEFB, DEFW, DEFL, DEFM)"
3704,3704,3734,041d6e,041d9e,"jr z,$+$06","jr z,$+$06","jr z,$+$00",exec.asm,"JR      Z,FIND0"
3705,3705,3735,041d70,041da0,cp $85,cp $85,cp $00,exec.asm,CP      TOR+1			; Special case for tokens AND and OR
3706,3706,3736,041d72,041da2,ccf,ccf,ccf,exec.asm,CCF
3707,3707,3737,041d73,041da3,ret c,ret c,ret c,exec.asm,RET     C
3708,3708,3738,041d74,041da4,"ld a,(hl)","ld a,(hl)","ld a,(hl)",exec.asm,"FIND0:			LD      A,(HL)			; Check for the end of the table (0 byte marker)"
3709,3709,3739,041d75,041da5,or a,or a,or a,exec.asm,OR      A
3710,3710,3740,041d76,041da6,"jr z,$-$0e","jr z,$-$0e","jr z,$-$00",exec.asm,"JR      Z,EXIT_			; Exit"
3711,3711,3741,041d78,041da8,xor (iy),xor (iy),xor (iy),exec.asm,XOR     (IY)
3712,3712,3742,041d7b,041dab,and $5f,and $5f,and $00,exec.asm,AND     01011111B
3713,3713,3743,041d7d,041dad,"jr z,$+$0b","jr z,$+$0b","jr z,$+$00",exec.asm,"JR      Z,FIND2"
3714,3714,3744,041d7f,041daf,"bit 7,(hl)","bit 7,(hl)","bit 7,(hl)",exec.asm,"FIND1:			BIT     7,(HL)"
3715,3715,3745,041d81,041db1,inc hl,inc hl,inc hl,exec.asm,INC     HL
3716,3716,3746,041d82,041db2,"jr z,$-$03","jr z,$-$03","jr z,$-$00",exec.asm,"JR      Z,FIND1"
3717,3717,3747,041d84,041db4,inc hl,inc hl,inc hl,exec.asm,INC     HL
3718,3718,3748,041d85,041db5,inc b,inc b,inc b,exec.asm,INC     B
3719,3719,3749,041d86,041db6,jr $-$12,jr $-$12,jr $-$00,exec.asm,JR      FIND0
3720,3720,3750,041d88,041db8,push iy,push iy,push iy,exec.asm,FIND2:			PUSH    IY
3721,3721,3751,041d8a,041dba,"bit 7,(hl)","bit 7,(hl)","bit 7,(hl)",exec.asm,"FIND3:			BIT     7,(HL)			; Is this the end of token marker?"
3722,3722,3752,041d8c,041dbc,inc iy,inc iy,inc iy,exec.asm,INC     IY
3723,3723,3753,041d8e,041dbe,inc hl,inc hl,inc hl,exec.asm,INC     HL
3724,3724,3754,041d8f,041dbf,"jr nz,$+$13","jr nz,$+$13","jr nz,$+$00",exec.asm,"JR      NZ,FIND5		; Yes"
3725,3725,3755,041d91,041dc1,cp (hl),cp (hl),cp (hl),exec.asm,CP      (HL)
3726,3726,3756,041d92,041dc2,"call z,$041db4","call z,$041de4","call z,$000000",exec.asm,"CALL    Z,SKIP0"
3727,3727,3757,041d96,041dc6,"ld a,(hl)","ld a,(hl)","ld a,(hl)",exec.asm,"LD      A,(HL)"
3728,3728,3758,041d97,041dc7,xor (iy),xor (iy),xor (iy),exec.asm,XOR     (IY)
3729,3729,3759,041d9a,041dca,and $5f,and $5f,and $00,exec.asm,AND     01011111B
3730,3730,3760,041d9c,041dcc,"jr z,$-$12","jr z,$-$12","jr z,$-$00",exec.asm,"JR      Z,FIND3"
3731,3731,3761,041d9e,041dce,pop iy,pop iy,pop iy,exec.asm,FIND4:			POP     IY
3732,3732,3762,041da0,041dd0,jr $-$21,jr $-$21,jr $-$00,exec.asm,JR      FIND1
3733,3733,3763,041da2,041dd2,call $041766,call $041790,call $000000,exec.asm,FIND5:			CALL    DELIM			; Is it a delimiter?
3734,3734,3764,041da6,041dd6,"call nz,$041dc9","call nz,$041df9","call nz,$000000",exec.asm,"CALL	NZ,DOT 			; No, so also check whether it is a dot character (for suffixes)"
3735,3735,3765,041daa,041dda,"call nz,$041dc3","call nz,$041df3","call nz,$000000",exec.asm,"CALL    NZ,SIGN			; No, so also check whether it is a SIGN character ('+' or '-')"
3736,3736,3766,041dae,041dde,"jr nz,$-$10","jr nz,$-$10","jr nz,$-$00",exec.asm,"JR      NZ,FIND4		; If it is not a sign or a delimiter, then loop"
3737,3737,3767,041db0,041de0,"ld a,b","ld a,b","ld a,b",exec.asm,"FIND6:			LD      A,B			; At this point we have a token"
3738,3738,3768,041db1,041de1,"ld b,(hl)","ld b,(hl)","ld b,(hl)",exec.asm,"LD      B,(HL)			; Fetch the token type code"
3739,3739,3769,041db2,041de2,pop hl,pop hl,pop hl,exec.asm,POP     HL			; Restore the stack
3740,3740,3770,041db3,041de3,ret,ret,ret,exec.asm,RET
3741,3741,3771,041db4,041de4,inc hl,inc hl,inc hl,exec.asm,SKIP0:			INC     HL
3742,3742,3772,041db5,041de5,call $041766,call $041790,call $000000,exec.asm,SKIP:			CALL    DELIM			; Is it a delimiter?
3743,3743,3773,041db9,041de9,ret nz,ret nz,ret nz,exec.asm,"RET     NZ			; No, so return"
3744,3744,3774,041dba,041dea,call $041772,call $04179c,call $000000,exec.asm,CALL    TERM			; Is it a terminator?
3745,3745,3775,041dbe,041dee,ret z,ret z,ret z,exec.asm,"RET     Z			; Yes, so return"
3746,3746,3776,041dbf,041def,inc iy,inc iy,inc iy,exec.asm,INC     IY			; Increment the basic program counter
3747,3747,3777,041dc1,041df1,jr $-$0c,jr $-$0c,jr $-$00,exec.asm,JR      SKIP			; And loop
3748,3748,3778,041dc3,041df3,cp $2b,cp $2b,cp $00,exec.asm,SIGN:			CP      '+'			; Check whether the character is a sign symbol
3749,3749,3779,041dc5,041df5,ret z,ret z,ret z,exec.asm,RET     Z
3750,3750,3780,041dc6,041df6,cp $2d,cp $2d,cp $00,exec.asm,CP      '-'
3751,3751,3781,041dc8,041df8,ret,ret,ret,exec.asm,RET
3752,3752,3782,041dc9,041df9,cp $2e,cp $2e,cp $00,exec.asm,DOT:			CP	'.'			; Check if it is a dot character
3753,3753,3783,041dcb,041dfb,ret,ret,ret,exec.asm,RET
3754,3754,3784,041dcc,041dfc,"ld c,(hl)","ld c,(hl)","ld c,(hl)",exec.asm,"OPCODS:			DB	""NO"",""P""+80H,00h	; # 00h"
3755,3755,3785,041dcd,041dfd,"ld c,a","ld c,a","ld c,a",exec.asm,
3756,3756,,041dce,,ret nc,,ret nc,,
3757,3757,,041dcf,,nop,,nop,,
3758,3758,,041dd0,,"ld.sil c,h",,"ld.sil c,h",,
3759,3759,,041dd2,,"ld b,e",,"ld b,e",,
3760,3760,,041dd3,,pop bc,,pop bc,,
3761,3761,,041dd4,,rlca,,rlca,,
3762,3762,,041dd5,,"ld b,l",,"ld b,l",,
3763,3763,,041dd6,,"ld e,b",,"ld e,b",,
3764,3764,,041dd7,,nop,,nop,,
3765,3765,,041dd8,,"ld b,c",,"ld b,c",,
3766,3766,,041dd9,,"ld b,(hl)",,"ld b,(hl)",,
3767,3767,,041dda,,nop,,nop,,
3768,3768,,041ddb,,"ld b,c",,"ld b,c",,
3769,3769,,041ddc,,"ld b,(hl)",,"ld b,(hl)",,
3770,3770,,041ddd,,and a,,and a,,
3771,3771,,041dde,,"ex af,af'",,"ex af,af'",,
3772,3772,,041ddf,,noni.sil,,noni.sil,,
3773,3773,,041de0,,"ld.sil b,e",,"ld.sil b,e",,
3774,3774,,041de2,,pop bc,,pop bc,,
3775,3775,,041de3,,rrca,,rrca,,
3776,3776,,041de4,,"ld.sil c,h",,"ld.sil c,h",,
3777,3777,,041de6,,pop bc,,pop bc,,
3778,3778,,041de7,,rla,,rla,,
3779,3779,,041de8,,noni.sil,,noni.sil,,
3780,3780,,041de9,,pop.sil bc,,pop.sil bc,,
3781,3781,,041deb,,rra,,rra,,
3782,3782,,041dec,,"ld b,h",,"ld b,h",,
3783,3783,,041ded,,"ld b,c",,"ld b,c",,
3784,3784,,041dee,,pop bc,,pop bc,,
3785,3785,,041def,,daa,,daa,,
3786,3786,,041df0,,"ld b,e",,"ld b,e",,
3787,3787,,041df1,,"ld d,b",,"ld d,b",,
3788,3788,,041df2,,"call z,$43532f",,"call z,$000000",,
3789,3789,,041df6,,"add a,$37",,"add a,$00",,
3790,3790,,041df8,,"ld b,e",,"ld b,e",,
3791,3791,,041df9,,"ld b,e",,"ld b,e",,
3792,3792,,041dfa,,"add a,$3f",,"add a,$00",,
3793,3793,,041dfc,,"ld c,b",,"ld c,b",,
3794,3794,,041dfd,,"ld b,c",,"ld b,c",,
3795,3795,,041dfe,,"ld c,h",,"ld c,h",,
3796,3796,,041dff,,"call nc,$584576",,"call nc,$000000",,
3797,3797,,041e03,,ret c,,ret c,,
3798,3798,,041e04,,exx,,exx,,
3799,3799,,041e05,,"ld b,l",,"ld b,l",,
3800,3800,,041e06,,"ld e,b",,"ld e,b",,
3801,3801,,041e07,,nop,,nop,,
3802,3802,,041e08,,"ld b,h",,"ld b,h",,
3803,3803,,041e09,,"ld b,l",,"ld b,l",,
3804,3804,,041e0a,,nop,,nop,,
3805,3805,,041e0b,,"ld c,b",,"ld c,b",,
3806,3806,,041e0c,,"call z,$c944eb",,"call z,$000000",,
3807,3807,,041e10,,di,,di,,
3808,3808,,041e11,,"ld b,l",,"ld b,l",,
3809,3809,,041e12,,ret,,ret,,
3810,3810,,041e13,,ei,,ei,,
3811,3811,,041e14,,"ld c,(hl)",,"ld c,(hl)",,
3812,3812,,041e15,,"ld b,l",,"ld b,l",,
3813,3813,,041e16,,rst $00,,rst $00,,
3814,3814,,041e17,,"ld b,h",,"ld b,h",,
3815,3815,,041e18,,"ld.lis c,l",,"ld.lis c,l",,
3816,3816,,041e1a,,nop,,nop,,
3817,3817,,041e1b,,or b,,or b,,
3818,3818,,041e1c,,"ld b,(hl)",,"ld b,(hl)",,
3819,3819,,041e1d,,"ld.sil b,l",,"ld.sil b,l",,
3820,3820,,041e1f,,"ld d,h",,"ld d,h",,
3821,3821,,041e20,,"adc a,$45",,"adc a,$00",,
3822,3822,,041e22,,"ld c,l",,"ld c,l",,
3823,3823,,041e23,,"ld c,h",,"ld c,h",,
3824,3824,,041e24,,"ld d,h",,"ld d,h",,
3825,3825,,041e25,,nop,,nop,,
3826,3826,,041e26,,"ld b,d",,"ld b,d",,
3827,3827,,041e27,,jp $45524c,,jp $000000,,
3828,3828,,041e2b,,"ld d,h",,"ld d,h",,
3829,3829,,041e2c,,ret,,ret,,
3830,3830,,041e2d,,"ld c,l",,"ld c,l",,
3831,3831,,041e2e,,"ld.lis c,l",,"ld.lis c,l",,
3832,3832,,041e30,,nop,,nop,,
3833,3833,,041e31,,or c,,or c,,
3834,3834,,041e32,,"ld d,(hl)",,"ld d,(hl)",,
3835,3835,,041e33,,"ld c,l",,"ld c,l",,
3836,3836,,041e34,,"ld c,h",,"ld c,h",,
3837,3837,,041e35,,"ld d,h",,"ld d,h",,
3838,3838,,041e36,,nop,,nop,,
3839,3839,,041e37,,"ld b,h",,"ld b,h",,
3840,3840,,041e38,,push bc,,push bc,,
3841,3841,,041e39,,"ld e,h",,"ld e,h",,
3842,3842,,041e3a,,"ld.lis c,l",,"ld.lis c,l",,
3843,3843,,041e3c,,nop,,nop,,
3844,3844,,041e3d,,or d,,or d,,
3845,3845,,041e3e,,"ld e,(hl)",,"ld e,(hl)",,
3846,3846,,041e3f,,noni.sil,,noni.sil,,
3847,3847,,041e40,,"call.sil nz,$4c4d67",,"call.sil nz,$000000",,
3848,3848,,041e45,,"ld d,h",,"ld d,h",,
3849,3849,,041e46,,nop,,nop,,
3850,3850,,041e47,,"ld c,b",,"ld c,b",,
3851,3851,,041e48,,"call z,$444c6c",,"call z,$000000",,
3852,3852,,041e4c,,nop,,nop,,
3853,3853,,041e4d,,"ld c,l",,"ld c,l",,
3854,3854,,041e4e,,"ld b,d",,"ld b,d",,
3855,3855,,041e4f,,nop,,nop,,
3856,3856,,041e50,,pop bc,,pop bc,,
3857,3857,,041e51,,"ld l,l",,"ld l,l",,
3858,3858,,041e52,,"ld c,h",,"ld c,h",,
3859,3859,,041e53,,"ld b,h",,"ld b,h",,
3860,3860,,041e54,,nop,,nop,,
3861,3861,,041e55,,"ld b,c",,"ld b,c",,
3862,3862,,041e56,,nop,,nop,,
3863,3863,,041e57,,"ld c,l",,"ld c,l",,
3864,3864,,041e58,,"jp nz,$4c526e",,"jp nz,$000000",,
3865,3865,,041e5c,,"call nz,$4c536f",,"call nz,$000000",,
3866,3866,,041e60,,ret nc,,ret nc,,
3867,3867,,041e61,,halt,,halt,,
3868,3868,,041e62,,"ld c,l",,"ld c,l",,
3869,3869,,041e63,,"ld c,h",,"ld c,h",,
3870,3870,,041e64,,"ld d,h",,"ld d,h",,
3871,3871,,041e65,,nop,,nop,,
3872,3872,,041e66,,"ld d,e",,"ld d,e",,
3873,3873,,041e67,,ret nc,,ret nc,,
3874,3874,,041e68,,"ld a,h",,"ld a,h",,
3875,3875,,041e69,,"ld d,e",,"ld d,e",,
3876,3876,,041e6a,,"ld d,h",,"ld d,h",,
3877,3877,,041e6b,,"ld c,l",,"ld c,l",,
3878,3878,,041e6c,,ret.lis c,,ret.lis c,,
3879,3879,,041e6e,,"ld a,l",,"ld a,l",,
3880,3880,,041e6f,,"ld.sil d,e",,"ld.sil d,e",,
3881,3881,,041e71,,"ld c,l",,"ld c,l",,
3882,3882,,041e72,,ret.lis c,,ret.lis c,,
3883,3883,,041e74,,"ld a,(hl)",,"ld a,(hl)",,
3884,3884,,041e75,,"ld.lis c,(hl)",,"ld.lis c,(hl)",,
3885,3885,,041e77,,call.lis $4f82,,call.lis $0000,,
3886,3886,,041e7b,,"ld d,h",,"ld d,h",,
3887,3887,,041e7c,,call.lis $4983,,call.lis $0000,,
3888,3888,,041e80,,"ld c,(hl)",,"ld c,(hl)",,
3889,3889,,041e81,,or.lis d,,or.lis d,,
3890,3890,,041e83,,"add a,h",,"add a,h",,
3891,3891,,041e84,,"ld.lis c,(hl)",,"ld.lis c,(hl)",,
3892,3892,,041e86,,"ld b,h",,"ld b,h",,
3893,3893,,041e87,,call $544f8a,,call $000000,,
3894,3894,,041e8b,,"ld b,h",,"ld b,h",,
3895,3895,,041e8c,,call $4e498b,,call $000000,,
3896,3896,,041e90,,"ld b,h",,"ld b,h",,
3897,3897,,041e91,,or d,,or d,,
3898,3898,,041e92,,"adc a,h",,"adc a,h",,
3899,3899,,041e93,,"ld.lis c,(hl)",,"ld.lis c,(hl)",,
3900,3900,,041e95,,"ld.lis c,l",,"ld.lis c,l",,
3901,3901,,041e97,,"jp nc,$544f92",,"jp nc,$000000",,
3902,3902,,041e9b,,"ld.lis c,l",,"ld.lis c,l",,
3903,3903,,041e9d,,"jp nc,$4e4993",,"jp nc,$000000",,
3904,3904,,041ea1,,"ld.lis ($94d2),a",,"ld.lis ($0000),a",,
3905,3905,,041ea5,,"ld.lis c,(hl)",,"ld.lis c,(hl)",,
3906,3906,,041ea7,,"ld b,h",,"ld b,h",,
3907,3907,,041ea8,,"ld c,l",,"ld c,l",,
3908,3908,,041ea9,,"jp nc,$544f9a",,"jp nc,$000000",,
3909,3909,,041ead,,"ld b,h",,"ld b,h",,
3910,3910,,041eae,,"ld c,l",,"ld c,l",,
3911,3911,,041eaf,,"jp nc,$4e499b",,"jp nc,$000000",,
3912,3912,,041eb3,,"ld b,h",,"ld b,h",,
3913,3913,,041eb4,,"ld ($4c9cd2),a",,"ld ($000000),a",,
3914,3914,,041eb8,,"ld b,h",,"ld b,h",,
3915,3915,,041eb9,,ret,,ret,,
3916,3916,,041eba,,and b,,and b,,
3917,3917,,041ebb,,"ld b,e",,"ld b,e",,
3918,3918,,041ebc,,"ld d,b",,"ld d,b",,
3919,3919,,041ebd,,ret,,ret,,
3920,3920,,041ebe,,and c,,and c,,
3921,3921,,041ebf,,"ld.lis c,(hl)",,"ld.lis c,(hl)",,
3922,3922,,041ec1,,ret,,ret,,
3923,3923,,041ec2,,and d,,and d,,
3924,3924,,041ec3,,"ld c,a",,"ld c,a",,
3925,3925,,041ec4,,"ld d,l",,"ld d,l",,
3926,3926,,041ec5,,"ld d,h",,"ld d,h",,
3927,3927,,041ec6,,or.lis d,,or.lis d,,
3928,3928,,041ec8,,and h,,and h,,
3929,3929,,041ec9,,"ld c,a",,"ld c,a",,
3930,3930,,041eca,,"ld d,l",,"ld d,l",,
3931,3931,,041ecb,,"ld d,h",,"ld d,h",,
3932,3932,,041ecc,,ret,,ret,,
3933,3933,,041ecd,,and e,,and e,,
3934,3934,,041ece,,"ld c,h",,"ld c,h",,
3935,3935,,041ecf,,"ld b,h",,"ld b,h",,
3936,3936,,041ed0,,"call nz,$5043a8",,"call nz,$000000",,
3937,3937,,041ed4,,"call nz,$4e49a9",,"call nz,$000000",,
3938,3938,,041ed8,,"call nz,$554faa",,"call nz,$000000",,
3939,3939,,041edc,,"ld d,h",,"ld d,h",,
3940,3940,,041edd,,"ld b,h",,"ld b,h",,
3941,3941,,041ede,,or d,,or d,,
3942,3942,,041edf,,xor h,,xor h,,
3943,3943,,041ee0,,"ld c,a",,"ld c,a",,
3944,3944,,041ee1,,"ld d,l",,"ld d,l",,
3945,3945,,041ee2,,"ld d,h",,"ld d,h",,
3946,3946,,041ee3,,"call nz,$444cab",,"call nz,$000000",,
3947,3947,,041ee7,,"jp.lis nc,$43b0",,"jp.lis nc,$0000",,
3948,3948,,041eeb,,"ld d,b",,"ld d,b",,
3949,3949,,041eec,,"jp.lis nc,$49b1",,"jp.lis nc,$0000",,
3950,3950,,041ef0,,"ld c,(hl)",,"ld c,(hl)",,
3951,3951,,041ef1,,"jp.lis nc,$4fb2",,"jp.lis nc,$0000",,
3952,3952,,041ef5,,"ld d,h",,"ld d,h",,
3953,3953,,041ef6,,"jp.lis nc,$4fb3",,"jp.lis nc,$0000",,
3954,3954,,041efa,,"ld d,h",,"ld d,h",,
3955,3955,,041efb,,"ld.lis ($b4d2),a",,"ld.lis ($0000),a",,
3956,3956,,041eff,,"ld c,h",,"ld c,h",,
3957,3957,,041f00,,"ld b,h",,"ld b,h",,
3958,3958,,041f01,,"ld b,h",,"ld b,h",,
3959,3959,,041f02,,"jp nc,$5043b8",,"jp nc,$000000",,
3960,3960,,041f06,,"ld b,h",,"ld b,h",,
3961,3961,,041f07,,"jp nc,$4e49b9",,"jp nc,$000000",,
3962,3962,,041f0b,,"ld b,h",,"ld b,h",,
3963,3963,,041f0c,,"jp nc,$544fba",,"jp nc,$000000",,
3964,3964,,041f10,,"ld b,h",,"ld b,h",,
3965,3965,,041f11,,"jp nc,$544fbb",,"jp nc,$000000",,
3966,3966,,041f15,,"ld b,h",,"ld b,h",,
3967,3967,,041f16,,"ld ($49bcd2),a",,"ld ($000000),a",,
3968,3968,,041f1a,,"ld c,(hl)",,"ld c,(hl)",,
3969,3969,,041f1b,,noni.lis,,noni.lis,,
3970,3970,,041f1c,,ret.sil c,,ret.sil c,,
3971,3971,,041f1e,,"jp nz,$49544f",,"jp nz,$000000",,
3972,3972,,041f22,,ret.sil c,,ret.sil c,,
3973,3973,,041f24,,jp $444e49,,jp $000000,,
3974,3974,,041f28,,ret.sil c,,ret.sil c,,
3975,3975,,041f2a,,"jp z,$44544f",,"jp z,$000000",,
3976,3976,,041f2e,,ret.sil c,,ret.sil c,,
3977,3977,,041f30,,"bit 0,d",,"bit 0,d",,
3978,3978,,041f32,,"call.lis nc,$5240",,"call.lis nc,$0000",,
3979,3979,,041f36,,"ld b,l",,"ld b,l",,
3980,3980,,041f37,,"out ($80),a",,"out ($00),a",,
3981,3981,,041f39,,"ld d,e",,"ld d,e",,
3982,3982,,041f3a,,"ld b,l",,"ld b,l",,
3983,3983,,041f3b,,"call nc,$4c52c0",,"call nc,$000000",,
3984,3984,,041f3f,,jp $525200,,jp $000000,,
3985,3985,,041f43,,jp $cc5208,,jp $000000,,
3986,3986,,041f47,,djnz $+$54,,djnz $+$00,,
3987,3987,,041f49,,"jp nc,$4c5318",,"jp nc,$000000",,
3988,3988,,041f4d,,pop bc,,pop bc,,
3989,3989,,041f4e,,"jr nz,$+$55",,"jr nz,$+$00",,
3990,3990,,041f50,,pop.sil bc,,pop.sil bc,,
3991,3991,,041f52,,"jr z,$+$55",,"jr z,$+$00",,
3992,3992,,041f54,,"call.sil z,$4f5038",,"call.sil z,$000000",,
3993,3993,,041f59,,ret nc,,ret nc,,
3994,3994,,041f5a,,pop bc,,pop bc,,
3995,3995,,041f5b,,"ld d,b",,"ld d,b",,
3996,3996,,041f5c,,"ld d,l",,"ld d,l",,
3997,3997,,041f5d,,"ld d,e",,"ld d,e",,
3998,3998,,041f5e,,ret z,,ret z,,
3999,3999,,041f5f,,push bc,,push bc,,
4000,4000,,041f60,,"ld b,l",,"ld b,l",,
4001,4001,,041f61,,"ld e,b",,"ld e,b",,
4002,4002,,041f62,,nop,,nop,,
4003,4003,,041f63,,"jr z,$+$55",,"jr z,$+$00",,
4004,4004,,041f65,,ret nc,,ret nc,,
4005,4005,,041f66,,"ex (sp),hl",,"ex (sp),hl",,
4006,4006,,041f67,,"ld d,e",,"ld d,e",,
4007,4007,,041f68,,"ld d,l",,"ld d,l",,
4008,4008,,041f69,,"jp nz,$4e4190",,"jp nz,$000000",,
4009,4009,,041f6d,,"call nz,$4f58a0",,"call nz,$000000",,
4010,4010,,041f71,,"jp nc,$d24fa8",,"jp nc,$000000",,
4011,4011,,041f75,,or b,,or b,,
4012,4012,,041f76,,"ld b,e",,"ld b,e",,
4013,4013,,041f77,,ret nc,,ret nc,,
4014,4014,,041f78,,cp b,,cp b,,
4015,4015,,041f79,,"add a,b",,"add a,b",,
4016,4016,,041f7a,,and b,,and b,,
4017,4017,,041f7b,,"add a,h",,"add a,h",,
4018,4018,,041f7c,,or b,,or b,,
4019,4019,,041f7d,,"ld b,c",,"ld b,c",,
4020,4020,,041f7e,,"ld b,h",,"ld b,h",,
4021,4021,,041f7f,,"call nz,$444180",,"call nz,$000000",,
4022,4022,,041f83,,jp $425388,,jp $000000,,
4023,4023,,041f87,,jp $4e4998,,jp $000000,,
4024,4024,,041f8b,,jp $454404,,jp $000000,,
4025,4025,,041f8f,,jp $4e4905,,jp $000000,,
4026,4026,,041f93,,or b,,or b,,
4027,4027,,041f94,,nop,,nop,,
4028,4028,,041f95,,"ld c,a",,"ld c,a",,
4029,4029,,041f96,,"ld d,l",,"ld d,l",,
4030,4030,,041f97,,"ld d,h",,"ld d,h",,
4031,4031,,041f98,,or b,,or b,,
4032,4032,,041f99,,"ld bc,$40ce49",,"ld bc,$000000",,
4033,4033,,041f9d,,"ld c,a",,"ld c,a",,
4034,4034,,041f9e,,"ld d,l",,"ld d,l",,
4035,4035,,041f9f,,"call nc,$d24a41",,"call nc,$000000",,
4036,4036,,041fa3,,"jr nz,$+$46",,"jr nz,$+$00",,
4037,4037,,041fa5,,"ld c,d",,"ld c,d",,
4038,4038,,041fa6,,"ld c,(hl)",,"ld c,(hl)",,
4039,4039,,041fa7,,"jp c,$d04a10",,"jp c,$000000",,
4040,4040,,041fab,,"jp nz,$4c4143",,"jp nz,$000000",,
4041,4041,,041faf,,"call z,$5352c4",,"call z,$000000",,
4042,4042,,041fb3,,"call nc,$4552c7",,"call nc,$000000",,
4043,4043,,041fb7,,"call nc,$c44cc0",,"call nc,$000000",,
4044,4044,,041fbb,,"ld.sis d,h",,"ld.sis d,h",,
4045,4045,,041fbd,,"ld d,e",,"ld d,e",,
4046,4046,,041fbe,,"call nc,$504f04",,"call nc,$000000",,
4047,4047,,041fc2,,"call nc,$444100",,"call nc,$000000",,
4048,4048,,041fc6,,"call z,$c25d00",,"call z,$000000",,
4049,4049,,041fca,,nop,,nop,,
4050,4050,,041fcb,,"ld e,l",,"ld e,l",,
4051,4051,,041fcc,,rst $10,,rst $00,,
4052,4052,,041fcd,,nop,,nop,,
4053,4053,,041fce,,"ld e,l",,"ld e,l",,
4054,4054,,041fcf,,"call z,$cd5d00",,"call z,$000000",,
4055,4055,,041fd3,,nop,,nop,,
4056,4056,,041fd4,,nop,,nop,,
4057,4057,,041fd5,,"jp nz,$01c300",,"jp nz,$000000",,
4058,4058,,041fd9,,"call nz,$03c502",,"call nz,$000000",,
4059,4059,,041fdd,,ret z,,ret z,,
4060,4060,,041fde,,inc b,,inc b,,
4061,4061,,041fdf,,"call z,$482805",,"call z,$000000",,
4062,4062,,041fe3,,"call z,$07c106",,"call z,$000000",,
4063,4063,,041fe7,,"jr z,$+$4b",,"jr z,$+$00",,
4064,4064,,041fe9,,ret c,,ret c,,
4065,4065,,041fea,,"add a,(hl)",,"add a,(hl)",,
4066,4066,,041feb,,"jr z,$+$4b",,"jr z,$+$00",,
4067,4067,,041fed,,exx,,exx,,
4068,4068,,041fee,,"add a,$42",,"add a,$00",,
4069,4069,,041ff0,,jp $c54408,,jp $000000,,
4070,4070,,041ff4,,"ld a,(bc)",,"ld a,(bc)",,
4071,4071,,041ff5,,"ld c,b",,"ld c,b",,
4072,4072,,041ff6,,"call z,$d8490c",,"call z,$000000",,
4073,4073,,041ffa,,"adc a,h",,"adc a,h",,
4074,4074,,041ffb,,exx.lis,,exx.lis,,
4075,4075,,041ffd,,"call z,$0ec641",,"call z,$000000",,
4076,4076,,042001,,"ld d,e",,"ld d,e",,
4077,4077,,042002,,ret nc,,ret nc,,
4078,4078,,042003,,"ld c,$4e",,"ld c,$00",,
4079,4079,,042005,,"jp c,$11da10",,"jp c,$000000",,
4080,4080,,042009,,"ld c,(hl)",,"ld c,(hl)",,
4081,4081,,04200a,,jp $cf5012,,jp $000000,,
4082,4082,,04200e,,inc d,,inc d,,
4083,4083,,04200f,,"ld d,b",,"ld d,b",,
4084,4084,,042010,,push bc,,push bc,,
4085,4085,,042011,,dec d,,dec d,,
4086,4086,,042012,,ret nc,,ret nc,,
4087,4087,,042013,,"ld d,$cd",,"ld d,$00",,
4088,4088,,042015,,rla,,rla,,
4089,4089,,042016,,"jr z,$-$3b",,"jr z,$-$00",,
4090,4090,,042018,,"jr nz,$+$02",,"jr nz,$+$00",,
4091,4091,,04201a,,nop.lis,,nop.lis,,
4092,4092,,04201c,,pop bc,,pop bc,,
4093,4093,,04201d,,"ld b,a",,"ld b,a",,
4094,4094,,04201e,,nop.sil,,nop.sil,,
4095,4095,,042020,,pop bc,,pop bc,,
4096,4096,,042021,,"ld c,a",,"ld c,a",,
4097,4097,,042022,,"ld b,c",,"ld b,c",,
4098,4098,,042023,,nop,,nop,,
4099,4099,,042024,,ret,,ret,,
4100,4100,,042025,,"ld d,a",,"ld d,a",,
4101,4101,,042026,,"ld b,c",,"ld b,c",,
4102,4102,,042027,,nop,,nop,,
4103,4103,,042028,,"jp nc,$42285f",,"jp nc,$000000",,
4104,4104,,04202c,,"ld b,e",,"ld b,e",,
4105,4105,,04202d,,nop,,nop,,
4106,4106,,04202e,,pop bc,,pop bc,,
4107,4107,,04202f,,"ld (bc),a",,"ld (bc),a",,
4108,4108,,042030,,"jr z,$+$46",,"jr z,$+$00",,
4109,4109,,042032,,"ld b,l",,"ld b,l",,
4110,4110,,042033,,nop,,nop,,
4111,4111,,042034,,pop bc,,pop bc,,
4112,4112,,042035,,"ld (de),a",,"ld (de),a",,
4113,4113,,042036,,"ld b,c",,"ld b,c",,
4114,4114,,042037,,nop,,nop,,
4115,4115,,042038,,"jr z,$+$44",,"jr z,$+$00",,
4116,4116,,04203a,,jp $00410a,,jp $000000,,
4117,4117,,04203e,,"jr z,$+$46",,"jr z,$+$00",,
4118,4118,,042040,,push bc,,push bc,,
4119,4119,,042041,,"ld a,(de)",,"ld a,(de)",,
4120,4120,,042042,,nop,,nop,,
4121,4121,,042043,,"ld c,h",,"ld c,h",,
4122,4122,,042044,,"out.lis ($49),a",,"out.lis ($00),a",,
4123,4123,,042047,,"ld d,e",,"ld d,e",,
4124,4124,,042048,,"call.lis z,$5352",,"call.lis z,$0000",,
4125,4125,,04204c,,"out.lis ($40),a",,"out.lis ($00),a",,
4126,4126,,04204f,,"ld c,h",,"ld c,h",,
4127,4127,,042050,,"call.lis z,$005b",,"call.lis z,$0000",,
4128,4128,,042054,,"out ($40),a",,"out ($00),a",,
4129,4129,,042056,,"call z,$d34949",,"call z,$000000",,
4130,4130,,04205a,,noni.sis,,noni.sis,,
4131,4131,,04205b,,"call.lis z,$0052",,"call.lis z,$0000",,
4132,4132,,04205f,,"out ($52),a",,"out ($00),a",,
4133,4133,,042061,,"call z,$d3495b",,"call z,$000000",,
4134,4134,,042065,,noni.lis,,noni.lis,,
4135,4135,,042066,,"call.lis z,$005b",,"call.lis z,$0000",,
4136,4136,4285,04206a,04209a,push iy,push iy,push iy,fpp.asm,FPP:			PUSH    IY              ;Save IY
4137,4137,4286,04206c,04209c,"ld iy,$000000","ld iy,$000000","ld iy,$000000",fpp.asm,"LD      IY,0"
4138,4138,4287,042071,0420a1,"add iy,sp","add iy,sp","add iy,sp",fpp.asm,"ADD     IY,SP           ;Save SP in IY"
4139,4139,4288,042073,0420a3,call $042083,call $0420b3,call $000000,fpp.asm,CALL    OP              ;Perform operation
4140,4140,4289,042077,0420a7,cp a,cp a,cp a,fpp.asm,"CP      A               ;Good return (Z, NC)"
4141,4141,4290,042078,0420a8,pop iy,pop iy,pop iy,fpp.asm,EXIT_FP_:			POP     IY              ;Restore IY
4142,4142,4291,04207a,0420aa,ret,ret,ret,fpp.asm,RET                     ;Return to caller
4143,4143,4292,04207b,0420ab,"ld a,$01","ld a,$01","ld a,$00",fpp.asm,"BAD_FP:			LD      A,BADOP         ;""Bad operation code"""
4144,4144,4293,04207d,0420ad,"ld sp,iy","ld sp,iy","ld sp,iy",fpp.asm,"ERROR_FP_:			LD      SP,IY           ;Restore SP from IY"
4145,4145,4294,04207f,0420af,or a,or a,or a,fpp.asm,OR      A               ;Set NZ
4146,4146,4295,042080,0420b0,scf,scf,scf,fpp.asm,SCF                     ;Set C
4147,4147,4296,042081,0420b1,jr $-$09,jr $-$09,jr $-$00,fpp.asm,JR      EXIT_FP_
4148,4148,4297,042083,0420b3,cp $2a,cp $2a,cp $00,fpp.asm,OP:				CP      RTABLE-DTABLE/3 ; ez80asm doesn't do nested expressions
4149,4149,4298,042085,0420b5,"jr nc,$-$0a","jr nc,$-$0a","jr nc,$-$00",fpp.asm,"JR      NC,BAD_FP"
4150,4150,4299,042087,0420b7,cp $10,cp $10,cp $00,fpp.asm,CP      FTABLE-DTABLE/3 ; ditto
4151,4151,4300,042089,0420b9,"jr nc,$+$0a","jr nc,$+$0a","jr nc,$+$00",fpp.asm,"JR      NC,DISPAT_FP"
4152,4152,4301,04208b,0420bb,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"EX      AF,AF'"
4153,4153,4302,04208c,0420bc,"ld a,b","ld a,b","ld a,b",fpp.asm,"LD      A,B"
4154,4154,4303,04208d,0420bd,or c,or c,or c,fpp.asm,OR      C               ;Both integer?
4155,4155,4304,04208e,0420be,"call nz,$042b96","call nz,$042bc6","call nz,$000000",fpp.asm,"CALL    NZ,FLOATA       ;No, so float both"
4156,4156,4305,042092,0420c2,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"EX      AF,AF'"
4157,4157,4306,042093,0420c3,push hl,push hl,push hl,fpp.asm,DISPAT_FP:			PUSH    HL
4158,4158,4307,042094,0420c4,"ld hl,$0420a6","ld hl,$0420d6","ld hl,$000000",fpp.asm,"LD      HL,DTABLE"
4159,4159,4308,042098,0420c8,push bc,push bc,push bc,fpp.asm,PUSH    BC
4160,4160,4309,042099,0420c9,"ld bc,$000003","ld bc,$000003","ld bc,$000000",fpp.asm,"LD	BC, 3		; C = 3"
4161,4161,4310,04209d,0420cd,"ld b,a","ld b,a","ld b,a",fpp.asm,"LD	B, A 		; B = op-code"
4162,4162,4311,04209e,0420ce,mlt bc,mlt bc,mlt bc,fpp.asm,MLT 	BC 		;BC = op-code * 3
4163,4163,4312,0420a0,0420d0,"add hl,bc","add hl,bc","add hl,bc",fpp.asm,"ADD	HL, BC 		;Add to table base"
4164,4164,4313,0420a1,0420d1,"ld hl,(hl)","ld hl,(hl)","ld hl,(hl)",fpp.asm,"LD	HL, (HL)	;Get the routine address (24-bit)"
4165,4165,4314,0420a3,0420d3,pop bc,pop bc,pop bc,fpp.asm,POP     BC
4166,4166,4315,0420a4,0420d4,"ex (sp),hl","ex (sp),hl","ex (sp),hl",fpp.asm,"EX      (SP),HL"
4167,4167,4316,0420a5,0420d5,ret,ret,ret,fpp.asm,RET                     ;Off to routine
4168,4168,,0420a6,,"ld e,b",,"ld e,b",,
4169,4169,,0420a7,,"ld hl,$21c604",,"ld hl,$000000",,
4170,4170,,0420ab,,inc b,,inc b,,
4171,4171,,0420ac,,"ld l,e",,"ld l,e",,
4172,4172,,0420ad,,"ld hl,$219104",,"ld hl,$000000",,
4173,4173,,0420b1,,inc b,,inc b,,
4174,4174,,0420b2,,"ld a,(hl)",,"ld a,(hl)",,
4175,4175,,0420b3,,"ld hl,$244c04",,"ld hl,$000000",,
4176,4176,,0420b7,,inc b,,inc b,,
4177,4177,,0420b8,,inc.lil h,,inc.lil h,,
4178,4178,,0420ba,,inc b,,inc b,,
4179,4179,,0420bb,,ccf,,ccf,,
4180,4180,,0420bc,,inc h,,inc h,,
4181,4181,,0420bd,,inc b,,inc b,,
4182,4182,,0420be,,inc h,,inc h,,
4183,4183,,0420bf,,inc h,,inc h,,
4184,4184,,0420c0,,inc b,,inc b,,
4185,4185,,0420c1,,"ld l,b",,"ld l,b",,
4186,4186,,0420c2,,inc h,,inc h,,
4187,4187,,0420c3,,inc b,,inc b,,
4188,4188,,0420c4,,or h,,or h,,
4189,4189,,0420c5,,"ld ($21ef04),hl",,"ld ($000000),hl",,
4190,4190,,0420c9,,inc b,,inc b,,
4191,4191,,0420ca,,"ld sp,$d60424",,"ld sp,$000000",,
4192,4192,,0420ce,,"ld hl,$236b04",,"ld hl,$000000",,
4193,4193,,0420d2,,inc b,,inc b,,
4194,4194,,0420d3,,"ld h,c",,"ld h,c",,
4195,4195,,0420d4,,"ld ($247a04),hl",,"ld ($000000),hl",,
4196,4196,,0420d8,,inc b,,inc b,,
4197,4197,,0420d9,,"ld h,b",,"ld h,b",,
4198,4198,,0420da,,"jr z,$+$06",,"jr z,$+$00",,
4199,4199,,0420dc,,"sbc a,(hl)",,"sbc a,(hl)",,
4200,4200,,0420dd,,daa,,daa,,
4201,4201,,0420de,,inc b,,inc b,,
4202,4202,,0420df,,"adc a,$27",,"adc a,$00",,
4203,4203,,0420e1,,inc b,,inc b,,
4204,4204,,0420e2,,"sbc a,c",,"sbc a,c",,
4205,4205,,0420e3,,dec h,,dec h,,
4206,4206,,0420e4,,inc b,,inc b,,
4207,4207,,0420e5,,xor b,,xor b,,
4208,4208,,0420e6,,inc h,,inc h,,
4209,4209,,0420e7,,inc b,,inc b,,
4210,4210,,0420e8,,"ld d,l",,"ld d,l",,
4211,4211,,0420e9,,"ld h,$04",,"ld h,$00",,
4212,4212,,0420eb,,"call m,$f30424",,"call m,$000000",,
4213,4213,,0420ef,,"ld h,$04",,"ld h,$00",,
4214,4214,,0420f1,,"adc a,b",,"adc a,b",,
4215,4215,,0420f2,,daa,,daa,,
4216,4216,,0420f3,,inc b,,inc b,,
4217,4217,,0420f4,,"add a,(hl)",,"add a,(hl)",,
4218,4218,,0420f5,,inc h,,inc h,,
4219,4219,,0420f6,,inc b,,inc b,,
4220,4220,,0420f7,,or d,,or d,,
4221,4221,,0420f8,,inc h,,inc h,,
4222,4222,,0420f9,,inc b,,inc b,,
4223,4223,,0420fa,,call $a60424,,call $000000,,
4224,4224,,0420fe,,dec h,,dec h,,
4225,4225,,0420ff,,inc b,,inc b,,
4226,4226,,042100,,dec d,,dec d,,
4227,4227,,042101,,dec h,,dec h,,
4228,4228,,042102,,inc b,,inc b,,
4229,4229,,042103,,"ld (hl),e",,"ld (hl),e",,
4230,4230,,042104,,dec h,,dec h,,
4231,4231,,042105,,inc b,,inc b,,
4232,4232,,042106,,inc hl,,inc hl,,
4233,4233,,042107,,inc l,,inc l,,
4234,4234,,042108,,inc b,,inc b,,
4235,4235,,042109,,"ld l,$26",,"ld l,$00",,
4236,4236,,04210b,,inc b,,inc b,,
4237,4237,,04210c,,"ld l,l",,"ld l,l",,
4238,4238,,04210d,,inc h,,inc h,,
4239,4239,,04210e,,inc b,,inc b,,
4240,4240,,04210f,,"sbc a,d",,"sbc a,d",,
4241,4241,,042110,,inc h,,inc h,,
4242,4242,,042111,,inc b,,inc b,,
4243,4243,,042112,,pop hl,,pop hl,,
4244,4244,,042113,,inc h,,inc h,,
4245,4245,,042114,,inc b,,inc b,,
4246,4246,,042115,,"ld l,c",,"ld l,c",,
4247,4247,,042116,,"jr z,$+$06",,"jr z,$+$00",,
4248,4248,,042118,,"jp z,$a6042a",,"jp z,$000000",,
4249,4249,,04211c,,dec hl,,dec hl,,
4250,4250,,04211d,,inc b,,inc b,,
4251,4251,,04211e,,"call p,$06042b",,"call p,$000000",,
4252,4252,,042122,,inc l,,inc l,,
4253,4253,,042123,,inc b,,inc b,,
4254,4254,,042124,,"ld d,h",,"ld d,h",,
4255,4255,,042125,,"ld hl,$21c204",,"ld hl,$000000",,
4256,4256,,042129,,inc b,,inc b,,
4257,4257,,04212a,,"ld h,a",,"ld h,a",,
4258,4258,,04212b,,"ld hl,$218d04",,"ld hl,$000000",,
4259,4259,,04212f,,inc b,,inc b,,
4260,4260,,042130,,"ld a,d",,"ld a,d",,
4261,4261,,042131,,"ld hl,$244604",,"ld hl,$000000",,
4262,4262,,042135,,inc b,,inc b,,
4263,4263,,042136,,"ld d,l",,"ld d,l",,
4264,4264,,042137,,inc h,,inc h,,
4265,4265,,042138,,inc b,,inc b,,
4266,4266,,042139,,"add hl,sp",,"add hl,sp",,
4267,4267,,04213a,,inc h,,inc h,,
4268,4268,,04213b,,inc b,,inc b,,
4269,4269,,04213c,,"ld e,$24",,"ld e,$00",,
4270,4270,,04213e,,inc b,,inc b,,
4271,4271,,04213f,,"ld h,d",,"ld h,d",,
4272,4272,4426,042140,042170,inc h,inc h,inc h,fpp.asm,
4273,4273,4427,042141,042171,inc b,inc b,inc b,fpp.asm,
4274,4274,,042142,,"ld c,$23",,"ld c,$00",,
4275,4275,4429,042144,042174,inc b,inc b,inc b,fpp.asm,
4276,4276,,042145,,"call m,$2b0421",,"call m,$000000",,
4277,4277,,042149,,inc h,,inc h,,
4278,4278,4432,04214a,04217a,inc b,inc b,inc b,fpp.asm,
4279,4279,,04214b,,"ex (sp),hl",,"ex (sp),hl",,
4280,4280,,04214c,,"ld hl,$23eb04",,"ld hl,$000000",,
4281,4281,4435,042150,042180,inc b,inc b,inc b,fpp.asm,
4282,4282,,042151,,"ld h,l",,"ld h,l",,
4283,4283,4437,042152,042182,"ld ($becd04),hl","ld ($eecd04),hl","ld ($000000),hl",fpp.asm,
4284,4284,4438,042156,042186,"ld hl,($a27c04)","ld hl,($a27c04)","ld hl,($000000)",fpp.asm,
4285,4285,4439,04215a,04218a,"ld h,a","ld h,a","ld h,a",fpp.asm,"LD      H,A"
4286,4286,4440,04215b,04218b,"ld a,l","ld a,l","ld a,l",fpp.asm,"LD      A,L"
4287,4287,4441,04215c,04218c,and e,and e,and e,fpp.asm,AND     E
4288,4288,4442,04215d,04218d,"ld l,a","ld l,a","ld l,a",fpp.asm,"LD      L,A"
4289,4289,4443,04215e,04218e,exx,exx,exx,fpp.asm,EXX
4290,4290,4444,04215f,04218f,"ld a,h","ld a,h","ld a,h",fpp.asm,"LD      A,H"
4291,4291,4445,042160,042190,and d,and d,and d,fpp.asm,AND     D
4292,4292,4446,042161,042191,"ld h,a","ld h,a","ld h,a",fpp.asm,"LD      H,A"
4293,4293,4447,042162,042192,"ld a,l","ld a,l","ld a,l",fpp.asm,"LD      A,L"
4294,4294,4448,042163,042193,and e,and e,and e,fpp.asm,AND     E
4295,4295,4449,042164,042194,"ld l,a","ld l,a","ld l,a",fpp.asm,"LD      L,A"
4296,4296,4450,042165,042195,exx,exx,exx,fpp.asm,EXX
4297,4297,4451,042166,042196,ret,ret,ret,fpp.asm,RET
4298,4298,4452,042167,042197,call $042abe,call $042aee,call $000000,fpp.asm,FEOR:			CALL    FIX2
4299,4299,4453,04216b,04219b,"ld a,h","ld a,h","ld a,h",fpp.asm,"IEOR:			LD      A,H"
4300,4300,4454,04216c,04219c,xor d,xor d,xor d,fpp.asm,XOR     D
4301,4301,4455,04216d,04219d,"ld h,a","ld h,a","ld h,a",fpp.asm,"LD      H,A"
4302,4302,4456,04216e,04219e,"ld a,l","ld a,l","ld a,l",fpp.asm,"LD      A,L"
4303,4303,4457,04216f,04219f,xor e,xor e,xor e,fpp.asm,XOR     E
4304,4304,4458,042170,0421a0,"ld l,a","ld l,a","ld l,a",fpp.asm,"LD      L,A"
4305,4305,4459,042171,0421a1,exx,exx,exx,fpp.asm,EXX
4306,4306,4460,042172,0421a2,"ld a,h","ld a,h","ld a,h",fpp.asm,"LD      A,H"
4307,4307,4461,042173,0421a3,xor d,xor d,xor d,fpp.asm,XOR     D
4308,4308,4462,042174,0421a4,"ld h,a","ld h,a","ld h,a",fpp.asm,"LD      H,A"
4309,4309,4463,042175,0421a5,"ld a,l","ld a,l","ld a,l",fpp.asm,"LD      A,L"
4310,4310,4464,042176,0421a6,xor e,xor e,xor e,fpp.asm,XOR     E
4311,4311,4465,042177,0421a7,"ld l,a","ld l,a","ld l,a",fpp.asm,"LD      L,A"
4312,4312,4466,042178,0421a8,exx,exx,exx,fpp.asm,EXX
4313,4313,4467,042179,0421a9,ret,ret,ret,fpp.asm,RET
4314,4314,4468,04217a,0421aa,call $042abe,call $042aee,call $000000,fpp.asm,FFOR:			CALL    FIX2
4315,4315,4469,04217e,0421ae,"ld a,h","ld a,h","ld a,h",fpp.asm,"IOR:			LD      A,H"
4316,4316,4470,04217f,0421af,or d,or d,or d,fpp.asm,OR      D
4317,4317,4471,042180,0421b0,"ld h,a","ld h,a","ld h,a",fpp.asm,"LD      H,A"
4318,4318,4472,042181,0421b1,"ld a,l","ld a,l","ld a,l",fpp.asm,"LD      A,L"
4319,4319,4473,042182,0421b2,or e,or e,or e,fpp.asm,OR      E
4320,4320,4474,042183,0421b3,"ld l,a","ld l,a","ld l,a",fpp.asm,"LD      L,A"
4321,4321,4475,042184,0421b4,exx,exx,exx,fpp.asm,EXX
4322,4322,4476,042185,0421b5,"ld a,h","ld a,h","ld a,h",fpp.asm,"LD      A,H"
4323,4323,4477,042186,0421b6,or d,or d,or d,fpp.asm,OR      D
4324,4324,4478,042187,0421b7,"ld h,a","ld h,a","ld h,a",fpp.asm,"LD      H,A"
4325,4325,4479,042188,0421b8,"ld a,l","ld a,l","ld a,l",fpp.asm,"LD      A,L"
4326,4326,4480,042189,0421b9,or e,or e,or e,fpp.asm,OR      E
4327,4327,4481,04218a,0421ba,"ld l,a","ld l,a","ld l,a",fpp.asm,"LD      L,A"
4328,4328,4482,04218b,0421bb,exx,exx,exx,fpp.asm,EXX
4329,4329,4483,04218c,0421bc,ret,ret,ret,fpp.asm,RET
4330,4330,4484,04218d,0421bd,call $042abe,call $042aee,call $000000,fpp.asm,FMOD:			CALL    FIX2
4331,4331,4485,042191,0421c1,"ld a,h","ld a,h","ld a,h",fpp.asm,"IMOD:			LD      A,H"
4332,4332,4486,042192,0421c2,xor d,xor d,xor d,fpp.asm,XOR     D               ;DIV RESULT SIGN
4333,4333,4487,042193,0421c3,"bit 7,h","bit 7,h","bit 7,h",fpp.asm,"BIT     7,H"
4334,4334,4488,042195,0421c5,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"EX      AF,AF'"
4335,4335,4489,042196,0421c6,"bit 7,h","bit 7,h","bit 7,h",fpp.asm,"BIT     7,H"
4336,4336,4490,042198,0421c8,"call nz,$042ada","call nz,$042b0a","call nz,$000000",fpp.asm,"CALL    NZ,NEGATE       ;MAKE ARGUMENTS +VE"
4337,4337,4491,04219c,0421cc,call $042bd7,call $042c07,call $000000,fpp.asm,CALL    SWAP_FP
4338,4338,4492,0421a0,0421d0,"bit 7,h","bit 7,h","bit 7,h",fpp.asm,"BIT     7,H"
4339,4339,4493,0421a2,0421d2,"call nz,$042ada","call nz,$042b0a","call nz,$000000",fpp.asm,"CALL    NZ,NEGATE"
4340,4340,4494,0421a6,0421d6,"ld b,h","ld b,h","ld b,h",fpp.asm,"LD      B,H"
4341,4341,4495,0421a7,0421d7,"ld c,l","ld c,l","ld c,l",fpp.asm,"LD      C,L"
4342,4342,4496,0421a8,0421d8,"ld hl,$000000","ld hl,$000000","ld hl,$000000",fpp.asm,"LD      HL,0"
4343,4343,4497,0421ac,0421dc,exx,exx,exx,fpp.asm,EXX
4344,4344,4498,0421ad,0421dd,"ld b,h","ld b,h","ld b,h",fpp.asm,"LD      B,H"
4345,4345,4499,0421ae,0421de,"ld c,l","ld c,l","ld c,l",fpp.asm,"LD      C,L"
4346,4346,4500,0421af,0421df,"ld hl,$000000","ld hl,$000000","ld hl,$000000",fpp.asm,"LD      HL,0"
4347,4347,4501,0421b3,0421e3,"ld a,$df","ld a,$df","ld a,$00",fpp.asm,"LD      A,-33"
4348,4348,4502,0421b5,0421e5,call $042d64,call $042d94,call $000000,fpp.asm,CALL    DIVA            ;DIVIDE
4349,4349,4503,0421b9,0421e9,exx,exx,exx,fpp.asm,EXX
4350,4350,4504,0421ba,0421ea,"ld c,$00","ld c,$00","ld c,$00",fpp.asm,"LD      C,0             ;INTEGER MARKER"
4351,4351,4505,0421bc,0421ec,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"EX      AF,AF'"
4352,4352,4506,0421bd,0421ed,ret z,ret z,ret z,fpp.asm,RET     Z
4353,4353,4507,0421be,0421ee,jp $042ada,jp $042b0a,jp $000000,fpp.asm,JP      NEGATE
4354,4354,4508,0421c2,0421f2,call $042abe,call $042aee,call $000000,fpp.asm,FBDIV:			CALL    FIX2
4355,4355,4509,0421c6,0421f6,call $042191,call $0421c1,call $000000,fpp.asm,IBDIV:			CALL    IMOD
4356,4356,4510,0421ca,0421fa,or a,or a,or a,fpp.asm,OR      A
4357,4357,4511,0421cb,0421fb,call $042bd7,call $042c07,call $000000,fpp.asm,CALL    SWAP_FP
4358,4358,4512,0421cf,0421ff,"ld c,$00","ld c,$00","ld c,$00",fpp.asm,"LD      C,0"
4359,4359,4513,0421d1,042201,ret p,ret p,ret p,fpp.asm,RET     P
4360,4360,4514,0421d2,042202,jp $042ada,jp $042b0a,jp $000000,fpp.asm,JP      NEGATE
4361,4361,4515,0421d6,042206,call $042c72,call $042ca2,call $000000,fpp.asm,ISUB:			CALL    SUB_
4362,4362,4516,0421da,04220a,ret po,ret po,ret po,fpp.asm,RET     PO
4363,4363,4517,0421db,04220b,call $042c6a,call $042c9a,call $000000,fpp.asm,CALL    ADD_
4364,4364,4518,0421df,04220f,call $042b9a,call $042bca,call $000000,fpp.asm,CALL    FLOAT2
4365,4365,4519,0421e3,042213,"ld a,d","ld a,d","ld a,d",fpp.asm,"FSUB:			LD      A,D"
4366,4366,4520,0421e4,042214,xor $80,xor $80,xor $00,fpp.asm,XOR     80H             ;CHANGE SIGN THEN ADD
4367,4367,4521,0421e6,042216,"ld d,a","ld d,a","ld d,a",fpp.asm,"LD      D,A"
4368,4368,4522,0421e7,042217,jr $+$15,jr $+$15,jr $+$00,fpp.asm,JR      FADD
4369,4369,4523,0421e9,042219,"ld a,h","ld a,h","ld a,h",fpp.asm,"RSUB:			LD      A,H"
4370,4370,4524,0421ea,04221a,xor $80,xor $80,xor $00,fpp.asm,XOR     80H
4371,4371,4525,0421ec,04221c,"ld h,a","ld h,a","ld h,a",fpp.asm,"LD      H,A"
4372,4372,4526,0421ed,04221d,jr $+$0f,jr $+$0f,jr $+$00,fpp.asm,JR      FADD
4373,4373,4527,0421ef,04221f,call $042c6a,call $042c9a,call $000000,fpp.asm,IADD:			CALL    ADD_
4374,4374,4528,0421f3,042223,ret po,ret po,ret po,fpp.asm,RET     PO
4375,4375,4529,0421f4,042224,call $042c72,call $042ca2,call $000000,fpp.asm,CALL    SUB_
4376,4376,4530,0421f8,042228,call $042b9a,call $042bca,call $000000,fpp.asm,CALL    FLOAT2
4377,4377,4531,0421fc,04222c,dec b,dec b,dec b,fpp.asm,FADD:			DEC     B
4378,4378,4532,0421fd,04222d,inc b,inc b,inc b,fpp.asm,INC     B
4379,4379,4533,0421fe,04222e,ret z,ret z,ret z,fpp.asm,RET     Z               ;ARG 2 ZERO
4380,4380,4534,0421ff,04222f,dec c,dec c,dec c,fpp.asm,DEC     C
4381,4381,4535,042200,042230,inc c,inc c,inc c,fpp.asm,INC     C
4382,4382,4536,042201,042231,"jp z,$042bd7","jp z,$042c07","jp z,$000000",fpp.asm,"JP      Z,SWAP_FP          ;ARG 1 ZERO"
4383,4383,4537,042205,042235,exx,exx,exx,fpp.asm,EXX
4384,4384,4538,042206,042236,"ld bc,$000000","ld bc,$000000","ld bc,$000000",fpp.asm,"LD      BC,0            ;INITIALISE"
4385,4385,4539,04220a,04223a,exx,exx,exx,fpp.asm,EXX
4386,4386,4540,04220b,04223b,"ld a,h","ld a,h","ld a,h",fpp.asm,"LD      A,H"
4387,4387,4541,04220c,04223c,xor d,xor d,xor d,fpp.asm,XOR     D               ;XOR SIGNS
4388,4388,4542,04220d,04223d,push af,push af,push af,fpp.asm,PUSH    AF
4389,4389,4543,04220e,04223e,"ld a,b","ld a,b","ld a,b",fpp.asm,"LD      A,B"
4390,4390,4544,04220f,04223f,cp c,cp c,cp c,fpp.asm,CP      C               ;COMPARE EXPONENTS
4391,4391,4545,042210,042240,"call c,$042bd7","call c,$042c07","call c,$000000",fpp.asm,"CALL    C,SWAP_FP          ;MAKE DED'E'B LARGEST"
4392,4392,4546,042214,042244,"ld a,b","ld a,b","ld a,b",fpp.asm,"LD      A,B"
4393,4393,4547,042215,042245,"set 7,h","set 7,h","set 7,h",fpp.asm,"SET     7,H             ;IMPLIED 1"
4394,4394,4548,042217,042247,"call nz,$042aab","call nz,$042adb","call nz,$000000",fpp.asm,"CALL    NZ,FIX          ;ALIGN"
4395,4395,4549,04221b,04224b,pop af,pop af,pop af,fpp.asm,POP     AF
4396,4396,4550,04221c,04224c,"ld a,d","ld a,d","ld a,d",fpp.asm,"LD      A,D             ;SIGN OF LARGER"
4397,4397,4551,04221d,04224d,"set 7,d","set 7,d","set 7,d",fpp.asm,"SET     7,D             ;IMPLIED 1"
4398,4398,4552,04221f,04224f,"jp m,$04222f","jp m,$04225f","jp m,$000000",fpp.asm,"JP      M,FADD3         ;SIGNS DIFFERENT"
4399,4399,4553,042223,042253,call $042c6a,call $042c9a,call $000000,fpp.asm,CALL    ADD_             ;HLH'L'=HLH'L'+DED'E'
4400,4400,4554,042227,042257,"call c,$042bdf","call c,$042c0f","call c,$000000",fpp.asm,"CALL    C,DIV2          ;NORMALISE"
4401,4401,4555,04222b,04225b,"set 7,h","set 7,h","set 7,h",fpp.asm,"SET     7,H"
4402,4402,4556,04222d,04225d,jr $+$0f,jr $+$0f,jr $+$00,fpp.asm,JR      FADD4
4403,4403,4557,04222f,04225f,call $042c72,call $042ca2,call $000000,fpp.asm,FADD3:			CALL    SUB_             ;HLH'L'=HLH'L'-DED'E'
4404,4404,4558,042233,042263,"call c,$042af2","call c,$042b22","call c,$000000",fpp.asm,"CALL    C,NEG_           ;NEGATE HLH'L'B'C'"
4405,4405,4559,042237,042267,call $042b71,call $042ba1,call $000000,fpp.asm,CALL    FLO48
4406,4406,4560,04223b,04226b,cpl,cpl,cpl,fpp.asm,CPL                     ;CHANGE RESULT SIGN
4407,4407,4561,04223c,04226c,exx,exx,exx,fpp.asm,FADD4:			EXX
4408,4408,4562,04223d,04226d,"ex de,hl","ex de,hl","ex de,hl",fpp.asm,"EX      DE,HL"
4409,4409,4563,04223e,04226e,"ld hl,$008000","ld hl,$008000","ld hl,$000000",fpp.asm,"LD      HL,8000H"
4410,4410,4564,042242,042272,or a,or a,or a,fpp.asm,OR      A               ;CLEAR CARRY
4411,4411,4565,042243,042273,"sbc.sil hl,bc","sbc.sil hl,bc","sbc.sil hl,bc",fpp.asm,"SBC.S   HL,BC"
4412,4412,4566,042246,042276,"ex de,hl","ex de,hl","ex de,hl",fpp.asm,"EX      DE,HL"
4413,4413,4567,042247,042277,exx,exx,exx,fpp.asm,EXX
4414,4414,4568,042248,042278,"call z,$042bd1","call z,$042c01","call z,$000000",fpp.asm,"CALL    Z,ODD           ;ROUND UNBIASSED"
4415,4415,4569,04224c,04227c,"call c,$042bbf","call c,$042bef","call c,$000000",fpp.asm,"CALL    C,ADD1_FP          ;ROUND UP"
4416,4416,4570,042250,042280,"call c,$042bec","call c,$042c1c","call c,$000000",fpp.asm,"CALL    C,INCC"
4417,4417,4571,042254,042284,"res 7,h","res 7,h","res 7,h",fpp.asm,"RES     7,H"
4418,4418,4572,042256,042286,dec c,dec c,dec c,fpp.asm,DEC     C
4419,4419,4573,042257,042287,inc c,inc c,inc c,fpp.asm,INC     C
4420,4420,4574,042258,042288,"jp z,$042c23","jp z,$042c53","jp z,$000000",fpp.asm,"JP      Z,ZERO_FP"
4421,4421,4575,04225c,04228c,or a,or a,or a,fpp.asm,OR      A               ;RESULT SIGNQ
4422,4422,4576,04225d,04228d,ret p,ret p,ret p,fpp.asm,RET     P               ;POSITIVE
4423,4423,4577,04225e,04228e,"set 7,h","set 7,h","set 7,h",fpp.asm,"SET     7,H             ;NEGATIVE"
4424,4424,4578,042260,042290,ret,ret,ret,fpp.asm,RET
4425,4425,4579,042261,042291,call $042b9a,call $042bca,call $000000,fpp.asm,IDIV:			CALL    FLOAT2
4426,4426,4580,042265,042295,dec b,dec b,dec b,fpp.asm,FDIV:			DEC     B               ;TEST FOR ZERO
4427,4427,4581,042266,042296,inc b,inc b,inc b,fpp.asm,INC     B
4428,4428,4582,042267,042297,"ld a,$12","ld a,$12","ld a,$00",fpp.asm,"LD      A,DIVBY0"
4429,4429,4583,042269,042299,"jp z,$04207d","jp z,$0420ad","jp z,$000000",fpp.asm,"JP      Z,ERROR_FP_         ;""Division by zero"""
4430,4430,4584,04226d,04229d,dec c,dec c,dec c,fpp.asm,DEC     C               ;TEST FOR ZERO
4431,4431,4585,04226e,04229e,inc c,inc c,inc c,fpp.asm,INC     C
4432,4432,4586,04226f,04229f,ret z,ret z,ret z,fpp.asm,RET     Z
4433,4433,4587,042270,0422a0,"ld a,h","ld a,h","ld a,h",fpp.asm,"LD      A,H"
4434,4434,4588,042271,0422a1,xor d,xor d,xor d,fpp.asm,XOR     D               ;CALC. RESULT SIGN
4435,4435,4589,042272,0422a2,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"EX      AF,AF'          ;SAVE SIGN"
4436,4436,4590,042273,0422a3,"set 7,d","set 7,d","set 7,d",fpp.asm,"SET     7,D             ;REPLACE IMPLIED 1's"
4437,4437,4591,042275,0422a5,"set 7,h","set 7,h","set 7,h",fpp.asm,"SET     7,H"
4438,4438,4592,042277,0422a7,push bc,push bc,push bc,fpp.asm,PUSH    BC              ;SAVE EXPONENTS
4439,4439,4593,042278,0422a8,"ld b,d","ld b,d","ld b,d",fpp.asm,"LD      B,D             ;LOAD REGISTERS"
4440,4440,4594,042279,0422a9,"ld c,e","ld c,e","ld c,e",fpp.asm,"LD      C,E"
4441,4441,4595,04227a,0422aa,"ld de,$000000","ld de,$000000","ld de,$000000",fpp.asm,"LD      DE,0"
4442,4442,4596,04227e,0422ae,exx,exx,exx,fpp.asm,EXX
4443,4443,4597,04227f,0422af,"ld b,d","ld b,d","ld b,d",fpp.asm,"LD      B,D"
4444,4444,4598,042280,0422b0,"ld c,e","ld c,e","ld c,e",fpp.asm,"LD      C,E"
4445,4445,4599,042281,0422b1,"ld de,$000000","ld de,$000000","ld de,$000000",fpp.asm,"LD      DE,0"
4446,4446,4600,042285,0422b5,"ld a,$e0","ld a,$e0","ld a,$00",fpp.asm,"LD      A,-32           ;LOOP COUNTER"
4447,4447,4601,042287,0422b7,call $042d64,call $042d94,call $000000,fpp.asm,CALL    DIVA            ;DIVIDE
4448,4448,4602,04228b,0422bb,exx,exx,exx,fpp.asm,EXX
4449,4449,4603,04228c,0422bc,"bit 7,d","bit 7,d","bit 7,d",fpp.asm,"BIT     7,D"
4450,4450,4604,04228e,0422be,exx,exx,exx,fpp.asm,EXX
4451,4451,4605,04228f,0422bf,"call z,$042d83","call z,$042db3","call z,$000000",fpp.asm,"CALL    Z,DIVB          ;NORMALISE & INC A"
4452,4452,4606,042293,0422c3,"ex de,hl","ex de,hl","ex de,hl",fpp.asm,"EX      DE,HL"
4453,4453,4607,042294,0422c4,exx,exx,exx,fpp.asm,EXX
4454,4454,4608,042295,0422c5,srl b,srl b,srl b,fpp.asm,SRL     B               ;DIVISOR/2
4455,4455,4609,042297,0422c7,rr c,rr c,rr c,fpp.asm,RR      C
4456,4456,4610,042299,0422c9,or a,or a,or a,fpp.asm,OR      A               ;CLEAR CARRY
4457,4457,4611,04229a,0422ca,"sbc.sil hl,bc","sbc.sil hl,bc","sbc.sil hl,bc",fpp.asm,"SBC.S   HL,BC           ;REMAINDER-DIVISOR/2"
4458,4458,4612,04229d,0422cd,ccf,ccf,ccf,fpp.asm,CCF
4459,4459,4613,04229e,0422ce,"ex de,hl","ex de,hl","ex de,hl",fpp.asm,"EX      DE,HL           ;RESULT IN HLH'L'"
4460,4460,4614,04229f,0422cf,"call z,$042bd1","call z,$042c01","call z,$000000",fpp.asm,"CALL    Z,ODD           ;ROUND UNBIASSED"
4461,4461,4615,0422a3,0422d3,"call c,$042bbf","call c,$042bef","call c,$000000",fpp.asm,"CALL    C,ADD1_FP          ;ROUND UP"
4462,4462,4616,0422a7,0422d7,pop bc,pop bc,pop bc,fpp.asm,POP     BC              ;RESTORE EXPONENTS
4463,4463,4617,0422a8,0422d8,"call c,$042bec","call c,$042c1c","call c,$000000",fpp.asm,"CALL    C,INCC"
4464,4464,4618,0422ac,0422dc,rra,rra,rra,fpp.asm,RRA                     ;LSB OF A TO CARRY
4465,4465,4619,0422ad,0422dd,"ld a,c","ld a,c","ld a,c",fpp.asm,"LD      A,C             ;COMPUTE NEW EXPONENT"
4466,4466,4620,0422ae,0422de,"sbc a,b","sbc a,b","sbc a,b",fpp.asm,"SBC     A,B"
4467,4467,4621,0422af,0422df,ccf,ccf,ccf,fpp.asm,CCF
4468,4468,4622,0422b0,0422e0,jp $042351,jp $042381,jp $000000,fpp.asm,JP      CHKOVF
4469,4469,4623,0422b4,0422e4,"ld a,h","ld a,h","ld a,h",fpp.asm,"IMUL:			LD      A,H"
4470,4470,4624,0422b5,0422e5,xor d,xor d,xor d,fpp.asm,XOR     D
4471,4471,4625,0422b6,0422e6,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"EX      AF,AF'          ;SAVE RESULT SIGN"
4472,4472,4626,0422b7,0422e7,"bit 7,h","bit 7,h","bit 7,h",fpp.asm,"BIT     7,H"
4473,4473,4627,0422b9,0422e9,"call nz,$042ada","call nz,$042b0a","call nz,$000000",fpp.asm,"CALL    NZ,NEGATE"
4474,4474,4628,0422bd,0422ed,call $042bd7,call $042c07,call $000000,fpp.asm,CALL    SWAP_FP
4475,4475,4629,0422c1,0422f1,"bit 7,h","bit 7,h","bit 7,h",fpp.asm,"BIT     7,H"
4476,4476,4630,0422c3,0422f3,"call nz,$042ada","call nz,$042b0a","call nz,$000000",fpp.asm,"CALL    NZ,NEGATE"
4477,4477,4631,0422c7,0422f7,"ld b,h","ld b,h","ld b,h",fpp.asm,"LD      B,H"
4478,4478,4632,0422c8,0422f8,"ld c,l","ld c,l","ld c,l",fpp.asm,"LD      C,L"
4479,4479,4633,0422c9,0422f9,"ld hl,$000000","ld hl,$000000","ld hl,$000000",fpp.asm,"LD      HL,0"
4480,4480,4634,0422cd,0422fd,exx,exx,exx,fpp.asm,EXX
4481,4481,4635,0422ce,0422fe,"ld b,h","ld b,h","ld b,h",fpp.asm,"LD      B,H"
4482,4482,4636,0422cf,0422ff,"ld c,l","ld c,l","ld c,l",fpp.asm,"LD      C,L"
4483,4483,4637,0422d0,042300,"ld hl,$000000","ld hl,$000000","ld hl,$000000",fpp.asm,"LD      HL,0"
4484,4484,4638,0422d4,042304,"ld a,$df","ld a,$df","ld a,$00",fpp.asm,"LD      A,-33"
4485,4485,4639,0422d6,042306,call $042d9b,call $042dcb,call $000000,fpp.asm,CALL    MULA            ;MULTIPLY
4486,4486,4640,0422da,04230a,exx,exx,exx,fpp.asm,EXX
4487,4487,4641,0422db,04230b,"ld c,$bf","ld c,$bf","ld c,$00",fpp.asm,"LD      C,191           ;PRESET EXPONENT"
4488,4488,4642,0422dd,04230d,call $042bff,call $042c2f,call $000000,fpp.asm,CALL    TEST_FP            ;TEST RANGE
4489,4489,4643,0422e1,042311,"jr nz,$+$11","jr nz,$+$11","jr nz,$+$00",fpp.asm,"JR      NZ,IMUL1        ;TOO BIG"
4490,4490,4644,0422e3,042313,"bit 7,d","bit 7,d","bit 7,d",fpp.asm,"BIT     7,D"
4491,4491,4645,0422e5,042315,"jr nz,$+$0d","jr nz,$+$0d","jr nz,$+$00",fpp.asm,"JR      NZ,IMUL1"
4492,4492,4646,0422e7,042317,call $042bd7,call $042c07,call $000000,fpp.asm,CALL    SWAP_FP
4493,4493,4647,0422eb,04231b,"ld c,d","ld c,d","ld c,d",fpp.asm,"LD      C,D             ;INTEGER MARKER"
4494,4494,4648,0422ec,04231c,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"EX      AF,AF'"
4495,4495,4649,0422ed,04231d,ret p,ret p,ret p,fpp.asm,RET     P
4496,4496,4650,0422ee,04231e,jp $042ada,jp $042b0a,jp $000000,fpp.asm,JP      NEGATE
4497,4497,4651,0422f2,042322,dec c,dec c,dec c,fpp.asm,IMUL1:			DEC     C
4498,4498,4652,0422f3,042323,exx,exx,exx,fpp.asm,EXX
4499,4499,4653,0422f4,042324,sla e,sla e,sla e,fpp.asm,SLA     E
4500,4500,4654,0422f6,042326,rl d,rl d,rl d,fpp.asm,RL      D
4501,4501,4655,0422f8,042328,exx,exx,exx,fpp.asm,EXX
4502,4502,4656,0422f9,042329,rl e,rl e,rl e,fpp.asm,RL      E
4503,4503,4657,0422fb,04232b,rl d,rl d,rl d,fpp.asm,RL      D
4504,4504,4658,0422fd,04232d,exx,exx,exx,fpp.asm,EXX
4505,4505,4659,0422fe,04232e,"adc.sil hl,hl","adc.sil hl,hl","adc.sil hl,hl",fpp.asm,"ADC.S   HL,HL"
4506,4506,4660,042301,042331,exx,exx,exx,fpp.asm,EXX
4507,4507,4661,042302,042332,"adc.sil hl,hl","adc.sil hl,hl","adc.sil hl,hl",fpp.asm,"ADC.S   HL,HL"
4508,4508,4662,042305,042335,"jp p,$0422f2","jp p,$042322","jp p,$000000",fpp.asm,"JP      P,IMUL1         ;NORMALISE"
4509,4509,4663,042309,042339,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"EX      AF,AF'"
4510,4510,4664,04230a,04233a,ret m,ret m,ret m,fpp.asm,RET     M
4511,4511,4665,04230b,04233b,"res 7,h","res 7,h","res 7,h",fpp.asm,"RES     7,H             ;POSITIVE"
4512,4512,4666,04230d,04233d,ret,ret,ret,fpp.asm,RET
4513,4513,4667,04230e,04233e,dec b,dec b,dec b,fpp.asm,FMUL:			DEC     B               ;TEST FOR ZERO
4514,4514,4668,04230f,04233f,inc b,inc b,inc b,fpp.asm,INC     B
4515,4515,4669,042310,042340,"jp z,$042c23","jp z,$042c53","jp z,$000000",fpp.asm,"JP      Z,ZERO_FP"
4516,4516,4670,042314,042344,dec c,dec c,dec c,fpp.asm,DEC     C               ;TEST FOR ZERO
4517,4517,4671,042315,042345,inc c,inc c,inc c,fpp.asm,INC     C
4518,4518,4672,042316,042346,ret z,ret z,ret z,fpp.asm,RET     Z
4519,4519,4673,042317,042347,"ld a,h","ld a,h","ld a,h",fpp.asm,"LD      A,H"
4520,4520,4674,042318,042348,xor d,xor d,xor d,fpp.asm,XOR     D               ;CALC. RESULT SIGN
4521,4521,4675,042319,042349,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"EX      AF,AF'"
4522,4522,4676,04231a,04234a,"set 7,d","set 7,d","set 7,d",fpp.asm,"SET     7,D             ;REPLACE IMPLIED 1's"
4523,4523,4677,04231c,04234c,"set 7,h","set 7,h","set 7,h",fpp.asm,"SET     7,H"
4524,4524,4678,04231e,04234e,push bc,push bc,push bc,fpp.asm,PUSH    BC              ;SAVE EXPONENTS
4525,4525,4679,04231f,04234f,"ld b,h","ld b,h","ld b,h",fpp.asm,"LD      B,H             ;LOAD REGISTERS"
4526,4526,4680,042320,042350,"ld c,l","ld c,l","ld c,l",fpp.asm,"LD      C,L"
4527,4527,4681,042321,042351,"ld hl,$000000","ld hl,$000000","ld hl,$000000",fpp.asm,"LD      HL,0"
4528,4528,4682,042325,042355,exx,exx,exx,fpp.asm,EXX
4529,4529,4683,042326,042356,"ld b,h","ld b,h","ld b,h",fpp.asm,"LD      B,H"
4530,4530,4684,042327,042357,"ld c,l","ld c,l","ld c,l",fpp.asm,"LD      C,L"
4531,4531,4685,042328,042358,"ld hl,$000000","ld hl,$000000","ld hl,$000000",fpp.asm,"LD      HL,0"
4532,4532,4686,04232c,04235c,"ld a,$e0","ld a,$e0","ld a,$00",fpp.asm,"LD      A,-32           ;LOOP COUNTER"
4533,4533,4687,04232e,04235e,call $042d9b,call $042dcb,call $000000,fpp.asm,CALL    MULA            ;MULTIPLY
4534,4534,4688,042332,042362,"call c,$042db1","call c,$042de1","call c,$000000",fpp.asm,"CALL    C,MULB          ;NORMALISE & INC A"
4535,4535,4689,042336,042366,exx,exx,exx,fpp.asm,EXX
4536,4536,4690,042337,042367,push hl,push hl,push hl,fpp.asm,PUSH    HL
4537,4537,4691,042338,042368,"ld hl,$008000","ld hl,$008000","ld hl,$000000",fpp.asm,"LD      HL,8000H"
4538,4538,4692,04233c,04236c,or a,or a,or a,fpp.asm,OR      A               ;CLEAR CARRY
4539,4539,4693,04233d,04236d,"sbc.sil hl,de","sbc.sil hl,de","sbc.sil hl,de",fpp.asm,"SBC.S   HL,DE"
4540,4540,4694,042340,042370,pop hl,pop hl,pop hl,fpp.asm,POP     HL
4541,4541,4695,042341,042371,"call z,$042bd1","call z,$042c01","call z,$000000",fpp.asm,"CALL    Z,ODD           ;ROUND UNBIASSED"
4542,4542,4696,042345,042375,"call c,$042bbf","call c,$042bef","call c,$000000",fpp.asm,"CALL    C,ADD1_FP          ;ROUND UP"
4543,4543,4697,042349,042379,pop bc,pop bc,pop bc,fpp.asm,POP     BC              ;RESTORE EXPONENTS
4544,4544,4698,04234a,04237a,"call c,$042bec","call c,$042c1c","call c,$000000",fpp.asm,"CALL    C,INCC"
4545,4545,4699,04234e,04237e,rra,rra,rra,fpp.asm,RRA                     ;LSB OF A TO CARRY
4546,4546,4700,04234f,04237f,"ld a,c","ld a,c","ld a,c",fpp.asm,"LD      A,C             ;COMPUTE NEW EXPONENT"
4547,4547,4701,042350,042380,"adc a,b","adc a,b","adc a,b",fpp.asm,"ADC     A,B"
4548,4548,4702,042351,042381,"jr c,$+$08","jr c,$+$08","jr c,$+$00",fpp.asm,"CHKOVF:			JR      C,CHKO1"
4549,4549,4703,042353,042383,"jp p,$042c23","jp p,$042c53","jp p,$000000",fpp.asm,"JP      P,ZERO_FP          ;UNDERFLOW"
4550,4550,4704,042357,042387,jr $+$06,jr $+$06,jr $+$00,fpp.asm,JR      CHKO2
4551,4551,4705,042359,042389,"jp m,$042bee","jp m,$042c1e","jp m,$000000",fpp.asm,"CHKO1:			JP      M,OFLOW         ;OVERFLOW"
4552,4552,4706,04235d,04238d,"add a,$80","add a,$80","add a,$00",fpp.asm,"CHKO2:			ADD     A,80H"
4553,4553,4707,04235f,04238f,"ld c,a","ld c,a","ld c,a",fpp.asm,"LD      C,A"
4554,4554,4708,042360,042390,"jp z,$042c23","jp z,$042c53","jp z,$000000",fpp.asm,"JP      Z,ZERO_FP"
4555,4555,4709,042364,042394,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"EX      AF,AF'          ;RESTORE SIGN BIT"
4556,4556,4710,042365,042395,"res 7,h","res 7,h","res 7,h",fpp.asm,"RES     7,H"
4557,4557,4711,042367,042397,ret p,ret p,ret p,fpp.asm,RET     P
4558,4558,4712,042368,042398,"set 7,h","set 7,h","set 7,h",fpp.asm,"SET     7,H"
4559,4559,4713,04236a,04239a,ret,ret,ret,fpp.asm,RET
4560,4560,4714,04236b,04239b,call $042bd7,call $042c07,call $000000,fpp.asm,IPOW:			CALL    SWAP_FP
4561,4561,4715,04236f,04239f,"bit 7,h","bit 7,h","bit 7,h",fpp.asm,"BIT     7,H"
4562,4562,4716,042371,0423a1,push af,push af,push af,fpp.asm,PUSH    AF              ;SAVE SIGN
4563,4563,4717,042372,0423a2,"call nz,$042ada","call nz,$042b0a","call nz,$000000",fpp.asm,"CALL    NZ,NEGATE"
4564,4564,4718,042376,0423a6,"ld c,b","ld c,b","ld c,b",fpp.asm,"IPOW0:			LD      C,B"
4565,4565,4719,042377,0423a7,"ld b,$20","ld b,$20","ld b,$00",fpp.asm,"LD      B,32            ;LOOP COUNTER"
4566,4566,4720,042379,0423a9,call $042c8f,call $042cbf,call $000000,fpp.asm,IPOW1:			CALL    X2
4567,4567,4721,04237d,0423ad,"jr c,$+$0a","jr c,$+$0a","jr c,$+$00",fpp.asm,"JR      C,IPOW2"
4568,4568,4722,04237f,0423af,djnz $-$06,djnz $-$06,djnz $-$00,fpp.asm,DJNZ    IPOW1
4569,4569,4723,042381,0423b1,pop af,pop af,pop af,fpp.asm,POP     AF
4570,4570,4724,042382,0423b2,exx,exx,exx,fpp.asm,EXX
4571,4571,4725,042383,0423b3,inc l,inc l,inc l,fpp.asm,INC     L               ;RESULT=1
4572,4572,4726,042384,0423b4,exx,exx,exx,fpp.asm,EXX
4573,4573,4727,042385,0423b5,"ld c,h","ld c,h","ld c,h",fpp.asm,"LD      C,H"
4574,4574,4728,042386,0423b6,ret,ret,ret,fpp.asm,RET
4575,4575,4729,042387,0423b7,pop af,pop af,pop af,fpp.asm,IPOW2:			POP     AF
4576,4576,4730,042388,0423b8,push bc,push bc,push bc,fpp.asm,PUSH    BC
4577,4577,4731,042389,0423b9,"ex de,hl","ex de,hl","ex de,hl",fpp.asm,"EX      DE,HL"
4578,4578,4732,04238a,0423ba,push hl,push hl,push hl,fpp.asm,PUSH    HL
4579,4579,4733,04238b,0423bb,exx,exx,exx,fpp.asm,EXX
4580,4580,4734,04238c,0423bc,"ex de,hl","ex de,hl","ex de,hl",fpp.asm,"EX      DE,HL"
4581,4581,4735,04238d,0423bd,push hl,push hl,push hl,fpp.asm,PUSH    HL
4582,4582,4736,04238e,0423be,exx,exx,exx,fpp.asm,EXX
4583,4583,4737,04238f,0423bf,"ld ix,$000000","ld ix,$000000","ld ix,$000000",fpp.asm,"LD      IX,0"
4584,4584,4738,042394,0423c4,"add ix,sp","add ix,sp","add ix,sp",fpp.asm,"ADD     IX,SP"
4585,4585,4739,042396,0423c6,"jr z,$+$4a","jr z,$+$4a","jr z,$+$00",fpp.asm,"JR      Z,IPOW4"
4586,4586,4740,042398,0423c8,push bc,push bc,push bc,fpp.asm,PUSH    BC
4587,4587,4741,042399,0423c9,exx,exx,exx,fpp.asm,EXX
4588,4588,4742,04239a,0423ca,push de,push de,push de,fpp.asm,PUSH    DE
4589,4589,4743,04239b,0423cb,exx,exx,exx,fpp.asm,EXX
4590,4590,4744,04239c,0423cc,push de,push de,push de,fpp.asm,PUSH    DE
4591,4591,4745,04239d,0423cd,call $042ba6,call $042bd6,call $000000,fpp.asm,CALL    SFLOAT_FP
4592,4592,4746,0423a1,0423d1,call $0426da,call $04270a,call $000000,fpp.asm,CALL    RECIP
4593,4593,4747,0423a5,0423d5,"ld (ix+$04),c","ld (ix+$04),c","ld (ix+$00),c",fpp.asm,"LD      (IX+4),C"
4594,4594,4748,0423a8,0423d8,exx,exx,exx,fpp.asm,EXX
4595,4595,4749,0423a9,0423d9,"ld (ix),l","ld (ix),l","ld (ix),l",fpp.asm,"LD      (IX+0),L"
4596,4596,4750,0423ac,0423dc,"ld (ix+$01),h","ld (ix+$01),h","ld (ix+$00),h",fpp.asm,"LD      (IX+1),H"
4597,4597,4751,0423af,0423df,exx,exx,exx,fpp.asm,EXX
4598,4598,4752,0423b0,0423e0,"ld (ix+$02),l","ld (ix+$02),l","ld (ix+$00),l",fpp.asm,"LD      (IX+2),L"
4599,4599,4753,0423b3,0423e3,"ld (ix+$03),h","ld (ix+$03),h","ld (ix+$00),h",fpp.asm,"LD      (IX+3),H"
4600,4600,4754,0423b6,0423e6,jr $+$23,jr $+$23,jr $+$00,fpp.asm,JR      IPOW5
4601,4601,4755,0423b8,0423e8,push bc,push bc,push bc,fpp.asm,IPOW3:			PUSH    BC
4602,4602,4756,0423b9,0423e9,exx,exx,exx,fpp.asm,EXX
4603,4603,4757,0423ba,0423ea,sla e,sla e,sla e,fpp.asm,SLA     E
4604,4604,4758,0423bc,0423ec,rl d,rl d,rl d,fpp.asm,RL      D
4605,4605,4759,0423be,0423ee,push de,push de,push de,fpp.asm,PUSH    DE
4606,4606,4760,0423bf,0423ef,exx,exx,exx,fpp.asm,EXX
4607,4607,4761,0423c0,0423f0,rl e,rl e,rl e,fpp.asm,RL      E
4608,4608,4762,0423c2,0423f2,rl d,rl d,rl d,fpp.asm,RL      D
4609,4609,4763,0423c4,0423f4,push de,push de,push de,fpp.asm,PUSH    DE
4610,4610,4764,0423c5,0423f5,"ld a,$0a","ld a,$0a","ld a,$00",fpp.asm,"LD      A,'*' & 0FH"
4611,4611,4765,0423c7,0423f7,push af,push af,push af,fpp.asm,PUSH    AF
4612,4612,4766,0423c8,0423f8,call $042ca3,call $042cd3,call $000000,fpp.asm,CALL    COPY_
4613,4613,4767,0423cc,0423fc,call $042083,call $0420b3,call $000000,fpp.asm,CALL    OP              ;SQUARE
4614,4614,4768,0423d0,042400,pop af,pop af,pop af,fpp.asm,POP     AF
4615,4615,4769,0423d1,042401,call $0429cf,call $0429ff,call $000000,fpp.asm,CALL    DLOAD5
4616,4616,4770,0423d5,042405,"call c,$042083","call c,$0420b3","call c,$000000",fpp.asm,"CALL    C,OP            ;MULTIPLY BY X"
4617,4617,4771,0423d9,042409,pop de,pop de,pop de,fpp.asm,IPOW5:			POP     DE
4618,4618,4772,0423da,04240a,exx,exx,exx,fpp.asm,EXX
4619,4619,4773,0423db,04240b,pop de,pop de,pop de,fpp.asm,POP     DE
4620,4620,4774,0423dc,04240c,exx,exx,exx,fpp.asm,EXX
4621,4621,4775,0423dd,04240d,"ld a,c","ld a,c","ld a,c",fpp.asm,"LD      A,C"
4622,4622,4776,0423de,04240e,pop bc,pop bc,pop bc,fpp.asm,POP     BC
4623,4623,4777,0423df,04240f,"ld c,a","ld c,a","ld c,a",fpp.asm,"LD      C,A"
4624,4624,4778,0423e0,042410,djnz $-$28,djnz $-$28,djnz $-$00,fpp.asm,IPOW4:			DJNZ    IPOW3
4625,4625,4779,0423e2,042412,pop af,pop af,pop af,fpp.asm,POP     AF
4626,4626,4780,0423e3,042413,pop af,pop af,pop af,fpp.asm,POP     AF
4627,4627,4781,0423e4,042414,pop af,pop af,pop af,fpp.asm,POP     AF
4628,4628,4782,0423e5,042415,ret,ret,ret,fpp.asm,RET
4629,4629,4783,0423e6,042416,pop af,pop af,pop af,fpp.asm,FPOW0:			POP     AF
4630,4630,4784,0423e7,042417,pop af,pop af,pop af,fpp.asm,POP     AF
4631,4631,4785,0423e8,042418,pop af,pop af,pop af,fpp.asm,POP     AF
4632,4632,4786,0423e9,042419,jr $-$73,jr $-$73,jr $-$00,fpp.asm,JR      IPOW0
4633,4633,4787,0423eb,04241b,"bit 7,d","bit 7,d","bit 7,d",fpp.asm,"FPOW:			BIT     7,D"
4634,4634,4788,0423ed,04241d,push af,push af,push af,fpp.asm,PUSH    AF
4635,4635,4789,0423ee,04241e,call $042bd7,call $042c07,call $000000,fpp.asm,CALL    SWAP_FP
4636,4636,4790,0423f2,042422,call $042cb3,call $042ce3,call $000000,fpp.asm,CALL    PUSH5
4637,4637,4791,0423f6,042426,dec c,dec c,dec c,fpp.asm,DEC     C
4638,4638,4792,0423f7,042427,inc c,inc c,inc c,fpp.asm,INC     C
4639,4639,4793,0423f8,042428,"jr z,$-$12","jr z,$-$12","jr z,$-$00",fpp.asm,"JR      Z,FPOW0"
4640,4640,4794,0423fa,04242a,"ld a,$9e","ld a,$9e","ld a,$00",fpp.asm,"LD      A,158"
4641,4641,4795,0423fc,04242c,cp c,cp c,cp c,fpp.asm,CP      C
4642,4642,4796,0423fd,04242d,"jr c,$+$0c","jr c,$+$0c","jr c,$+$00",fpp.asm,"JR      C,FPOW1"
4643,4643,4797,0423ff,04242f,inc a,inc a,inc a,fpp.asm,INC     A
4644,4644,4798,042400,042430,call $042aab,call $042adb,call $000000,fpp.asm,CALL    FIX
4645,4645,4799,042404,042434,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"EX      AF,AF'"
4646,4646,4800,042405,042435,"jp p,$0423e6","jp p,$042416","jp p,$000000",fpp.asm,"JP      P,FPOW0"
4647,4647,4801,042409,042439,call $042bd7,call $042c07,call $000000,fpp.asm,FPOW1:			CALL    SWAP_FP
4648,4648,4802,04240d,04243d,call $0426f7,call $042727,call $000000,fpp.asm,CALL    LN0
4649,4649,4803,042411,042441,call $042cbc,call $042cec,call $000000,fpp.asm,CALL    POP5
4650,4650,4804,042415,042445,pop af,pop af,pop af,fpp.asm,POP     AF
4651,4651,4805,042416,042446,call $04230e,call $04233e,call $000000,fpp.asm,CALL    FMUL
4652,4652,4806,04241a,04244a,jp $042659,jp $042689,jp $000000,fpp.asm,JP      EXP0
4653,4653,4807,04241e,04244e,call $042c2d,call $042c5d,call $000000,fpp.asm,FLT:			CALL    FCP
4654,4654,4808,042422,042452,jr $+$06,jr $+$06,jr $+$00,fpp.asm,JR      ILT1
4655,4655,4809,042424,042454,call $042c1f,call $042c4f,call $000000,fpp.asm,ILT:			CALL    ICP
4656,4656,4810,042428,042458,ret nc,ret nc,ret nc,fpp.asm,ILT1:			RET     NC
4657,4657,4811,042429,042459,jr $+$44,jr $+$44,jr $+$00,fpp.asm,JR      TRUE_FP
4658,4658,4812,04242b,04245b,call $042c2d,call $042c5d,call $000000,fpp.asm,FGT:			CALL    FCP
4659,4659,4813,04242f,04245f,jr $+$06,jr $+$06,jr $+$00,fpp.asm,JR      IGT1
4660,4660,4814,042431,042461,call $042c1f,call $042c4f,call $000000,fpp.asm,IGT:			CALL    ICP
4661,4661,4815,042435,042465,ret z,ret z,ret z,fpp.asm,IGT1:			RET     Z
4662,4662,4816,042436,042466,ret c,ret c,ret c,fpp.asm,RET     C
4663,4663,4817,042437,042467,jr $+$36,jr $+$36,jr $+$00,fpp.asm,JR      TRUE_FP
4664,4664,4818,042439,042469,call $042c2d,call $042c5d,call $000000,fpp.asm,FGE:			CALL    FCP
4665,4665,4819,04243d,04246d,jr $+$06,jr $+$06,jr $+$00,fpp.asm,JR      IGE1
4666,4666,4820,04243f,04246f,call $042c1f,call $042c4f,call $000000,fpp.asm,IGE:			CALL    ICP
4667,4667,4821,042443,042473,ret c,ret c,ret c,fpp.asm,IGE1:			RET     C
4668,4668,4822,042444,042474,jr $+$29,jr $+$29,jr $+$00,fpp.asm,JR      TRUE_FP
4669,4669,4823,042446,042476,call $042c2d,call $042c5d,call $000000,fpp.asm,FLE:			CALL    FCP
4670,4670,4824,04244a,04247a,jr $+$06,jr $+$06,jr $+$00,fpp.asm,JR      ILE1
4671,4671,4825,04244c,04247c,call $042c1f,call $042c4f,call $000000,fpp.asm,ILE:			CALL    ICP
4672,4672,4826,042450,042480,"jr z,$+$1d","jr z,$+$1d","jr z,$+$00",fpp.asm,"ILE1:			JR      Z,TRUE_FP"
4673,4673,4827,042452,042482,ret nc,ret nc,ret nc,fpp.asm,RET     NC
4674,4674,4828,042453,042483,jr $+$1a,jr $+$1a,jr $+$00,fpp.asm,JR      TRUE_FP
4675,4675,4829,042455,042485,call $042c2d,call $042c5d,call $000000,fpp.asm,FNE:			CALL    FCP
4676,4676,4830,042459,042489,jr $+$06,jr $+$06,jr $+$00,fpp.asm,JR      INE1
4677,4677,4831,04245b,04248b,call $042c1f,call $042c4f,call $000000,fpp.asm,INE:			CALL    ICP
4678,4678,4832,04245f,04248f,ret z,ret z,ret z,fpp.asm,INE1:			RET     Z
4679,4679,4833,042460,042490,jr $+$0d,jr $+$0d,jr $+$00,fpp.asm,JR      TRUE_FP
4680,4680,4834,042462,042492,call $042c2d,call $042c5d,call $000000,fpp.asm,FEQ:			CALL    FCP
4681,4681,4835,042466,042496,jr $+$06,jr $+$06,jr $+$00,fpp.asm,JR      IEQ1
4682,4682,4836,042468,042498,call $042c1f,call $042c4f,call $000000,fpp.asm,IEQ:			CALL    ICP
4683,4683,4837,04246c,04249c,ret nz,ret nz,ret nz,fpp.asm,IEQ1:			RET     NZ
4684,4684,4838,04246d,04249d,"ld hl,$ffffff","ld hl,$ffffff","ld hl,$000000",fpp.asm,"TRUE_FP:			LD      HL,-1"
4685,4685,4839,042471,0424a1,exx,exx,exx,fpp.asm,EXX
4686,4686,4840,042472,0424a2,"ld hl,$ffffff","ld hl,$ffffff","ld hl,$000000",fpp.asm,"LD      HL,-1"
4687,4687,4841,042476,0424a6,exx,exx,exx,fpp.asm,EXX
4688,4688,4842,042477,0424a7,xor a,xor a,xor a,fpp.asm,XOR     A
4689,4689,4843,042478,0424a8,"ld c,a","ld c,a","ld c,a",fpp.asm,"LD      C,A"
4690,4690,4844,042479,0424a9,ret,ret,ret,fpp.asm,RET
4691,4691,4845,04247a,0424aa,"bit 7,h","bit 7,h","bit 7,h",fpp.asm,"ABSV_FP:			BIT     7,H"
4692,4692,4846,04247c,0424ac,ret z,ret z,ret z,fpp.asm,RET     Z               ;POSITIVE/ZERO
4693,4693,4847,04247d,0424ad,dec c,dec c,dec c,fpp.asm,DEC     C
4694,4694,4848,04247e,0424ae,inc c,inc c,inc c,fpp.asm,INC     C
4695,4695,4849,04247f,0424af,"jp z,$042ada","jp z,$042b0a","jp z,$000000",fpp.asm,"JP      Z,NEGATE        ;INTEGER"
4696,4696,4850,042483,0424b3,"res 7,h","res 7,h","res 7,h",fpp.asm,"RES     7,H"
4697,4697,4851,042485,0424b5,ret,ret,ret,fpp.asm,RET
4698,4698,4852,042486,0424b6,call $042aca,call $042afa,call $000000,fpp.asm,NOTK_FP:			CALL    SFIX_FP
4699,4699,4853,04248a,0424ba,"ld a,h","ld a,h","ld a,h",fpp.asm,"LD      A,H"
4700,4700,4854,04248b,0424bb,cpl,cpl,cpl,fpp.asm,CPL
4701,4701,4855,04248c,0424bc,"ld h,a","ld h,a","ld h,a",fpp.asm,"LD      H,A"
4702,4702,4856,04248d,0424bd,"ld a,l","ld a,l","ld a,l",fpp.asm,"LD      A,L"
4703,4703,4857,04248e,0424be,cpl,cpl,cpl,fpp.asm,CPL
4704,4704,4858,04248f,0424bf,"ld l,a","ld l,a","ld l,a",fpp.asm,"LD      L,A"
4705,4705,4859,042490,0424c0,exx,exx,exx,fpp.asm,EXX
4706,4706,4860,042491,0424c1,"ld a,h","ld a,h","ld a,h",fpp.asm,"LD      A,H"
4707,4707,4861,042492,0424c2,cpl,cpl,cpl,fpp.asm,CPL
4708,4708,4862,042493,0424c3,"ld h,a","ld h,a","ld h,a",fpp.asm,"LD      H,A"
4709,4709,4863,042494,0424c4,"ld a,l","ld a,l","ld a,l",fpp.asm,"LD      A,L"
4710,4710,4864,042495,0424c5,cpl,cpl,cpl,fpp.asm,CPL
4711,4711,4865,042496,0424c6,"ld l,a","ld l,a","ld l,a",fpp.asm,"LD      L,A"
4712,4712,4866,042497,0424c7,exx,exx,exx,fpp.asm,EXX
4713,4713,4867,042498,0424c8,xor a,xor a,xor a,fpp.asm,XOR     A               ;NUMERIC MARKER
4714,4714,4868,042499,0424c9,ret,ret,ret,fpp.asm,RET
4715,4715,4869,04249a,0424ca,"ld hl,$00490f","ld hl,$00490f","ld hl,$000000",fpp.asm,"PI_FP:			LD      HL,490FH"
4716,4716,4870,04249e,0424ce,exx,exx,exx,fpp.asm,EXX
4717,4717,4871,04249f,0424cf,"ld hl,$00daa2","ld hl,$00daa2","ld hl,$000000",fpp.asm,"LD      HL,0DAA2H"
4718,4718,4872,0424a3,0424d3,exx,exx,exx,fpp.asm,EXX
4719,4719,4873,0424a4,0424d4,"ld c,$81","ld c,$81","ld c,$00",fpp.asm,"LD      C,81H"
4720,4720,4874,0424a6,0424d6,xor a,xor a,xor a,fpp.asm,XOR     A               ;NUMERIC MARKER
4721,4721,4875,0424a7,0424d7,ret,ret,ret,fpp.asm,RET
4722,4722,4876,0424a8,0424d8,call $0424bc,call $0424ec,call $000000,fpp.asm,DEG_FP:			CALL    FPI180
4723,4723,4877,0424ac,0424dc,call $04230e,call $04233e,call $000000,fpp.asm,CALL    FMUL
4724,4724,4878,0424b0,0424e0,xor a,xor a,xor a,fpp.asm,XOR     A
4725,4725,4879,0424b1,0424e1,ret,ret,ret,fpp.asm,RET
4726,4726,4880,0424b2,0424e2,call $0424bc,call $0424ec,call $000000,fpp.asm,RAD_FP:			CALL    FPI180
4727,4727,4881,0424b6,0424e6,call $042265,call $042295,call $000000,fpp.asm,CALL    FDIV
4728,4728,4882,0424ba,0424ea,xor a,xor a,xor a,fpp.asm,XOR     A
4729,4729,4883,0424bb,0424eb,ret,ret,ret,fpp.asm,RET
4730,4730,4884,0424bc,0424ec,call $042ba6,call $042bd6,call $000000,fpp.asm,FPI180:			CALL    SFLOAT_FP
4731,4731,4885,0424c0,0424f0,"ld de,$00652e","ld de,$00652e","ld de,$000000",fpp.asm,"LD      DE,652EH"
4732,4732,4886,0424c4,0424f4,exx,exx,exx,fpp.asm,EXX
4733,4733,4887,0424c5,0424f5,"ld de,$00e0d3","ld de,$00e0d3","ld de,$000000",fpp.asm,"LD      DE,0E0D3H"
4734,4734,4888,0424c9,0424f9,exx,exx,exx,fpp.asm,EXX
4735,4735,4889,0424ca,0424fa,"ld b,$85","ld b,$85","ld b,$00",fpp.asm,"LD      B,85H"
4736,4736,4890,0424cc,0424fc,ret,ret,ret,fpp.asm,RET
4737,4737,4891,0424cd,0424fd,call $042bff,call $042c2f,call $000000,fpp.asm,SGN_FP:			CALL    TEST_FP
4738,4738,4892,0424d1,042501,or c,or c,or c,fpp.asm,OR      C
4739,4739,4893,0424d2,042502,ret z,ret z,ret z,fpp.asm,RET     Z               ;ZERO
4740,4740,4894,0424d3,042503,"bit 7,h","bit 7,h","bit 7,h",fpp.asm,"BIT     7,H"
4741,4741,4895,0424d5,042505,"jp nz,$04246d","jp nz,$04249d","jp nz,$000000",fpp.asm,"JP      NZ,TRUE_FP         ;-1"
4742,4742,4896,0424d9,042509,call $042c23,call $042c53,call $000000,fpp.asm,CALL    ZERO_FP
4743,4743,4897,0424dd,04250d,jp $042bbf,jp $042bef,jp $000000,fpp.asm,JP      ADD1_FP            ;1
4744,4744,4898,0424e1,042511,call $042e3d,call $042e6d,call $000000,fpp.asm,VAL_FP:			CALL    SIGNQ
4745,4745,4899,0424e5,042515,push af,push af,push af,fpp.asm,PUSH    AF
4746,4746,4900,0424e6,042516,call $0429ed,call $042a1d,call $000000,fpp.asm,CALL    CON_FP
4747,4747,4901,0424ea,04251a,pop af,pop af,pop af,fpp.asm,POP     AF
4748,4748,4902,0424eb,04251b,cp $2d,cp $2d,cp $00,fpp.asm,CP      '-'
4749,4749,4903,0424ed,04251d,"ld a,$00","ld a,$00","ld a,$00",fpp.asm,"LD      A,0             ;NUMERIC MARKER"
4750,4750,4904,0424ef,04251f,ret nz,ret nz,ret nz,fpp.asm,RET     NZ
4751,4751,4905,0424f0,042520,dec c,dec c,dec c,fpp.asm,DEC     C
4752,4752,4906,0424f1,042521,inc c,inc c,inc c,fpp.asm,INC     C
4753,4753,4907,0424f2,042522,"jp z,$042ada","jp z,$042b0a","jp z,$000000",fpp.asm,"JP      Z,NEGATE        ;ZERO/INTEGER"
4754,4754,4908,0424f6,042526,"ld a,h","ld a,h","ld a,h",fpp.asm,"LD      A,H"
4755,4755,4909,0424f7,042527,xor $80,xor $80,xor $00,fpp.asm,XOR     80H             ;CHANGE SIGN (FP)
4756,4756,4910,0424f9,042529,"ld h,a","ld h,a","ld h,a",fpp.asm,"LD      H,A"
4757,4757,4911,0424fa,04252a,xor a,xor a,xor a,fpp.asm,XOR     A
4758,4758,4912,0424fb,04252b,ret,ret,ret,fpp.asm,RET
4759,4759,4913,0424fc,04252c,dec c,dec c,dec c,fpp.asm,INT_FP_:			DEC     C
4760,4760,4914,0424fd,04252d,inc c,inc c,inc c,fpp.asm,INC     C
4761,4761,4915,0424fe,04252e,ret z,ret z,ret z,fpp.asm,RET     Z               ;ZERO/INTEGER
4762,4762,4916,0424ff,04252f,"ld a,$9f","ld a,$9f","ld a,$00",fpp.asm,"LD      A,159"
4763,4763,4917,042501,042531,"ld b,h","ld b,h","ld b,h",fpp.asm,"LD      B,H             ;B7=SIGN BIT"
4764,4764,4918,042502,042532,call $042aab,call $042adb,call $000000,fpp.asm,CALL    FIX
4765,4765,4919,042506,042536,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"EX      AF,AF'"
4766,4766,4920,042507,042537,and b,and b,and b,fpp.asm,AND     B
4767,4767,4921,042508,042538,"call m,$042bbf","call m,$042bef","call m,$000000",fpp.asm,"CALL    M,ADD1_FP          ;NEGATIVE NON-INTEGER"
4768,4768,4922,04250c,04253c,"ld a,b","ld a,b","ld a,b",fpp.asm,"LD      A,B"
4769,4769,4923,04250d,04253d,or a,or a,or a,fpp.asm,OR      A
4770,4770,4924,04250e,04253e,"call m,$042ada","call m,$042b0a","call m,$000000",fpp.asm,"CALL    M,NEGATE"
4771,4771,4925,042512,042542,xor a,xor a,xor a,fpp.asm,XOR     A
4772,4772,4926,042513,042543,"ld c,a","ld c,a","ld c,a",fpp.asm,"LD      C,A"
4773,4773,4927,042514,042544,ret,ret,ret,fpp.asm,RET
4774,4774,4928,042515,042545,call $042ba6,call $042bd6,call $000000,fpp.asm,SQR_FP:			CALL    SFLOAT_FP
4775,4775,4929,042519,042549,"bit 7,h","bit 7,h","bit 7,h",fpp.asm,"SQR0:			BIT     7,H"
4776,4776,4930,04251b,04254b,"ld a,$15","ld a,$15","ld a,$00",fpp.asm,"LD      A,NGROOT"
4777,4777,4931,04251d,04254d,"jp nz,$04207d","jp nz,$0420ad","jp nz,$000000",fpp.asm,"JP      NZ,ERROR_FP_        ;""-ve root"""
4778,4778,4932,042521,042551,dec c,dec c,dec c,fpp.asm,DEC     C
4779,4779,4933,042522,042552,inc c,inc c,inc c,fpp.asm,INC     C
4780,4780,4934,042523,042553,ret z,ret z,ret z,fpp.asm,RET     Z               ;ZERO
4781,4781,4935,042524,042554,"set 7,h","set 7,h","set 7,h",fpp.asm,"SET     7,H             ;IMPLIED 1"
4782,4782,4936,042526,042556,"bit 0,c","bit 0,c","bit 0,c",fpp.asm,"BIT     0,C"
4783,4783,4937,042528,042558,"call z,$042bdf","call z,$042c0f","call z,$000000",fpp.asm,"CALL    Z,DIV2          ;MAKE EXPONENT ODD"
4784,4784,4938,04252c,04255c,"ld a,c","ld a,c","ld a,c",fpp.asm,"LD      A,C"
4785,4785,4939,04252d,04255d,sub $80,sub $80,sub $00,fpp.asm,SUB     80H
4786,4786,4940,04252f,04255f,sra a,sra a,sra a,fpp.asm,SRA     A               ;HALVE EXPONENT
4787,4787,4941,042531,042561,"add a,$80","add a,$80","add a,$00",fpp.asm,"ADD     A,80H"
4788,4788,4942,042533,042563,"ld c,a","ld c,a","ld c,a",fpp.asm,"LD      C,A"
4789,4789,4943,042534,042564,push bc,push bc,push bc,fpp.asm,PUSH    BC              ;SAVE EXPONENT
4790,4790,4944,042535,042565,"ex de,hl","ex de,hl","ex de,hl",fpp.asm,"EX      DE,HL"
4791,4791,4945,042536,042566,"ld hl,$000000","ld hl,$000000","ld hl,$000000",fpp.asm,"LD      HL,0"
4792,4792,4946,04253a,04256a,"ld b,h","ld b,h","ld b,h",fpp.asm,"LD      B,H"
4793,4793,4947,04253b,04256b,"ld c,l","ld c,l","ld c,l",fpp.asm,"LD      C,L"
4794,4794,4948,04253c,04256c,exx,exx,exx,fpp.asm,EXX
4795,4795,4949,04253d,04256d,"ex de,hl","ex de,hl","ex de,hl",fpp.asm,"EX      DE,HL"
4796,4796,4950,04253e,04256e,"ld hl,$000000","ld hl,$000000","ld hl,$000000",fpp.asm,"LD      HL,0"
4797,4797,4951,042542,042572,"ld b,h","ld b,h","ld b,h",fpp.asm,"LD      B,H"
4798,4798,4952,042543,042573,"ld c,l","ld c,l","ld c,l",fpp.asm,"LD      C,L"
4799,4799,4953,042544,042574,"ld a,$e1","ld a,$e1","ld a,$00",fpp.asm,"LD      A,-31"
4800,4800,4954,042546,042576,call $042dd5,call $042e05,call $000000,fpp.asm,CALL    SQRA            ;ROOT
4801,4801,4955,04254a,04257a,exx,exx,exx,fpp.asm,EXX
4802,4802,4956,04254b,04257b,"bit 7,b","bit 7,b","bit 7,b",fpp.asm,"BIT     7,B"
4803,4803,4957,04254d,04257d,exx,exx,exx,fpp.asm,EXX
4804,4804,4958,04254e,04257e,"call z,$042dd5","call z,$042e05","call z,$000000",fpp.asm,"CALL    Z,SQRA          ;NORMALISE & INC A"
4805,4805,4959,042552,042582,call $042e16,call $042e46,call $000000,fpp.asm,CALL    SQRB
4806,4806,4960,042556,042586,or a,or a,or a,fpp.asm,OR      A               ;CLEAR CARRY
4807,4807,4961,042557,042587,call $042d83,call $042db3,call $000000,fpp.asm,CALL    DIVB
4808,4808,4962,04255b,04258b,rr e,rr e,rr e,fpp.asm,RR      E               ;LSB TO CARRY
4809,4809,4963,04255d,04258d,"ld h,b","ld h,b","ld h,b",fpp.asm,"LD      H,B"
4810,4810,4964,04255e,04258e,"ld l,c","ld l,c","ld l,c",fpp.asm,"LD      L,C"
4811,4811,4965,04255f,04258f,exx,exx,exx,fpp.asm,EXX
4812,4812,4966,042560,042590,"ld h,b","ld h,b","ld h,b",fpp.asm,"LD      H,B"
4813,4813,4967,042561,042591,"ld l,c","ld l,c","ld l,c",fpp.asm,"LD      L,C"
4814,4814,4968,042562,042592,"call c,$042bbf","call c,$042bef","call c,$000000",fpp.asm,"CALL    C,ADD1_FP          ;ROUND UP"
4815,4815,4969,042566,042596,pop bc,pop bc,pop bc,fpp.asm,POP     BC              ;RESTORE EXPONENT
4816,4816,4970,042567,042597,"call c,$042bec","call c,$042c1c","call c,$000000",fpp.asm,"CALL    C,INCC"
4817,4817,4971,04256b,04259b,rra,rra,rra,fpp.asm,RRA
4818,4818,4972,04256c,04259c,"sbc a,a","sbc a,a","sbc a,a",fpp.asm,"SBC     A,A"
4819,4819,4973,04256d,04259d,"add a,c","add a,c","add a,c",fpp.asm,"ADD     A,C"
4820,4820,4974,04256e,04259e,"ld c,a","ld c,a","ld c,a",fpp.asm,"LD      C,A"
4821,4821,4975,04256f,04259f,"res 7,h","res 7,h","res 7,h",fpp.asm,"RES     7,H             ;POSITIVE"
4822,4822,4976,042571,0425a1,xor a,xor a,xor a,fpp.asm,XOR     A
4823,4823,4977,042572,0425a2,ret,ret,ret,fpp.asm,RET
4824,4824,4978,042573,0425a3,call $042ba6,call $042bd6,call $000000,fpp.asm,TAN_FP:			CALL    SFLOAT_FP
4825,4825,4979,042577,0425a7,call $042cb3,call $042ce3,call $000000,fpp.asm,CALL    PUSH5
4826,4826,4980,04257b,0425ab,call $04259d,call $0425cd,call $000000,fpp.asm,CALL    COS0
4827,4827,4981,04257f,0425af,call $042cbc,call $042cec,call $000000,fpp.asm,CALL    POP5
4828,4828,4982,042583,0425b3,call $042cb3,call $042ce3,call $000000,fpp.asm,CALL    PUSH5
4829,4829,4983,042587,0425b7,call $042bd7,call $042c07,call $000000,fpp.asm,CALL    SWAP_FP
4830,4830,4984,04258b,0425bb,call $0425aa,call $0425da,call $000000,fpp.asm,CALL    SIN0
4831,4831,4985,04258f,0425bf,call $042cbc,call $042cec,call $000000,fpp.asm,CALL    POP5
4832,4832,4986,042593,0425c3,call $042265,call $042295,call $000000,fpp.asm,CALL    FDIV
4833,4833,4987,042597,0425c7,xor a,xor a,xor a,fpp.asm,XOR     A               ;NUMERIC MARKER
4834,4834,4988,042598,0425c8,ret,ret,ret,fpp.asm,RET
4835,4835,4989,042599,0425c9,call $042ba6,call $042bd6,call $000000,fpp.asm,COS_FP:			CALL    SFLOAT_FP
4836,4836,4990,04259d,0425cd,call $042b02,call $042b32,call $000000,fpp.asm,COS0:			CALL    SCALE
4837,4837,4991,0425a1,0425d1,inc e,inc e,inc e,fpp.asm,INC     E
4838,4838,4992,0425a2,0425d2,inc e,inc e,inc e,fpp.asm,INC     E
4839,4839,4993,0425a3,0425d3,"ld a,e","ld a,e","ld a,e",fpp.asm,"LD      A,E"
4840,4840,4994,0425a4,0425d4,jr $+$12,jr $+$12,jr $+$00,fpp.asm,JR      SIN1
4841,4841,4995,0425a6,0425d6,call $042ba6,call $042bd6,call $000000,fpp.asm,SIN_FP:			CALL    SFLOAT_FP
4842,4842,4996,0425aa,0425da,push hl,push hl,push hl,fpp.asm,SIN0:			PUSH    HL              ;H7=SIGN
4843,4843,4997,0425ab,0425db,call $042b02,call $042b32,call $000000,fpp.asm,CALL    SCALE
4844,4844,4998,0425af,0425df,pop af,pop af,pop af,fpp.asm,POP     AF
4845,4845,4999,0425b0,0425e0,rlca,rlca,rlca,fpp.asm,RLCA
4846,4846,5000,0425b1,0425e1,rlca,rlca,rlca,fpp.asm,RLCA
4847,4847,5001,0425b2,0425e2,rlca,rlca,rlca,fpp.asm,RLCA
4848,4848,5002,0425b3,0425e3,and $04,and $04,and $00,fpp.asm,AND     4
4849,4849,5003,0425b5,0425e5,xor e,xor e,xor e,fpp.asm,XOR     E
4850,4850,5004,0425b6,0425e6,push af,push af,push af,fpp.asm,SIN1:			PUSH    AF              ;OCTANT
4851,4851,5005,0425b7,0425e7,"res 7,h","res 7,h","res 7,h",fpp.asm,"RES     7,H"
4852,4852,5006,0425b9,0425e9,rra,rra,rra,fpp.asm,RRA
4853,4853,5007,0425ba,0425ea,call $042648,call $042678,call $000000,fpp.asm,CALL    PIBY4
4854,4854,5008,0425be,0425ee,"call c,$0421e9","call c,$042219","call c,$000000",fpp.asm,"CALL    C,RSUB          ;X=(PI/4)-X"
4855,4855,5009,0425c2,0425f2,pop af,pop af,pop af,fpp.asm,POP     AF
4856,4856,5010,0425c3,0425f3,push af,push af,push af,fpp.asm,PUSH    AF
4857,4857,5011,0425c4,0425f4,and $03,and $03,and $00,fpp.asm,AND     3
4858,4858,5012,0425c6,0425f6,"jp po,$0425ff","jp po,$04262f","jp po,$000000",fpp.asm,"JP      PO,SIN2         ;USE COSINE APPROX."
4859,4859,5013,0425ca,0425fa,call $042cb3,call $042ce3,call $000000,fpp.asm,CALL    PUSH5           ;SAVE X
4860,4860,5014,0425ce,0425fe,call $042cab,call $042cdb,call $000000,fpp.asm,CALL    SQUARE          ;PUSH X*X
4861,4861,5015,0425d2,042602,call $042cf0,call $042d20,call $000000,fpp.asm,CALL    POLY
4862,4862,5016,0425d6,042606,or a,or a,or a,fpp.asm,DW	0A8B7H          ;a(8)
4863,4863,5017,0425d7,042607,xor b,xor b,xor b,fpp.asm,
4864,4864,5018,0425d8,042608,"ld de,$266d36","ld de,$266d36","ld de,$000000",fpp.asm,DW	3611H
4865,4865,5019,0425dc,04260c,"sbc a,$05","sbc a,$05","sbc a,$00",fpp.asm,
4866,4866,5020,0425de,04260e,ret nc,ret nc,ret nc,fpp.asm,
4867,4867,5021,0425df,04260f,"ld (hl),e","ld (hl),e","ld (hl),e",fpp.asm,DB	73H
4868,4868,5022,0425e0,042610,ret nz,ret nz,ret nz,fpp.asm,DW	80C0H           ;a(4)
4869,4869,5023,0425e1,042611,"add a,b","add a,b","add a,b",fpp.asm,
4870,4870,5024,0425e2,042612,"adc a,b","adc a,b","adc a,b",fpp.asm,DW	888H
4871,4871,5025,0425e3,042613,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,
4872,4872,5026,0425e4,042614,"ld a,c","ld a,c","ld a,c",fpp.asm,DB	79H
4873,4873,5027,0425e5,042615,"sbc a,l","sbc a,l","sbc a,l",fpp.asm,DW	0AA9DH          ;a(2)
4874,4874,5028,0425e6,042616,xor d,xor d,xor d,fpp.asm,
4875,4875,5029,0425e7,042617,xor d,xor d,xor d,fpp.asm,DW	0AAAAH
4876,4876,5030,0425e8,042618,xor d,xor d,xor d,fpp.asm,
4877,4877,5031,0425e9,042619,"ld a,l","ld a,l","ld a,l",fpp.asm,DB	7DH
4878,4878,5032,0425ea,04261a,nop,nop,nop,fpp.asm,DW	0               ;a(0)
4879,4879,5033,0425eb,04261b,nop,nop,nop,fpp.asm,
4880,4880,5034,0425ec,04261c,nop,nop,nop,fpp.asm,DW	0
4881,4881,5035,0425ed,04261d,nop,nop,nop,fpp.asm,
4882,4882,5036,0425ee,04261e,"add a,b","add a,b","add a,b",fpp.asm,DB	80H
4883,4883,5037,0425ef,04261f,call $042cbc,call $042cec,call $000000,fpp.asm,CALL    POP5
4884,4884,5038,0425f3,042623,call $042cbc,call $042cec,call $000000,fpp.asm,CALL    POP5
4885,4885,5039,0425f7,042627,call $04230e,call $04233e,call $000000,fpp.asm,CALL    FMUL
4886,4886,5040,0425fb,04262b,jp $042624,jp $042654,jp $000000,fpp.asm,JP      SIN3
4887,4887,5041,0425ff,04262f,call $042cab,call $042cdb,call $000000,fpp.asm,SIN2:			CALL    SQUARE          ;PUSH X*X
4888,4888,5042,042603,042633,call $042cf0,call $042d20,call $000000,fpp.asm,CALL    POLY
4889,4889,5043,042607,042637,"ld (hl),c","ld (hl),c","ld (hl),c",fpp.asm,DW	0D571H          ;b(8)
4890,4890,5044,042608,042638,push de,push de,push de,fpp.asm,
4891,4891,5045,042609,042639,"ld a,b","ld a,b","ld a,b",fpp.asm,DW	4C78H
4892,4892,5046,04260a,04263a,"ld c,h","ld c,h","ld c,h",fpp.asm,
4893,4893,5047,04260b,04263b,"ld (hl),b","ld (hl),b","ld (hl),b",fpp.asm,DB	70H
4894,4894,5048,04260c,04263c,xor a,xor a,xor a,fpp.asm,DW	94AFH           ;b(6)
4895,4895,5049,04260d,04263d,sub h,sub h,sub h,fpp.asm,
4896,4896,5050,04260e,04263e,inc bc,inc bc,inc bc,fpp.asm,DW	0B603H
4897,4897,5051,04260f,04263f,or (hl),or (hl),or (hl),fpp.asm,
4898,4898,5052,042610,042640,halt,halt,halt,fpp.asm,DB	76H
4899,4899,5053,042611,042641,ret z,ret z,ret z,fpp.asm,DW	9CC8H           ;b(4)
4900,4900,5054,042612,042642,"sbc a,h","sbc a,h","sbc a,h",fpp.asm,
4901,4901,5055,042613,042643,xor d,xor d,xor d,fpp.asm,DW	2AAAH
4902,4902,5056,042614,042644,"ld hl,($ffdd7b)","ld hl,($ffdd7b)","ld hl,($000000)",fpp.asm,
4903,4903,5057,042618,042648,rst $38,rst $38,rst $00,fpp.asm,DW	0FFFFH
4904,4904,5058,042619,042649,rst $38,rst $38,rst $00,fpp.asm,
4905,4905,5059,04261a,04264a,"ld a,(hl)","ld a,(hl)","ld a,(hl)",fpp.asm,DB	7EH
4906,4906,5060,04261b,04264b,nop,nop,nop,fpp.asm,DW	0               ;b(0)
4907,4907,5061,04261c,04264c,nop,nop,nop,fpp.asm,
4908,4908,5062,04261d,04264d,nop,nop,nop,fpp.asm,DW	0
4909,4909,5063,04261e,04264e,nop,nop,nop,fpp.asm,
4910,4910,5064,04261f,04264f,"add a,b","add a,b","add a,b",fpp.asm,DB	80H
4911,4911,5065,042620,042650,call $042cbc,call $042cec,call $000000,fpp.asm,CALL    POP5
4912,4912,5066,042624,042654,pop af,pop af,pop af,fpp.asm,SIN3:			POP     AF
4913,4913,5067,042625,042655,and $04,and $04,and $00,fpp.asm,AND     4
4914,4914,5068,042627,042657,ret z,ret z,ret z,fpp.asm,RET     Z
4915,4915,5069,042628,042658,dec c,dec c,dec c,fpp.asm,DEC     C
4916,4916,5070,042629,042659,inc c,inc c,inc c,fpp.asm,INC     C
4917,4917,5071,04262a,04265a,ret z,ret z,ret z,fpp.asm,RET     Z               ;ZERO
4918,4918,5072,04262b,04265b,"set 7,h","set 7,h","set 7,h",fpp.asm,"SET     7,H             ;MAKE NEGATIVE"
4919,4919,5073,04262d,04265d,ret,ret,ret,fpp.asm,RET
4920,4920,5074,04262e,04265e,"ld hl,$000000","ld hl,$000000","ld hl,$000000",fpp.asm,"FONE_FP:			LD      HL,0"
4921,4921,5075,042632,042662,exx,exx,exx,fpp.asm,EXX
4922,4922,5076,042633,042663,"ld hl,$000000","ld hl,$000000","ld hl,$000000",fpp.asm,"LD      HL,0"
4923,4923,5077,042637,042667,exx,exx,exx,fpp.asm,EXX
4924,4924,5078,042638,042668,"ld c,$80","ld c,$80","ld c,$00",fpp.asm,"LD      C,80H"
4925,4925,5079,04263a,04266a,ret,ret,ret,fpp.asm,RET
4926,4926,5080,04263b,04266b,"ld de,$000000","ld de,$000000","ld de,$000000",fpp.asm,"DONE:			LD      DE,0"
4927,4927,5081,04263f,04266f,exx,exx,exx,fpp.asm,EXX
4928,4928,5082,042640,042670,"ld de,$000000","ld de,$000000","ld de,$000000",fpp.asm,"LD      DE,0"
4929,4929,5083,042644,042674,exx,exx,exx,fpp.asm,EXX
4930,4930,5084,042645,042675,"ld b,$80","ld b,$80","ld b,$00",fpp.asm,"LD      B,80H"
4931,4931,5085,042647,042677,ret,ret,ret,fpp.asm,RET
4932,4932,5086,042648,042678,"ld de,$00490f","ld de,$00490f","ld de,$000000",fpp.asm,"PIBY4:			LD      DE,490FH"
4933,4933,5087,04264c,04267c,exx,exx,exx,fpp.asm,EXX
4934,4934,5088,04264d,04267d,"ld de,$00daa2","ld de,$00daa2","ld de,$000000",fpp.asm,"LD      DE,0DAA2H"
4935,4935,5089,042651,042681,exx,exx,exx,fpp.asm,EXX
4936,4936,5090,042652,042682,"ld b,$7f","ld b,$7f","ld b,$00",fpp.asm,"LD      B,7FH"
4937,4937,5091,042654,042684,ret,ret,ret,fpp.asm,RET
4938,4938,5092,042655,042685,call $042ba6,call $042bd6,call $000000,fpp.asm,EXP_FP:			CALL    SFLOAT_FP
4939,4939,5093,042659,042689,call $0426e6,call $042716,call $000000,fpp.asm,EXP0:			CALL    LN2             ;LN(2)
4940,4940,5094,04265d,04268d,exx,exx,exx,fpp.asm,EXX
4941,4941,5095,04265e,04268e,dec e,dec e,dec e,fpp.asm,DEC     E
4942,4942,5096,04265f,04268f,"ld bc,$00d1cf","ld bc,$00d1cf","ld bc,$000000",fpp.asm,"LD      BC,0D1CFH       ;0.6931471805599453"
4943,4943,5097,042663,042693,exx,exx,exx,fpp.asm,EXX
4944,4944,5098,042664,042694,push hl,push hl,push hl,fpp.asm,PUSH    HL              ;H7=SIGN
4945,4945,5099,042665,042695,call $042b15,call $042b45,call $000000,fpp.asm,"CALL    MOD48           ;""MODULUS"""
4946,4946,5100,042669,042699,pop af,pop af,pop af,fpp.asm,POP     AF
4947,4947,5101,04266a,04269a,"bit 7,e","bit 7,e","bit 7,e",fpp.asm,"BIT     7,E"
4948,4948,5102,04266c,04269c,"jr z,$+$0d","jr z,$+$0d","jr z,$+$00",fpp.asm,"JR      Z,EXP1"
4949,4949,5103,04266e,04269e,rla,rla,rla,fpp.asm,RLA
4950,4950,5104,04266f,04269f,"jp c,$042c23","jp c,$042c53","jp c,$000000",fpp.asm,"JP      C,ZERO_FP"
4951,4951,5105,042673,0426a3,"ld a,$18","ld a,$18","ld a,$00",fpp.asm,"LD      A,EXPRNG"
4952,4952,5106,042675,0426a5,jp $04207d,jp $0420ad,jp $000000,fpp.asm,"JP      ERROR_FP_           ;""Exp range"""
4953,4953,5107,042679,0426a9,and $80,and $80,and $00,fpp.asm,EXP1:			AND     80H
4954,4954,5108,04267b,0426ab,or e,or e,or e,fpp.asm,OR      E
4955,4955,5109,04267c,0426ac,push af,push af,push af,fpp.asm,PUSH    AF              ;INTEGER PART
4956,4956,5110,04267d,0426ad,"res 7,h","res 7,h","res 7,h",fpp.asm,"RES     7,H"
4957,4957,5111,04267f,0426af,call $042cb3,call $042ce3,call $000000,fpp.asm,CALL    PUSH5           ;PUSH X*LN(2)
4958,4958,5112,042683,0426b3,call $042cf0,call $042d20,call $000000,fpp.asm,CALL    POLY
4959,4959,5113,042687,0426b7,"ld (hl),d","ld (hl),d","ld (hl),d",fpp.asm,DW	4072H           ;a(7)
4960,4960,5114,042688,0426b8,"ld.sis l,$94","ld.sis l,$94","ld.sis l,$00",fpp.asm,
4961,4961,5115,04268b,0426bb,"ld (hl),e","ld (hl),e","ld (hl),e",fpp.asm,DB	73H
4962,4962,5116,04268c,0426bc,"ld h,l","ld h,l","ld h,l",fpp.asm,DW	6F65H           ;a(6)
4963,4963,5117,04268d,0426bd,"ld l,a","ld l,a","ld l,a",fpp.asm,
4964,4964,5118,04268e,0426be,"ld c,a","ld c,a","ld c,a",fpp.asm,DW	2E4FH
4965,4965,5119,04268f,0426bf,"ld l,$76","ld l,$76","ld l,$00",fpp.asm,
4966,4966,5120,042691,0426c1,scf,scf,scf,fpp.asm,DW	6D37H           ;a(5)
4967,4967,5121,042692,0426c2,"ld l,l","ld l,l","ld l,l",fpp.asm,
4968,4968,5122,042693,0426c3,"ld (bc),a","ld (bc),a","ld (bc),a",fpp.asm,DW	8802H
4969,4969,5123,042694,0426c4,"adc a,b","adc a,b","adc a,b",fpp.asm,
4970,4970,5124,042695,0426c5,"ld a,c","ld a,c","ld a,c",fpp.asm,DB	79H
4971,4971,5125,042696,0426c6,"ld (de),a","ld (de),a","ld (de),a",fpp.asm,DW	0E512H          ;a(4)
4972,4972,5126,042697,0426c7,push hl,push hl,push hl,fpp.asm,
4973,4973,5127,042698,0426c8,and b,and b,and b,fpp.asm,DW	2AA0H
4974,4974,5128,042699,0426c9,"ld hl,($4f147b)","ld hl,($4f147b)","ld hl,($000000)",fpp.asm,
4975,4975,5129,04269d,0426cd,xor d,xor d,xor d,fpp.asm,DW	0AAAAH
4976,4976,5130,04269e,0426ce,xor d,xor d,xor d,fpp.asm,
4977,4977,5131,04269f,0426cf,"ld a,l","ld a,l","ld a,l",fpp.asm,DB	7DH
4978,4978,5132,0426a0,0426d0,"ld d,(hl)","ld d,(hl)","ld d,(hl)",fpp.asm,DW	0FD56H          ;a(2)
4979,4979,5133,0426a1,0426d1,trap,trap,trap,fpp.asm,
4980,4980,5134,0426a3,0426d3,"ld a,a","ld a,a","ld a,a",fpp.asm,
4981,4981,5135,0426a4,0426d4,"ld a,(hl)","ld a,(hl)","ld a,(hl)",fpp.asm,DB	7EH
4982,4982,5136,0426a5,0426d5,cp $ff,cp $ff,cp $00,fpp.asm,DW	0FFFEH          ;a(1)
4983,4983,5137,0426a7,0426d7,rst $38,rst $38,rst $00,fpp.asm,DW	0FFFFH
4984,4984,5138,0426a8,0426d8,rst $38,rst $38,rst $00,fpp.asm,
4985,4985,5139,0426a9,0426d9,"ld a,a","ld a,a","ld a,a",fpp.asm,DB	7FH
4986,4986,5140,0426aa,0426da,nop,nop,nop,fpp.asm,DW	0               ;a(0)
4987,4987,5141,0426ab,0426db,nop,nop,nop,fpp.asm,
4988,4988,5142,0426ac,0426dc,nop,nop,nop,fpp.asm,DW	0
4989,4989,5143,0426ad,0426dd,nop,nop,nop,fpp.asm,
4990,4990,5144,0426ae,0426de,"add a,b","add a,b","add a,b",fpp.asm,DB	80H
4991,4991,5145,0426af,0426df,call $042cbc,call $042cec,call $000000,fpp.asm,CALL    POP5
4992,4992,5146,0426b3,0426e3,pop af,pop af,pop af,fpp.asm,POP     AF
4993,4993,5147,0426b4,0426e4,push af,push af,push af,fpp.asm,PUSH    AF
4994,4994,5148,0426b5,0426e5,"call p,$0426da","call p,$04270a","call p,$000000",fpp.asm,"CALL    P,RECIP         ;X=1/X"
4995,4995,5149,0426b9,0426e9,pop af,pop af,pop af,fpp.asm,POP     AF
4996,4996,5150,0426ba,0426ea,"jp p,$0426c2","jp p,$0426f2","jp p,$000000",fpp.asm,"JP      P,EXP4"
4997,4997,5151,0426be,0426ee,and $7f,and $7f,and $00,fpp.asm,AND     7FH
4998,4998,5152,0426c0,0426f0,neg,neg,neg,fpp.asm,NEG
4999,4999,5153,0426c2,0426f2,"add a,$80","add a,$80","add a,$00",fpp.asm,"EXP4:			ADD     A,80H"
5000,5000,5154,0426c4,0426f4,"add a,c","add a,c","add a,c",fpp.asm,"ADD     A,C"
5001,5001,5155,0426c5,0426f5,"jr c,$+$08","jr c,$+$08","jr c,$+$00",fpp.asm,"JR      C,EXP2"
5002,5002,5156,0426c7,0426f7,"jp p,$042c23","jp p,$042c53","jp p,$000000",fpp.asm,"JP      P,ZERO_FP          ;UNDERFLOW"
5003,5003,5157,0426cb,0426fb,jr $+$06,jr $+$06,jr $+$00,fpp.asm,JR      EXP3
5004,5004,5158,0426cd,0426fd,"jp m,$042bee","jp m,$042c1e","jp m,$000000",fpp.asm,"EXP2:			JP      M,OFLOW         ;OVERFLOW"
5005,5005,5159,0426d1,042701,"add a,$80","add a,$80","add a,$00",fpp.asm,"EXP3:			ADD     A,80H"
5006,5006,5160,0426d3,042703,"jp z,$042c23","jp z,$042c53","jp z,$000000",fpp.asm,"JP      Z,ZERO_FP"
5007,5007,5161,0426d7,042707,"ld c,a","ld c,a","ld c,a",fpp.asm,"LD      C,A"
5008,5008,5162,0426d8,042708,xor a,xor a,xor a,fpp.asm,XOR     A               ;NUMERIC MARKER
5009,5009,5163,0426d9,042709,ret,ret,ret,fpp.asm,RET
5010,5010,5164,0426da,04270a,call $04263b,call $04266b,call $000000,fpp.asm,RECIP:			CALL    DONE
5011,5011,5165,0426de,04270e,call $042bd7,call $042c07,call $000000,fpp.asm,RDIV:			CALL    SWAP_FP
5012,5012,5166,0426e2,042712,jp $042265,jp $042295,jp $000000,fpp.asm,JP      FDIV            ;RECIPROCAL
5013,5013,5167,0426e6,042716,"ld de,$003172","ld de,$003172","ld de,$000000",fpp.asm,"LN2:			LD      DE,3172H        ;LN(2)"
5014,5014,5168,0426ea,04271a,exx,exx,exx,fpp.asm,EXX
5015,5015,5169,0426eb,04271b,"ld de,$0017f8","ld de,$0017f8","ld de,$000000",fpp.asm,"LD      DE,17F8H"
5016,5016,5170,0426ef,04271f,exx,exx,exx,fpp.asm,EXX
5017,5017,5171,0426f0,042720,"ld b,$7f","ld b,$7f","ld b,$00",fpp.asm,"LD      B,7FH"
5018,5018,5172,0426f2,042722,ret,ret,ret,fpp.asm,RET
5019,5019,5173,0426f3,042723,call $042ba6,call $042bd6,call $000000,fpp.asm,LN_FP:			CALL    SFLOAT_FP
5020,5020,5174,0426f7,042727,"ld a,$16","ld a,$16","ld a,$00",fpp.asm,"LN0:			LD      A,LOGRNG"
5021,5021,5175,0426f9,042729,"bit 7,h","bit 7,h","bit 7,h",fpp.asm,"BIT     7,H"
5022,5022,5176,0426fb,04272b,"jp nz,$04207d","jp nz,$0420ad","jp nz,$000000",fpp.asm,"JP      NZ,ERROR_FP_        ;""Log range"""
5023,5023,5177,0426ff,04272f,inc c,inc c,inc c,fpp.asm,INC     C
5024,5024,5178,042700,042730,dec c,dec c,dec c,fpp.asm,DEC     C
5025,5025,5179,042701,042731,"jp z,$04207d","jp z,$0420ad","jp z,$000000",fpp.asm,"JP      Z,ERROR_FP_"
5026,5026,5180,042705,042735,"ld de,$003504","ld de,$003504","ld de,$000000",fpp.asm,"LD      DE,3504H        ;SQR(2)"
5027,5027,5181,042709,042739,exx,exx,exx,fpp.asm,EXX
5028,5028,5182,04270a,04273a,"ld de,$00f333","ld de,$00f333","ld de,$000000",fpp.asm,"LD      DE,0F333H       ;1.41421356237"
5029,5029,5183,04270e,04273e,exx,exx,exx,fpp.asm,EXX
5030,5030,5184,04270f,04273f,call $042c36,call $042c66,call $000000,fpp.asm,CALL    ICP0            ;MANTISSA>SQR(2)?
5031,5031,5185,042713,042743,"ld a,c","ld a,c","ld a,c",fpp.asm,"LD      A,C             ;EXPONENT"
5032,5032,5186,042714,042744,"ld c,$80","ld c,$80","ld c,$00",fpp.asm,"LD      C,80H           ;1 <= X < 2"
5033,5033,5187,042716,042746,"jr c,$+$04","jr c,$+$04","jr c,$+$00",fpp.asm,"JR      C,LN4"
5034,5034,5188,042718,042748,dec c,dec c,dec c,fpp.asm,DEC     C
5035,5035,5189,042719,042749,inc a,inc a,inc a,fpp.asm,INC     A
5036,5036,5190,04271a,04274a,push af,push af,push af,fpp.asm,LN4:			PUSH    AF              ;SAVE EXPONENT
5037,5037,5191,04271b,04274b,call $042cc8,call $042cf8,call $000000,fpp.asm,CALL    RATIO           ;X=(X-1)/(X+1)
5038,5038,5192,04271f,04274f,call $042cb3,call $042ce3,call $000000,fpp.asm,CALL    PUSH5
5039,5039,5193,042723,042753,call $042cab,call $042cdb,call $000000,fpp.asm,CALL    SQUARE          ;PUSH X*X
5040,5040,5194,042727,042757,call $042cf0,call $042d20,call $000000,fpp.asm,CALL    POLY
5041,5041,5195,04272b,04275b,"ld c,b","ld c,b","ld c,b",fpp.asm,DW	0CC48H          ;a(9)
5042,5042,5196,04272c,04275c,"call z,$7d74fb","call z,$7d74fb","call z,$000000",fpp.asm,
5043,5043,5197,042730,042760,xor a,xor a,xor a,fpp.asm,DW	0AEAFH          ;a(7)
5044,5044,5198,042731,042761,xor (hl),xor (hl),xor (hl),fpp.asm,
5045,5045,5199,042732,042762,rst $38,rst $38,rst $00,fpp.asm,DW	11FFH
5046,5046,5200,042733,042763,"ld de,$d98c7e","ld de,$d98c7e","ld de,$000000",fpp.asm,
5047,5047,5201,042737,042767,call $e37e4c,call $e37e4c,call $000000,fpp.asm,DW	4CCDH
5048,5048,5202,04273b,04276b,xor c,xor c,xor c,fpp.asm,
5049,5049,5203,04273c,04276c,xor d,xor d,xor d,fpp.asm,DW	2AAAH
5050,5050,5204,04273d,04276d,"ld hl,($00007f)","ld hl,($00007f)","ld hl,($000000)",fpp.asm,
5051,5051,5205,042741,042771,nop,nop,nop,fpp.asm,DW	0
5052,5052,5206,042742,042772,nop,nop,nop,fpp.asm,
5053,5053,5207,042743,042773,"add a,c","add a,c","add a,c",fpp.asm,DB	81H
5054,5054,5208,042744,042774,call $042cbc,call $042cec,call $000000,fpp.asm,CALL    POP5
5055,5055,5209,042748,042778,call $042cbc,call $042cec,call $000000,fpp.asm,CALL    POP5
5056,5056,5210,04274c,04277c,call $04230e,call $04233e,call $000000,fpp.asm,CALL    FMUL
5057,5057,5211,042750,042780,pop af,pop af,pop af,fpp.asm,POP     AF              ;EXPONENT
5058,5058,5212,042751,042781,call $042cb3,call $042ce3,call $000000,fpp.asm,CALL    PUSH5
5059,5059,5213,042755,042785,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"EX      AF,AF'"
5060,5060,5214,042756,042786,call $042c23,call $042c53,call $000000,fpp.asm,CALL    ZERO_FP
5061,5061,5215,04275a,04278a,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"EX      AF,AF'"
5062,5062,5216,04275b,04278b,sub $80,sub $80,sub $00,fpp.asm,SUB     80H
5063,5063,5217,04275d,04278d,"jr z,$+$21","jr z,$+$21","jr z,$+$00",fpp.asm,"JR      Z,LN3"
5064,5064,5218,04275f,04278f,"jr nc,$+$04","jr nc,$+$04","jr nc,$+$00",fpp.asm,"JR      NC,LN1"
5065,5065,5219,042761,042791,cpl,cpl,cpl,fpp.asm,CPL
5066,5066,5220,042762,042792,inc a,inc a,inc a,fpp.asm,INC     A
5067,5067,5221,042763,042793,"ld h,a","ld h,a","ld h,a",fpp.asm,"LN1:			LD      H,A"
5068,5068,5222,042764,042794,"ld c,$87","ld c,$87","ld c,$00",fpp.asm,"LD      C,87H"
5069,5069,5223,042766,042796,push af,push af,push af,fpp.asm,PUSH    AF
5070,5070,5224,042767,042797,call $042b86,call $042bb6,call $000000,fpp.asm,CALL    FLOAT_
5071,5071,5225,04276b,04279b,"res 7,h","res 7,h","res 7,h",fpp.asm,"RES     7,H"
5072,5072,5226,04276d,04279d,call $0426e6,call $042716,call $000000,fpp.asm,CALL    LN2
5073,5073,5227,042771,0427a1,call $04230e,call $04233e,call $000000,fpp.asm,CALL    FMUL
5074,5074,5228,042775,0427a5,pop af,pop af,pop af,fpp.asm,POP     AF
5075,5075,5229,042776,0427a6,"jr nc,$+$08","jr nc,$+$08","jr nc,$+$00",fpp.asm,"JR      NC,LN3"
5076,5076,5230,042778,0427a8,"jp m,$04277e","jp m,$0427ae","jp m,$000000",fpp.asm,"JP      M,LN3"
5077,5077,5231,04277c,0427ac,"set 7,h","set 7,h","set 7,h",fpp.asm,"SET     7,H"
5078,5078,5232,04277e,0427ae,call $042cbc,call $042cec,call $000000,fpp.asm,LN3:			CALL    POP5
5079,5079,5233,042782,0427b2,call $0421fc,call $04222c,call $000000,fpp.asm,CALL    FADD
5080,5080,5234,042786,0427b6,xor a,xor a,xor a,fpp.asm,XOR     A
5081,5081,5235,042787,0427b7,ret,ret,ret,fpp.asm,RET
5082,5082,5236,042788,0427b8,call $0426f3,call $042723,call $000000,fpp.asm,LOG_FP:			CALL    LN_FP
5083,5083,5237,04278c,0427bc,"ld de,$005e5b","ld de,$005e5b","ld de,$000000",fpp.asm,"LD      DE,5E5BH        ;LOG(e)"
5084,5084,5238,042790,0427c0,exx,exx,exx,fpp.asm,EXX
5085,5085,5239,042791,0427c1,"ld de,$00d8a9","ld de,$00d8a9","ld de,$000000",fpp.asm,"LD      DE,0D8A9H"
5086,5086,5240,042795,0427c5,exx,exx,exx,fpp.asm,EXX
5087,5087,5241,042796,0427c6,"ld b,$7e","ld b,$7e","ld b,$00",fpp.asm,"LD      B,7EH"
5088,5088,5242,042798,0427c8,call $04230e,call $04233e,call $000000,fpp.asm,CALL    FMUL
5089,5089,5243,04279c,0427cc,xor a,xor a,xor a,fpp.asm,XOR     A
5090,5090,5244,04279d,0427cd,ret,ret,ret,fpp.asm,RET
5091,5091,5245,04279e,0427ce,call $042ba6,call $042bd6,call $000000,fpp.asm,ASN_FP:			CALL    SFLOAT_FP
5092,5092,5246,0427a2,0427d2,call $042cb3,call $042ce3,call $000000,fpp.asm,CALL    PUSH5
5093,5093,5247,0427a6,0427d6,call $042ca3,call $042cd3,call $000000,fpp.asm,CALL    COPY_
5094,5094,5248,0427aa,0427da,call $04230e,call $04233e,call $000000,fpp.asm,CALL    FMUL
5095,5095,5249,0427ae,0427de,call $04263b,call $04266b,call $000000,fpp.asm,CALL    DONE
5096,5096,5250,0427b2,0427e2,call $0421e9,call $042219,call $000000,fpp.asm,CALL    RSUB
5097,5097,5251,0427b6,0427e6,call $042519,call $042549,call $000000,fpp.asm,CALL    SQR0
5098,5098,5252,0427ba,0427ea,call $042cbc,call $042cec,call $000000,fpp.asm,CALL    POP5
5099,5099,5253,0427be,0427ee,inc c,inc c,inc c,fpp.asm,INC     C
5100,5100,5254,0427bf,0427ef,dec c,dec c,dec c,fpp.asm,DEC     C
5101,5101,5255,0427c0,0427f0,"ld a,$02","ld a,$02","ld a,$00",fpp.asm,"LD      A,2"
5102,5102,5256,0427c2,0427f2,push de,push de,push de,fpp.asm,PUSH    DE
5103,5103,5257,0427c3,0427f3,"jp z,$042848","jp z,$042878","jp z,$000000",fpp.asm,"JP      Z,ACS1"
5104,5104,5258,0427c7,0427f7,pop de,pop de,pop de,fpp.asm,POP     DE
5105,5105,5259,0427c8,0427f8,call $0426de,call $04270e,call $000000,fpp.asm,CALL    RDIV
5106,5106,5260,0427cc,0427fc,jr $+$06,jr $+$06,jr $+$00,fpp.asm,JR      ATN0
5107,5107,5261,0427ce,0427fe,call $042ba6,call $042bd6,call $000000,fpp.asm,ATN_FP:			CALL    SFLOAT_FP
5108,5108,5262,0427d2,042802,push hl,push hl,push hl,fpp.asm,ATN0:			PUSH    HL              ;SAVE SIGN
5109,5109,5263,0427d3,042803,"res 7,h","res 7,h","res 7,h",fpp.asm,"RES     7,H"
5110,5110,5264,0427d5,042805,"ld de,$005413","ld de,$005413","ld de,$000000",fpp.asm,"LD      DE,5413H        ;TAN(PI/8)=SQR(2)-1"
5111,5111,5265,0427d9,042809,exx,exx,exx,fpp.asm,EXX
5112,5112,5266,0427da,04280a,"ld de,$00ccd0","ld de,$00ccd0","ld de,$000000",fpp.asm,"LD      DE,0CCD0H"
5113,5113,5267,0427de,04280e,exx,exx,exx,fpp.asm,EXX
5114,5114,5268,0427df,04280f,"ld b,$7e","ld b,$7e","ld b,$00",fpp.asm,"LD      B,7EH"
5115,5115,5269,0427e1,042811,call $042c33,call $042c63,call $000000,fpp.asm,CALL    FCP0            ;COMPARE
5116,5116,5270,0427e5,042815,"ld b,$00","ld b,$00","ld b,$00",fpp.asm,"LD      B,0"
5117,5117,5271,0427e7,042817,"jr c,$+$24","jr c,$+$24","jr c,$+$00",fpp.asm,"JR      C,ATN2"
5118,5118,5272,0427e9,042819,"ld de,$001a82","ld de,$001a82","ld de,$000000",fpp.asm,"LD      DE,1A82H        ;TAN(3*PI/8)=SQR(2)+1"
5119,5119,5273,0427ed,04281d,exx,exx,exx,fpp.asm,EXX
5120,5120,5274,0427ee,04281e,"ld de,$00799a","ld de,$00799a","ld de,$000000",fpp.asm,"LD      DE,799AH"
5121,5121,5275,0427f2,042822,exx,exx,exx,fpp.asm,EXX
5122,5122,5276,0427f3,042823,"ld b,$81","ld b,$81","ld b,$00",fpp.asm,"LD      B,81H"
5123,5123,5277,0427f5,042825,call $042c33,call $042c63,call $000000,fpp.asm,CALL    FCP0            ;COMPARE
5124,5124,5278,0427f9,042829,"jr c,$+$0c","jr c,$+$0c","jr c,$+$00",fpp.asm,"JR      C,ATN1"
5125,5125,5279,0427fb,04282b,call $0426da,call $04270a,call $000000,fpp.asm,CALL    RECIP           ;X=1/X
5126,5126,5280,0427ff,04282f,"ld b,$02","ld b,$02","ld b,$00",fpp.asm,"LD      B,2"
5127,5127,5281,042801,042831,jp $04280b,jp $04283b,jp $000000,fpp.asm,JP      ATN2
5128,5128,5282,042805,042835,call $042cc8,call $042cf8,call $000000,fpp.asm,ATN1:			CALL    RATIO           ;X=(X-1)/(X+1)
5129,5129,5283,042809,042839,"ld b,$01","ld b,$01","ld b,$00",fpp.asm,"LD      B,1"
5130,5130,5284,04280b,04283b,push bc,push bc,push bc,fpp.asm,ATN2:			PUSH    BC              ;SAVE FLAG
5131,5131,5285,04280c,04283c,call $042cb3,call $042ce3,call $000000,fpp.asm,CALL    PUSH5
5132,5132,5286,042810,042840,call $042cab,call $042cdb,call $000000,fpp.asm,CALL    SQUARE          ;PUSH X*X
5133,5133,5287,042814,042844,call $042cf0,call $042d20,call $000000,fpp.asm,CALL    POLY
5134,5134,5288,042818,042848,dec (hl),dec (hl),dec (hl),fpp.asm,DW	0F335H          ;a(13)
5135,5135,5289,042819,042849,di,di,di,fpp.asm,
5136,5136,5290,04281a,04284a,ret c,ret c,ret c,fpp.asm,DW	37D8H
5137,5137,5291,04281b,04284b,scf,scf,scf,fpp.asm,
5138,5138,5292,04281c,04284c,"ld a,e","ld a,e","ld a,e",fpp.asm,DB	7BH
5139,5139,5293,04281d,04284d,sub c,sub c,sub c,fpp.asm,DW	6B91H           ;a(11)
5140,5140,5294,04281e,04284e,"ld l,e","ld l,e","ld l,e",fpp.asm,
5141,5141,5295,04281f,04284f,cp c,cp c,cp c,fpp.asm,DW	0AAB9H
5142,5142,5296,042820,042850,xor d,xor d,xor d,fpp.asm,
5143,5143,5297,042821,042851,"ld a,h","ld a,h","ld a,h",fpp.asm,DB	7CH
5144,5144,5298,042822,042852,"sbc a,$41","sbc a,$41","sbc a,$00",fpp.asm,DW	41DEH           ;a(9)
5145,5145,5299,042824,042854,sub a,sub a,sub a,fpp.asm,DW	6197H
5146,5146,5300,042825,042855,"ld h,c","ld h,c","ld h,c",fpp.asm,
5147,5147,5301,042826,042856,"ld a,h","ld a,h","ld a,h",fpp.asm,DB	7CH
5148,5148,5302,042827,042857,"ld a,e","ld a,e","ld a,e",fpp.asm,DW	9D7BH           ;a(7)
5149,5149,5303,042828,042858,"sbc a,l","sbc a,l","sbc a,l",fpp.asm,
5150,5150,5304,042829,042859,scf,scf,scf,fpp.asm,DW	9237H
5151,5151,5305,04282a,04285a,sub d,sub d,sub d,fpp.asm,
5152,5152,5306,04282b,04285b,"ld a,l","ld a,l","ld a,l",fpp.asm,DB	7DH
5153,5153,5307,04282c,04285c,"ld e,d","ld e,d","ld e,d",fpp.asm,DW	2A5AH           ;a(5)
5154,5154,5308,04282d,04285d,"ld hl,($7d4ccc)","ld hl,($7d4ccc)","ld hl,($000000)",fpp.asm,
5155,5155,5309,042831,042861,"ld e,h","ld e,h","ld e,h",fpp.asm,DW	0A95CH          ;a(3)
5156,5156,5310,042832,042862,xor c,xor c,xor c,fpp.asm,
5157,5157,5311,042833,042863,xor d,xor d,xor d,fpp.asm,DW	0AAAAH
5158,5158,5312,042834,042864,xor d,xor d,xor d,fpp.asm,
5159,5159,5313,042835,042865,"ld a,(hl)","ld a,(hl)","ld a,(hl)",fpp.asm,DB	7EH
5160,5160,5314,042836,042866,nop,nop,nop,fpp.asm,DW	0               ;a(1)
5161,5161,5315,042837,042867,nop,nop,nop,fpp.asm,
5162,5162,5316,042838,042868,nop,nop,nop,fpp.asm,DW	0
5163,5163,5317,042839,042869,nop,nop,nop,fpp.asm,
5164,5164,5318,04283a,04286a,"add a,b","add a,b","add a,b",fpp.asm,DB	80H
5165,5165,5319,04283b,04286b,call $042cbc,call $042cec,call $000000,fpp.asm,CALL    POP5
5166,5166,5320,04283f,04286f,call $042cbc,call $042cec,call $000000,fpp.asm,CALL    POP5
5167,5167,5321,042843,042873,call $04230e,call $04233e,call $000000,fpp.asm,CALL    FMUL
5168,5168,5322,042847,042877,pop af,pop af,pop af,fpp.asm,POP     AF
5169,5169,5323,042848,042878,call $042648,call $042678,call $000000,fpp.asm,ACS1:			CALL    PIBY4           ;PI/4
5170,5170,5324,04284c,04287c,rra,rra,rra,fpp.asm,RRA
5171,5171,5325,04284d,04287d,push af,push af,push af,fpp.asm,PUSH    AF
5172,5172,5326,04284e,04287e,"call c,$0421fc","call c,$04222c","call c,$000000",fpp.asm,"CALL    C,FADD"
5173,5173,5327,042852,042882,pop af,pop af,pop af,fpp.asm,POP     AF
5174,5174,5328,042853,042883,inc b,inc b,inc b,fpp.asm,INC     B
5175,5175,5329,042854,042884,rra,rra,rra,fpp.asm,RRA
5176,5176,5330,042855,042885,"call c,$0421e9","call c,$042219","call c,$000000",fpp.asm,"CALL    C,RSUB"
5177,5177,5331,042859,042889,pop af,pop af,pop af,fpp.asm,POP     AF
5178,5178,5332,04285a,04288a,or a,or a,or a,fpp.asm,OR      A
5179,5179,5333,04285b,04288b,ret p,ret p,ret p,fpp.asm,RET     P
5180,5180,5334,04285c,04288c,"set 7,h","set 7,h","set 7,h",fpp.asm,"SET     7,H             ;MAKE NEGATIVE"
5181,5181,5335,04285e,04288e,xor a,xor a,xor a,fpp.asm,XOR     A
5182,5182,5336,04285f,04288f,ret,ret,ret,fpp.asm,RET
5183,5183,5337,042860,042890,call $04279e,call $0427ce,call $000000,fpp.asm,ACS_FP:			CALL    ASN_FP
5184,5184,5338,042864,042894,"ld a,$02","ld a,$02","ld a,$00",fpp.asm,"LD      A,2"
5185,5185,5339,042866,042896,push af,push af,push af,fpp.asm,PUSH    AF
5186,5186,5340,042867,042897,jr $-$1f,jr $-$1f,jr $-$00,fpp.asm,JR      ACS1
5187,5187,5341,042869,042899,call $042ba6,call $042bd6,call $000000,fpp.asm,STR_FP:			CALL    SFLOAT_FP
5188,5188,5342,04286d,04289d,"ld b,$00","ld b,$00","ld b,$00",fpp.asm,"LD      B,0             ;DEFAULT PT. POSITION"
5189,5189,5343,04286f,04289f,"bit 7,h","bit 7,h","bit 7,h",fpp.asm,"BIT     7,H             ;NEGATIVE?"
5190,5190,5344,042871,0428a1,"jr z,$+$08","jr z,$+$08","jr z,$+$00",fpp.asm,"JR      Z,STR10"
5191,5191,5345,042873,0428a3,"res 7,h","res 7,h","res 7,h",fpp.asm,"RES     7,H"
5192,5192,5346,042875,0428a5,"ld a,$2d","ld a,$2d","ld a,$00",fpp.asm,"LD      A,'-'"
5193,5193,5347,042877,0428a7,"ld (de),a","ld (de),a","ld (de),a",fpp.asm,"LD      (DE),A          ;STORE SIGN"
5194,5194,5348,042878,0428a8,inc de,inc de,inc de,fpp.asm,INC     DE
5195,5195,5349,042879,0428a9,xor a,xor a,xor a,fpp.asm,STR10:			XOR     A               ;CLEAR A
5196,5196,5350,04287a,0428aa,cp c,cp c,cp c,fpp.asm,CP      C
5197,5197,5351,04287b,0428ab,"jr z,$+$50","jr z,$+$50","jr z,$+$00",fpp.asm,"JR      Z,STR02          ;ZERO"
5198,5198,5352,04287d,0428ad,push de,push de,push de,fpp.asm,PUSH    DE              ;SAVE TEXT POINTER
5199,5199,5353,04287e,0428ae,"ld a,b","ld a,b","ld a,b",fpp.asm,"LD      A,B"
5200,5200,5354,04287f,0428af,push af,push af,push af,fpp.asm,STR11:			PUSH    AF              ;SAVE DECIMAL COUNTER
5201,5201,5355,042880,0428b0,"ld a,c","ld a,c","ld a,c",fpp.asm,"LD      A,C             ;BINARY EXPONENT"
5202,5202,5356,042881,0428b1,cp $a1,cp $a1,cp $00,fpp.asm,CP      161
5203,5203,5357,042883,0428b3,"jr nc,$+$1e","jr nc,$+$1e","jr nc,$+$00",fpp.asm,"JR      NC,STR14"
5204,5204,5358,042885,0428b5,cp $9b,cp $9b,cp $00,fpp.asm,CP      155
5205,5205,5359,042887,0428b7,"jr nc,$+$2b","jr nc,$+$2b","jr nc,$+$00",fpp.asm,"JR      NC,STR15"
5206,5206,5360,042889,0428b9,cpl,cpl,cpl,fpp.asm,CPL
5207,5207,5361,04288a,0428ba,cp $e1,cp $e1,cp $00,fpp.asm,CP      225
5208,5208,5362,04288c,0428bc,"jr c,$+$04","jr c,$+$04","jr c,$+$00",fpp.asm,"JR      C,STR13"
5209,5209,5363,04288e,0428be,"ld a,$f8","ld a,$f8","ld a,$00",fpp.asm,"LD      A,-8"
5210,5210,5364,042890,0428c0,"add a,$1c","add a,$1c","add a,$00",fpp.asm,"STR13:			ADD     A,28"
5211,5211,5365,042892,0428c2,call $042d1f,call $042d4f,call $000000,fpp.asm,CALL    POWR10
5212,5212,5366,042896,0428c6,push af,push af,push af,fpp.asm,PUSH    AF
5213,5213,5367,042897,0428c7,call $04230e,call $04233e,call $000000,fpp.asm,CALL    FMUL
5214,5214,5368,04289b,0428cb,pop af,pop af,pop af,fpp.asm,POP     AF
5215,5215,5369,04289c,0428cc,"ld b,a","ld b,a","ld b,a",fpp.asm,"LD      B,A"
5216,5216,5370,04289d,0428cd,pop af,pop af,pop af,fpp.asm,POP     AF
5217,5217,5371,04289e,0428ce,sub b,sub b,sub b,fpp.asm,SUB     B
5218,5218,5372,04289f,0428cf,jr $-$20,jr $-$20,jr $-$00,fpp.asm,JR      STR11
5219,5219,5373,0428a1,0428d1,sub $20,sub $20,sub $00,fpp.asm,STR14:			SUB     32
5220,5220,5374,0428a3,0428d3,call $042d1f,call $042d4f,call $000000,fpp.asm,CALL    POWR10
5221,5221,5375,0428a7,0428d7,push af,push af,push af,fpp.asm,PUSH    AF
5222,5222,5376,0428a8,0428d8,call $042265,call $042295,call $000000,fpp.asm,CALL    FDIV
5223,5223,5377,0428ac,0428dc,pop af,pop af,pop af,fpp.asm,POP     AF
5224,5224,5378,0428ad,0428dd,"ld b,a","ld b,a","ld b,a",fpp.asm,"LD      B,A"
5225,5225,5379,0428ae,0428de,pop af,pop af,pop af,fpp.asm,POP     AF
5226,5226,5380,0428af,0428df,"add a,b","add a,b","add a,b",fpp.asm,"ADD     A,B"
5227,5227,5381,0428b0,0428e0,jr $-$31,jr $-$31,jr $-$00,fpp.asm,JR      STR11
5228,5228,5382,0428b2,0428e2,"ld a,$09","ld a,$09","ld a,$00",fpp.asm,"STR15:			LD      A,9"
5229,5229,5383,0428b4,0428e4,call $042d1f,call $042d4f,call $000000,fpp.asm,CALL    POWR10          ;10^9
5230,5230,5384,0428b8,0428e8,call $042c33,call $042c63,call $000000,fpp.asm,CALL    FCP0
5231,5231,5385,0428bc,0428ec,"ld a,c","ld a,c","ld a,c",fpp.asm,"LD      A,C"
5232,5232,5386,0428bd,0428ed,pop bc,pop bc,pop bc,fpp.asm,POP     BC
5233,5233,5387,0428be,0428ee,"ld c,a","ld c,a","ld c,a",fpp.asm,"LD      C,A"
5234,5234,5388,0428bf,0428ef,"set 7,h","set 7,h","set 7,h",fpp.asm,"SET     7,H             ;IMPLIED 1"
5235,5235,5389,0428c1,0428f1,"call c,$042c5b","call c,$042c8b","call c,$000000",fpp.asm,"CALL    C,X10B          ;X10, DEC B"
5236,5236,5390,0428c5,0428f5,pop de,pop de,pop de,fpp.asm,POP     DE              ;RESTORE TEXT POINTER
5237,5237,5391,0428c6,0428f6,"res 7,c","res 7,c","res 7,c",fpp.asm,"RES     7,C"
5238,5238,5392,0428c8,0428f8,"ld a,$00","ld a,$00","ld a,$00",fpp.asm,"LD      A,0"
5239,5239,5393,0428ca,0428fa,rla,rla,rla,fpp.asm,RLA                     ;PUT CARRY IN LSB
5240,5240,5394,0428cb,0428fb,inc c,inc c,inc c,fpp.asm,STR02:			INC     C
5241,5241,5395,0428cc,0428fc,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"EX      AF,AF'          ;SAVE A"
5242,5242,5396,0428cd,0428fd,"ld a,b","ld a,b","ld a,b",fpp.asm,"LD      A,B"
5243,5243,5397,0428ce,0428fe,"bit 1,(ix+$02)","bit 1,(ix+$02)","bit 1,(ix+$00)",fpp.asm,"BIT     1,(IX+2)"
5244,5244,5398,0428d2,042902,"jr nz,$+$0a","jr nz,$+$0a","jr nz,$+$00",fpp.asm,"JR      NZ,STR20"
5245,5245,5399,0428d4,042904,xor a,xor a,xor a,fpp.asm,XOR     A
5246,5246,5400,0428d5,042905,cp (ix+$01),cp (ix+$01),cp (ix+$00),fpp.asm,CP      (IX+1)
5247,5247,5401,0428d8,042908,"jr z,$+$0d","jr z,$+$0d","jr z,$+$00",fpp.asm,"JR      Z,STR21"
5248,5248,5402,0428da,04290a,"ld a,$f6","ld a,$f6","ld a,$00",fpp.asm,"LD      A,-10"
5249,5249,5403,0428dc,04290c,"add a,(ix+$01)","add a,(ix+$01)","add a,(ix+$00)",fpp.asm,"STR20:			ADD     A,(IX+1)        ;SIG. FIG. COUNT"
5250,5250,5404,0428df,04290f,or a,or a,or a,fpp.asm,OR      A               ;CLEAR CARRY
5251,5251,5405,0428e0,042910,"jp m,$0428e5","jp m,$042915","jp m,$000000",fpp.asm,"JP      M,STR21"
5252,5252,5406,0428e4,042914,xor a,xor a,xor a,fpp.asm,XOR     A
5253,5253,5407,0428e5,042915,push af,push af,push af,fpp.asm,STR21:			PUSH    AF
5254,5254,5408,0428e6,042916,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"EX      AF,AF'          ;RESTORE A"
5255,5255,5409,0428e7,042917,call $042c8f,call $042cbf,call $000000,fpp.asm,STR22:			CALL    X2              ;RL AHLH'L'
5256,5256,5410,0428eb,04291b,"adc a,a","adc a,a","adc a,a",fpp.asm,"ADC     A,A"
5257,5257,5411,0428ec,04291c,cp $0a,cp $0a,cp $00,fpp.asm,CP      10
5258,5258,5412,0428ee,04291e,"jr c,$+$07","jr c,$+$07","jr c,$+$00",fpp.asm,"JR      C,STR23"
5259,5259,5413,0428f0,042920,sub $0a,sub $0a,sub $00,fpp.asm,SUB     10
5260,5260,5414,0428f2,042922,exx,exx,exx,fpp.asm,EXX
5261,5261,5415,0428f3,042923,inc l,inc l,inc l,fpp.asm,INC     L               ;SET RESULT BIT
5262,5262,5416,0428f4,042924,exx,exx,exx,fpp.asm,EXX
5263,5263,5417,0428f5,042925,dec c,dec c,dec c,fpp.asm,STR23:			DEC     C
5264,5264,5418,0428f6,042926,"jr nz,$-$0f","jr nz,$-$0f","jr nz,$-$00",fpp.asm,"JR      NZ,STR22        ;32 TIMES"
5265,5265,5419,0428f8,042928,"ld c,a","ld c,a","ld c,a",fpp.asm,"LD      C,A             ;REMAINDER"
5266,5266,5420,0428f9,042929,"ld a,h","ld a,h","ld a,h",fpp.asm,"LD      A,H"
5267,5267,5421,0428fa,04292a,and $3f,and $3f,and $00,fpp.asm,AND     3FH             ;CLEAR OUT JUNK
5268,5268,5422,0428fc,04292c,"ld h,a","ld h,a","ld h,a",fpp.asm,"LD      H,A"
5269,5269,5423,0428fd,04292d,pop af,pop af,pop af,fpp.asm,POP     AF
5270,5270,5424,0428fe,04292e,"jp p,$04290c","jp p,$04293c","jp p,$000000",fpp.asm,"JP      P,STR24"
5271,5271,5425,042902,042932,inc a,inc a,inc a,fpp.asm,INC     A
5272,5272,5426,042903,042933,"jr nz,$+$1e","jr nz,$+$1e","jr nz,$+$00",fpp.asm,"JR      NZ,STR26"
5273,5273,5427,042905,042935,"ld a,$04","ld a,$04","ld a,$00",fpp.asm,"LD      A,4"
5274,5274,5428,042907,042937,cp c,cp c,cp c,fpp.asm,CP      C               ;ROUND UP?
5275,5275,5429,042908,042938,"ld a,$00","ld a,$00","ld a,$00",fpp.asm,"LD      A,0"
5276,5276,5430,04290a,04293a,jr $+$17,jr $+$17,jr $+$00,fpp.asm,JR      STR26
5277,5277,5431,04290c,04293c,push af,push af,push af,fpp.asm,STR24:			PUSH    AF
5278,5278,5432,04290d,04293d,"ld a,c","ld a,c","ld a,c",fpp.asm,"LD      A,C"
5279,5279,5433,04290e,04293e,"adc a,$30","adc a,$30","adc a,$00",fpp.asm,"ADC     A,'0'           ;ADD CARRY"
5280,5280,5434,042910,042940,cp $30,cp $30,cp $00,fpp.asm,CP      '0'
5281,5281,5435,042912,042942,"jr z,$+$07","jr z,$+$07","jr z,$+$00",fpp.asm,"JR      Z,STR25         ;SUPPRESS ZERO"
5282,5282,5436,042914,042944,cp $3a,cp $3a,cp $00,fpp.asm,CP      '9'+1
5283,5283,5437,042916,042946,ccf,ccf,ccf,fpp.asm,CCF
5284,5284,5438,042917,042947,"jr nc,$+$0a","jr nc,$+$0a","jr nc,$+$00",fpp.asm,"JR      NC,STR26"
5285,5285,5439,042919,042949,"ex (sp),hl","ex (sp),hl","ex (sp),hl",fpp.asm,"STR25:			EX      (SP),HL"
5286,5286,5440,04291a,04294a,"bit 6,l","bit 6,l","bit 6,l",fpp.asm,"BIT     6,L             ;ZERO FLAG"
5287,5287,5441,04291c,04294c,"ex (sp),hl","ex (sp),hl","ex (sp),hl",fpp.asm,"EX      (SP),HL"
5288,5288,5442,04291d,04294d,"jr nz,$+$07","jr nz,$+$07","jr nz,$+$00",fpp.asm,"JR      NZ,STR27"
5289,5289,5443,04291f,04294f,"ld a,$30","ld a,$30","ld a,$00",fpp.asm,"LD      A,'0'"
5290,5290,5444,042921,042951,inc a,inc a,inc a,fpp.asm,STR26:			INC     A               ;SET +VE
5291,5291,5445,042922,042952,dec a,dec a,dec a,fpp.asm,DEC     A
5292,5292,5446,042923,042953,push af,push af,push af,fpp.asm,PUSH    AF              ;PUT ON STACK + CARRY
5293,5293,5447,042924,042954,inc b,inc b,inc b,fpp.asm,STR27:			INC     B
5294,5294,5448,042925,042955,call $042bff,call $042c2f,call $000000,fpp.asm,CALL    TEST_FP            ;IS HLH'L' ZERO?
5295,5295,5449,042929,042959,"ld c,$20","ld c,$20","ld c,$00",fpp.asm,"LD      C,32"
5296,5296,5450,04292b,04295b,"ld a,$00","ld a,$00","ld a,$00",fpp.asm,"LD      A,0"
5297,5297,5451,04292d,04295d,"jr nz,$-$46","jr nz,$-$46","jr nz,$-$00",fpp.asm,"JR      NZ,STR22"
5298,5298,5452,04292f,04295f,pop af,pop af,pop af,fpp.asm,POP     AF
5299,5299,5453,042930,042960,push af,push af,push af,fpp.asm,PUSH    AF
5300,5300,5454,042931,042961,"ld a,$00","ld a,$00","ld a,$00",fpp.asm,"LD      A,0"
5301,5301,5455,042933,042963,"jr c,$-$4c","jr c,$-$4c","jr c,$-$00",fpp.asm,"JR      C,STR22"
5302,5302,5456,042935,042965,"ex de,hl","ex de,hl","ex de,hl",fpp.asm,"STR3:			EX      DE,HL           ;STRING POINTER"
5303,5303,5457,042936,042966,"ld c,$ff","ld c,$ff","ld c,$00",fpp.asm,"LD      C,-1            ;FLAG ""E"""
5304,5304,5458,042938,042968,"ld d,$01","ld d,$01","ld d,$00",fpp.asm,"LD      D,1"
5305,5305,5459,04293a,04296a,"ld e,(ix+$01)","ld e,(ix+$01)","ld e,(ix+$00)",fpp.asm,"LD      E,(IX+1)        ;f2"
5306,5306,5460,04293d,04296d,"bit 0,(ix+$02)","bit 0,(ix+$02)","bit 0,(ix+$00)",fpp.asm,"BIT     0,(IX+2)"
5307,5307,5461,042941,042971,"jr nz,$+$37","jr nz,$+$37","jr nz,$+$00",fpp.asm,"JR      NZ,STR34        ;E MODE"
5308,5308,5462,042943,042973,"bit 1,(ix+$02)","bit 1,(ix+$02)","bit 1,(ix+$00)",fpp.asm,"BIT     1,(IX+2)"
5309,5309,5463,042947,042977,"jr z,$+$14","jr z,$+$14","jr z,$+$00",fpp.asm,"JR      Z,STR31"
5310,5310,5464,042949,042979,"ld a,b","ld a,b","ld a,b",fpp.asm,"LD      A,B             ;F MODE"
5311,5311,5465,04294a,04297a,or a,or a,or a,fpp.asm,OR      A
5312,5312,5466,04294b,04297b,"jr z,$+$07","jr z,$+$07","jr z,$+$00",fpp.asm,"JR      Z,STR30"
5313,5313,5467,04294d,04297d,"jp m,$042952","jp m,$042982","jp m,$000000",fpp.asm,"JP      M,STR30"
5314,5314,5468,042951,042981,"ld d,b","ld d,b","ld d,b",fpp.asm,"LD      D,B"
5315,5315,5469,042952,042982,"ld a,d","ld a,d","ld a,d",fpp.asm,"STR30:			LD      A,D"
5316,5316,5470,042953,042983,"add a,(ix+$01)","add a,(ix+$01)","add a,(ix+$00)",fpp.asm,"ADD     A,(IX+1)"
5317,5317,5471,042956,042986,"ld e,a","ld e,a","ld e,a",fpp.asm,"LD      E,A"
5318,5318,5472,042957,042987,cp $0b,cp $0b,cp $00,fpp.asm,CP      11
5319,5319,5473,042959,042989,"jr c,$+$1b","jr c,$+$1b","jr c,$+$00",fpp.asm,"JR      C,STR32"
5320,5320,5474,04295b,04298b,"ld a,b","ld a,b","ld a,b",fpp.asm,"STR31:			LD      A,B             ;G MODE"
5321,5321,5475,04295c,04298c,"ld de,$000101","ld de,$000101","ld de,$000000",fpp.asm,"LD      DE,101H"
5322,5322,5476,042960,042990,or a,or a,or a,fpp.asm,OR      A
5323,5323,5477,042961,042991,"jp m,$042978","jp m,$0429a8","jp m,$000000",fpp.asm,"JP      M,STR34"
5324,5324,5478,042965,042995,"jr z,$+$0f","jr z,$+$0f","jr z,$+$00",fpp.asm,"JR      Z,STR32"
5325,5325,5479,042967,042997,"ld a,(ix+$01)","ld a,(ix+$01)","ld a,(ix+$00)",fpp.asm,"LD      A,(IX+1)"
5326,5326,5480,04296a,04299a,or a,or a,or a,fpp.asm,OR      A
5327,5327,5481,04296b,04299b,"jr nz,$+$04","jr nz,$+$04","jr nz,$+$00",fpp.asm,"JR      NZ,STR3A"
5328,5328,5482,04296d,04299d,"ld a,$0a","ld a,$0a","ld a,$00",fpp.asm,"LD      A,10"
5329,5329,5483,04296f,04299f,cp b,cp b,cp b,fpp.asm,STR3A:			CP      B
5330,5330,5484,042970,0429a0,"jr c,$+$08","jr c,$+$08","jr c,$+$00",fpp.asm,"JR      C,STR34"
5331,5331,5485,042972,0429a2,"ld d,b","ld d,b","ld d,b",fpp.asm,"LD      D,B"
5332,5332,5486,042973,0429a3,"ld e,b","ld e,b","ld e,b",fpp.asm,"LD      E,B"
5333,5333,5487,042974,0429a4,"ld a,b","ld a,b","ld a,b",fpp.asm,"STR32:			LD      A,B"
5334,5334,5488,042975,0429a5,"add a,$81","add a,$81","add a,$00",fpp.asm,"ADD     A,129"
5335,5335,5489,042977,0429a7,"ld c,a","ld c,a","ld c,a",fpp.asm,"LD      C,A"
5336,5336,5490,042978,0429a8,"set 7,d","set 7,d","set 7,d",fpp.asm,"STR34:			SET     7,D"
5337,5337,5491,04297a,0429aa,dec e,dec e,dec e,fpp.asm,DEC     E
5338,5338,5492,04297b,0429ab,"ld a,d","ld a,d","ld a,d",fpp.asm,"STR35:			LD      A,D"
5339,5339,5493,04297c,0429ac,cp c,cp c,cp c,fpp.asm,CP      C
5340,5340,5494,04297d,0429ad,"jr nc,$+$10","jr nc,$+$10","jr nc,$+$00",fpp.asm,"JR      NC,STR33"
5341,5341,5495,04297f,0429af,pop af,pop af,pop af,fpp.asm,STR36:			POP     AF
5342,5342,5496,042980,0429b0,"jr z,$+$06","jr z,$+$06","jr z,$+$00",fpp.asm,"JR      Z,STR37"
5343,5343,5497,042982,0429b2,"jp p,$04298f","jp p,$0429bf","jp p,$000000",fpp.asm,"JP      P,STR38"
5344,5344,5498,042986,0429b6,push af,push af,push af,fpp.asm,STR37:			PUSH    AF
5345,5345,5499,042987,0429b7,inc e,inc e,inc e,fpp.asm,INC     E
5346,5346,5500,042988,0429b8,dec e,dec e,dec e,fpp.asm,DEC     E
5347,5347,5501,042989,0429b9,"jp m,$0429a0","jp m,$0429d0","jp m,$000000",fpp.asm,"JP      M,STR4"
5348,5348,5502,04298d,0429bd,"ld a,$30","ld a,$30","ld a,$00",fpp.asm,"STR33:			LD      A,'0'"
5349,5349,5503,04298f,0429bf,dec d,dec d,dec d,fpp.asm,STR38:			DEC     D
5350,5350,5504,042990,0429c0,"jp po,$042997","jp po,$0429c7","jp po,$000000",fpp.asm,"JP      PO,STR39"
5351,5351,5505,042994,0429c4,"ld (hl),$2e","ld (hl),$2e","ld (hl),$00",fpp.asm,"LD      (HL),'.'"
5352,5352,5506,042996,0429c6,inc hl,inc hl,inc hl,fpp.asm,INC     HL
5353,5353,5507,042997,0429c7,"ld (hl),a","ld (hl),a","ld (hl),a",fpp.asm,"STR39:			LD      (HL),A"
5354,5354,5508,042998,0429c8,inc hl,inc hl,inc hl,fpp.asm,INC     HL
5355,5355,5509,042999,0429c9,dec e,dec e,dec e,fpp.asm,DEC     E
5356,5356,5510,04299a,0429ca,"jp p,$04297b","jp p,$0429ab","jp p,$000000",fpp.asm,"JP      P,STR35"
5357,5357,5511,04299e,0429ce,jr $-$1f,jr $-$1f,jr $-$00,fpp.asm,JR      STR36
5358,5358,5512,0429a0,0429d0,pop af,pop af,pop af,fpp.asm,STR4:			POP     AF
5359,5359,5513,0429a1,0429d1,inc c,inc c,inc c,fpp.asm,STR40:			INC     C
5360,5360,5514,0429a2,0429d2,"ld c,l","ld c,l","ld c,l",fpp.asm,"LD      C,L"
5361,5361,5515,0429a3,0429d3,"jr nz,$+$2a","jr nz,$+$2a","jr nz,$+$00",fpp.asm,"JR      NZ,STR44"
5362,5362,5516,0429a5,0429d5,"ld (hl),$45","ld (hl),$45","ld (hl),$00",fpp.asm,"LD      (HL),'E'        ;EXPONENT"
5363,5363,5517,0429a7,0429d7,inc hl,inc hl,inc hl,fpp.asm,INC     HL
5364,5364,5518,0429a8,0429d8,"ld a,b","ld a,b","ld a,b",fpp.asm,"LD      A,B"
5365,5365,5519,0429a9,0429d9,dec a,dec a,dec a,fpp.asm,DEC     A
5366,5366,5520,0429aa,0429da,"jp p,$0429b3","jp p,$0429e3","jp p,$000000",fpp.asm,"JP      P,STR41"
5367,5367,5521,0429ae,0429de,"ld (hl),$2d","ld (hl),$2d","ld (hl),$00",fpp.asm,"LD      (HL),'-'"
5368,5368,5522,0429b0,0429e0,inc hl,inc hl,inc hl,fpp.asm,INC     HL
5369,5369,5523,0429b1,0429e1,neg,neg,neg,fpp.asm,NEG
5370,5370,5524,0429b3,0429e3,"ld (hl),$30","ld (hl),$30","ld (hl),$00",fpp.asm,"STR41:			LD      (HL),'0'"
5371,5371,5525,0429b5,0429e5,"jr z,$+$17","jr z,$+$17","jr z,$+$00",fpp.asm,"JR      Z,STR47"
5372,5372,5526,0429b7,0429e7,cp $0a,cp $0a,cp $00,fpp.asm,CP      10
5373,5373,5527,0429b9,0429e9,"ld b,a","ld b,a","ld b,a",fpp.asm,"LD      B,A"
5374,5374,5528,0429ba,0429ea,"ld a,$3a","ld a,$3a","ld a,$00",fpp.asm,"LD      A,':'"
5375,5375,5529,0429bc,0429ec,"jr c,$+$05","jr c,$+$05","jr c,$+$00",fpp.asm,"JR      C,STR42"
5376,5376,5530,0429be,0429ee,inc hl,inc hl,inc hl,fpp.asm,INC     HL
5377,5377,5531,0429bf,0429ef,"ld (hl),$30","ld (hl),$30","ld (hl),$00",fpp.asm,"LD      (HL),'0'"
5378,5378,5532,0429c1,0429f1,inc (hl),inc (hl),inc (hl),fpp.asm,STR42:			INC     (HL)
5379,5379,5533,0429c2,0429f2,cp (hl),cp (hl),cp (hl),fpp.asm,CP      (HL)
5380,5380,5534,0429c3,0429f3,"jr nz,$+$07","jr nz,$+$07","jr nz,$+$00",fpp.asm,"JR      NZ,STR43"
5381,5381,5535,0429c5,0429f5,"ld (hl),$30","ld (hl),$30","ld (hl),$00",fpp.asm,"LD      (HL),'0'"
5382,5382,5536,0429c7,0429f7,dec hl,dec hl,dec hl,fpp.asm,DEC     HL
5383,5383,5537,0429c8,0429f8,inc (hl),inc (hl),inc (hl),fpp.asm,INC     (HL)
5384,5384,5538,0429c9,0429f9,inc hl,inc hl,inc hl,fpp.asm,INC     HL
5385,5385,5539,0429ca,0429fa,djnz $-$09,djnz $-$09,djnz $-$00,fpp.asm,STR43:			DJNZ    STR42
5386,5386,5540,0429cc,0429fc,inc hl,inc hl,inc hl,fpp.asm,STR47:			INC     HL
5387,5387,5541,0429cd,0429fd,"ex de,hl","ex de,hl","ex de,hl",fpp.asm,"STR44:			EX      DE,HL"
5388,5388,5542,0429ce,0429fe,ret,ret,ret,fpp.asm,RET
5389,5389,5543,0429cf,0429ff,"ld b,(ix+$04)","ld b,(ix+$04)","ld b,(ix+$00)",fpp.asm,"DLOAD5:			LD      B,(IX+4)"
5390,5390,5544,0429d2,042a02,exx,exx,exx,fpp.asm,EXX
5391,5391,5545,0429d3,042a03,"ld e,(ix)","ld e,(ix)","ld e,(ix)",fpp.asm,"LD      E,(IX+0)"
5392,5392,5546,0429d6,042a06,"ld d,(ix+$01)","ld d,(ix+$01)","ld d,(ix+$00)",fpp.asm,"LD      D,(IX+1)"
5393,5393,5547,0429d9,042a09,exx,exx,exx,fpp.asm,EXX
5394,5394,5548,0429da,042a0a,"ld e,(ix+$02)","ld e,(ix+$02)","ld e,(ix+$00)",fpp.asm,"LD      E,(IX+2)"
5395,5395,5549,0429dd,042a0d,"ld d,(ix+$03)","ld d,(ix+$03)","ld d,(ix+$00)",fpp.asm,"LD      D,(IX+3)"
5396,5396,5550,0429e0,042a10,ret,ret,ret,fpp.asm,RET
5397,5397,5551,0429e1,042a11,"ld b,(ix+$06)","ld b,(ix+$06)","ld b,(ix+$00)",fpp.asm,"DLOAD5_SPL:		LD      B,(IX+6)"
5398,5398,5552,0429e4,042a14,exx,exx,exx,fpp.asm,EXX
5399,5399,5553,0429e5,042a15,"ld de,(ix)","ld de,(ix)","ld de,(ix)",fpp.asm,"LD	DE, (IX+0)"
5400,5400,5554,0429e8,042a18,exx,exx,exx,fpp.asm,EXX
5401,5401,5555,0429e9,042a19,"ld de,(ix+$03)","ld de,(ix+$03)","ld de,(ix+$00)",fpp.asm,"LD	DE, (IX+3)"
5402,5402,5556,0429ec,042a1c,ret,ret,ret,fpp.asm,RET
5403,5403,5557,0429ed,042a1d,call $042c23,call $042c53,call $000000,fpp.asm,CON_FP:			CALL    ZERO_FP            ;INITIALISE TO ZERO
5404,5404,5558,0429f1,042a21,"ld c,$00","ld c,$00","ld c,$00",fpp.asm,"LD      C,0             ;TRUNCATION COUNTER"
5405,5405,5559,0429f3,042a23,call $042a81,call $042ab1,call $000000,fpp.asm,CALL    UINT          ;GET INTEGER PART
5406,5406,5560,0429f7,042a27,cp $2e,cp $2e,cp $00,fpp.asm,CP      '.'
5407,5407,5561,0429f9,042a29,"ld b,$00","ld b,$00","ld b,$00",fpp.asm,"LD      B,0             ;DECL. PLACE COUNTER"
5408,5408,5562,0429fb,042a2b,"call z,$042a7f","call z,$042aaf","call z,$000000",fpp.asm,"CALL    Z,NUMBIX        ;GET FRACTION PART"
5409,5409,5563,0429ff,042a2f,cp $45,cp $45,cp $00,fpp.asm,CP      'E'
5410,5410,5564,042a01,042a31,"ld a,$00","ld a,$00","ld a,$00",fpp.asm,"LD      A,0             ;INITIALISE EXPONENT"
5411,5411,5565,042a03,042a33,"call z,$042a4d","call z,$042a7d","call z,$000000",fpp.asm,"CALL    Z,GETEXP        ;GET EXPONENT"
5412,5412,5566,042a07,042a37,"bit 7,h","bit 7,h","bit 7,h",fpp.asm,"BIT     7,H"
5413,5413,5567,042a09,042a39,"jr nz,$+$0a","jr nz,$+$0a","jr nz,$+$00",fpp.asm,"JR      NZ,CON0         ;INTEGER OVERFLOW"
5414,5414,5568,042a0b,042a3b,or a,or a,or a,fpp.asm,OR      A
5415,5415,5569,042a0c,042a3c,"jr nz,$+$07","jr nz,$+$07","jr nz,$+$00",fpp.asm,"JR      NZ,CON0         ;EXPONENT NON-ZERO"
5416,5416,5570,042a0e,042a3e,cp b,cp b,cp b,fpp.asm,CP      B
5417,5417,5571,042a0f,042a3f,"jr nz,$+$04","jr nz,$+$04","jr nz,$+$00",fpp.asm,"JR      NZ,CON0         ;DECIMAL POINT"
5418,5418,5572,042a11,042a41,cp c,cp c,cp c,fpp.asm,CP      C
5419,5419,5573,042a12,042a42,ret z,ret z,ret z,fpp.asm,RET     Z               ;INTEGER
5420,5420,5574,042a13,042a43,sub b,sub b,sub b,fpp.asm,CON0:			SUB     B
5421,5421,5575,042a14,042a44,"add a,c","add a,c","add a,c",fpp.asm,"ADD     A,C"
5422,5422,5576,042a15,042a45,"ld c,$9f","ld c,$9f","ld c,$00",fpp.asm,"LD      C,159"
5423,5423,5577,042a17,042a47,call $042b86,call $042bb6,call $000000,fpp.asm,CALL    FLOAT_
5424,5424,5578,042a1b,042a4b,"res 7,h","res 7,h","res 7,h",fpp.asm,"RES     7,H             ;DITCH IMPLIED 1"
5425,5425,5579,042a1d,042a4d,or a,or a,or a,fpp.asm,OR      A
5426,5426,5580,042a1e,042a4e,ret z,ret z,ret z,fpp.asm,RET     Z               ;DONE
5427,5427,5581,042a1f,042a4f,"jp m,$042a2d","jp m,$042a5d","jp m,$000000",fpp.asm,"JP      M,CON2          ;NEGATIVE EXPONENT"
5428,5428,5582,042a23,042a53,call $042d1f,call $042d4f,call $000000,fpp.asm,CALL    POWR10
5429,5429,5583,042a27,042a57,call $04230e,call $04233e,call $000000,fpp.asm,CALL    FMUL            ;SCALE
5430,5430,5584,042a2b,042a5b,xor a,xor a,xor a,fpp.asm,XOR     A
5431,5431,5585,042a2c,042a5c,ret,ret,ret,fpp.asm,RET
5432,5432,5586,042a2d,042a5d,cp $da,cp $da,cp $00,fpp.asm,CON2:			CP      -38
5433,5433,5587,042a2f,042a5f,"jr c,$+$0e","jr c,$+$0e","jr c,$+$00",fpp.asm,"JR      C,CON3          ;CAN'T SCALE IN ONE GO"
5434,5434,5588,042a31,042a61,neg,neg,neg,fpp.asm,NEG
5435,5435,5589,042a33,042a63,call $042d1f,call $042d4f,call $000000,fpp.asm,CALL    POWR10
5436,5436,5590,042a37,042a67,call $042265,call $042295,call $000000,fpp.asm,CALL    FDIV            ;SCALE
5437,5437,5591,042a3b,042a6b,xor a,xor a,xor a,fpp.asm,XOR     A
5438,5438,5592,042a3c,042a6c,ret,ret,ret,fpp.asm,RET
5439,5439,5593,042a3d,042a6d,push af,push af,push af,fpp.asm,CON3:			PUSH    AF
5440,5440,5594,042a3e,042a6e,"ld a,$26","ld a,$26","ld a,$00",fpp.asm,"LD      A,38"
5441,5441,5595,042a40,042a70,call $042d1f,call $042d4f,call $000000,fpp.asm,CALL    POWR10
5442,5442,5596,042a44,042a74,call $042265,call $042295,call $000000,fpp.asm,CALL    FDIV
5443,5443,5597,042a48,042a78,pop af,pop af,pop af,fpp.asm,POP     AF
5444,5444,5598,042a49,042a79,"add a,$26","add a,$26","add a,$00",fpp.asm,"ADD     A,38"
5445,5445,5599,042a4b,042a7b,jr $-$1e,jr $-$1e,jr $-$00,fpp.asm,JR      CON2
5446,5446,5600,042a4d,042a7d,push bc,push bc,push bc,fpp.asm,GETEXP:			PUSH    BC              ;SAVE REGISTERS
5447,5447,5601,042a4e,042a7e,"ld b,a","ld b,a","ld b,a",fpp.asm,"LD      B,A             ;INITIAL VALUE"
5448,5448,5602,042a4f,042a7f,"ld c,$02","ld c,$02","ld c,$00",fpp.asm,"LD      C,2             ;2 DIGITS MAX"
5449,5449,5603,042a51,042a81,inc ix,inc ix,inc ix,fpp.asm,INC     IX              ;BUMP PAST 'E'
5450,5450,5604,042a53,042a83,call $042e3d,call $042e6d,call $000000,fpp.asm,CALL    SIGNQ
5451,5451,5605,042a57,042a87,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"EX      AF,AF'          ;SAVE EXPONENT SIGN"
5452,5452,5606,042a58,042a88,call $042e33,call $042e63,call $000000,fpp.asm,GETEX1:			CALL    DIGITQ
5453,5453,5607,042a5c,042a8c,"jr c,$+$1a","jr c,$+$1a","jr c,$+$00",fpp.asm,"JR      C,GETEX2"
5454,5454,5608,042a5e,042a8e,"ld a,b","ld a,b","ld a,b",fpp.asm,"LD      A,B             ;B=B*10"
5455,5455,5609,042a5f,042a8f,"add a,a","add a,a","add a,a",fpp.asm,"ADD     A,A"
5456,5456,5610,042a60,042a90,"add a,a","add a,a","add a,a",fpp.asm,"ADD     A,A"
5457,5457,5611,042a61,042a91,"add a,b","add a,b","add a,b",fpp.asm,"ADD     A,B"
5458,5458,5612,042a62,042a92,"add a,a","add a,a","add a,a",fpp.asm,"ADD     A,A"
5459,5459,5613,042a63,042a93,"ld b,a","ld b,a","ld b,a",fpp.asm,"LD      B,A"
5460,5460,5614,042a64,042a94,"ld a,(ix)","ld a,(ix)","ld a,(ix)",fpp.asm,"LD      A,(IX)          ;GET BACK DIGIT"
5461,5461,5615,042a67,042a97,inc ix,inc ix,inc ix,fpp.asm,INC     IX
5462,5462,5616,042a69,042a99,and $0f,and $0f,and $00,fpp.asm,AND     0FH             ;MASK UNWANTED BITS
5463,5463,5617,042a6b,042a9b,"add a,b","add a,b","add a,b",fpp.asm,"ADD     A,B             ;ADD IN DIGIT"
5464,5464,5618,042a6c,042a9c,"ld b,a","ld b,a","ld b,a",fpp.asm,"LD      B,A"
5465,5465,5619,042a6d,042a9d,dec c,dec c,dec c,fpp.asm,DEC     C
5466,5466,5620,042a6e,042a9e,"jp p,$042a58","jp p,$042a88","jp p,$000000",fpp.asm,"JP      P,GETEX1"
5467,5467,5621,042a72,042aa2,"ld b,$64","ld b,$64","ld b,$00",fpp.asm,"LD      B,100           ;FORCE OVERFLOW"
5468,5468,5622,042a74,042aa4,jr $-$1c,jr $-$1c,jr $-$00,fpp.asm,JR      GETEX1
5469,5469,5623,042a76,042aa6,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"GETEX2:			EX      AF,AF'          ;RESTORE SIGN"
5470,5470,5624,042a77,042aa7,cp $2d,cp $2d,cp $00,fpp.asm,CP      '-'
5471,5471,5625,042a79,042aa9,"ld a,b","ld a,b","ld a,b",fpp.asm,"LD      A,B"
5472,5472,5626,042a7a,042aaa,pop bc,pop bc,pop bc,fpp.asm,POP     BC              ;RESTORE
5473,5473,5627,042a7b,042aab,ret nz,ret nz,ret nz,fpp.asm,RET     NZ
5474,5474,5628,042a7c,042aac,neg,neg,neg,fpp.asm,NEG                     ;NEGATE EXPONENT
5475,5475,5629,042a7e,042aae,ret,ret,ret,fpp.asm,RET
5476,5476,5630,042a7f,042aaf,inc ix,inc ix,inc ix,fpp.asm,NUMBIX:			INC     IX
5477,5477,5631,042a81,042ab1,call $042e33,call $042e63,call $000000,fpp.asm,UINT:			CALL    DIGITQ
5478,5478,5632,042a85,042ab5,ret c,ret c,ret c,fpp.asm,RET     C
5479,5479,5633,042a86,042ab6,inc b,inc b,inc b,fpp.asm,INC     B               ;INCREMENT DIGIT COUNT
5480,5480,5634,042a87,042ab7,inc ix,inc ix,inc ix,fpp.asm,INC     IX
5481,5481,5635,042a89,042ab9,call $042c7c,call $042cac,call $000000,fpp.asm,CALL    X10             ;*10 & COPY OLD VALUE
5482,5482,5636,042a8d,042abd,"jr c,$+$17","jr c,$+$17","jr c,$+$00",fpp.asm,"JR      C,NUMB1         ;OVERFLOW"
5483,5483,5637,042a8f,042abf,dec c,dec c,dec c,fpp.asm,DEC     C               ;SEE IF TRUNCATED
5484,5484,5638,042a90,042ac0,inc c,inc c,inc c,fpp.asm,INC     C
5485,5485,5639,042a91,042ac1,"jr nz,$+$13","jr nz,$+$13","jr nz,$+$00",fpp.asm,"JR      NZ,NUMB1        ;IMPORTANT!"
5486,5486,5640,042a93,042ac3,and $0f,and $0f,and $00,fpp.asm,AND     0FH
5487,5487,5641,042a95,042ac5,exx,exx,exx,fpp.asm,EXX
5488,5488,5642,042a96,042ac6,"ld b,$00","ld b,$00","ld b,$00",fpp.asm,"LD      B,0"
5489,5489,5643,042a98,042ac8,"ld c,a","ld c,a","ld c,a",fpp.asm,"LD      C,A"
5490,5490,5644,042a99,042ac9,"add.sil hl,bc","add.sil hl,bc","add.sil hl,bc",fpp.asm,"ADD.S   HL,BC           ;ADD IN DIGIT"
5491,5491,5645,042a9b,042acb,exx,exx,exx,fpp.asm,EXX
5492,5492,5646,042a9c,042acc,"jr nc,$-$1b","jr nc,$-$1b","jr nc,$-$00",fpp.asm,"JR      NC,UINT"
5493,5493,5647,042a9e,042ace,inc.sil hl,inc.sil hl,inc.sil hl,fpp.asm,INC.S   HL              ;CARRY
5494,5494,5648,042aa0,042ad0,"ld a,h","ld a,h","ld a,h",fpp.asm,"LD      A,H"
5495,5495,5649,042aa1,042ad1,or l,or l,or l,fpp.asm,OR      L
5496,5496,5650,042aa2,042ad2,"jr nz,$-$21","jr nz,$-$21","jr nz,$-$00",fpp.asm,"JR      NZ,UINT"
5497,5497,5651,042aa4,042ad4,inc c,inc c,inc c,fpp.asm,NUMB1:			INC     C               ;TRUNCATION COUNTER
5498,5498,5652,042aa5,042ad5,call $042bda,call $042c0a,call $000000,fpp.asm,CALL    SWAP1           ;RESTORE PREVIOUS VALUE
5499,5499,5653,042aa9,042ad9,jr $-$28,jr $-$28,jr $-$00,fpp.asm,JR      UINT
5500,5500,5654,042aab,042adb,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"FIX:			EX      AF,AF'"
5501,5501,5655,042aac,042adc,xor a,xor a,xor a,fpp.asm,XOR     A
5502,5502,5656,042aad,042add,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"EX      AF,AF'"
5503,5503,5657,042aae,042ade,"set 7,h","set 7,h","set 7,h",fpp.asm,"SET     7,H             ;IMPLIED 1"
5504,5504,5658,042ab0,042ae0,call $042bdf,call $042c0f,call $000000,fpp.asm,FIX1:			CALL    DIV2
5505,5505,5659,042ab4,042ae4,cp c,cp c,cp c,fpp.asm,CP      C
5506,5506,5660,042ab5,042ae5,ret z,ret z,ret z,fpp.asm,RET     Z
5507,5507,5661,042ab6,042ae6,"jp nc,$042ab0","jp nc,$042ae0","jp nc,$000000",fpp.asm,"JP      NC,FIX1"
5508,5508,5662,042aba,042aea,jp $042bee,jp $042c1e,jp $000000,fpp.asm,JP      OFLOW
5509,5509,5663,042abe,042aee,call $042bd7,call $042c07,call $000000,fpp.asm,FIX2:			CALL    SWAP_FP
5510,5510,5664,042ac2,042af2,call $042aca,call $042afa,call $000000,fpp.asm,CALL    SFIX_FP
5511,5511,5665,042ac6,042af6,call $042bd7,call $042c07,call $000000,fpp.asm,CALL    SWAP_FP
5512,5512,5666,042aca,042afa,dec c,dec c,dec c,fpp.asm,SFIX_FP:			DEC     C
5513,5513,5667,042acb,042afb,inc c,inc c,inc c,fpp.asm,INC     C
5514,5514,5668,042acc,042afc,ret z,ret z,ret z,fpp.asm,RET     Z               ;INTEGER/ZERO
5515,5515,5669,042acd,042afd,"bit 7,h","bit 7,h","bit 7,h",fpp.asm,"BIT     7,H             ;SIGN"
5516,5516,5670,042acf,042aff,push af,push af,push af,fpp.asm,PUSH    AF
5517,5517,5671,042ad0,042b00,"ld a,$9f","ld a,$9f","ld a,$00",fpp.asm,"LD      A,159"
5518,5518,5672,042ad2,042b02,call $042aab,call $042adb,call $000000,fpp.asm,CALL    FIX
5519,5519,5673,042ad6,042b06,pop af,pop af,pop af,fpp.asm,POP     AF
5520,5520,5674,042ad7,042b07,"ld c,$00","ld c,$00","ld c,$00",fpp.asm,"LD      C,0"
5521,5521,5675,042ad9,042b09,ret z,ret z,ret z,fpp.asm,RET     Z
5522,5522,5676,042ada,042b0a,or a,or a,or a,fpp.asm,NEGATE:			OR      A               ;CLEAR CARRY
5523,5523,5677,042adb,042b0b,exx,exx,exx,fpp.asm,EXX
5524,5524,5678,042adc,042b0c,push de,push de,push de,fpp.asm,NEG0:			PUSH    DE
5525,5525,5679,042add,042b0d,"ex de,hl","ex de,hl","ex de,hl",fpp.asm,"EX      DE,HL"
5526,5526,5680,042ade,042b0e,"ld hl,$000000","ld hl,$000000","ld hl,$000000",fpp.asm,"LD      HL,0"
5527,5527,5681,042ae2,042b12,"sbc.sil hl,de","sbc.sil hl,de","sbc.sil hl,de",fpp.asm,"SBC.S   HL,DE"
5528,5528,5682,042ae5,042b15,pop de,pop de,pop de,fpp.asm,POP     DE
5529,5529,5683,042ae6,042b16,exx,exx,exx,fpp.asm,EXX
5530,5530,5684,042ae7,042b17,push de,push de,push de,fpp.asm,PUSH    DE
5531,5531,5685,042ae8,042b18,"ex de,hl","ex de,hl","ex de,hl",fpp.asm,"EX      DE,HL"
5532,5532,5686,042ae9,042b19,"ld hl,$000000","ld hl,$000000","ld hl,$000000",fpp.asm,"LD      HL,0"
5533,5533,5687,042aed,042b1d,"sbc.sil hl,de","sbc.sil hl,de","sbc.sil hl,de",fpp.asm,"SBC.S   HL,DE"
5534,5534,5688,042af0,042b20,pop de,pop de,pop de,fpp.asm,POP     DE
5535,5535,5689,042af1,042b21,ret,ret,ret,fpp.asm,RET
5536,5536,5690,042af2,042b22,exx,exx,exx,fpp.asm,NEG_:			EXX
5537,5537,5691,042af3,042b23,cpl,cpl,cpl,fpp.asm,CPL
5538,5538,5692,042af4,042b24,push hl,push hl,push hl,fpp.asm,PUSH    HL
5539,5539,5693,042af5,042b25,or a,or a,or a,fpp.asm,OR      A               ;CLEAR CARRY
5540,5540,5694,042af6,042b26,"ld hl,$000000","ld hl,$000000","ld hl,$000000",fpp.asm,"LD      HL,0"
5541,5541,5695,042afa,042b2a,"sbc.sil hl,bc","sbc.sil hl,bc","sbc.sil hl,bc",fpp.asm,"SBC.S   HL,BC"
5542,5542,5696,042afd,042b2d,"ld b,h","ld b,h","ld b,h",fpp.asm,"LD      B,H"
5543,5543,5697,042afe,042b2e,"ld c,l","ld c,l","ld c,l",fpp.asm,"LD      C,L"
5544,5544,5698,042aff,042b2f,pop hl,pop hl,pop hl,fpp.asm,POP     HL
5545,5545,5699,042b00,042b30,jr $-$24,jr $-$24,jr $-$00,fpp.asm,JR      NEG0
5546,5546,5700,042b02,042b32,"ld a,$96","ld a,$96","ld a,$00",fpp.asm,"SCALE:			LD      A,150"
5547,5547,5701,042b04,042b34,cp c,cp c,cp c,fpp.asm,CP      C
5548,5548,5702,042b05,042b35,"ld a,$17","ld a,$17","ld a,$00",fpp.asm,"LD      A,ACLOST"
5549,5549,5703,042b07,042b37,"jp c,$04207d","jp c,$0420ad","jp c,$000000",fpp.asm,"JP      C,ERROR_FP_         ;""Accuracy lost"""
5550,5550,5704,042b0b,042b3b,call $042648,call $042678,call $000000,fpp.asm,CALL    PIBY4
5551,5551,5705,042b0f,042b3f,exx,exx,exx,fpp.asm,EXX
5552,5552,5706,042b10,042b40,"ld bc,$002169","ld bc,$002169","ld bc,$000000",fpp.asm,"LD      BC,2169H        ;3.141592653589793238"
5553,5553,5707,042b14,042b44,exx,exx,exx,fpp.asm,EXX
5554,5554,5708,042b15,042b45,"set 7,d","set 7,d","set 7,d",fpp.asm,"MOD48:			SET     7,D             ;IMPLIED 1"
5555,5555,5709,042b17,042b47,"set 7,h","set 7,h","set 7,h",fpp.asm,"SET     7,H"
5556,5556,5710,042b19,042b49,"ld a,c","ld a,c","ld a,c",fpp.asm,"LD      A,C"
5557,5557,5711,042b1a,042b4a,"ld c,$00","ld c,$00","ld c,$00",fpp.asm,"LD      C,0             ;INIT QUOTIENT"
5558,5558,5712,042b1c,042b4c,"ld ix,$000000","ld ix,$000000","ld ix,$000000",fpp.asm,"LD      IX,0"
5559,5559,5713,042b21,042b51,push ix,push ix,push ix,fpp.asm,PUSH    IX              ;PUT ZERO ON STACK
5560,5560,5714,042b23,042b53,cp b,cp b,cp b,fpp.asm,CP      B
5561,5561,5715,042b24,042b54,"jr c,$+$48","jr c,$+$48","jr c,$+$00",fpp.asm,"JR      C,MOD485        ;DIVIDEND<DIVISOR"
5562,5562,5716,042b26,042b56,exx,exx,exx,fpp.asm,MOD481:			EXX                     ;CARRY=0 HERE
5563,5563,5717,042b27,042b57,"ex (sp),hl","ex (sp),hl","ex (sp),hl",fpp.asm,"EX      (SP),HL"
5564,5564,5718,042b28,042b58,"sbc.sil hl,bc","sbc.sil hl,bc","sbc.sil hl,bc",fpp.asm,"SBC.S   HL,BC"
5565,5565,5719,042b2b,042b5b,"ex (sp),hl","ex (sp),hl","ex (sp),hl",fpp.asm,"EX      (SP),HL"
5566,5566,5720,042b2c,042b5c,"sbc.sil hl,de","sbc.sil hl,de","sbc.sil hl,de",fpp.asm,"SBC.S   HL,DE"
5567,5567,5721,042b2f,042b5f,exx,exx,exx,fpp.asm,EXX
5568,5568,5722,042b30,042b60,"sbc.sil hl,de","sbc.sil hl,de","sbc.sil hl,de",fpp.asm,"SBC.S   HL,DE"
5569,5569,5723,042b33,042b63,"jr nc,$+$0e","jr nc,$+$0e","jr nc,$+$00",fpp.asm,"JR      NC,MOD482       ;DIVIDEND>=DIVISOR"
5570,5570,5724,042b35,042b65,exx,exx,exx,fpp.asm,EXX
5571,5571,5725,042b36,042b66,"ex (sp),hl","ex (sp),hl","ex (sp),hl",fpp.asm,"EX      (SP),HL"
5572,5572,5726,042b37,042b67,"add.sil hl,bc","add.sil hl,bc","add.sil hl,bc",fpp.asm,"ADD.S   HL,BC"
5573,5573,5727,042b39,042b69,"ex (sp),hl","ex (sp),hl","ex (sp),hl",fpp.asm,"EX      (SP),HL"
5574,5574,5728,042b3a,042b6a,"adc.sil hl,de","adc.sil hl,de","adc.sil hl,de",fpp.asm,"ADC.S   HL,DE"
5575,5575,5729,042b3d,042b6d,exx,exx,exx,fpp.asm,EXX
5576,5576,5730,042b3e,042b6e,"adc.sil hl,de","adc.sil hl,de","adc.sil hl,de",fpp.asm,"ADC.S   HL,DE"
5577,5577,5731,042b41,042b71,ccf,ccf,ccf,fpp.asm,MOD482:			CCF
5578,5578,5732,042b42,042b72,rl c,rl c,rl c,fpp.asm,RL      C               ;QUOTIENT
5579,5579,5733,042b44,042b74,"jr nc,$+$04","jr nc,$+$04","jr nc,$+$00",fpp.asm,"JR      NC,MOD483"
5580,5580,5734,042b46,042b76,"set 7,c","set 7,c","set 7,c",fpp.asm,"SET     7,C             ;STICKY BIT"
5581,5581,5735,042b48,042b78,dec a,dec a,dec a,fpp.asm,MOD483:			DEC     A
5582,5582,5736,042b49,042b79,cp b,cp b,cp b,fpp.asm,CP      B
5583,5583,5737,042b4a,042b7a,"jr c,$+$21","jr c,$+$21","jr c,$+$00",fpp.asm,"JR      C,MOD484        ;DIVIDEND<DIVISOR"
5584,5584,5738,042b4c,042b7c,"ex (sp),hl","ex (sp),hl","ex (sp),hl",fpp.asm,"EX      (SP),HL"
5585,5585,5739,042b4d,042b7d,"add.sil hl,hl","add.sil hl,hl","add.sil hl,hl",fpp.asm,"ADD.S   HL,HL           ;DIVIDEND * 2"
5586,5586,5740,042b4f,042b7f,"ex (sp),hl","ex (sp),hl","ex (sp),hl",fpp.asm,"EX      (SP),HL"
5587,5587,5741,042b50,042b80,exx,exx,exx,fpp.asm,EXX
5588,5588,5742,042b51,042b81,"adc.sil hl,hl","adc.sil hl,hl","adc.sil hl,hl",fpp.asm,"ADC.S   HL,HL"
5589,5589,5743,042b54,042b84,exx,exx,exx,fpp.asm,EXX
5590,5590,5744,042b55,042b85,"adc.sil hl,hl","adc.sil hl,hl","adc.sil hl,hl",fpp.asm,"ADC.S   HL,HL"
5591,5591,5745,042b58,042b88,"jr nc,$-$32","jr nc,$-$32","jr nc,$-$00",fpp.asm,"JR      NC,MOD481       ;AGAIN"
5592,5592,5746,042b5a,042b8a,or a,or a,or a,fpp.asm,OR      A
5593,5593,5747,042b5b,042b8b,exx,exx,exx,fpp.asm,EXX
5594,5594,5748,042b5c,042b8c,"ex (sp),hl","ex (sp),hl","ex (sp),hl",fpp.asm,"EX      (SP),HL"
5595,5595,5749,042b5d,042b8d,"sbc.sil hl,bc","sbc.sil hl,bc","sbc.sil hl,bc",fpp.asm,"SBC.S   HL,BC           ;OVERFLOW, SO SUBTRACT"
5596,5596,5750,042b60,042b90,"ex (sp),hl","ex (sp),hl","ex (sp),hl",fpp.asm,"EX      (SP),HL"
5597,5597,5751,042b61,042b91,"sbc.sil hl,de","sbc.sil hl,de","sbc.sil hl,de",fpp.asm,"SBC.S   HL,DE"
5598,5598,5752,042b64,042b94,exx,exx,exx,fpp.asm,EXX
5599,5599,5753,042b65,042b95,"sbc.sil hl,de","sbc.sil hl,de","sbc.sil hl,de",fpp.asm,"SBC.S   HL,DE"
5600,5600,5754,042b68,042b98,or a,or a,or a,fpp.asm,OR      A
5601,5601,5755,042b69,042b99,jr $-$28,jr $-$28,jr $-$00,fpp.asm,JR      MOD482
5602,5602,5756,042b6b,042b9b,inc a,inc a,inc a,fpp.asm,MOD484:			INC     A
5603,5603,5757,042b6c,042b9c,"ld e,c","ld e,c","ld e,c",fpp.asm,"MOD485:			LD      E,C             ;QUOTIENT"
5604,5604,5758,042b6d,042b9d,"ld c,a","ld c,a","ld c,a",fpp.asm,"LD      C,A             ;REMAINDER EXPONENT"
5605,5605,5759,042b6e,042b9e,exx,exx,exx,fpp.asm,EXX
5606,5606,5760,042b6f,042b9f,pop bc,pop bc,pop bc,fpp.asm,POP     BC
5607,5607,5761,042b70,042ba0,exx,exx,exx,fpp.asm,EXX
5608,5608,5762,042b71,042ba1,"bit 7,h","bit 7,h","bit 7,h",fpp.asm,"FLO48:			BIT     7,H"
5609,5609,5763,042b73,042ba3,ret nz,ret nz,ret nz,fpp.asm,RET     NZ
5610,5610,5764,042b74,042ba4,exx,exx,exx,fpp.asm,EXX
5611,5611,5765,042b75,042ba5,sla c,sla c,sla c,fpp.asm,SLA     C
5612,5612,5766,042b77,042ba7,rl b,rl b,rl b,fpp.asm,RL      B
5613,5613,5767,042b79,042ba9,"adc.sil hl,hl","adc.sil hl,hl","adc.sil hl,hl",fpp.asm,"ADC.S   HL,HL"
5614,5614,5768,042b7c,042bac,exx,exx,exx,fpp.asm,EXX
5615,5615,5769,042b7d,042bad,"adc.sil hl,hl","adc.sil hl,hl","adc.sil hl,hl",fpp.asm,"ADC.S   HL,HL"
5616,5616,5770,042b80,042bb0,dec c,dec c,dec c,fpp.asm,DEC     C
5617,5617,5771,042b81,042bb1,"jp nz,$042b71","jp nz,$042ba1","jp nz,$000000",fpp.asm,"JP      NZ,FLO48"
5618,5618,5772,042b85,042bb5,ret,ret,ret,fpp.asm,RET
5619,5619,5773,042b86,042bb6,"bit 7,h","bit 7,h","bit 7,h",fpp.asm,"FLOAT_:			BIT     7,H"
5620,5620,5774,042b88,042bb8,ret nz,ret nz,ret nz,fpp.asm,RET     NZ
5621,5621,5775,042b89,042bb9,exx,exx,exx,fpp.asm,"EXX                     ;SAME AS ""X2"""
5622,5622,5776,042b8a,042bba,"add.sil hl,hl","add.sil hl,hl","add.sil hl,hl",fpp.asm,"ADD.S   HL,HL           ;TIME-CRITICAL"
5623,5623,5777,042b8c,042bbc,exx,exx,exx,fpp.asm,EXX                     ;REGION
5624,5624,5778,042b8d,042bbd,"adc.sil hl,hl","adc.sil hl,hl","adc.sil hl,hl",fpp.asm,"ADC.S   HL,HL           ;(BENCHMARKS)"
5625,5625,5779,042b90,042bc0,dec c,dec c,dec c,fpp.asm,DEC     C
5626,5626,5780,042b91,042bc1,"jp nz,$042b86","jp nz,$042bb6","jp nz,$000000",fpp.asm,"JP      NZ,FLOAT_"
5627,5627,5781,042b95,042bc5,ret,ret,ret,fpp.asm,RET
5628,5628,5782,042b96,042bc6,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"FLOATA:			EX      AF,AF'"
5629,5629,5783,042b97,042bc7,"add a,$2a","add a,$2a","add a,$00",fpp.asm,"ADD     A,RTABLE-DTABLE/3 ; ez80asm doesn't do nested expressions"
5630,5630,5784,042b99,042bc9,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"EX      AF,AF'"
5631,5631,5785,042b9a,042bca,call $042bd7,call $042c07,call $000000,fpp.asm,FLOAT2:			CALL    SWAP_FP
5632,5632,5786,042b9e,042bce,call $042ba6,call $042bd6,call $000000,fpp.asm,CALL    SFLOAT_FP
5633,5633,5787,042ba2,042bd2,call $042bd7,call $042c07,call $000000,fpp.asm,CALL    SWAP_FP
5634,5634,5788,042ba6,042bd6,dec c,dec c,dec c,fpp.asm,SFLOAT_FP:			DEC     C
5635,5635,5789,042ba7,042bd7,inc c,inc c,inc c,fpp.asm,INC     C
5636,5636,5790,042ba8,042bd8,ret nz,ret nz,ret nz,fpp.asm,RET     NZ              ;ALREADY FLOATING-POINT
5637,5637,5791,042ba9,042bd9,call $042bff,call $042c2f,call $000000,fpp.asm,CALL    TEST_FP
5638,5638,5792,042bad,042bdd,ret z,ret z,ret z,fpp.asm,RET     Z               ;ZERO
5639,5639,5793,042bae,042bde,"ld a,h","ld a,h","ld a,h",fpp.asm,"LD      A,H"
5640,5640,5794,042baf,042bdf,or a,or a,or a,fpp.asm,OR      A
5641,5641,5795,042bb0,042be0,"call m,$042ada","call m,$042b0a","call m,$000000",fpp.asm,"CALL    M,NEGATE"
5642,5642,5796,042bb4,042be4,"ld c,$9f","ld c,$9f","ld c,$00",fpp.asm,"LD      C,159"
5643,5643,5797,042bb6,042be6,call $042b86,call $042bb6,call $000000,fpp.asm,CALL    FLOAT_
5644,5644,5798,042bba,042bea,or a,or a,or a,fpp.asm,OR      A
5645,5645,5799,042bbb,042beb,ret m,ret m,ret m,fpp.asm,RET     M               ;NEGATIVE
5646,5646,5800,042bbc,042bec,"res 7,h","res 7,h","res 7,h",fpp.asm,"RES     7,H"
5647,5647,5801,042bbe,042bee,ret,ret,ret,fpp.asm,RET
5648,5648,5802,042bbf,042bef,exx,exx,exx,fpp.asm,ADD1_FP:			EXX
5649,5649,5803,042bc0,042bf0,"ld bc,$000001","ld bc,$000001","ld bc,$000000",fpp.asm,"LD      BC,1"
5650,5650,5804,042bc4,042bf4,"add.sil hl,bc","add.sil hl,bc","add.sil hl,bc",fpp.asm,"ADD.S   HL,BC"
5651,5651,5805,042bc6,042bf6,exx,exx,exx,fpp.asm,EXX
5652,5652,5806,042bc7,042bf7,ret nc,ret nc,ret nc,fpp.asm,RET     NC
5653,5653,5807,042bc8,042bf8,push bc,push bc,push bc,fpp.asm,PUSH    BC
5654,5654,5808,042bc9,042bf9,"ld bc,$000001","ld bc,$000001","ld bc,$000000",fpp.asm,"LD      BC,1"
5655,5655,5809,042bcd,042bfd,"add.sil hl,bc","add.sil hl,bc","add.sil hl,bc",fpp.asm,"ADD.S   HL,BC"
5656,5656,5810,042bcf,042bff,pop bc,pop bc,pop bc,fpp.asm,POP     BC
5657,5657,5811,042bd0,042c00,ret,ret,ret,fpp.asm,RET
5658,5658,5812,042bd1,042c01,or a,or a,or a,fpp.asm,ODD:			OR      A               ;CLEAR CARRY
5659,5659,5813,042bd2,042c02,exx,exx,exx,fpp.asm,EXX
5660,5660,5814,042bd3,042c03,"set 0,l","set 0,l","set 0,l",fpp.asm,"SET     0,L             ;MAKE ODD"
5661,5661,5815,042bd5,042c05,exx,exx,exx,fpp.asm,EXX
5662,5662,5816,042bd6,042c06,ret,ret,ret,fpp.asm,RET
5663,5663,5817,042bd7,042c07,"ld a,c","ld a,c","ld a,c",fpp.asm,"SWAP_FP:			LD      A,C"
5664,5664,5818,042bd8,042c08,"ld c,b","ld c,b","ld c,b",fpp.asm,"LD      C,B"
5665,5665,5819,042bd9,042c09,"ld b,a","ld b,a","ld b,a",fpp.asm,"LD      B,A"
5666,5666,5820,042bda,042c0a,"ex de,hl","ex de,hl","ex de,hl",fpp.asm,"SWAP1:			EX      DE,HL"
5667,5667,5821,042bdb,042c0b,exx,exx,exx,fpp.asm,EXX
5668,5668,5822,042bdc,042c0c,"ex de,hl","ex de,hl","ex de,hl",fpp.asm,"EX      DE,HL"
5669,5669,5823,042bdd,042c0d,exx,exx,exx,fpp.asm,EXX
5670,5670,5824,042bde,042c0e,ret,ret,ret,fpp.asm,RET
5671,5671,5825,042bdf,042c0f,call $042c98,call $042cc8,call $000000,fpp.asm,DIV2:			CALL    D2
5672,5672,5826,042be3,042c13,exx,exx,exx,fpp.asm,EXX
5673,5673,5827,042be4,042c14,rr b,rr b,rr b,fpp.asm,RR      B
5674,5674,5828,042be6,042c16,rr c,rr c,rr c,fpp.asm,RR      C
5675,5675,5829,042be8,042c18,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"EX      AF,AF'"
5676,5676,5830,042be9,042c19,or b,or b,or b,fpp.asm,OR      B
5677,5677,5831,042bea,042c1a,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"EX      AF,AF'"
5678,5678,5832,042beb,042c1b,exx,exx,exx,fpp.asm,EXX
5679,5679,5833,042bec,042c1c,inc c,inc c,inc c,fpp.asm,INCC:			INC     C
5680,5680,5834,042bed,042c1d,ret nz,ret nz,ret nz,fpp.asm,RET     NZ
5681,5681,5835,042bee,042c1e,"ld a,$14","ld a,$14","ld a,$00",fpp.asm,"OFLOW:			LD      A,TOOBIG_FP"
5682,5682,5836,042bf0,042c20,jp $04207d,jp $0420ad,jp $000000,fpp.asm,"JP      ERROR_FP_           ;""Too big"""
5683,5683,5837,042bf4,042c24,call $042bff,call $042c2f,call $000000,fpp.asm,FTEST_FP:			CALL    TEST_FP
5684,5684,5838,042bf8,042c28,ret z,ret z,ret z,fpp.asm,RET     Z
5685,5685,5839,042bf9,042c29,"ld a,h","ld a,h","ld a,h",fpp.asm,"LD      A,H"
5686,5686,5840,042bfa,042c2a,and $80,and $80,and $00,fpp.asm,AND     10000000B
5687,5687,5841,042bfc,042c2c,or $40,or $40,or $00,fpp.asm,OR      01000000B
5688,5688,5842,042bfe,042c2e,ret,ret,ret,fpp.asm,RET
5689,5689,5843,042bff,042c2f,"ld a,h","ld a,h","ld a,h",fpp.asm,"TEST_FP:			LD      A,H"
5690,5690,5844,042c00,042c30,or l,or l,or l,fpp.asm,OR      L
5691,5691,5845,042c01,042c31,exx,exx,exx,fpp.asm,EXX
5692,5692,5846,042c02,042c32,or h,or h,or h,fpp.asm,OR      H
5693,5693,5847,042c03,042c33,or l,or l,or l,fpp.asm,OR      L
5694,5694,5848,042c04,042c34,exx,exx,exx,fpp.asm,EXX
5695,5695,5849,042c05,042c35,ret,ret,ret,fpp.asm,RET
5696,5696,5850,042c06,042c36,"ld a,b","ld a,b","ld a,b",fpp.asm,"FCOMP_FP:			LD      A,B"
5697,5697,5851,042c07,042c37,or c,or c,or c,fpp.asm,OR      C               ;Both integer?
5698,5698,5852,042c08,042c38,"jr nz,$+$0d","jr nz,$+$0d","jr nz,$+$00",fpp.asm,"JR      NZ,FCOMP1"
5699,5699,5853,042c0a,042c3a,call $042c1f,call $042c4f,call $000000,fpp.asm,CALL    ICP
5700,5700,5854,042c0e,042c3e,"ld a,$00","ld a,$00","ld a,$00",fpp.asm,"FCOMP0:			LD      A,0"
5701,5701,5855,042c10,042c40,ret z,ret z,ret z,fpp.asm,RET     Z               ;Equal
5702,5702,5856,042c11,042c41,"ld a,$80","ld a,$80","ld a,$00",fpp.asm,"LD      A,80H"
5703,5703,5857,042c13,042c43,rra,rra,rra,fpp.asm,RRA
5704,5704,5858,042c14,042c44,ret,ret,ret,fpp.asm,RET
5705,5705,5859,042c15,042c45,call $042b9a,call $042bca,call $000000,fpp.asm,FCOMP1:			CALL    FLOAT2          ;Float both
5706,5706,5860,042c19,042c49,call $042c2d,call $042c5d,call $000000,fpp.asm,CALL    FCP
5707,5707,5861,042c1d,042c4d,jr $-$0f,jr $-$0f,jr $-$00,fpp.asm,JR      FCOMP0
5708,5708,5862,042c1f,042c4f,call $042c52,call $042c82,call $000000,fpp.asm,ICP:			CALL    ICP1
5709,5709,5863,042c23,042c53,"ld a,$00","ld a,$00","ld a,$00",fpp.asm,"ZERO_FP:			LD      A,0"
5710,5710,5864,042c25,042c55,exx,exx,exx,fpp.asm,EXX
5711,5711,5865,042c26,042c56,"ld h,a","ld h,a","ld h,a",fpp.asm,"LD      H,A"
5712,5712,5866,042c27,042c57,"ld l,a","ld l,a","ld l,a",fpp.asm,"LD      L,A"
5713,5713,5867,042c28,042c58,exx,exx,exx,fpp.asm,EXX
5714,5714,5868,042c29,042c59,"ld h,a","ld h,a","ld h,a",fpp.asm,"LD      H,A"
5715,5715,5869,042c2a,042c5a,"ld l,a","ld l,a","ld l,a",fpp.asm,"LD      L,A"
5716,5716,5870,042c2b,042c5b,"ld c,a","ld c,a","ld c,a",fpp.asm,"LD      C,A"
5717,5717,5871,042c2c,042c5c,ret,ret,ret,fpp.asm,RET
5718,5718,5872,042c2d,042c5d,call $042c44,call $042c74,call $000000,fpp.asm,FCP:			CALL    FCP1
5719,5719,5873,042c31,042c61,jr $-$0e,jr $-$0e,jr $-$00,fpp.asm,JR      ZERO_FP            ;PRESET FALSE
5720,5720,5874,042c33,042c63,"ld a,c","ld a,c","ld a,c",fpp.asm,"FCP0:			LD      A,C"
5721,5721,5875,042c34,042c64,cp b,cp b,cp b,fpp.asm,CP      B               ;COMPARE EXPONENTS
5722,5722,5876,042c35,042c65,ret nz,ret nz,ret nz,fpp.asm,RET     NZ
5723,5723,5877,042c36,042c66,"sbc.sil hl,de","sbc.sil hl,de","sbc.sil hl,de",fpp.asm,"SBC.S   HL,DE           ;COMP MANTISSA MSB"
5724,5724,5878,042c39,042c69,"add.sil hl,de","add.sil hl,de","add.sil hl,de",fpp.asm,"ADD.S   HL,DE"
5725,5725,5879,042c3b,042c6b,ret nz,ret nz,ret nz,fpp.asm,RET     NZ
5726,5726,5880,042c3c,042c6c,exx,exx,exx,fpp.asm,EXX
5727,5727,5881,042c3d,042c6d,"sbc.sil hl,de","sbc.sil hl,de","sbc.sil hl,de",fpp.asm,"SBC.S   HL,DE           ;COMP MANTISSA LSB"
5728,5728,5882,042c40,042c70,"add.sil hl,de","add.sil hl,de","add.sil hl,de",fpp.asm,"ADD.S   HL,DE"
5729,5729,5883,042c42,042c72,exx,exx,exx,fpp.asm,EXX
5730,5730,5884,042c43,042c73,ret,ret,ret,fpp.asm,RET
5731,5731,5885,042c44,042c74,"ld a,h","ld a,h","ld a,h",fpp.asm,"FCP1:			LD      A,H"
5732,5732,5886,042c45,042c75,xor d,xor d,xor d,fpp.asm,XOR     D
5733,5733,5887,042c46,042c76,"ld a,h","ld a,h","ld a,h",fpp.asm,"LD      A,H"
5734,5734,5888,042c47,042c77,rla,rla,rla,fpp.asm,RLA
5735,5735,5889,042c48,042c78,ret m,ret m,ret m,fpp.asm,RET     M
5736,5736,5890,042c49,042c79,"jr nc,$-$16","jr nc,$-$16","jr nc,$-$00",fpp.asm,"JR      NC,FCP0"
5737,5737,5891,042c4b,042c7b,call $042c33,call $042c63,call $000000,fpp.asm,CALL    FCP0
5738,5738,5892,042c4f,042c7f,ret z,ret z,ret z,fpp.asm,RET     Z               ;** V0.1 BUG FIX
5739,5739,5893,042c50,042c80,ccf,ccf,ccf,fpp.asm,CCF
5740,5740,5894,042c51,042c81,ret,ret,ret,fpp.asm,RET
5741,5741,5895,042c52,042c82,"ld a,h","ld a,h","ld a,h",fpp.asm,"ICP1:			LD      A,H"
5742,5742,5896,042c53,042c83,xor d,xor d,xor d,fpp.asm,XOR     D
5743,5743,5897,042c54,042c84,"jp p,$042c36","jp p,$042c66","jp p,$000000",fpp.asm,"JP      P,ICP0"
5744,5744,5898,042c58,042c88,"ld a,h","ld a,h","ld a,h",fpp.asm,"LD      A,H"
5745,5745,5899,042c59,042c89,rla,rla,rla,fpp.asm,RLA
5746,5746,5900,042c5a,042c8a,ret,ret,ret,fpp.asm,RET
5747,5747,5901,042c5b,042c8b,dec b,dec b,dec b,fpp.asm,X10B:			DEC     B
5748,5748,5902,042c5c,042c8c,inc c,inc c,inc c,fpp.asm,INC     C
5749,5749,5903,042c5d,042c8d,call $042ca4,call $042cd4,call $000000,fpp.asm,X5:			CALL    COPY0
5750,5750,5904,042c61,042c91,call $042c97,call $042cc7,call $000000,fpp.asm,CALL    D2C
5751,5751,5905,042c65,042c95,call $042c97,call $042cc7,call $000000,fpp.asm,CALL    D2C
5752,5752,5906,042c69,042c99,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"EX      AF,AF'          ;SAVE CARRY"
5753,5753,5907,042c6a,042c9a,exx,exx,exx,fpp.asm,ADD_:			EXX
5754,5754,5908,042c6b,042c9b,"add.sil hl,de","add.sil hl,de","add.sil hl,de",fpp.asm,"ADD.S   HL,DE"
5755,5755,5909,042c6d,042c9d,exx,exx,exx,fpp.asm,EXX
5756,5756,5910,042c6e,042c9e,"adc.sil hl,de","adc.sil hl,de","adc.sil hl,de",fpp.asm,"ADC.S   HL,DE"
5757,5757,5911,042c71,042ca1,ret,ret,ret,fpp.asm,RET
5758,5758,5912,042c72,042ca2,exx,exx,exx,fpp.asm,SUB_:			EXX
5759,5759,5913,042c73,042ca3,or a,or a,or a,fpp.asm,OR      A
5760,5760,5914,042c74,042ca4,"sbc.sil hl,de","sbc.sil hl,de","sbc.sil hl,de",fpp.asm,"SBC.S   HL,DE"
5761,5761,5915,042c77,042ca7,exx,exx,exx,fpp.asm,EXX
5762,5762,5916,042c78,042ca8,"sbc.sil hl,de","sbc.sil hl,de","sbc.sil hl,de",fpp.asm,"SBC.S   HL,DE"
5763,5763,5917,042c7b,042cab,ret,ret,ret,fpp.asm,RET
5764,5764,5918,042c7c,042cac,call $042ca4,call $042cd4,call $000000,fpp.asm,X10:			CALL    COPY0           ;DED'E'=HLH'L'
5765,5765,5919,042c80,042cb0,call $042c8f,call $042cbf,call $000000,fpp.asm,CALL    X2
5766,5766,5920,042c84,042cb4,ret c,ret c,ret c,fpp.asm,RET     C               ;TOO BIG
5767,5767,5921,042c85,042cb5,call $042c8f,call $042cbf,call $000000,fpp.asm,CALL    X2
5768,5768,5922,042c89,042cb9,ret c,ret c,ret c,fpp.asm,RET     C
5769,5769,5923,042c8a,042cba,call $042c6a,call $042c9a,call $000000,fpp.asm,CALL    ADD_
5770,5770,5924,042c8e,042cbe,ret c,ret c,ret c,fpp.asm,RET     C
5771,5771,5925,042c8f,042cbf,exx,exx,exx,fpp.asm,X2:			EXX
5772,5772,5926,042c90,042cc0,"add.sil hl,hl","add.sil hl,hl","add.sil hl,hl",fpp.asm,"ADD.S   HL,HL"
5773,5773,5927,042c92,042cc2,exx,exx,exx,fpp.asm,EXX
5774,5774,5928,042c93,042cc3,"adc.sil hl,hl","adc.sil hl,hl","adc.sil hl,hl",fpp.asm,"ADC.S   HL,HL"
5775,5775,5929,042c96,042cc6,ret,ret,ret,fpp.asm,RET
5776,5776,5930,042c97,042cc7,inc c,inc c,inc c,fpp.asm,D2C:			INC     C
5777,5777,5931,042c98,042cc8,srl h,srl h,srl h,fpp.asm,D2:			SRL     H
5778,5778,5932,042c9a,042cca,rr l,rr l,rr l,fpp.asm,RR      L
5779,5779,5933,042c9c,042ccc,exx,exx,exx,fpp.asm,EXX
5780,5780,5934,042c9d,042ccd,rr h,rr h,rr h,fpp.asm,RR      H
5781,5781,5935,042c9f,042ccf,rr l,rr l,rr l,fpp.asm,RR      L
5782,5782,5936,042ca1,042cd1,exx,exx,exx,fpp.asm,EXX
5783,5783,5937,042ca2,042cd2,ret,ret,ret,fpp.asm,RET
5784,5784,5938,042ca3,042cd3,"ld b,c","ld b,c","ld b,c",fpp.asm,"COPY_:			LD      B,C"
5785,5785,5939,042ca4,042cd4,"ld d,h","ld d,h","ld d,h",fpp.asm,"COPY0:			LD      D,H"
5786,5786,5940,042ca5,042cd5,"ld e,l","ld e,l","ld e,l",fpp.asm,"LD      E,L"
5787,5787,5941,042ca6,042cd6,exx,exx,exx,fpp.asm,EXX
5788,5788,5942,042ca7,042cd7,"ld d,h","ld d,h","ld d,h",fpp.asm,"LD      D,H"
5789,5789,5943,042ca8,042cd8,"ld e,l","ld e,l","ld e,l",fpp.asm,"LD      E,L"
5790,5790,5944,042ca9,042cd9,exx,exx,exx,fpp.asm,EXX
5791,5791,5945,042caa,042cda,ret,ret,ret,fpp.asm,RET
5792,5792,5946,042cab,042cdb,call $042ca3,call $042cd3,call $000000,fpp.asm,SQUARE:			CALL    COPY_
5793,5793,5947,042caf,042cdf,call $04230e,call $04233e,call $000000,fpp.asm,CALL    FMUL
5794,5794,5948,042cb3,042ce3,pop ix,pop ix,pop ix,fpp.asm,PUSH5:			POP     IX              ;RETURN ADDRESS
5795,5795,5949,042cb5,042ce5,push bc,push bc,push bc,fpp.asm,PUSH    BC
5796,5796,5950,042cb6,042ce6,push hl,push hl,push hl,fpp.asm,PUSH    HL
5797,5797,5951,042cb7,042ce7,exx,exx,exx,fpp.asm,EXX
5798,5798,5952,042cb8,042ce8,push hl,push hl,push hl,fpp.asm,PUSH    HL
5799,5799,5953,042cb9,042ce9,exx,exx,exx,fpp.asm,EXX
5800,5800,5954,042cba,042cea,jp (ix),jp (ix),jp (ix),fpp.asm,"JP      (IX)            ;""RETURN"""
5801,5801,5955,042cbc,042cec,pop ix,pop ix,pop ix,fpp.asm,POP5:			POP     IX              ;RETURN ADDRESS
5802,5802,5956,042cbe,042cee,exx,exx,exx,fpp.asm,EXX
5803,5803,5957,042cbf,042cef,pop de,pop de,pop de,fpp.asm,POP     DE
5804,5804,5958,042cc0,042cf0,exx,exx,exx,fpp.asm,EXX
5805,5805,5959,042cc1,042cf1,pop de,pop de,pop de,fpp.asm,POP     DE
5806,5806,5960,042cc2,042cf2,"ld a,c","ld a,c","ld a,c",fpp.asm,"LD      A,C"
5807,5807,5961,042cc3,042cf3,pop bc,pop bc,pop bc,fpp.asm,POP     BC
5808,5808,5962,042cc4,042cf4,"ld b,c","ld b,c","ld b,c",fpp.asm,"LD      B,C"
5809,5809,5963,042cc5,042cf5,"ld c,a","ld c,a","ld c,a",fpp.asm,"LD      C,A"
5810,5810,5964,042cc6,042cf6,jp (ix),jp (ix),jp (ix),fpp.asm,"JP      (IX)            ;""RETURN"""
5811,5811,5965,042cc8,042cf8,call $042cb3,call $042ce3,call $000000,fpp.asm,RATIO:			CALL    PUSH5           ;SAVE X
5812,5812,5966,042ccc,042cfc,call $04263b,call $04266b,call $000000,fpp.asm,CALL    DONE
5813,5813,5967,042cd0,042d00,call $0421fc,call $04222c,call $000000,fpp.asm,CALL    FADD
5814,5814,5968,042cd4,042d04,call $042cbc,call $042cec,call $000000,fpp.asm,CALL    POP5            ;RESTORE X
5815,5815,5969,042cd8,042d08,call $042cb3,call $042ce3,call $000000,fpp.asm,CALL    PUSH5           ;SAVE X+1
5816,5816,5970,042cdc,042d0c,call $042bd7,call $042c07,call $000000,fpp.asm,CALL    SWAP_FP
5817,5817,5971,042ce0,042d10,call $04263b,call $04266b,call $000000,fpp.asm,CALL    DONE
5818,5818,5972,042ce4,042d14,call $0421e3,call $042213,call $000000,fpp.asm,CALL    FSUB
5819,5819,5973,042ce8,042d18,call $042cbc,call $042cec,call $000000,fpp.asm,CALL    POP5            ;RESTORE X+1
5820,5820,5974,042cec,042d1c,jp $042265,jp $042295,jp $000000,fpp.asm,JP      FDIV
5821,5821,5975,042cf0,042d20,"ld ix,$000003","ld ix,$000003","ld ix,$000000",fpp.asm,"POLY:			LD      IX, 3				; Advance the SP to the return address"
5822,5822,5976,042cf5,042d25,"add ix,sp","add ix,sp","add ix,sp",fpp.asm,"ADD     IX, SP"
5823,5823,5977,042cf7,042d27,"ex (sp),ix","ex (sp),ix","ex (sp),ix",fpp.asm,"EX      (SP), IX			; IX: Points to the inline list of coefficients"
5824,5824,5978,042cf9,042d29,call $0429cf,call $0429ff,call $000000,fpp.asm,CALL    DLOAD5          		; Load the first coefficient from (IX)
5825,5825,5979,042cfd,042d2d,call $04230e,call $04233e,call $000000,fpp.asm,POLY1:			CALL    FMUL
5826,5826,5980,042d01,042d31,"ld de,$000005","ld de,$000005","ld de,$000000",fpp.asm,"LD      DE, 5				; Skip to the next coefficient"
5827,5827,5981,042d05,042d35,"add ix,de","add ix,de","add ix,de",fpp.asm,"ADD     IX, DE"
5828,5828,5982,042d07,042d37,call $0429cf,call $0429ff,call $000000,fpp.asm,CALL    DLOAD5          		; Load the second coefficient from (IX)
5829,5829,5983,042d0b,042d3b,"ex (sp),ix","ex (sp),ix","ex (sp),ix",fpp.asm,"EX      (SP), IX			; Restore the SP just in case we need to return"
5830,5830,5984,042d0d,042d3d,inc b,inc b,inc b,fpp.asm,INC     B
5831,5831,5985,042d0e,042d3e,dec b,dec b,dec b,fpp.asm,DEC     B               		; Test B for end byte (80h)
5832,5832,5986,042d0f,042d3f,"jp m,$0421fc","jp m,$04222c","jp m,$000000",fpp.asm,"JP      M,FADD				; Yes, so add and return"
5833,5833,5987,042d13,042d43,call $0421fc,call $04222c,call $000000,fpp.asm,"CALL    FADD				; No, so add"
5834,5834,5988,042d17,042d47,call $0429e1,call $042a11,call $000000,fpp.asm,CALL    DLOAD5_SPL			; Load X from SP
5835,5835,5989,042d1b,042d4b,"ex (sp),ix","ex (sp),ix","ex (sp),ix",fpp.asm,"EX      (SP), IX			; IX: Points to the inline list of coefficients"
5836,5836,5990,042d1d,042d4d,jr $-$20,jr $-$20,jr $-$00,fpp.asm,JR      POLY1				; And loop
5837,5837,5991,042d1f,042d4f,inc a,inc a,inc a,fpp.asm,POWR10:			INC     A
5838,5838,5992,042d20,042d50,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"EX      AF,AF'"
5839,5839,5993,042d21,042d51,push hl,push hl,push hl,fpp.asm,PUSH    HL
5840,5840,5994,042d22,042d52,exx,exx,exx,fpp.asm,EXX
5841,5841,5995,042d23,042d53,push hl,push hl,push hl,fpp.asm,PUSH    HL
5842,5842,5996,042d24,042d54,exx,exx,exx,fpp.asm,EXX
5843,5843,5997,042d25,042d55,call $04263b,call $04266b,call $000000,fpp.asm,CALL    DONE
5844,5844,5998,042d29,042d59,call $042bd7,call $042c07,call $000000,fpp.asm,CALL    SWAP_FP
5845,5845,5999,042d2d,042d5d,xor a,xor a,xor a,fpp.asm,XOR     A
5846,5846,6000,042d2e,042d5e,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"POWR11:			EX      AF,AF'"
5847,5847,6001,042d2f,042d5f,dec a,dec a,dec a,fpp.asm,DEC     A
5848,5848,6002,042d30,042d60,"jr z,$+$28","jr z,$+$28","jr z,$+$00",fpp.asm,"JR      Z,POWR14        ;EXIT TYPE 1"
5849,5849,6003,042d32,042d62,"jp p,$042d3a","jp p,$042d6a","jp p,$000000",fpp.asm,"JP      P,POWR13"
5850,5850,6004,042d36,042d66,cp c,cp c,cp c,fpp.asm,CP      C
5851,5851,6005,042d37,042d67,"jr c,$+$21","jr c,$+$21","jr c,$+$00",fpp.asm,"JR      C,POWR14        ;EXIT TYPE 2"
5852,5852,6006,042d39,042d69,inc a,inc a,inc a,fpp.asm,INC     A
5853,5853,6007,042d3a,042d6a,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"POWR13:			EX      AF,AF'"
5854,5854,6008,042d3b,042d6b,inc a,inc a,inc a,fpp.asm,INC     A
5855,5855,6009,042d3c,042d6c,"set 7,h","set 7,h","set 7,h",fpp.asm,"SET     7,H"
5856,5856,6010,042d3e,042d6e,call $042c5d,call $042c8d,call $000000,fpp.asm,CALL    X5
5857,5857,6011,042d42,042d72,"jr nc,$+$08","jr nc,$+$08","jr nc,$+$00",fpp.asm,"JR      NC,POWR12"
5858,5858,6012,042d44,042d74,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"EX      AF,AF'"
5859,5859,6013,042d45,042d75,call $042c97,call $042cc7,call $000000,fpp.asm,CALL    D2C
5860,5860,6014,042d49,042d79,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"EX      AF,AF'"
5861,5861,6015,042d4a,042d7a,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"POWR12:			EX      AF,AF'"
5862,5862,6016,042d4b,042d7b,"call c,$042bbf","call c,$042bef","call c,$000000",fpp.asm,"CALL    C,ADD1_FP          ;ROUND UP"
5863,5863,6017,042d4f,042d7f,inc c,inc c,inc c,fpp.asm,INC     C
5864,5864,6018,042d50,042d80,"jp m,$042d2e","jp m,$042d5e","jp m,$000000",fpp.asm,"JP      M,POWR11"
5865,5865,6019,042d54,042d84,jp $042bee,jp $042c1e,jp $000000,fpp.asm,JP      OFLOW
5866,5866,6020,042d58,042d88,call $042bd7,call $042c07,call $000000,fpp.asm,POWR14:			CALL    SWAP_FP
5867,5867,6021,042d5c,042d8c,"res 7,d","res 7,d","res 7,d",fpp.asm,"RES     7,D"
5868,5868,6022,042d5e,042d8e,exx,exx,exx,fpp.asm,EXX
5869,5869,6023,042d5f,042d8f,pop hl,pop hl,pop hl,fpp.asm,POP     HL
5870,5870,6024,042d60,042d90,exx,exx,exx,fpp.asm,EXX
5871,5871,6025,042d61,042d91,pop hl,pop hl,pop hl,fpp.asm,POP     HL
5872,5872,6026,042d62,042d92,"ex af,af'","ex af,af'","ex af,af'",fpp.asm,"EX      AF,AF'"
5873,5873,6027,042d63,042d93,ret,ret,ret,fpp.asm,RET
5874,5874,6028,042d64,042d94,or a,or a,or a,fpp.asm,DIVA:			OR      A               ;CLEAR CARRY
5875,5875,6029,042d65,042d95,"sbc.sil hl,bc","sbc.sil hl,bc","sbc.sil hl,bc",fpp.asm,"SBC.S   HL,BC           ;DIVIDEND-DIVISOR"
5876,5876,6030,042d68,042d98,exx,exx,exx,fpp.asm,EXX
5877,5877,6031,042d69,042d99,"sbc.sil hl,bc","sbc.sil hl,bc","sbc.sil hl,bc",fpp.asm,"SBC.S   HL,BC"
5878,5878,6032,042d6c,042d9c,exx,exx,exx,fpp.asm,EXX
5879,5879,6033,042d6d,042d9d,"jr nc,$+$09","jr nc,$+$09","jr nc,$+$00",fpp.asm,"JR      NC,DIV1"
5880,5880,6034,042d6f,042d9f,"add.sil hl,bc","add.sil hl,bc","add.sil hl,bc",fpp.asm,"ADD.S   HL,BC           ;DIVIDEND+DIVISOR"
5881,5881,6035,042d71,042da1,exx,exx,exx,fpp.asm,EXX
5882,5882,6036,042d72,042da2,"adc.sil hl,bc","adc.sil hl,bc","adc.sil hl,bc",fpp.asm,"ADC.S   HL,BC"
5883,5883,6037,042d75,042da5,exx,exx,exx,fpp.asm,EXX
5884,5884,6038,042d76,042da6,ccf,ccf,ccf,fpp.asm,DIV1:			CCF
5885,5885,6039,042d77,042da7,rl e,rl e,rl e,fpp.asm,DIVC:			RL      E               ;SHIFT RESULT INTO DE
5886,5886,6040,042d79,042da9,rl d,rl d,rl d,fpp.asm,RL      D
5887,5887,6041,042d7b,042dab,exx,exx,exx,fpp.asm,EXX
5888,5888,6042,042d7c,042dac,rl e,rl e,rl e,fpp.asm,RL      E
5889,5889,6043,042d7e,042dae,rl d,rl d,rl d,fpp.asm,RL      D
5890,5890,6044,042d80,042db0,exx,exx,exx,fpp.asm,EXX
5891,5891,6045,042d81,042db1,inc a,inc a,inc a,fpp.asm,INC     A
5892,5892,6046,042d82,042db2,ret p,ret p,ret p,fpp.asm,RET     P
5893,5893,6047,042d83,042db3,"adc.sil hl,hl","adc.sil hl,hl","adc.sil hl,hl",fpp.asm,"ADC.S   HL,HL           ;DIVIDEND*2"
5894,5894,6048,042d86,042db6,exx,exx,exx,fpp.asm,EXX
5895,5895,6049,042d87,042db7,"adc.sil hl,hl","adc.sil hl,hl","adc.sil hl,hl",fpp.asm,"ADC.S   HL,HL"
5896,5896,6050,042d8a,042dba,exx,exx,exx,fpp.asm,EXX
5897,5897,6051,042d8b,042dbb,"jr nc,$-$26","jr nc,$-$26","jr nc,$-$00",fpp.asm,"JR      NC,DIV0"
5898,5898,6052,042d8d,042dbd,or a,or a,or a,fpp.asm,OR      A
5899,5899,6053,042d8e,042dbe,"sbc.sil hl,bc","sbc.sil hl,bc","sbc.sil hl,bc",fpp.asm,"SBC.S   HL,BC           ;DIVIDEND-DIVISOR"
5900,5900,6054,042d91,042dc1,exx,exx,exx,fpp.asm,EXX
5901,5901,6055,042d92,042dc2,"sbc.sil hl,bc","sbc.sil hl,bc","sbc.sil hl,bc",fpp.asm,"SBC.S   HL,BC"
5902,5902,6056,042d95,042dc5,exx,exx,exx,fpp.asm,EXX
5903,5903,6057,042d96,042dc6,scf,scf,scf,fpp.asm,SCF
5904,5904,6058,042d97,042dc7,jp $042d77,jp $042da7,jp $000000,fpp.asm,JP      DIVC
5905,5905,6059,042d9b,042dcb,or a,or a,or a,fpp.asm,MULA:			OR      A               ;CLEAR CARRY
5906,5906,6060,042d9c,042dcc,exx,exx,exx,fpp.asm,MUL0:			EXX
5907,5907,6061,042d9d,042dcd,rr d,rr d,rr d,fpp.asm,RR      D               ;MULTIPLIER/2
5908,5908,6062,042d9f,042dcf,rr e,rr e,rr e,fpp.asm,RR      E
5909,5909,6063,042da1,042dd1,exx,exx,exx,fpp.asm,EXX
5910,5910,6064,042da2,042dd2,rr d,rr d,rr d,fpp.asm,RR      D
5911,5911,6065,042da4,042dd4,rr e,rr e,rr e,fpp.asm,RR      E
5912,5912,6066,042da6,042dd6,"jr nc,$+$09","jr nc,$+$09","jr nc,$+$00",fpp.asm,"JR      NC,MUL1"
5913,5913,6067,042da8,042dd8,"add.sil hl,bc","add.sil hl,bc","add.sil hl,bc",fpp.asm,"ADD.S   HL,BC           ;ADD IN MULTIPLICAND"
5914,5914,6068,042daa,042dda,exx,exx,exx,fpp.asm,EXX
5915,5915,6069,042dab,042ddb,"adc.sil hl,bc","adc.sil hl,bc","adc.sil hl,bc",fpp.asm,"ADC.S   HL,BC"
5916,5916,6070,042dae,042dde,exx,exx,exx,fpp.asm,EXX
5917,5917,6071,042daf,042ddf,inc a,inc a,inc a,fpp.asm,MUL1:			INC     A
5918,5918,6072,042db0,042de0,ret p,ret p,ret p,fpp.asm,RET     P
5919,5919,6073,042db1,042de1,exx,exx,exx,fpp.asm,MULB:			EXX
5920,5920,6074,042db2,042de2,rr h,rr h,rr h,fpp.asm,RR      H               ;PRODUCT/2
5921,5921,6075,042db4,042de4,rr l,rr l,rr l,fpp.asm,RR      L
5922,5922,6076,042db6,042de6,exx,exx,exx,fpp.asm,EXX
5923,5923,6077,042db7,042de7,rr h,rr h,rr h,fpp.asm,RR      H
5924,5924,6078,042db9,042de9,rr l,rr l,rr l,fpp.asm,RR      L
5925,5925,6079,042dbb,042deb,jp $042d9c,jp $042dcc,jp $000000,fpp.asm,JP      MUL0
5926,5926,6080,042dbf,042def,"sbc.sil hl,bc","sbc.sil hl,bc","sbc.sil hl,bc",fpp.asm,"SBC.S   HL,BC"
5927,5927,6081,042dc2,042df2,exx,exx,exx,fpp.asm,EXX
5928,5928,6082,042dc3,042df3,"sbc.sil hl,bc","sbc.sil hl,bc","sbc.sil hl,bc",fpp.asm,"SBC.S   HL,BC"
5929,5929,6083,042dc6,042df6,exx,exx,exx,fpp.asm,EXX
5930,5930,6084,042dc7,042df7,inc c,inc c,inc c,fpp.asm,INC     C
5931,5931,6085,042dc8,042df8,"jr nc,$+$0b","jr nc,$+$0b","jr nc,$+$00",fpp.asm,"JR      NC,SQR2"
5932,5932,6086,042dca,042dfa,dec c,dec c,dec c,fpp.asm,DEC     C
5933,5933,6087,042dcb,042dfb,"add.sil hl,bc","add.sil hl,bc","add.sil hl,bc",fpp.asm,"ADD.S   HL,BC"
5934,5934,6088,042dcd,042dfd,exx,exx,exx,fpp.asm,EXX
5935,5935,6089,042dce,042dfe,"adc.sil hl,bc","adc.sil hl,bc","adc.sil hl,bc",fpp.asm,"ADC.S   HL,BC"
5936,5936,6090,042dd1,042e01,exx,exx,exx,fpp.asm,EXX
5937,5937,6091,042dd2,042e02,dec c,dec c,dec c,fpp.asm,DEC     C
5938,5938,6092,042dd3,042e03,inc a,inc a,inc a,fpp.asm,SQR2:			INC     A
5939,5939,6093,042dd4,042e04,ret p,ret p,ret p,fpp.asm,RET     P
5940,5940,6094,042dd5,042e05,sla c,sla c,sla c,fpp.asm,SQRA:			SLA     C
5941,5941,6095,042dd7,042e07,rl b,rl b,rl b,fpp.asm,RL      B
5942,5942,6096,042dd9,042e09,exx,exx,exx,fpp.asm,EXX
5943,5943,6097,042dda,042e0a,rl c,rl c,rl c,fpp.asm,RL      C
5944,5944,6098,042ddc,042e0c,rl b,rl b,rl b,fpp.asm,RL      B
5945,5945,6099,042dde,042e0e,exx,exx,exx,fpp.asm,EXX
5946,5946,6100,042ddf,042e0f,inc c,inc c,inc c,fpp.asm,INC     C
5947,5947,6101,042de0,042e10,sla e,sla e,sla e,fpp.asm,SLA     E
5948,5948,6102,042de2,042e12,rl d,rl d,rl d,fpp.asm,RL      D
5949,5949,6103,042de4,042e14,exx,exx,exx,fpp.asm,EXX
5950,5950,6104,042de5,042e15,rl e,rl e,rl e,fpp.asm,RL      E
5951,5951,6105,042de7,042e17,rl d,rl d,rl d,fpp.asm,RL      D
5952,5952,6106,042de9,042e19,exx,exx,exx,fpp.asm,EXX
5953,5953,6107,042dea,042e1a,"adc.sil hl,hl","adc.sil hl,hl","adc.sil hl,hl",fpp.asm,"ADC.S   HL,HL"
5954,5954,6108,042ded,042e1d,exx,exx,exx,fpp.asm,EXX
5955,5955,6109,042dee,042e1e,"adc.sil hl,hl","adc.sil hl,hl","adc.sil hl,hl",fpp.asm,"ADC.S   HL,HL"
5956,5956,6110,042df1,042e21,exx,exx,exx,fpp.asm,EXX
5957,5957,6111,042df2,042e22,sla e,sla e,sla e,fpp.asm,SLA     E
5958,5958,6112,042df4,042e24,rl d,rl d,rl d,fpp.asm,RL      D
5959,5959,6113,042df6,042e26,exx,exx,exx,fpp.asm,EXX
5960,5960,6114,042df7,042e27,rl e,rl e,rl e,fpp.asm,RL      E
5961,5961,6115,042df9,042e29,rl d,rl d,rl d,fpp.asm,RL      D
5962,5962,6116,042dfb,042e2b,exx,exx,exx,fpp.asm,EXX
5963,5963,6117,042dfc,042e2c,"adc.sil hl,hl","adc.sil hl,hl","adc.sil hl,hl",fpp.asm,"ADC.S   HL,HL"
5964,5964,6118,042dff,042e2f,exx,exx,exx,fpp.asm,EXX
5965,5965,6119,042e00,042e30,"adc.sil hl,hl","adc.sil hl,hl","adc.sil hl,hl",fpp.asm,"ADC.S   HL,HL"
5966,5966,6120,042e03,042e33,exx,exx,exx,fpp.asm,EXX
5967,5967,6121,042e04,042e34,"jp nc,$042dbf","jp nc,$042def","jp nc,$000000",fpp.asm,"JP      NC,SQR1"
5968,5968,6122,042e08,042e38,or a,or a,or a,fpp.asm,SQR3:			OR      A
5969,5969,6123,042e09,042e39,"sbc.sil hl,bc","sbc.sil hl,bc","sbc.sil hl,bc",fpp.asm,"SBC.S   HL,BC"
5970,5970,6124,042e0c,042e3c,exx,exx,exx,fpp.asm,EXX
5971,5971,6125,042e0d,042e3d,"sbc.sil hl,bc","sbc.sil hl,bc","sbc.sil hl,bc",fpp.asm,"SBC.S   HL,BC"
5972,5972,6126,042e10,042e40,exx,exx,exx,fpp.asm,EXX
5973,5973,6127,042e11,042e41,inc c,inc c,inc c,fpp.asm,INC     C
5974,5974,6128,042e12,042e42,jp $042dd3,jp $042e03,jp $000000,fpp.asm,JP      SQR2
5975,5975,6129,042e16,042e46,"add.sil hl,hl","add.sil hl,hl","add.sil hl,hl",fpp.asm,"ADD.S   HL,HL"
5976,5976,6130,042e18,042e48,exx,exx,exx,fpp.asm,EXX
5977,5977,6131,042e19,042e49,"adc.sil hl,hl","adc.sil hl,hl","adc.sil hl,hl",fpp.asm,"ADC.S   HL,HL"
5978,5978,6132,042e1c,042e4c,exx,exx,exx,fpp.asm,EXX
5979,5979,6133,042e1d,042e4d,"jr c,$-$15","jr c,$-$15","jr c,$-$00",fpp.asm,"JR      C,SQR3"
5980,5980,6134,042e1f,042e4f,inc a,inc a,inc a,fpp.asm,INC     A
5981,5981,6135,042e20,042e50,inc c,inc c,inc c,fpp.asm,INC     C
5982,5982,6136,042e21,042e51,"sbc.sil hl,bc","sbc.sil hl,bc","sbc.sil hl,bc",fpp.asm,"SBC.S   HL,BC"
5983,5983,6137,042e24,042e54,exx,exx,exx,fpp.asm,EXX
5984,5984,6138,042e25,042e55,"sbc.sil hl,bc","sbc.sil hl,bc","sbc.sil hl,bc",fpp.asm,"SBC.S   HL,BC"
5985,5985,6139,042e28,042e58,exx,exx,exx,fpp.asm,EXX
5986,5986,6140,042e29,042e59,ret nc,ret nc,ret nc,fpp.asm,RET     NC
5987,5987,6141,042e2a,042e5a,"add.sil hl,bc","add.sil hl,bc","add.sil hl,bc",fpp.asm,"ADD.S   HL,BC"
5988,5988,6142,042e2c,042e5c,exx,exx,exx,fpp.asm,EXX
5989,5989,6143,042e2d,042e5d,"adc.sil hl,bc","adc.sil hl,bc","adc.sil hl,bc",fpp.asm,"ADC.S   HL,BC"
5990,5990,6144,042e30,042e60,exx,exx,exx,fpp.asm,EXX
5991,5991,6145,042e31,042e61,dec c,dec c,dec c,fpp.asm,DEC     C
5992,5992,6146,042e32,042e62,ret,ret,ret,fpp.asm,RET
5993,5993,6147,042e33,042e63,"ld a,(ix)","ld a,(ix)","ld a,(ix)",fpp.asm,"DIGITQ:			LD      A,(IX)"
5994,5994,6148,042e36,042e66,cp $3a,cp $3a,cp $00,fpp.asm,CP      '9'+1
5995,5995,6149,042e38,042e68,ccf,ccf,ccf,fpp.asm,CCF
5996,5996,6150,042e39,042e69,ret c,ret c,ret c,fpp.asm,RET     C
5997,5997,6151,042e3a,042e6a,cp $30,cp $30,cp $00,fpp.asm,CP      '0'
5998,5998,6152,042e3c,042e6c,ret,ret,ret,fpp.asm,RET
5999,5999,6153,042e3d,042e6d,"ld a,(ix)","ld a,(ix)","ld a,(ix)",fpp.asm,"SIGNQ:			LD      A,(IX)"
6000,6000,6154,042e40,042e70,inc ix,inc ix,inc ix,fpp.asm,INC     IX
6001,6001,6155,042e42,042e72,cp $20,cp $20,cp $00,fpp.asm,CP      ' '
6002,6002,6156,042e44,042e74,"jr z,$-$07","jr z,$-$07","jr z,$-$00",fpp.asm,"JR      Z,SIGNQ"
6003,6003,6157,042e46,042e76,cp $2b,cp $2b,cp $00,fpp.asm,CP      '+'
6004,6004,6158,042e48,042e78,ret z,ret z,ret z,fpp.asm,RET     Z
6005,6005,6159,042e49,042e79,cp $2d,cp $2d,cp $00,fpp.asm,CP      '-'
6006,6006,6160,042e4b,042e7b,ret z,ret z,ret z,fpp.asm,RET     Z
6007,6007,6161,042e4c,042e7c,dec ix,dec ix,dec ix,fpp.asm,DEC     IX
6008,6008,6162,042e4e,042e7e,ret,ret,ret,fpp.asm,RET; --- End fpp.asm ---
6009,6009,6163,042e4f,042e7f,call $043df4,call $043e24,call $000000,gpio.asm,GPIOB_SETMODE:		CALL	SWITCH_A
6010,6010,,042e53,,"ld h,a",,"ld h,a",,
6011,6011,,042e54,,"ld l,$8c",,"ld l,$00",,
6012,6012,,042e56,,"ld l,$ac",,"ld l,$00",,
6013,6013,,042e58,,"ld l,$cc",,"ld l,$00",,
6014,6014,,042e5a,,"ld l,$e7",,"ld l,$00",,
6015,6015,,042e5c,,"ld l,$13",,"ld l,$00",,
6016,6016,,042e5e,,cpl,,cpl,,
6017,6017,,042e5f,,"ld l,$2f",,"ld l,$00",,
6018,6018,,042e61,,"ld d,l",,"ld d,l",,
6019,6019,6175,042e62,042e92,cpl,cpl,cpl,gpio.asm,
6020,6020,,042e63,,"ld (hl),a",,"ld (hl),a",,
6021,6021,6177,042e64,042e94,cpl,cpl,cpl,gpio.asm,
6022,6022,,042e65,,"sbc a,c",,"sbc a,c",,
6023,6023,6179,042e66,042e96,cpl,cpl,cpl,gpio.asm,
6024,6024,6180,042e67,042e97,push bc,push bc,push bc,gpio.asm,PUSH	BC
6025,6025,6181,042e68,042e98,"ld a,b","ld a,b","ld a,b",gpio.asm,"LD	A, val"
6026,6026,6182,042e69,042e99,cpl,cpl,cpl,gpio.asm,CPL
6027,6027,6183,042e6a,042e9a,"ld c,a","ld c,a","ld c,a",gpio.asm,"LD	C, A"
6028,6028,6184,042e6b,042e9b,"in0 a,($9b)","in0 a,($9b)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6029,6029,6185,042e6e,042e9e,and c,and c,and c,gpio.asm,AND	C
6030,6030,6186,042e6f,042e9f,"out0 ($9b),a","out0 ($9b),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6031,6031,6187,042e72,042ea2,pop bc,pop bc,pop bc,gpio.asm,POP	BC
6032,6032,6188,042e73,042ea3,push bc,push bc,push bc,gpio.asm,PUSH	BC
6033,6033,6189,042e74,042ea4,"ld a,b","ld a,b","ld a,b",gpio.asm,"LD	A, val"
6034,6034,6190,042e75,042ea5,cpl,cpl,cpl,gpio.asm,CPL
6035,6035,6191,042e76,042ea6,"ld c,a","ld c,a","ld c,a",gpio.asm,"LD	C, A"
6036,6036,6192,042e77,042ea7,"in0 a,($9c)","in0 a,($9c)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6037,6037,6193,042e7a,042eaa,and c,and c,and c,gpio.asm,AND	C
6038,6038,6194,042e7b,042eab,"out0 ($9c),a","out0 ($9c),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6039,6039,6195,042e7e,042eae,pop bc,pop bc,pop bc,gpio.asm,POP	BC
6040,6040,6196,042e7f,042eaf,push bc,push bc,push bc,gpio.asm,PUSH	BC
6041,6041,6197,042e80,042eb0,"ld a,b","ld a,b","ld a,b",gpio.asm,"LD	A, val"
6042,6042,6198,042e81,042eb1,cpl,cpl,cpl,gpio.asm,CPL
6043,6043,6199,042e82,042eb2,"ld c,a","ld c,a","ld c,a",gpio.asm,"LD	C, A"
6044,6044,6200,042e83,042eb3,"in0 a,($9d)","in0 a,($9d)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6045,6045,6201,042e86,042eb6,and c,and c,and c,gpio.asm,AND	C
6046,6046,6202,042e87,042eb7,"out0 ($9d),a","out0 ($9d),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6047,6047,6203,042e8a,042eba,pop bc,pop bc,pop bc,gpio.asm,POP	BC
6048,6048,6204,042e8b,042ebb,ret,ret,ret,gpio.asm,RET
6049,6049,6205,042e8c,042ebc,"in0 a,($9b)","in0 a,($9b)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6050,6050,6206,042e8f,042ebf,or b,or b,or b,gpio.asm,OR	val
6051,6051,6207,042e90,042ec0,"out0 ($9b),a","out0 ($9b),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6052,6052,6208,042e93,042ec3,push bc,push bc,push bc,gpio.asm,PUSH	BC
6053,6053,6209,042e94,042ec4,"ld a,b","ld a,b","ld a,b",gpio.asm,"LD	A, val"
6054,6054,6210,042e95,042ec5,cpl,cpl,cpl,gpio.asm,CPL
6055,6055,6211,042e96,042ec6,"ld c,a","ld c,a","ld c,a",gpio.asm,"LD	C, A"
6056,6056,6212,042e97,042ec7,"in0 a,($9c)","in0 a,($9c)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6057,6057,6213,042e9a,042eca,and c,and c,and c,gpio.asm,AND	C
6058,6058,6214,042e9b,042ecb,"out0 ($9c),a","out0 ($9c),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6059,6059,6215,042e9e,042ece,pop bc,pop bc,pop bc,gpio.asm,POP	BC
6060,6060,6216,042e9f,042ecf,push bc,push bc,push bc,gpio.asm,PUSH	BC
6061,6061,6217,042ea0,042ed0,"ld a,b","ld a,b","ld a,b",gpio.asm,"LD	A, val"
6062,6062,6218,042ea1,042ed1,cpl,cpl,cpl,gpio.asm,CPL
6063,6063,6219,042ea2,042ed2,"ld c,a","ld c,a","ld c,a",gpio.asm,"LD	C, A"
6064,6064,6220,042ea3,042ed3,"in0 a,($9d)","in0 a,($9d)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6065,6065,6221,042ea6,042ed6,and c,and c,and c,gpio.asm,AND	C
6066,6066,6222,042ea7,042ed7,"out0 ($9d),a","out0 ($9d),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6067,6067,6223,042eaa,042eda,pop bc,pop bc,pop bc,gpio.asm,POP	BC
6068,6068,6224,042eab,042edb,ret,ret,ret,gpio.asm,RET
6069,6069,6225,042eac,042edc,push bc,push bc,push bc,gpio.asm,PUSH	BC
6070,6070,6226,042ead,042edd,"ld a,b","ld a,b","ld a,b",gpio.asm,"LD	A, val"
6071,6071,6227,042eae,042ede,cpl,cpl,cpl,gpio.asm,CPL
6072,6072,6228,042eaf,042edf,"ld c,a","ld c,a","ld c,a",gpio.asm,"LD	C, A"
6073,6073,6229,042eb0,042ee0,"in0 a,($9b)","in0 a,($9b)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6074,6074,6230,042eb3,042ee3,and c,and c,and c,gpio.asm,AND	C
6075,6075,6231,042eb4,042ee4,"out0 ($9b),a","out0 ($9b),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6076,6076,6232,042eb7,042ee7,pop bc,pop bc,pop bc,gpio.asm,POP	BC
6077,6077,6233,042eb8,042ee8,"in0 a,($9c)","in0 a,($9c)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6078,6078,6234,042ebb,042eeb,or b,or b,or b,gpio.asm,OR	val
6079,6079,6235,042ebc,042eec,"out0 ($9c),a","out0 ($9c),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6080,6080,6236,042ebf,042eef,push bc,push bc,push bc,gpio.asm,PUSH	BC
6081,6081,6237,042ec0,042ef0,"ld a,b","ld a,b","ld a,b",gpio.asm,"LD	A, val"
6082,6082,6238,042ec1,042ef1,cpl,cpl,cpl,gpio.asm,CPL
6083,6083,6239,042ec2,042ef2,"ld c,a","ld c,a","ld c,a",gpio.asm,"LD	C, A"
6084,6084,6240,042ec3,042ef3,"in0 a,($9d)","in0 a,($9d)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6085,6085,6241,042ec6,042ef6,and c,and c,and c,gpio.asm,AND	C
6086,6086,6242,042ec7,042ef7,"out0 ($9d),a","out0 ($9d),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6087,6087,6243,042eca,042efa,pop bc,pop bc,pop bc,gpio.asm,POP	BC
6088,6088,6244,042ecb,042efb,ret,ret,ret,gpio.asm,RET
6089,6089,6245,042ecc,042efc,"in0 a,($9b)","in0 a,($9b)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6090,6090,6246,042ecf,042eff,or b,or b,or b,gpio.asm,OR	val
6091,6091,6247,042ed0,042f00,"out0 ($9b),a","out0 ($9b),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6092,6092,6248,042ed3,042f03,"in0 a,($9c)","in0 a,($9c)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6093,6093,6249,042ed6,042f06,or b,or b,or b,gpio.asm,OR	val
6094,6094,6250,042ed7,042f07,"out0 ($9c),a","out0 ($9c),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6095,6095,6251,042eda,042f0a,push bc,push bc,push bc,gpio.asm,PUSH	BC
6096,6096,6252,042edb,042f0b,"ld a,b","ld a,b","ld a,b",gpio.asm,"LD	A, val"
6097,6097,6253,042edc,042f0c,cpl,cpl,cpl,gpio.asm,CPL
6098,6098,6254,042edd,042f0d,"ld c,a","ld c,a","ld c,a",gpio.asm,"LD	C, A"
6099,6099,6255,042ede,042f0e,"in0 a,($9d)","in0 a,($9d)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6100,6100,6256,042ee1,042f11,and c,and c,and c,gpio.asm,AND	C
6101,6101,6257,042ee2,042f12,"out0 ($9d),a","out0 ($9d),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6102,6102,6258,042ee5,042f15,pop bc,pop bc,pop bc,gpio.asm,POP	BC
6103,6103,6259,042ee6,042f16,ret,ret,ret,gpio.asm,RET
6104,6104,6260,042ee7,042f17,"in0 a,($9a)","in0 a,($9a)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6105,6105,6261,042eea,042f1a,or b,or b,or b,gpio.asm,OR	val
6106,6106,6262,042eeb,042f1b,"out0 ($9a),a","out0 ($9a),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6107,6107,6263,042eee,042f1e,push bc,push bc,push bc,gpio.asm,PUSH	BC
6108,6108,6264,042eef,042f1f,"ld a,b","ld a,b","ld a,b",gpio.asm,"LD	A, val"
6109,6109,6265,042ef0,042f20,cpl,cpl,cpl,gpio.asm,CPL
6110,6110,6266,042ef1,042f21,"ld c,a","ld c,a","ld c,a",gpio.asm,"LD	C, A"
6111,6111,6267,042ef2,042f22,"in0 a,($9b)","in0 a,($9b)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6112,6112,6268,042ef5,042f25,and c,and c,and c,gpio.asm,AND	C
6113,6113,6269,042ef6,042f26,"out0 ($9b),a","out0 ($9b),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6114,6114,6270,042ef9,042f29,pop bc,pop bc,pop bc,gpio.asm,POP	BC
6115,6115,6271,042efa,042f2a,push bc,push bc,push bc,gpio.asm,PUSH	BC
6116,6116,6272,042efb,042f2b,"ld a,b","ld a,b","ld a,b",gpio.asm,"LD	A, val"
6117,6117,6273,042efc,042f2c,cpl,cpl,cpl,gpio.asm,CPL
6118,6118,6274,042efd,042f2d,"ld c,a","ld c,a","ld c,a",gpio.asm,"LD	C, A"
6119,6119,6275,042efe,042f2e,"in0 a,($9c)","in0 a,($9c)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6120,6120,6276,042f01,042f31,and c,and c,and c,gpio.asm,AND	C
6121,6121,6277,042f02,042f32,"out0 ($9c),a","out0 ($9c),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6122,6122,6278,042f05,042f35,pop bc,pop bc,pop bc,gpio.asm,POP	BC
6123,6123,6279,042f06,042f36,push bc,push bc,push bc,gpio.asm,PUSH	BC
6124,6124,6280,042f07,042f37,"ld a,b","ld a,b","ld a,b",gpio.asm,"LD	A, val"
6125,6125,6281,042f08,042f38,cpl,cpl,cpl,gpio.asm,CPL
6126,6126,6282,042f09,042f39,"ld c,a","ld c,a","ld c,a",gpio.asm,"LD	C, A"
6127,6127,6283,042f0a,042f3a,"in0 a,($9d)","in0 a,($9d)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6128,6128,6284,042f0d,042f3d,and c,and c,and c,gpio.asm,AND	C
6129,6129,6285,042f0e,042f3e,"out0 ($9d),a","out0 ($9d),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6130,6130,6286,042f11,042f41,pop bc,pop bc,pop bc,gpio.asm,POP	BC
6131,6131,6287,042f12,042f42,ret,ret,ret,gpio.asm,RET
6132,6132,6288,042f13,042f43,"in0 a,($9b)","in0 a,($9b)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6133,6133,6289,042f16,042f46,or b,or b,or b,gpio.asm,OR	val
6134,6134,6290,042f17,042f47,"out0 ($9b),a","out0 ($9b),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6135,6135,6291,042f1a,042f4a,push bc,push bc,push bc,gpio.asm,PUSH	BC
6136,6136,6292,042f1b,042f4b,"ld a,b","ld a,b","ld a,b",gpio.asm,"LD	A, val"
6137,6137,6293,042f1c,042f4c,cpl,cpl,cpl,gpio.asm,CPL
6138,6138,6294,042f1d,042f4d,"ld c,a","ld c,a","ld c,a",gpio.asm,"LD	C, A"
6139,6139,6295,042f1e,042f4e,"in0 a,($9c)","in0 a,($9c)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6140,6140,6296,042f21,042f51,and c,and c,and c,gpio.asm,AND	C
6141,6141,6297,042f22,042f52,"out0 ($9c),a","out0 ($9c),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6142,6142,6298,042f25,042f55,pop bc,pop bc,pop bc,gpio.asm,POP	BC
6143,6143,6299,042f26,042f56,"in0 a,($9d)","in0 a,($9d)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6144,6144,6300,042f29,042f59,or b,or b,or b,gpio.asm,OR	val
6145,6145,6301,042f2a,042f5a,"out0 ($9d),a","out0 ($9d),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6146,6146,6302,042f2d,042f5d,ret,ret,ret,gpio.asm,RET
6147,6147,6303,042f2e,042f5e,push bc,push bc,push bc,gpio.asm,PUSH	BC
6148,6148,6304,042f2f,042f5f,"ld a,b","ld a,b","ld a,b",gpio.asm,"LD	A, val"
6149,6149,6305,042f30,042f60,cpl,cpl,cpl,gpio.asm,CPL
6150,6150,6306,042f31,042f61,"ld c,a","ld c,a","ld c,a",gpio.asm,"LD	C, A"
6151,6151,6307,042f32,042f62,"in0 a,($9a)","in0 a,($9a)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6152,6152,6308,042f35,042f65,and c,and c,and c,gpio.asm,AND	C
6153,6153,6309,042f36,042f66,"out0 ($9a),a","out0 ($9a),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6154,6154,6310,042f39,042f69,pop bc,pop bc,pop bc,gpio.asm,POP	BC
6155,6155,6311,042f3a,042f6a,push bc,push bc,push bc,gpio.asm,PUSH	BC
6156,6156,6312,042f3b,042f6b,"ld a,b","ld a,b","ld a,b",gpio.asm,"LD	A, val"
6157,6157,6313,042f3c,042f6c,cpl,cpl,cpl,gpio.asm,CPL
6158,6158,6314,042f3d,042f6d,"ld c,a","ld c,a","ld c,a",gpio.asm,"LD	C, A"
6159,6159,6315,042f3e,042f6e,"in0 a,($9b)","in0 a,($9b)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6160,6160,6316,042f41,042f71,and c,and c,and c,gpio.asm,AND	C
6161,6161,6317,042f42,042f72,"out0 ($9b),a","out0 ($9b),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6162,6162,6318,042f45,042f75,pop bc,pop bc,pop bc,gpio.asm,POP	BC
6163,6163,6319,042f46,042f76,"in0 a,($9c)","in0 a,($9c)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6164,6164,6320,042f49,042f79,or b,or b,or b,gpio.asm,OR	val
6165,6165,6321,042f4a,042f7a,"out0 ($9c),a","out0 ($9c),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6166,6166,6322,042f4d,042f7d,"in0 a,($9d)","in0 a,($9d)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6167,6167,6323,042f50,042f80,or b,or b,or b,gpio.asm,OR	val
6168,6168,6324,042f51,042f81,"out0 ($9d),a","out0 ($9d),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6169,6169,6325,042f54,042f84,ret,ret,ret,gpio.asm,RET
6170,6170,6326,042f55,042f85,"in0 a,($9a)","in0 a,($9a)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6171,6171,6327,042f58,042f88,or b,or b,or b,gpio.asm,OR	val
6172,6172,6328,042f59,042f89,"out0 ($9a),a","out0 ($9a),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6173,6173,6329,042f5c,042f8c,push bc,push bc,push bc,gpio.asm,PUSH	BC
6174,6174,6330,042f5d,042f8d,"ld a,b","ld a,b","ld a,b",gpio.asm,"LD	A, val"
6175,6175,6331,042f5e,042f8e,cpl,cpl,cpl,gpio.asm,CPL
6176,6176,6332,042f5f,042f8f,"ld c,a","ld c,a","ld c,a",gpio.asm,"LD	C, A"
6177,6177,6333,042f60,042f90,"in0 a,($9b)","in0 a,($9b)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6178,6178,6334,042f63,042f93,and c,and c,and c,gpio.asm,AND	C
6179,6179,6335,042f64,042f94,"out0 ($9b),a","out0 ($9b),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6180,6180,6336,042f67,042f97,pop bc,pop bc,pop bc,gpio.asm,POP	BC
6181,6181,6337,042f68,042f98,"in0 a,($9c)","in0 a,($9c)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6182,6182,6338,042f6b,042f9b,or b,or b,or b,gpio.asm,OR	val
6183,6183,6339,042f6c,042f9c,"out0 ($9c),a","out0 ($9c),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6184,6184,6340,042f6f,042f9f,"in0 a,($9d)","in0 a,($9d)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6185,6185,6341,042f72,042fa2,or b,or b,or b,gpio.asm,OR	val
6186,6186,6342,042f73,042fa3,"out0 ($9d),a","out0 ($9d),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6187,6187,6343,042f76,042fa6,ret,ret,ret,gpio.asm,RET
6188,6188,6344,042f77,042fa7,push bc,push bc,push bc,gpio.asm,PUSH	BC
6189,6189,6345,042f78,042fa8,"ld a,b","ld a,b","ld a,b",gpio.asm,"LD	A, val"
6190,6190,6346,042f79,042fa9,cpl,cpl,cpl,gpio.asm,CPL
6191,6191,6347,042f7a,042faa,"ld c,a","ld c,a","ld c,a",gpio.asm,"LD	C, A"
6192,6192,6348,042f7b,042fab,"in0 a,($9a)","in0 a,($9a)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6193,6193,6349,042f7e,042fae,and c,and c,and c,gpio.asm,AND	C
6194,6194,6350,042f7f,042faf,"out0 ($9a),a","out0 ($9a),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6195,6195,6351,042f82,042fb2,pop bc,pop bc,pop bc,gpio.asm,POP	BC
6196,6196,6352,042f83,042fb3,"in0 a,($9b)","in0 a,($9b)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6197,6197,6353,042f86,042fb6,or b,or b,or b,gpio.asm,OR	val
6198,6198,6354,042f87,042fb7,"out0 ($9b),a","out0 ($9b),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6199,6199,6355,042f8a,042fba,"in0 a,($9c)","in0 a,($9c)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6200,6200,6356,042f8d,042fbd,or b,or b,or b,gpio.asm,OR	val
6201,6201,6357,042f8e,042fbe,"out0 ($9c),a","out0 ($9c),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6202,6202,6358,042f91,042fc1,"in0 a,($9d)","in0 a,($9d)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6203,6203,6359,042f94,042fc4,or b,or b,or b,gpio.asm,OR	val
6204,6204,6360,042f95,042fc5,"out0 ($9d),a","out0 ($9d),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6205,6205,6361,042f98,042fc8,ret,ret,ret,gpio.asm,RET
6206,6206,6362,042f99,042fc9,"in0 a,($9a)","in0 a,($9a)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6207,6207,6363,042f9c,042fcc,or b,or b,or b,gpio.asm,OR	val
6208,6208,6364,042f9d,042fcd,"out0 ($9a),a","out0 ($9a),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6209,6209,6365,042fa0,042fd0,"in0 a,($9b)","in0 a,($9b)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6210,6210,6366,042fa3,042fd3,or b,or b,or b,gpio.asm,OR	val
6211,6211,6367,042fa4,042fd4,"out0 ($9b),a","out0 ($9b),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6212,6212,6368,042fa7,042fd7,"in0 a,($9c)","in0 a,($9c)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6213,6213,6369,042faa,042fda,or b,or b,or b,gpio.asm,OR	val
6214,6214,6370,042fab,042fdb,"out0 ($9c),a","out0 ($9c),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6215,6215,6371,042fae,042fde,"in0 a,($9d)","in0 a,($9d)","in0 a,($00)",gpio.asm,"IN0	A, (reg)"
6216,6216,6372,042fb1,042fe1,or b,or b,or b,gpio.asm,OR	val
6217,6217,6373,042fb2,042fe2,"out0 ($9d),a","out0 ($9d),a","out0 ($00),a",gpio.asm,"OUT0	(reg), A"
6218,6218,6374,042fb5,042fe5,ret,ret,ret,gpio.asm,RET	; --- End gpio.asm ---
6219,6219,6375,042fb6,042fe6,"ld hl,$044a00","ld hl,$044a00","ld hl,$000000",main.asm,"_main:			LD	HL, ACCS		; Clear the ACCS"
6220,6220,6376,042fba,042fea,"ld (hl),$00","ld (hl),$00","ld (hl),$00",main.asm,"LD	(HL), 0"
6221,6221,6377,042fbc,042fec,"ld a,c","ld a,c","ld a,c",main.asm,"LD	A, C"
6222,6222,6378,042fbd,042fed,cp $02,cp $02,cp $00,main.asm,CP	2
6223,6223,6379,042fbf,042fef,"jr z,$+$2f","jr z,$+$2f","jr z,$+$00",main.asm,"JR	Z, AUTOLOAD		; 2 parameters = autoload"
6224,6224,6380,042fc1,042ff1,"jr c,$+$41","jr c,$+$41","jr c,$+$00",main.asm,"JR	C, COLD			; 1 parameter = normal start"
6225,6225,6381,042fc3,042ff3,call $044038,call $044079,call $000000,main.asm,CALL	STAR_VERSION
6226,6226,6382,042fc7,042ff7,call $043d90,call $043dc0,call $000000,main.asm,CALL	TELL
6227,6227,6383,042fcb,042ffb,"ld d,l","ld d,l","ld d,l",main.asm,"DB	""Usage:\n\r"""
6228,6228,6384,042fcc,042ffc,"ld (hl),e","ld (hl),e","ld (hl),e",main.asm,
6229,6229,6385,042fcd,042ffd,"ld h,c","ld h,c","ld h,c",main.asm,
6230,6230,6386,042fce,042ffe,"ld h,a","ld h,a","ld h,a",main.asm,
6230,6230,6386,042fce,042ffe,"ld h,a","ld h,a","ld h,a",main.asm,
6231,6231,6387,042fcf,042fff,"ld h,l","ld h,l","ld h,l",main.asm,
6232,6232,6388,042fd0,043000,"ld a,($520d0a)","ld a,($520d0a)","ld a,($000000)",main.asm,
6233,6233,6389,042fd4,043004,"ld d,l","ld d,l","ld d,l",main.asm,
6234,6234,6390,042fd5,043005,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,
6235,6235,6391,042fd6,043006,"jr nz,$+$30","jr nz,$+$30","jr nz,$+$00",main.asm,
6235,6235,6391,042fd6,043006,"jr nz,$+$30","jr nz,$+$30","jr nz,$+$00",main.asm,
6236,6236,6392,042fd8,043008,"jr nz,$+$3e","jr nz,$+$3e","jr nz,$+$00",main.asm,
6237,6237,6393,042fda,04300a,"ld h,(hl)","ld h,(hl)","ld h,(hl)",main.asm,
6238,6238,6394,042fdb,04300b,"ld l,c","ld l,c","ld l,c",main.asm,
6239,6239,6395,042fdc,04300c,"ld l,h","ld l,h","ld l,h",main.asm,
6239,6239,6395,042fdc,04300c,"ld l,h","ld l,h","ld l,h",main.asm,
6240,6240,6396,042fdd,04300d,"ld h,l","ld h,l","ld h,l",main.asm,
6241,6241,6397,042fde,04300e,"ld l,(hl)","ld l,(hl)","ld l,(hl)",main.asm,
6242,6242,6398,042fdf,04300f,"ld h,c","ld h,c","ld h,c",main.asm,
6242,6242,6398,042fdf,04300f,"ld h,c","ld h,c","ld h,c",main.asm,
6243,6243,6399,042fe0,043010,"ld l,l","ld l,l","ld l,l",main.asm,
6244,6244,6400,042fe1,043011,"ld h,l","ld h,l","ld h,l",main.asm,
6245,6245,6401,042fe2,043012,"ld a,$0a","ld a,$0a","ld a,$00",,
6246,6246,6402,042fe4,043014,dec c,dec c,dec c,,
6247,6247,6403,042fe5,043015,nop,nop,nop,,
6248,6248,6404,042fe6,043016,"ld hl,$000000","ld hl,$000000","ld hl,$000000",main.asm,"LD	HL, 0			; The error code"
6249,6249,6405,042fea,04301a,jp $040068,jp $040068,jp $000000,main.asm,JP	_end
6250,6250,6406,042fee,04301e,"ld hl,(ix+$03)","ld hl,(ix+$03)","ld hl,(ix+$00)",main.asm,"AUTOLOAD:		LD	HL, (IX+3)		; HLU: Address of filename"
6251,6251,6407,042ff1,043021,"ld de,$044a00","ld de,$044a00","ld de,$000000",main.asm,"LD	DE, ACCS		;  DE: Destination address"
6252,6252,6408,042ff5,043025,"ld a,(hl)","ld a,(hl)","ld a,(hl)",main.asm,"AUTOLOAD_1:		LD	A, (HL)			; Fetch the filename byte"
6253,6253,6409,042ff6,043026,"ld (de),a","ld (de),a","ld (de),a",main.asm,"LD	(DE), A			;"
6254,6254,6410,042ff7,043027,inc hl,inc hl,inc hl,main.asm,INC	HL			; Increase the source pointer
6255,6255,6411,042ff8,043028,inc e,inc e,inc e,main.asm,INC	E			; We only need to increase E as ACCS is on a page boundary
6256,6256,6412,042ff9,043029,"jr z,$+$05","jr z,$+$05","jr z,$+$00",main.asm,"JR	Z, AUTOLOAD_2		; End if we hit the page boundary"
6257,6257,6413,042ffb,04302b,or a,or a,or a,main.asm,OR	A
6258,6258,6414,042ffc,04302c,"jr nz,$-$07","jr nz,$-$07","jr nz,$-$00",main.asm,"JR	NZ, AUTOLOAD_1		; Loop until we hit a 0 byte"
6259,6259,6415,042ffe,04302e,dec e,dec e,dec e,main.asm,AUTOLOAD_2:		DEC	E
6260,6260,6416,042fff,04302f,"ld a,$0d","ld a,$0d","ld a,$00",main.asm,"LD	A, CR"
6261,6261,6417,043001,043031,"ld (de),a","ld (de),a","ld (de),a",main.asm,"LD	(DE), A			; Replace the 0 byte with a CR for BBC BASIC"
6262,6262,6418,043002,043032,pop hl,pop hl,pop hl,main.asm,COLD:			POP	HL			; Pop the return address to init off SPS
6263,6263,6419,043003,043033,push hl,push hl,push hl,main.asm,PUSH	HL 			; Stack it on SPL (*BYE will use this as the return address)
6264,6264,6420,043004,043034,"ld hl,$044c00","ld hl,$044c00","ld hl,$000000",main.asm,"LD	HL, STAVAR		; Cold start"
6265,6265,6421,043008,043038,"ld sp,hl","ld sp,hl","ld sp,hl",main.asm,"LD	SP, HL"
6266,6266,6422,043009,043039,"ld (hl),$0a","ld (hl),$0a","ld (hl),$00",main.asm,"LD	(HL), 10"
6267,6267,6423,04300b,04303b,inc hl,inc hl,inc hl,main.asm,INC	HL
6268,6268,6424,04300c,04303c,"ld (hl),$09","ld (hl),$09","ld (hl),$00",main.asm,"LD	(HL),9"
6269,6269,6425,04300e,04303e,call $043f81,call $043fb1,call $000000,main.asm,CALL    OSINIT			; Call the machine specific OS initialisation routines
6270,6270,6426,043012,043042,"ld ($044d20),de","ld ($044d20),de","ld ($000000),de",main.asm,"LD      (HIMEM),DE		; This returns HIMEM (ramtop) in DE - store in the HIMEM sysvar"
6271,6271,6427,043017,043047,"ld ($044d14),hl","ld ($044d14),hl","ld ($000000),hl",main.asm,"LD      (PAGE_),HL		; And PAGE in HL (where BASIC program storage starts) - store in PAGE sysvar"
6272,6272,6428,04301b,04304b,"ld a,$b7","ld a,$b7","ld a,$00",main.asm,"LD      A,B7H           	; Set LISTO sysvar; the bottom nibble is LISTO (7), top nibble is OPT (B)"
6273,6273,6429,04301d,04304d,"ld ($044d40),a","ld ($044d40),a","ld ($000000),a",main.asm,"LD      (LISTON),A"
6274,6274,6430,043021,043051,"ld hl,$04305c","ld hl,$04308c","ld hl,$000000",main.asm,"LD      HL,NOTICE"
6275,6275,6431,043025,043055,"ld ($044d2f),hl","ld ($044d2f),hl","ld ($000000),hl",main.asm,"LD      (ERRTXT),HL"
6276,6276,6432,043029,043059,call $04386c,call $04389c,call $000000,main.asm,"CALL    NEWIT			; From what I can determine, NEWIT always returns with Z flag set"
6277,6277,6433,04302d,04305d,"ld a,($044a00)","ld a,($044a00)","ld a,($000000)",main.asm,"LD	A,(ACCS)		; Check if there is a filename in ACCS"
6278,6278,6434,043031,043061,or a,or a,or a,main.asm,OR	A
6279,6279,6435,043032,043062,"jp nz,$040b53","jp nz,$040b53","jp nz,$000000",main.asm,"JP	NZ,CHAIN0		; Yes, so load and run"
6280,6280,6436,043036,043066,call $044038,call $044079,call $000000,main.asm,CALL	STAR_VERSION		;
6281,6281,6437,04303a,04306a,call $043d90,call $043dc0,call $000000,main.asm,CALL    TELL			; Output the welcome message
6282,6282,6438,04303e,04306e,"ld b,d","ld b,d","ld b,d",main.asm,"DB    	""BBC BASIC (Z80) Version 3.00\n\r"""
6283,6283,6439,04303f,04306f,"ld b,d","ld b,d","ld b,d",main.asm,
6284,6284,6440,043040,043070,"ld b,e","ld b,e","ld b,e",main.asm,
6285,6285,6441,043041,043071,"jr nz,$+$44","jr nz,$+$44","jr nz,$+$00",main.asm,
6285,6285,6441,043041,043071,"jr nz,$+$44","jr nz,$+$44","jr nz,$+$00",main.asm,
6286,6286,6442,043043,043073,"ld b,c","ld b,c","ld b,c",main.asm,
6287,6287,6443,043044,043074,"ld d,e","ld d,e","ld d,e",main.asm,
6287,6287,6443,043044,043074,"ld d,e","ld d,e","ld d,e",main.asm,
6288,6288,6444,043045,043075,"ld.lis b,e","ld.lis b,e","ld.lis b,e",main.asm,
6289,6289,6445,043047,043077,"jr nz,$+$2a","jr nz,$+$2a","jr nz,$+$00",main.asm,
6289,6289,6445,043047,043077,"jr nz,$+$2a","jr nz,$+$2a","jr nz,$+$00",main.asm,
6290,6290,6446,043049,043079,"ld e,d","ld e,d","ld e,d",main.asm,
6291,6291,6447,04304a,04307a,"jr c,$+$32","jr c,$+$32","jr c,$+$00",main.asm,
6291,6291,6447,04304a,04307a,"jr c,$+$32","jr c,$+$32","jr c,$+$00",main.asm,
6292,6292,6448,04304c,04307c,"add hl,hl","add hl,hl","add hl,hl",main.asm,
6293,6293,6449,04304d,04307d,"jr nz,$+$58","jr nz,$+$58","jr nz,$+$00",main.asm,
6293,6293,6449,04304d,04307d,"jr nz,$+$58","jr nz,$+$58","jr nz,$+$00",main.asm,
6294,6294,6450,04304f,04307f,"ld h,l","ld h,l","ld h,l",main.asm,
6295,6295,6451,043050,043080,"ld (hl),d","ld (hl),d","ld (hl),d",main.asm,
6295,6295,6451,043050,043080,"ld (hl),d","ld (hl),d","ld (hl),d",main.asm,
6296,6296,6452,043051,043081,"ld (hl),e","ld (hl),e","ld (hl),e",main.asm,
6297,6297,6453,043052,043082,"ld l,c","ld l,c","ld l,c",main.asm,
6298,6298,6454,043053,043083,"ld l,a","ld l,a","ld l,a",main.asm,
6298,6298,6454,043053,043083,"ld l,a","ld l,a","ld l,a",main.asm,
6299,6299,6455,043054,043084,"ld l,(hl)","ld l,(hl)","ld l,(hl)",main.asm,
6300,6300,6456,043055,043085,"jr nz,$+$35","jr nz,$+$35","jr nz,$+$00",,
6301,6301,6457,043057,043087,"ld l,$30","ld l,$30","ld l,$00",,
6302,6302,6458,043059,043089,"jr nc,$+$0c","jr nc,$+$0c","jr nc,$+$00",,
6303,6303,6459,04305b,04308b,dec c,dec c,dec c,,
6304,6304,6460,04305c,04308c,"jr z,$+$45","jr z,$+$45","jr z,$+$00",main.asm,"NOTICE:			DB    	""(C) Copyright R.T.Russell 1987\n\r"""
6305,6305,6461,04305e,04308e,"add hl,hl","add hl,hl","add hl,hl",main.asm,
6306,6306,6462,04305f,04308f,"jr nz,$+$45","jr nz,$+$45","jr nz,$+$00",main.asm,
6306,6306,6462,04305f,04308f,"jr nz,$+$45","jr nz,$+$45","jr nz,$+$00",main.asm,
6307,6307,6463,043061,043091,"ld l,a","ld l,a","ld l,a",main.asm,
6308,6308,6464,043062,043092,"ld (hl),b","ld (hl),b","ld (hl),b",main.asm,
6308,6308,6464,043062,043092,"ld (hl),b","ld (hl),b","ld (hl),b",main.asm,
6309,6309,6465,043063,043093,"ld a,c","ld a,c","ld a,c",main.asm,
6310,6310,6466,043064,043094,"ld (hl),d","ld (hl),d","ld (hl),d",main.asm,
6311,6311,6467,043065,043095,"ld l,c","ld l,c","ld l,c",main.asm,
6311,6311,6467,043065,043095,"ld l,c","ld l,c","ld l,c",main.asm,
6312,6312,6468,043066,043096,"ld h,a","ld h,a","ld h,a",main.asm,
6313,6313,6469,043067,043097,"ld l,b","ld l,b","ld l,b",main.asm,
6314,6314,6470,043068,043098,"ld (hl),h","ld (hl),h","ld (hl),h",main.asm,
6314,6314,6470,043068,043098,"ld (hl),h","ld (hl),h","ld (hl),h",main.asm,
6315,6315,6471,043069,043099,"jr nz,$+$54","jr nz,$+$54","jr nz,$+$00",main.asm,
6316,6316,6472,04306b,04309b,"ld l,$54","ld l,$54","ld l,$00",main.asm,
6316,6316,6472,04306b,04309b,"ld l,$54","ld l,$54","ld l,$00",main.asm,
6317,6317,6473,04306d,04309d,"ld l,$52","ld l,$52","ld l,$00",main.asm,
6318,6318,6474,04306f,04309f,"ld (hl),l","ld (hl),l","ld (hl),l",main.asm,
6319,6319,6475,043070,0430a0,"ld (hl),e","ld (hl),e","ld (hl),e",main.asm,
6320,6320,6476,043071,0430a1,"ld (hl),e","ld (hl),e","ld (hl),e",main.asm,
6320,6320,6476,043071,0430a1,"ld (hl),e","ld (hl),e","ld (hl),e",main.asm,
6321,6321,6477,043072,0430a2,"ld h,l","ld h,l","ld h,l",main.asm,
6322,6322,6478,043073,0430a3,"ld l,h","ld l,h","ld l,h",main.asm,
6323,6323,6479,043074,0430a4,"ld l,h","ld l,h","ld l,h",main.asm,
6324,6324,6480,043075,0430a5,"jr nz,$+$33","jr nz,$+$33","jr nz,$+$00",,
6325,6325,6481,043077,0430a7,"add hl,sp","add hl,sp","add hl,sp",,
6326,6326,6482,043078,0430a8,"jr c,$+$39","jr c,$+$39","jr c,$+$00",,
6327,6327,6483,04307a,0430aa,"ld a,(bc)","ld a,(bc)","ld a,(bc)",,
6328,6328,6484,04307b,0430ab,dec c,dec c,dec c,,
6329,6329,6485,04307c,0430ac,"ld a,(bc)","ld a,(bc)","ld a,(bc)",main.asm,"DB	""\n\r"", 0"
6330,6330,6486,04307d,0430ad,dec c,dec c,dec c,main.asm,
6331,6331,6487,04307e,0430ae,nop,nop,nop,main.asm,
6332,6332,6488,04307f,0430af,or $37,or $37,or $00,main.asm,WARM:			DB 	F6H			; Opcode for OR? Maybe to CCF (the following SCF will be the operand)
6333,6333,6489,043081,0430b1,"ld sp,($044d20)","ld sp,($044d20)","ld sp,($000000)",main.asm,"LD      SP,(HIMEM)"
6334,6334,6490,043086,0430b6,call $043efa,call $043f2a,call $000000,main.asm,CALL    PROMPT          	; Prompt user
6335,6335,6491,04308a,0430ba,"ld hl,$044d40","ld hl,$044d40","ld hl,$000000",main.asm,"LD      HL,LISTON		; Pointer to the LISTO/OPT sysvar"
6336,6336,6492,04308e,0430be,"ld a,(hl)","ld a,(hl)","ld a,(hl)",main.asm,"LD      A,(HL)			; Fetch the value"
6337,6337,6493,04308f,0430bf,and $0f,and $0f,and $00,main.asm,AND     0FH             	; Bottom nibble: LISTO
6338,6338,6494,043091,0430c1,or $b0,or $b0,or $00,main.asm,OR      B0H             	; Top nibble: Default to OPT (3) with ADL mode bit set to 1 for assembler
6339,6339,6495,043093,0430c3,"ld (hl),a","ld (hl),a","ld (hl),a",main.asm,"LD      (HL),A			; Store back in"
6340,6340,6496,043094,0430c4,"sbc hl,hl","sbc hl,hl","sbc hl,hl",main.asm,"SBC     HL,HL           	; HL: 0"
6341,6341,6497,043096,0430c6,"ld ($044d2c),hl","ld ($044d2c),hl","ld ($000000),hl",main.asm,"LD      (ERRTRP),HL		; Clear ERRTRP sysvar"
6342,6342,6498,04309a,0430ca,"ld ($044d35),hl","ld ($044d35),hl","ld ($000000),hl",main.asm,"LD      (ERRLIN),HL		; Clear ERRLIN sysvar (ON ERROR)"
6343,6343,6499,04309e,0430ce,"ld hl,($044d29)","ld hl,($044d29)","ld hl,($000000)",main.asm,"LD      HL,(AUTONO)		; Get the auto line number"
6344,6344,6500,0430a2,0430d2,"ld ($044d23),hl","ld ($044d23),hl","ld ($000000),hl",main.asm,"LD      (LINENO),HL		; Store in line number"
6345,6345,6501,0430a6,0430d6,"ld a,h","ld a,h","ld a,h",main.asm,"LD      A,H			; If the auto line number is zero then"
6346,6346,6502,0430a7,0430d7,or l,or l,or l,main.asm,OR      L
6347,6347,6503,0430a8,0430d8,"jr z,$+$20","jr z,$+$20","jr z,$+$00",main.asm,"JR      Z,NOAUTO		; We're not auto line numbering, so skip the next bit"
6348,6348,6504,0430aa,0430da,push hl,push hl,push hl,main.asm,PUSH    HL			; Stack the line number
6349,6349,6505,0430ab,0430db,call $0439fb,call $043a2b,call $000000,main.asm,CALL    PBCD           	 	; Output the line number
6350,6350,6506,0430af,0430df,pop hl,pop hl,pop hl,main.asm,POP     HL			; Pop the line number back off the stack
6351,6351,6507,0430b0,0430e0,"ld bc,$000000","ld bc,$000000","ld bc,$000000",main.asm,"LD	BC, 0			; Load BC with Increment"
6352,6352,6508,0430b4,0430e4,"ld a,($044d41)","ld a,($044d41)","ld a,($000000)",main.asm,"LD	A,(INCREM)"
6353,6353,6509,0430b8,0430e8,"ld c,a","ld c,a","ld c,a",main.asm,"LD	C, A"
6354,6354,6510,0430b9,0430e9,"add hl,bc","add hl,bc","add hl,bc",main.asm,"ADD     HL,BC			; Add the increment to the line number"
6355,6355,6511,0430ba,0430ea,"jp c,$043c25","jp c,$043c55","jp c,$000000",main.asm,"JP      C,TOOBIG		; And error if we wrap"
6356,6356,6512,0430be,0430ee,"ld ($044d29),hl","ld ($044d29),hl","ld ($000000),hl",main.asm,"LD      (AUTONO),HL		; Store the new auto line number"
6357,6357,6513,0430c2,0430f2,"ld a,$20","ld a,$20","ld a,$00",main.asm,"LD      A,' '			; Print a space"
6358,6358,6514,0430c4,0430f4,call $04394f,call $04397f,call $000000,main.asm,CALL    OUTCHR
6359,6359,6515,0430c8,0430f8,"ld hl,$044a00","ld hl,$044a00","ld hl,$000000",main.asm,"NOAUTO:			LD      HL,ACCS			; Storage for the line editor (256 bytes)"
6360,6360,6516,0430cc,0430fc,call $043e5f,call $043e8f,call $000000,main.asm,CALL    OSLINE          	; Call the line editor in MOS
6361,6361,6517,0430d0,043100,call $0430dc,call $04310c,call $000000,main.asm,ONEDIT:			CALL	ONEDIT1			; Enter the line into memory
6362,6362,6518,0430d4,043104,"call c,$04383f","call c,$04386f","call c,$000000",main.asm,"CALL    C,CLEAN			; Set TOP, write out &FFFF end of program marker"
6363,6363,6519,0430d8,043108,jp $043080,jp $0430b0,jp $000000,main.asm,JP      CLOOP			; Jump back to immediate mode
6364,6364,6520,0430dc,04310c,xor a,xor a,xor a,main.asm,ONEDIT1:		XOR     A			; Entry point after *EDIT
6365,6365,6521,0430dd,04310d,"ld ($044d3d),a","ld ($044d3d),a","ld ($000000),a",main.asm,"LD      (COUNT),A"
6366,6366,6522,0430e1,043111,"ld iy,$044a00","ld iy,$044a00","ld iy,$000000",main.asm,"LD      IY,ACCS"
6367,6367,6523,0430e6,043116,call $043bf9,call $043c29,call $000000,main.asm,CALL    LINNUM			; HL: The line number from the input buffer
6368,6368,6524,0430ea,04311a,call $040a70,call $040a70,call $000000,main.asm,CALL    NXT			; Skip spaces
6369,6369,6525,0430ee,04311e,"ld a,h","ld a,h","ld a,h",main.asm,"LD      A,H			; HL: The line number will be 0 for immediate mode or when auto line numbering is used"
6370,6370,6526,0430ef,04311f,or l,or l,or l,main.asm,OR      L
6371,6371,6527,0430f0,043120,"jr z,$+$06","jr z,$+$06","jr z,$+$00",main.asm,"JR      Z,LNZERO        	; Skip if there is no line number in the input buffer"
6372,6372,6528,0430f2,043122,"ld ($044d23),hl","ld ($044d23),hl","ld ($000000),hl",main.asm,"LD      (LINENO),HL		; Otherwise store it"
6373,6373,6529,0430f6,043126,"ld c,$01","ld c,$01","ld c,$00",main.asm,"LNZERO:			LD	C,1			; Left mode"
6374,6374,6530,0430f8,043128,"ld de,$044b00","ld de,$044b00","ld de,$000000",main.asm,"LD      DE,BUFFER		; Buffer for tokenised BASIC"
6375,6375,6531,0430fc,04312c,call $043c9f,call $043ccf,call $000000,main.asm,CALL    LEXAN2          	; Lexical analysis on the user input
6376,6376,6532,043100,043130,"ld (de),a","ld (de),a","ld (de),a",main.asm,"LD      (DE),A          	; Terminator"
6377,6377,6533,043101,043131,xor a,xor a,xor a,main.asm,XOR     A
6378,6378,6534,043102,043132,"ld bc,$000000","ld bc,$000000","ld bc,$000000",main.asm,"LD	BC,0"
6379,6379,6535,043106,043136,"ld c,e","ld c,e","ld c,e",main.asm,"LD	C,E			; BC: Line length"
6380,6380,6536,043107,043137,inc de,inc de,inc de,main.asm,INC     DE
6381,6381,6537,043108,043138,"ld (de),a","ld (de),a","ld (de),a",main.asm,"LD      (DE),A          	; Zero next"
6382,6382,6538,043109,043139,"ld hl,($044d23)","ld hl,($044d23)","ld hl,($000000)",main.asm,"LD      HL,(LINENO)		; Get the line number"
6383,6383,6539,04310d,04313d,"ld a,h","ld a,h","ld a,h",main.asm,"LD      A,H			; Is it zero, i.e. a command with no line number?"
6384,6384,6540,04310e,04313e,or l,or l,or l,main.asm,OR      L
6385,6385,6541,04310f,04313f,"ld iy,$044b00","ld iy,$044b00","ld iy,$000000",main.asm,"LD      IY,BUFFER       	; Yes, so we're in immediate mode"
6386,6386,6542,043114,043144,"jp z,$040b96","jp z,$040b96","jp z,$000000",main.asm,"JP      Z,XEQ           	; Execute it"
6387,6387,6543,043118,043148,push bc,push bc,push bc,main.asm,PUSH    BC
6388,6388,6544,043119,043149,push hl,push hl,push hl,main.asm,PUSH    HL
6389,6389,6545,04311a,04314a,call $04384b,call $04387b,call $000000,main.asm,CALL    SETTOP          	; Set TOP sysvar
6390,6390,6546,04311e,04314e,pop hl,pop hl,pop hl,main.asm,POP     HL
6391,6391,6547,04311f,04314f,call $04398f,call $0439bf,call $000000,main.asm,CALL    FINDL			; Find the address of the line
6392,6392,6548,043123,043153,"call z,$043802","call z,$043832","call z,$000000",main.asm,"CALL    Z,DEL			; Delete the existing line if found"
6393,6393,6549,043127,043157,pop bc,pop bc,pop bc,main.asm,POP     BC
6394,6394,6550,043128,043158,"ld a,c","ld a,c","ld a,c",main.asm,"LD      A,C			; Check for the line length being zero, i.e."
6395,6395,6551,043129,043159,or a,or a,or a,main.asm,OR      A			; the user has just entered a line number in the command line
6396,6396,6552,04312a,04315a,ret z,ret z,ret z,main.asm,"RET	Z 	         	; If so, then don't do anything else"
6397,6397,6553,04312b,04315b,"add a,$04","add a,$04","add a,$00",main.asm,"ADD     A,4"
6398,6398,6554,04312d,04315d,"ld c,a","ld c,a","ld c,a",main.asm,"LD      C,A             	; Length inclusive"
6399,6399,6555,04312e,04315e,push de,push de,push de,main.asm,PUSH    DE              	; DE: Line number (fetched from the call to FINDL)
6400,6400,6556,04312f,04315f,push bc,push bc,push bc,main.asm,PUSH    BC              	; BC: Line length
6401,6401,6557,043130,043160,"ex de,hl","ex de,hl","ex de,hl",main.asm,"EX      DE,HL			; DE: Address of the line in memory"
6402,6402,6558,043131,043161,"ld hl,($044d17)","ld hl,($044d17)","ld hl,($000000)",main.asm,"LD      HL,(TOP)		; HL: TOP (the first free location after the end of the BASIC program)"
6403,6403,6559,043135,043165,push hl,push hl,push hl,main.asm,PUSH    HL			; Stack TOP (current TOP value)
6404,6404,6560,043136,043166,"add hl,bc","add hl,bc","add hl,bc",main.asm,"ADD     HL,BC			; Add the line length to HL, the new TOP value"
6405,6405,6561,043137,043167,push hl,push hl,push hl,main.asm,PUSH    HL			; Stack HL (new TOP value)
6406,6406,6562,043138,043168,inc h,inc h,inc h,main.asm,INC     H			; Add 256 to HL
6407,6407,6563,043139,043169,xor a,xor a,xor a,main.asm,XOR     A
6408,6408,6564,04313a,04316a,"sbc hl,sp","sbc hl,sp","sbc hl,sp",main.asm,"SBC     HL,SP			; Check whether HL is in the same page as the current stack pointer"
6409,6409,6565,04313c,04316c,pop hl,pop hl,pop hl,main.asm,POP     HL			; Pop HL (new TOP value)
6410,6410,6566,04313d,04316d,"jp nc,$043760","jp nc,$043790","jp nc,$000000",main.asm,"JP      NC,ERROR_        	; If HL is in the stack page, then error: ""No room"""
6411,6411,6567,043141,043171,"ld ($044d17),hl","ld ($044d17),hl","ld ($000000),hl",main.asm,"LD      (TOP),HL		; Store new value of TOP"
6412,6412,6568,043145,043175,"ex (sp),hl","ex (sp),hl","ex (sp),hl",main.asm,"EX      (SP),HL			; HL: TOP (current TOP value), top of stack now contains new TOP value"
6413,6413,6569,043146,043176,push hl,push hl,push hl,main.asm,PUSH    HL			; PUSH current TOP value
6414,6414,6570,043147,043177,inc hl,inc hl,inc hl,main.asm,INC     HL
6415,6415,6571,043148,043178,or a,or a,or a,main.asm,OR      A
6416,6416,6572,043149,043179,"sbc hl,de","sbc hl,de","sbc hl,de",main.asm,"SBC     HL,DE			; DE: Address of the line in memory"
6417,6417,6573,04314b,04317b,"ld b,h","ld b,h","ld b,h",main.asm,"LD      B,H             	; BC: Amount to move"
6418,6418,6574,04314c,04317c,"ld c,l","ld c,l","ld c,l",main.asm,"LD      C,L"
6419,6419,6575,04314d,04317d,pop hl,pop hl,pop hl,main.asm,POP     HL			; HL: Destination (current TOP value)
6420,6420,6576,04314e,04317e,pop de,pop de,pop de,main.asm,POP     DE			; DE: Source (new TOP value)
6421,6421,6577,04314f,04317f,"jr z,$+$04","jr z,$+$04","jr z,$+$00",main.asm,"JR      Z,ATEND			; If current TOP and new TOP are the same, i.e. adding a line at the end, then skip..."
6422,6422,6578,043151,043181,lddr,lddr,lddr,main.asm,"LDDR                    	; Otherwise, make space for the new line in the program"
6423,6423,6579,043153,043183,pop bc,pop bc,pop bc,main.asm,ATEND:			POP     BC              	; BC: Line length
6424,6424,6580,043154,043184,pop de,pop de,pop de,main.asm,POP     DE              	; DE: Line number
6425,6425,6581,043155,043185,inc hl,inc hl,inc hl,main.asm,INC     HL			; HL: Destination address
6426,6426,6582,043156,043186,"ld (hl),c","ld (hl),c","ld (hl),c",main.asm,"LD      (HL),C          	; Store length"
6427,6427,6583,043157,043187,inc hl,inc hl,inc hl,main.asm,INC     HL
6428,6428,6584,043158,043188,"ld (hl),e","ld (hl),e","ld (hl),e",main.asm,"LD      (HL),E          	; Store line number"
6429,6429,6585,043159,043189,inc hl,inc hl,inc hl,main.asm,INC     HL
6430,6430,6586,04315a,04318a,"ld (hl),d","ld (hl),d","ld (hl),d",main.asm,"LD      (HL),D"
6431,6431,6587,04315b,04318b,inc hl,inc hl,inc hl,main.asm,INC     HL
6432,6432,6588,04315c,04318c,"ld de,$044b00","ld de,$044b00","ld de,$000000",main.asm,"LD      DE,BUFFER		; DE: Location of the new, tokenised line"
6433,6433,6589,043160,043190,"ex de,hl","ex de,hl","ex de,hl",main.asm,"EX      DE,HL			; HL: Location of the new, tokensied line, DE: Destination address in BASIC program"
6434,6434,6590,043161,043191,dec c,dec c,dec c,main.asm,DEC     C			; Subtract 3 from the number of bytes to copy to
6435,6435,6591,043162,043192,dec c,dec c,dec c,main.asm,DEC     C			; compensate for the 3 bytes stored above (length and line number)
6436,6436,6592,043163,043193,dec c,dec c,dec c,main.asm,DEC     C
6437,6437,6593,043164,043194,ldir,ldir,ldir,main.asm,LDIR                    	; Add the line to the BASIC program
6438,6438,6594,043166,043196,scf,scf,scf,main.asm,SCF				; To flag we need to call CLEAN
6439,6439,6595,043167,043197,ret,ret,ret,main.asm,RET
6440,6440,6596,043168,043198,"add a,b","add a,b","add a,b",main.asm,"KEYWDS:			DB    80H, ""AND"""
6441,6441,6597,043169,043199,"ld b,c","ld b,c","ld b,c",main.asm,
6442,6442,6598,04316a,04319a,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,
6443,6443,6599,04316b,04319b,"ld b,h","ld b,h","ld b,h",main.asm,
6444,6444,6600,04316c,04319c,sub h,sub h,sub h,main.asm,"DB    94H, ""ABS"""
6445,6445,6601,04316d,04319d,"ld b,c","ld b,c","ld b,c",main.asm,
6446,6446,6602,04316e,04319e,"ld b,d","ld b,d","ld b,d",main.asm,
6447,6447,6603,04316f,04319f,"ld d,e","ld d,e","ld d,e",main.asm,
6448,6448,6604,043170,0431a0,sub l,sub l,sub l,main.asm,"DB    95H, ""ACS"""
6449,6449,6605,043171,0431a1,"ld b,c","ld b,c","ld b,c",main.asm,
6450,6450,6606,043172,0431a2,"ld b,e","ld b,e","ld b,e",main.asm,
6451,6451,6607,043173,0431a3,"ld d,e","ld d,e","ld d,e",main.asm,
6452,6452,6608,043174,0431a4,sub (hl),sub (hl),sub (hl),main.asm,"DB    96H, ""ADVAL"""
6453,6453,6609,043175,0431a5,"ld b,c","ld b,c","ld b,c",main.asm,
6454,6454,6610,043176,0431a6,"ld b,h","ld b,h","ld b,h",main.asm,
6455,6455,6611,043177,0431a7,"ld d,(hl)","ld d,(hl)","ld d,(hl)",main.asm,
6455,6455,6611,043177,0431a7,"ld d,(hl)","ld d,(hl)","ld d,(hl)",main.asm,
6456,6456,6612,043178,0431a8,"ld b,c","ld b,c","ld b,c",main.asm,
6457,6457,6613,043179,0431a9,"ld c,h","ld c,h","ld c,h",,
6458,6458,6614,04317a,0431aa,sub a,sub a,sub a,main.asm,"DB    97H, ""ASC"""
6459,6459,6615,04317b,0431ab,"ld b,c","ld b,c","ld b,c",main.asm,
6460,6460,6616,04317c,0431ac,"ld d,e","ld d,e","ld d,e",main.asm,
6461,6461,6617,04317d,0431ad,"ld b,e","ld b,e","ld b,e",main.asm,
6462,6462,6618,04317e,0431ae,"sbc a,b","sbc a,b","sbc a,b",main.asm,"DB    98H, ""ASN"""
6463,6463,6619,04317f,0431af,"ld b,c","ld b,c","ld b,c",main.asm,
6464,6464,6620,043180,0431b0,"ld d,e","ld d,e","ld d,e",main.asm,
6465,6465,6621,043181,0431b1,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,
6466,6466,6622,043182,0431b2,"sbc a,c","sbc a,c","sbc a,c",main.asm,"DB    99H, ""ATN"""
6467,6467,6623,043183,0431b3,"ld b,c","ld b,c","ld b,c",main.asm,
6468,6468,6624,043184,0431b4,"ld d,h","ld d,h","ld d,h",main.asm,
6469,6469,6625,043185,0431b5,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,
6470,6470,6626,043186,0431b6,"add a,$41","add a,$41","add a,$00",main.asm,"DB    C6H, ""AUTO"""
6471,6471,6627,043188,0431b8,"ld d,l","ld d,l","ld d,l",main.asm,
6472,6472,6628,043189,0431b9,"ld d,h","ld d,h","ld d,h",main.asm,
6472,6472,6628,043189,0431b9,"ld d,h","ld d,h","ld d,h",main.asm,
6473,6473,6629,04318a,0431ba,"ld c,a","ld c,a","ld c,a",,
6474,6474,6630,04318b,0431bb,"sbc a,d","sbc a,d","sbc a,d",main.asm,"DB    9AH, ""BGET"", 0"
6475,6475,6631,04318c,0431bc,"ld b,d","ld b,d","ld b,d",main.asm,
6476,6476,6632,04318d,0431bd,"ld b,a","ld b,a","ld b,a",main.asm,
6477,6477,6633,04318e,0431be,"ld b,l","ld b,l","ld b,l",main.asm,
6477,6477,6633,04318e,0431be,"ld b,l","ld b,l","ld b,l",main.asm,
6478,6478,6634,04318f,0431bf,"ld d,h","ld d,h","ld d,h",main.asm,
6479,6479,6635,043190,0431c0,nop,nop,nop,,
6480,6480,6636,043191,0431c1,push de,push de,push de,main.asm,"DB    D5H, ""BPUT"", 0"
6481,6481,6637,043192,0431c2,"ld b,d","ld b,d","ld b,d",main.asm,
6482,6482,6638,043193,0431c3,"ld d,b","ld d,b","ld d,b",main.asm,
6483,6483,6639,043194,0431c4,"ld d,l","ld d,l","ld d,l",main.asm,
6483,6483,6639,043194,0431c4,"ld d,l","ld d,l","ld d,l",main.asm,
6484,6484,6640,043195,0431c5,"ld d,h","ld d,h","ld d,h",main.asm,
6485,6485,6641,043196,0431c6,nop,nop,nop,,
6486,6486,6642,043197,0431c7,ei,ei,ei,main.asm,"DB    FBH, ""COLOUR"""
6487,6487,6643,043198,0431c8,"ld b,e","ld b,e","ld b,e",main.asm,
6488,6488,6644,043199,0431c9,"ld c,a","ld c,a","ld c,a",main.asm,
6489,6489,6645,04319a,0431ca,"ld c,h","ld c,h","ld c,h",main.asm,
6489,6489,6645,04319a,0431ca,"ld c,h","ld c,h","ld c,h",main.asm,
6490,6490,6646,04319b,0431cb,"ld c,a","ld c,a","ld c,a",main.asm,
6491,6491,6647,04319c,0431cc,"ld d,l","ld d,l","ld d,l",main.asm,
6492,6492,6648,04319d,0431cd,ei.sil,ei.sil,ei.sil,,
6493,6493,6649,04319f,0431cf,"ld b,e","ld b,e","ld b,e",main.asm,
6494,6494,6650,0431a0,0431d0,"ld c,a","ld c,a","ld c,a",main.asm,
6495,6495,6651,0431a1,0431d1,"ld c,h","ld c,h","ld c,h",main.asm,
6495,6495,6651,0431a1,0431d1,"ld c,h","ld c,h","ld c,h",main.asm,
6496,6496,6652,0431a2,0431d2,"ld c,a","ld c,a","ld c,a",main.asm,
6497,6497,6653,0431a3,0431d3,sub.sil $43,sub.sil $43,sub.sil $00,,
6498,6498,6654,0431a6,0431d6,"ld b,c","ld b,c","ld b,c",main.asm,
6499,6499,6655,0431a7,0431d7,"ld c,h","ld c,h","ld c,h",main.asm,
6499,6499,6655,0431a7,0431d7,"ld c,h","ld c,h","ld c,h",main.asm,
6500,6500,6656,0431a8,0431d8,"ld c,h","ld c,h","ld c,h",,
6501,6501,6657,0431a9,0431d9,rst $10,rst $10,rst $00,main.asm,"DB    D7H, ""CHAIN"""
6502,6502,6658,0431aa,0431da,"ld b,e","ld b,e","ld b,e",main.asm,
6503,6503,6659,0431ab,0431db,"ld c,b","ld c,b","ld c,b",main.asm,
6504,6504,6660,0431ac,0431dc,"ld b,c","ld b,c","ld b,c",main.asm,
6504,6504,6660,0431ac,0431dc,"ld b,c","ld b,c","ld b,c",main.asm,
6505,6505,6661,0431ad,0431dd,"ld.lis c,(hl)","ld.lis c,(hl)","ld.lis c,(hl)",main.asm,
6506,6506,6662,0431af,0431df,cp l,cp l,cp l,main.asm,"DB    BDH, ""CHR$"""
6507,6507,6663,0431b0,0431e0,"ld b,e","ld b,e","ld b,e",main.asm,
6508,6508,6664,0431b1,0431e1,"ld c,b","ld c,b","ld c,b",main.asm,
6509,6509,6665,0431b2,0431e2,inc.sil h,inc.sil h,inc.sil h,main.asm,
6509,6509,6665,0431b2,0431e2,inc.sil h,inc.sil h,inc.sil h,main.asm,
6510,6510,6666,0431b4,0431e4,ret c,ret c,ret c,main.asm,"DB    D8H, ""CLEAR"", 0"
6511,6511,6667,0431b5,0431e5,"ld b,e","ld b,e","ld b,e",main.asm,
6512,6512,6668,0431b6,0431e6,"ld c,h","ld c,h","ld c,h",main.asm,
6513,6513,6669,0431b7,0431e7,"ld b,l","ld b,l","ld b,l",main.asm,
6513,6513,6669,0431b7,0431e7,"ld b,l","ld b,l","ld b,l",main.asm,
6514,6514,6670,0431b8,0431e8,"ld b,c","ld b,c","ld b,c",main.asm,
6515,6515,6671,0431b9,0431e9,nop.sil,nop.sil,nop.sil,main.asm,
6516,6516,6672,0431bb,0431eb,exx,exx,exx,main.asm,"DB    D9H, ""CLOSE"", 0"
6517,6517,6673,0431bc,0431ec,"ld b,e","ld b,e","ld b,e",main.asm,
6518,6518,6674,0431bd,0431ed,"ld c,h","ld c,h","ld c,h",main.asm,
6519,6519,6675,0431be,0431ee,"ld c,a","ld c,a","ld c,a",main.asm,
6519,6519,6675,0431be,0431ee,"ld c,a","ld c,a","ld c,a",main.asm,
6520,6520,6676,0431bf,0431ef,"ld d,e","ld d,e","ld d,e",main.asm,
6521,6521,6677,0431c0,0431f0,"ld b,l","ld b,l","ld b,l",main.asm,
6522,6522,6678,0431c1,0431f1,nop,nop,nop,,
6523,6523,6679,0431c2,0431f2,"jp c,$474c43","jp c,$474c43","jp c,$000000",main.asm,"DB    DAH, ""CLG"", 0"
6524,6524,6680,0431c6,0431f6,nop,nop,nop,,
6525,6525,6681,0431c7,0431f7,"in a,($43)","in a,($43)","in a,($00)",main.asm,"DB    DBH, ""CLS"", 0"
6526,6526,6682,0431c9,0431f9,"ld c,h","ld c,h","ld c,h",main.asm,
6527,6527,6683,0431ca,0431fa,"ld d,e","ld d,e","ld d,e",main.asm,
6527,6527,6683,0431ca,0431fa,"ld d,e","ld d,e","ld d,e",main.asm,
6528,6528,6684,0431cb,0431fb,nop,nop,nop,,
6529,6529,6685,0431cc,0431fc,"sbc a,e","sbc a,e","sbc a,e",main.asm,"DB    9BH, ""COS"""
6530,6530,6686,0431cd,0431fd,"ld b,e","ld b,e","ld b,e",main.asm,
6531,6531,6687,0431ce,0431fe,"ld c,a","ld c,a","ld c,a",main.asm,
6532,6532,6688,0431cf,0431ff,"ld d,e","ld d,e","ld d,e",main.asm,
6533,6533,6689,0431d0,043200,"sbc a,h","sbc a,h","sbc a,h",main.asm,"DB    9CH, ""COUNT"", 0"
6534,6534,6690,0431d1,043201,"ld b,e","ld b,e","ld b,e",main.asm,
6535,6535,6691,0431d2,043202,"ld c,a","ld c,a","ld c,a",main.asm,
6536,6536,6692,0431d3,043203,"ld d,l","ld d,l","ld d,l",main.asm,
6536,6536,6692,0431d3,043203,"ld d,l","ld d,l","ld d,l",main.asm,
6537,6537,6693,0431d4,043204,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,
6538,6538,6694,0431d5,043205,"ld d,h","ld d,h","ld d,h",main.asm,
6539,6539,6695,0431d6,043206,nop,nop,nop,,
6540,6540,6696,0431d7,043207,"call c,$544144","call c,$544144","call c,$000000",main.asm,"DB    DCH, ""DATA"""
6541,6541,6697,0431db,04320b,"ld b,c","ld b,c","ld b,c",,
6542,6542,6698,0431dc,04320c,"sbc a,l","sbc a,l","sbc a,l",main.asm,"DB    9DH, ""DEG"""
6543,6543,6699,0431dd,04320d,"ld b,h","ld b,h","ld b,h",main.asm,
6544,6544,6700,0431de,04320e,"ld b,l","ld b,l","ld b,l",main.asm,
6545,6545,6701,0431df,04320f,"ld b,a","ld b,a","ld b,a",main.asm,
6546,6546,6702,0431e0,043210,"ld b,ixh","ld b,ixh","ld b,ixh",main.asm,"DB    DDH, ""DEF"""
6547,6547,6703,0431e2,043212,"ld b,l","ld b,l","ld b,l",main.asm,
6548,6548,6704,0431e3,043213,"ld b,(hl)","ld b,(hl)","ld b,(hl)",main.asm,
6549,6549,6705,0431e4,043214,rst $00,rst $00,rst $00,main.asm,"DB    C7H, ""DELETE"""
6550,6550,6706,0431e5,043215,"ld b,h","ld b,h","ld b,h",main.asm,
6551,6551,6707,0431e6,043216,"ld b,l","ld b,l","ld b,l",main.asm,
6552,6552,6708,0431e7,043217,"ld c,h","ld c,h","ld c,h",main.asm,
6552,6552,6708,0431e7,043217,"ld c,h","ld c,h","ld c,h",main.asm,
6553,6553,6709,0431e8,043218,"ld b,l","ld b,l","ld b,l",main.asm,
6554,6554,6710,0431e9,043219,"ld d,h","ld d,h","ld d,h",main.asm,
6555,6555,6711,0431ea,04321a,"ld b,l","ld b,l","ld b,l",,
6556,6556,6712,0431eb,04321b,"add a,c","add a,c","add a,c",main.asm,"DB    81H, ""DIV"""
6557,6557,6713,0431ec,04321c,"ld b,h","ld b,h","ld b,h",main.asm,
6558,6558,6714,0431ed,04321d,"ld.lis d,(hl)","ld.lis d,(hl)","ld.lis d,(hl)",main.asm,
6559,6559,6715,0431ef,04321f,"sbc a,$44","sbc a,$44","sbc a,$00",main.asm,"DB    DEH, ""DIM"""
6560,6560,6716,0431f1,043221,"ld.lis c,l","ld.lis c,l","ld.lis c,l",main.asm,
6561,6561,6717,0431f3,043223,rst $18,rst $18,rst $00,main.asm,"DB    DFH, ""DRAW"""
6562,6562,6718,0431f4,043224,"ld b,h","ld b,h","ld b,h",main.asm,
6563,6563,6719,0431f5,043225,"ld.sil b,c","ld.sil b,c","ld.sil b,c",main.asm,
6564,6564,6720,0431f7,043227,"ld d,a","ld d,a","ld d,a",,
6565,6565,6721,0431f8,043228,pop hl,pop hl,pop hl,main.asm,"DB    E1H, ""ENDPROC"", 0"
6566,6566,6722,0431f9,043229,"ld b,l","ld b,l","ld b,l",main.asm,
6567,6567,6723,0431fa,04322a,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,
6568,6568,6724,0431fb,04322b,"ld b,h","ld b,h","ld b,h",main.asm,
6568,6568,6724,0431fb,04322b,"ld b,h","ld b,h","ld b,h",main.asm,
6569,6569,6725,0431fc,04322c,"ld d,b","ld d,b","ld d,b",main.asm,
6570,6570,6726,0431fd,04322d,"ld.sil c,a","ld.sil c,a","ld.sil c,a",main.asm,
6571,6571,6727,0431ff,04322f,"ld b,e","ld b,e","ld b,e",,
6572,6572,6728,043200,043230,nop,nop,nop,,
6573,6573,6729,043201,043231,ret po,ret po,ret po,main.asm,"DB    E0H, ""END"", 0"
6574,6574,6730,043202,043232,"ld b,l","ld b,l","ld b,l",main.asm,
6575,6575,6731,043203,043233,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,
6576,6576,6732,043204,043234,"ld b,h","ld b,h","ld b,h",main.asm,
6576,6576,6732,043204,043234,"ld b,h","ld b,h","ld b,h",main.asm,
6577,6577,6733,043205,043235,nop,nop,nop,,
6578,6578,6734,043206,043236,"jp po,$564e45","jp po,$564e45","jp po,$000000",main.asm,"DB    E2H, ""ENVELOPE"""
6579,6579,6735,04320a,04323a,"ld b,l","ld b,l","ld b,l",main.asm,
6580,6580,6736,04320b,04323b,"ld c,h","ld c,h","ld c,h",main.asm,
6581,6581,6737,04320c,04323c,"ld c,a","ld c,a","ld c,a",main.asm,
6581,6581,6737,04320c,04323c,"ld c,a","ld c,a","ld c,a",main.asm,
6582,6582,6738,04320d,04323d,"ld d,b","ld d,b","ld d,b",,
6583,6583,6739,04320e,04323e,"ld b,l","ld b,l","ld b,l",,
6584,6584,6740,04320f,04323f,"adc a,e","adc a,e","adc a,e",main.asm,"DB    8BH, ""ELSE"""
6585,6585,6741,043210,043240,"ld b,l","ld b,l","ld b,l",main.asm,
6586,6586,6742,043211,043241,"ld c,h","ld c,h","ld c,h",main.asm,
6587,6587,6743,043212,043242,"ld d,e","ld d,e","ld d,e",main.asm,
6587,6587,6743,043212,043242,"ld d,e","ld d,e","ld d,e",main.asm,
6588,6588,6744,043213,043243,"ld b,l","ld b,l","ld b,l",,
6589,6589,6745,043214,043244,and b,and b,and b,main.asm,"DB    A0H, ""EVAL"""
6590,6590,6746,043215,043245,"ld b,l","ld b,l","ld b,l",main.asm,
6591,6591,6747,043216,043246,"ld d,(hl)","ld d,(hl)","ld d,(hl)",main.asm,
6592,6592,6748,043217,043247,"ld b,c","ld b,c","ld b,c",main.asm,
6592,6592,6748,043217,043247,"ld b,c","ld b,c","ld b,c",main.asm,
6593,6593,6749,043218,043248,"ld c,h","ld c,h","ld c,h",,
6594,6594,6750,043219,043249,"sbc a,(hl)","sbc a,(hl)","sbc a,(hl)",main.asm,"DB    9EH, ""ERL"", 0"
6595,6595,6751,04321a,04324a,"ld b,l","ld b,l","ld b,l",main.asm,
6596,6596,6752,04321b,04324b,"ld.sil c,h","ld.sil c,h","ld.sil c,h",main.asm,
6597,6597,6753,04321d,04324d,nop,nop,nop,,
6598,6598,6754,04321e,04324e,"add a,l","add a,l","add a,l",main.asm,"DB    85H, ""ERROR"""
6599,6599,6755,04321f,04324f,"ld b,l","ld b,l","ld b,l",main.asm,
6600,6600,6756,043220,043250,noni.sil,noni.sil,noni.sil,main.asm,
6601,6601,6757,043221,043251,"ld.sil c,a","ld.sil c,a","ld.sil c,a",main.asm,
6601,6601,6757,043221,043251,"ld.sil c,a","ld.sil c,a","ld.sil c,a",main.asm,
6602,6602,6758,043223,043253,push.sil bc,push.sil bc,push.sil bc,,
6603,6603,6759,043225,043255,"ld b,l","ld b,l","ld b,l",main.asm,
6604,6604,6760,043226,043256,"ld c,a","ld c,a","ld c,a",main.asm,
6605,6605,6761,043227,043257,"ld b,(hl)","ld b,(hl)","ld b,(hl)",main.asm,
6605,6605,6761,043227,043257,"ld b,(hl)","ld b,(hl)","ld b,(hl)",main.asm,
6606,6606,6762,043228,043258,nop,nop,nop,,
6607,6607,6763,043229,043259,"add a,d","add a,d","add a,d",main.asm,"DB    82H, ""EOR"""
6608,6608,6764,04322a,04325a,"ld b,l","ld b,l","ld b,l",main.asm,
6609,6609,6765,04322b,04325b,"ld c,a","ld c,a","ld c,a",main.asm,
6610,6610,6766,04322c,04325c,"sbc.sil a,a","sbc.sil a,a","sbc.sil a,a",main.asm,
6611,6611,6767,04322e,04325e,"ld b,l","ld b,l","ld b,l",main.asm,
6612,6612,6768,04322f,04325f,noni.sil,noni.sil,noni.sil,main.asm,
6613,6613,6769,043230,043260,nop.sil,nop.sil,nop.sil,main.asm,
6613,6613,6769,043230,043260,nop.sil,nop.sil,nop.sil,main.asm,
6614,6614,6770,043232,043262,and c,and c,and c,main.asm,"DB    A1H, ""EXP"""
6615,6615,6771,043233,043263,"ld b,l","ld b,l","ld b,l",main.asm,
6616,6616,6772,043234,043264,"ld e,b","ld e,b","ld e,b",main.asm,
6617,6617,6773,043235,043265,"ld d,b","ld d,b","ld d,b",main.asm,
6618,6618,6774,043236,043266,and d,and d,and d,main.asm,"DB    A2H, ""EXT"", 0"
6619,6619,6775,043237,043267,"ld b,l","ld b,l","ld b,l",main.asm,
6620,6620,6776,043238,043268,"ld e,b","ld e,b","ld e,b",main.asm,
6621,6621,6777,043239,043269,"ld d,h","ld d,h","ld d,h",main.asm,
6621,6621,6777,043239,043269,"ld d,h","ld d,h","ld d,h",main.asm,
6622,6622,6778,04323a,04326a,nop,nop,nop,,
6623,6623,6779,04323b,04326b,"ex (sp),hl","ex (sp),hl","ex (sp),hl",main.asm,"DB    E3H, ""FOR"""
6624,6624,6780,04323c,04326c,"ld b,(hl)","ld b,(hl)","ld b,(hl)",main.asm,
6625,6625,6781,04323d,04326d,"ld c,a","ld c,a","ld c,a",main.asm,
6626,6626,6782,04323e,04326e,and.sil e,and.sil e,and.sil e,main.asm,
6627,6627,6783,043240,043270,"ld b,(hl)","ld b,(hl)","ld b,(hl)",main.asm,
6628,6628,6784,043241,043271,"ld b,c","ld b,c","ld b,c",main.asm,
6629,6629,6785,043242,043272,"ld c,h","ld c,h","ld c,h",main.asm,
6629,6629,6785,043242,043272,"ld c,h","ld c,h","ld c,h",main.asm,
6630,6630,6786,043243,043273,"ld d,e","ld d,e","ld d,e",main.asm,
6631,6631,6787,043244,043274,"ld b,l","ld b,l","ld b,l",main.asm,
6632,6632,6788,043245,043275,nop,nop,nop,,
6633,6633,6789,043246,043276,and h,and h,and h,main.asm,"DB    A4H, ""FN"""
6634,6634,6790,043247,043277,"ld b,(hl)","ld b,(hl)","ld b,(hl)",main.asm,
6635,6635,6791,043248,043278,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,
6636,6636,6792,043249,043279,push hl,push hl,push hl,main.asm,"DB    E5H, ""GOTO"""
6637,6637,6793,04324a,04327a,"ld b,a","ld b,a","ld b,a",main.asm,
6638,6638,6794,04324b,04327b,"ld c,a","ld c,a","ld c,a",main.asm,
6639,6639,6795,04324c,04327c,"ld d,h","ld d,h","ld d,h",main.asm,
6639,6639,6795,04324c,04327c,"ld d,h","ld d,h","ld d,h",main.asm,
6640,6640,6796,04324d,04327d,"ld c,a","ld c,a","ld c,a",,
6641,6641,6797,04324e,04327e,cp (hl),cp (hl),cp (hl),main.asm,"DB    BEH, ""GET$"""
6642,6642,6798,04324f,04327f,"ld b,a","ld b,a","ld b,a",main.asm,
6643,6643,6799,043250,043280,"ld b,l","ld b,l","ld b,l",main.asm,
6644,6644,6800,043251,043281,"ld d,h","ld d,h","ld d,h",main.asm,
6644,6644,6800,043251,043281,"ld d,h","ld d,h","ld d,h",main.asm,
6645,6645,6801,043252,043282,inc h,inc h,inc h,,
6646,6646,6802,043253,043283,and l,and l,and l,main.asm,"DB    A5H, ""GET"""
6647,6647,6803,043254,043284,"ld b,a","ld b,a","ld b,a",main.asm,
6648,6648,6804,043255,043285,"ld b,l","ld b,l","ld b,l",main.asm,
6649,6649,6805,043256,043286,"ld d,h","ld d,h","ld d,h",main.asm,
6650,6650,6806,043257,043287,"call po,$534f47","call po,$534f47","call po,$000000",main.asm,"DB    E4H, ""GOSUB"""
6651,6651,6807,04325b,04328b,"ld d,l","ld d,l","ld d,l",main.asm,
6652,6652,6808,04325c,04328c,"ld b,d","ld b,d","ld b,d",,
6653,6653,6809,04325d,04328d,and $47,and $47,and $00,main.asm,"DB    E6H, ""GCOL"""
6654,6654,6810,04325f,04328f,"ld b,e","ld b,e","ld b,e",main.asm,
6655,6655,6811,043260,043290,"ld c,a","ld c,a","ld c,a",main.asm,
6655,6655,6811,043260,043290,"ld c,a","ld c,a","ld c,a",main.asm,
6656,6656,6812,043261,043291,"ld c,h","ld c,h","ld c,h",,
6657,6657,6813,043262,043292,sub e,sub e,sub e,main.asm,"DB    93H, ""HIMEM"", 0"
6658,6658,6814,043263,043293,"ld c,b","ld c,b","ld c,b",main.asm,
6659,6659,6815,043264,043294,"ld.lis c,l","ld.lis c,l","ld.lis c,l",main.asm,
6660,6660,6816,043266,043296,"ld b,l","ld b,l","ld b,l",main.asm,
6661,6661,6817,043267,043297,"ld c,l","ld c,l","ld c,l",main.asm,
6662,6662,6818,043268,043298,nop,nop,nop,,
6663,6663,6819,043269,043299,ret pe,ret pe,ret pe,main.asm,"DB    E8H, ""INPUT"""
6664,6664,6820,04326a,04329a,"ld.lis c,(hl)","ld.lis c,(hl)","ld.lis c,(hl)",main.asm,
6665,6665,6821,04326c,04329c,"ld d,b","ld d,b","ld d,b",main.asm,
6665,6665,6821,04326c,04329c,"ld d,b","ld d,b","ld d,b",main.asm,
6666,6666,6822,04326d,04329d,"ld d,l","ld d,l","ld d,l",main.asm,
6667,6667,6823,04326e,04329e,"ld d,h","ld d,h","ld d,h",,
6668,6668,6824,04326f,04329f,rst $20,rst $20,rst $00,main.asm,"DB    E7H, ""IF"""
6669,6669,6825,043270,0432a0,"ld.lis b,(hl)","ld.lis b,(hl)","ld.lis b,(hl)",main.asm,
6670,6670,6826,043272,0432a2,cp a,cp a,cp a,main.asm,"DB    BFH, ""INKEY$"""
6671,6671,6827,043273,0432a3,"ld.lis c,(hl)","ld.lis c,(hl)","ld.lis c,(hl)",main.asm,
6672,6672,6828,043275,0432a5,"ld c,e","ld c,e","ld c,e",main.asm,
6672,6672,6828,043275,0432a5,"ld c,e","ld c,e","ld c,e",main.asm,
6673,6673,6829,043276,0432a6,"ld b,l","ld b,l","ld b,l",main.asm,
6674,6674,6830,043277,0432a7,"ld e,c","ld e,c","ld e,c",main.asm,
6675,6675,6831,043278,0432a8,inc h,inc h,inc h,,
6676,6676,6832,043279,0432a9,and (hl),and (hl),and (hl),main.asm,"DB    A6H, ""INKEY"""
6677,6677,6833,04327a,0432aa,"ld.lis c,(hl)","ld.lis c,(hl)","ld.lis c,(hl)",main.asm,
6678,6678,6834,04327c,0432ac,"ld c,e","ld c,e","ld c,e",main.asm,
6678,6678,6834,04327c,0432ac,"ld c,e","ld c,e","ld c,e",main.asm,
6679,6679,6835,04327d,0432ad,"ld b,l","ld b,l","ld b,l",main.asm,
6680,6680,6836,04327e,0432ae,"ld e,c","ld e,c","ld e,c",,
6681,6681,6837,04327f,0432af,xor b,xor b,xor b,main.asm,"DB    A8H, ""INT"""
6682,6682,6838,043280,0432b0,"ld.lis c,(hl)","ld.lis c,(hl)","ld.lis c,(hl)",main.asm,
6683,6683,6839,043282,0432b2,"ld d,h","ld d,h","ld d,h",main.asm,
6684,6684,6840,043283,0432b3,and a,and a,and a,main.asm,"DB    A7H, ""INSTR("""
6685,6685,6841,043284,0432b4,"ld.lis c,(hl)","ld.lis c,(hl)","ld.lis c,(hl)",main.asm,
6686,6686,6842,043286,0432b6,"ld d,e","ld d,e","ld d,e",main.asm,
6686,6686,6842,043286,0432b6,"ld d,e","ld d,e","ld d,e",main.asm,
6687,6687,6843,043287,0432b7,"ld d,h","ld d,h","ld d,h",main.asm,
6688,6688,6844,043288,0432b8,"jr.sil z,$-$34","jr.sil z,$-$34","jr.sil z,$-$00",main.asm,
6689,6689,6845,04328b,0432bb,"ld c,h","ld c,h","ld c,h",main.asm,
6690,6690,6846,04328c,0432bc,"ld.lis d,e","ld.lis d,e","ld.lis d,e",main.asm,
6691,6691,6847,04328e,0432be,"ld d,h","ld d,h","ld d,h",,
6692,6692,6848,04328f,0432bf,"add a,(hl)","add a,(hl)","add a,(hl)",main.asm,"DB    86H, ""LINE"""
6693,6693,6849,043290,0432c0,"ld c,h","ld c,h","ld c,h",main.asm,
6694,6694,6850,043291,0432c1,"ld.lis c,(hl)","ld.lis c,(hl)","ld.lis c,(hl)",main.asm,
6695,6695,6851,043293,0432c3,"ld b,l","ld b,l","ld b,l",,
6696,6696,6852,043294,0432c4,ret z,ret z,ret z,main.asm,"DB    C8H, ""LOAD"""
6697,6697,6853,043295,0432c5,"ld c,h","ld c,h","ld c,h",main.asm,
6698,6698,6854,043296,0432c6,"ld c,a","ld c,a","ld c,a",main.asm,
6699,6699,6855,043297,0432c7,"ld b,c","ld b,c","ld b,c",main.asm,
6699,6699,6855,043297,0432c7,"ld b,c","ld b,c","ld b,c",main.asm,
6700,6700,6856,043298,0432c8,"ld b,h","ld b,h","ld b,h",,
6701,6701,6857,043299,0432c9,sub d,sub d,sub d,main.asm,"DB    92H, ""LOMEM"", 0"
6702,6702,6858,04329a,0432ca,"ld c,h","ld c,h","ld c,h",main.asm,
6703,6703,6859,04329b,0432cb,"ld c,a","ld c,a","ld c,a",main.asm,
6704,6704,6860,04329c,0432cc,"ld c,l","ld c,l","ld c,l",main.asm,
6704,6704,6860,04329c,0432cc,"ld c,l","ld c,l","ld c,l",main.asm,
6705,6705,6861,04329d,0432cd,"ld b,l","ld b,l","ld b,l",main.asm,
6706,6706,6862,04329e,0432ce,"ld c,l","ld c,l","ld c,l",main.asm,
6707,6707,6863,04329f,0432cf,nop,nop,nop,,
6708,6708,6864,0432a0,0432d0,"jp pe,$434f4c","jp pe,$434f4c","jp pe,$000000",main.asm,"DB    EAH, ""LOCAL"""
6709,6709,6865,0432a4,0432d4,"ld b,c","ld b,c","ld b,c",main.asm,
6710,6710,6866,0432a5,0432d5,"ld c,h","ld c,h","ld c,h",,
6711,6711,6867,0432a6,0432d6,ret nz,ret nz,ret nz,main.asm,"DB    C0H, ""LEFT$("""
6712,6712,6868,0432a7,0432d7,"ld c,h","ld c,h","ld c,h",main.asm,
6713,6713,6869,0432a8,0432d8,"ld b,l","ld b,l","ld b,l",main.asm,
6714,6714,6870,0432a9,0432d9,"ld b,(hl)","ld b,(hl)","ld b,(hl)",main.asm,
6714,6714,6870,0432a9,0432d9,"ld b,(hl)","ld b,(hl)","ld b,(hl)",main.asm,
6715,6715,6871,0432aa,0432da,"ld d,h","ld d,h","ld d,h",main.asm,
6716,6716,6872,0432ab,0432db,inc h,inc h,inc h,main.asm,
6717,6717,6873,0432ac,0432dc,"jr z,$-$55","jr z,$-$55","jr z,$-$00",,
6718,6718,6874,0432ae,0432de,"ld c,h","ld c,h","ld c,h",main.asm,
6719,6719,6875,0432af,0432df,"ld b,l","ld b,l","ld b,l",main.asm,
6720,6720,6876,0432b0,0432e0,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,
6721,6721,6877,0432b1,0432e1,jp (hl),jp (hl),jp (hl),main.asm,"DB    E9H, ""LET"""
6722,6722,6878,0432b2,0432e2,"ld c,h","ld c,h","ld c,h",main.asm,
6723,6723,6879,0432b3,0432e3,"ld b,l","ld b,l","ld b,l",main.asm,
6724,6724,6880,0432b4,0432e4,"ld d,h","ld d,h","ld d,h",main.asm,
6725,6725,6881,0432b5,0432e5,xor e,xor e,xor e,main.asm,"DB    ABH, ""LOG"""
6726,6726,6882,0432b6,0432e6,"ld c,h","ld c,h","ld c,h",main.asm,
6727,6727,6883,0432b7,0432e7,"ld c,a","ld c,a","ld c,a",main.asm,
6728,6728,6884,0432b8,0432e8,"ld b,a","ld b,a","ld b,a",main.asm,
6729,6729,6885,0432b9,0432e9,xor d,xor d,xor d,main.asm,"DB    AAH, ""LN"""
6730,6730,6886,0432ba,0432ea,"ld c,h","ld c,h","ld c,h",main.asm,
6731,6731,6887,0432bb,0432eb,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,
6732,6732,6888,0432bc,0432ec,pop bc,pop bc,pop bc,main.asm,"DB    C1H, ""MID$("""
6733,6733,6889,0432bd,0432ed,"ld c,l","ld c,l","ld c,l",main.asm,
6734,6734,6890,0432be,0432ee,"ld.lis b,h","ld.lis b,h","ld.lis b,h",main.asm,
6735,6735,6891,0432c0,0432f0,inc h,inc h,inc h,main.asm,
6736,6736,6892,0432c1,0432f1,"jr z,$-$13","jr z,$-$13","jr z,$-$00",,
6737,6737,6893,0432c3,0432f3,"ld c,l","ld c,l","ld c,l",main.asm,
6738,6738,6894,0432c4,0432f4,"ld c,a","ld c,a","ld c,a",main.asm,
6739,6739,6895,0432c5,0432f5,"ld b,h","ld b,h","ld b,h",main.asm,
6739,6739,6895,0432c5,0432f5,"ld b,h","ld b,h","ld b,h",main.asm,
6740,6740,6896,0432c6,0432f6,"ld b,l","ld b,l","ld b,l",,
6741,6741,6897,0432c7,0432f7,"add a,e","add a,e","add a,e",main.asm,"DB    83H, ""MOD"""
6742,6742,6898,0432c8,0432f8,"ld c,l","ld c,l","ld c,l",main.asm,
6743,6743,6899,0432c9,0432f9,"ld c,a","ld c,a","ld c,a",main.asm,
6744,6744,6900,0432ca,0432fa,"ld b,h","ld b,h","ld b,h",main.asm,
6745,6745,6901,0432cb,0432fb,"call pe,$564f4d","call pe,$564f4d","call pe,$000000",main.asm,"DB    ECH, ""MOVE"""
6746,6746,6902,0432cf,0432ff,"ld b,l","ld b,l","ld b,l",,
6747,6747,6903,0432d0,043300,trap,trap,trap,main.asm,"DB    EDH, ""NEXT"""
6748,6748,6904,0432d2,043302,"ld b,l","ld b,l","ld b,l",main.asm,
6749,6749,6905,0432d3,043303,"ld e,b","ld e,b","ld e,b",main.asm,
6749,6749,6905,0432d3,043303,"ld e,b","ld e,b","ld e,b",main.asm,
6750,6750,6906,0432d4,043304,"ld d,h","ld d,h","ld d,h",,
6751,6751,6907,0432d5,043305,"jp z,$57454e","jp z,$57454e","jp z,$000000",main.asm,"DB    CAH, ""NEW"", 0"
6752,6752,6908,0432d9,043309,nop,nop,nop,,
6753,6753,6909,0432da,04330a,xor h,xor h,xor h,main.asm,"DB    ACH, ""NOT"""
6754,6754,6910,0432db,04330b,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,
6755,6755,6911,0432dc,04330c,"ld c,a","ld c,a","ld c,a",main.asm,
6756,6756,6912,0432dd,04330d,"ld d,h","ld d,h","ld d,h",main.asm,
6757,6757,6913,0432de,04330e,"bit 1,a","bit 1,a","bit 1,a",main.asm,"DB    CBH, ""OLD"", 0"
6758,6758,6914,0432e0,043310,"ld c,h","ld c,h","ld c,h",main.asm,
6759,6759,6915,0432e1,043311,"ld b,h","ld b,h","ld b,h",main.asm,
6759,6759,6915,0432e1,043311,"ld b,h","ld b,h","ld b,h",main.asm,
6760,6760,6916,0432e2,043312,nop,nop,nop,,
6761,6761,6917,0432e3,043313,xor $4f,xor $4f,xor $00,main.asm,"DB    EEH, ""ON"""
6762,6762,6918,0432e5,043315,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,
6763,6763,6919,0432e6,043316,"add a,a","add a,a","add a,a",main.asm,"DB    87H, ""OFF"""
6764,6764,6920,0432e7,043317,"ld c,a","ld c,a","ld c,a",main.asm,
6765,6765,6921,0432e8,043318,"ld b,(hl)","ld b,(hl)","ld b,(hl)",main.asm,
6766,6766,6922,0432e9,043319,"ld b,(hl)","ld b,(hl)","ld b,(hl)",main.asm,
6767,6767,6923,0432ea,04331a,"add a,h","add a,h","add a,h",main.asm,"DB    84H, ""OR"""
6768,6768,6924,0432eb,04331b,"ld c,a","ld c,a","ld c,a",main.asm,
6769,6769,6925,0432ec,04331c,"adc.sil a,(hl)","adc.sil a,(hl)","adc.sil a,(hl)",main.asm,
6770,6770,6926,0432ee,04331e,"ld c,a","ld c,a","ld c,a",main.asm,
6771,6771,6927,0432ef,04331f,"ld d,b","ld d,b","ld d,b",main.asm,
6772,6772,6928,0432f0,043320,"ld b,l","ld b,l","ld b,l",main.asm,
6772,6772,6928,0432f0,043320,"ld b,l","ld b,l","ld b,l",main.asm,
6773,6773,6929,0432f1,043321,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,
6774,6774,6930,0432f2,043322,"ld.lis c,(hl)","ld.lis c,(hl)","ld.lis c,(hl)",main.asm,
6775,6775,6931,0432f4,043324,xor (hl),xor (hl),xor (hl),main.asm,"DB    AEH, ""OPENOUT"""
6776,6776,6932,0432f5,043325,"ld c,a","ld c,a","ld c,a",main.asm,
6777,6777,6933,0432f6,043326,"ld d,b","ld d,b","ld d,b",main.asm,
6778,6778,6934,0432f7,043327,"ld b,l","ld b,l","ld b,l",main.asm,
6778,6778,6934,0432f7,043327,"ld b,l","ld b,l","ld b,l",main.asm,
6779,6779,6935,0432f8,043328,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,
6780,6780,6936,0432f9,043329,"ld c,a","ld c,a","ld c,a",main.asm,
6781,6781,6937,0432fa,04332a,"ld d,l","ld d,l","ld d,l",main.asm,
6782,6782,6938,0432fb,04332b,"ld d,h","ld d,h","ld d,h",,
6783,6783,6939,0432fc,04332c,xor l,xor l,xor l,main.asm,"DB    ADH, ""OPENUP"""
6784,6784,6940,0432fd,04332d,"ld c,a","ld c,a","ld c,a",main.asm,
6785,6785,6941,0432fe,04332e,"ld d,b","ld d,b","ld d,b",main.asm,
6786,6786,6942,0432ff,04332f,"ld b,l","ld b,l","ld b,l",main.asm,
6786,6786,6942,0432ff,04332f,"ld b,l","ld b,l","ld b,l",main.asm,
6787,6787,6943,043300,043330,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,
6788,6788,6944,043301,043331,"ld d,l","ld d,l","ld d,l",main.asm,
6789,6789,6945,043302,043332,"ld d,b","ld d,b","ld d,b",,
6790,6790,6946,043303,043333,rst $38,rst $38,rst $00,main.asm,"DB    FFH, ""OSCLI"""
6791,6791,6947,043304,043334,"ld c,a","ld c,a","ld c,a",main.asm,
6792,6792,6948,043305,043335,"ld d,e","ld d,e","ld d,e",main.asm,
6793,6793,6949,043306,043336,"ld b,e","ld b,e","ld b,e",main.asm,
6793,6793,6949,043306,043336,"ld b,e","ld b,e","ld b,e",main.asm,
6794,6794,6950,043307,043337,"ld c,h","ld c,h","ld c,h",main.asm,
6795,6795,6951,043308,043338,pop.lis af,pop.lis af,pop.lis af,,
6796,6796,6952,04330a,04333a,"ld d,b","ld d,b","ld d,b",main.asm,
6797,6797,6953,04330b,04333b,noni.sil,noni.sil,noni.sil,main.asm,
6798,6798,6954,04330c,04333c,"ld.lis c,(hl)","ld.lis c,(hl)","ld.lis c,(hl)",main.asm,
6798,6798,6954,04330c,04333c,"ld.lis c,(hl)","ld.lis c,(hl)","ld.lis c,(hl)",main.asm,
6799,6799,6955,04330e,04333e,"ld d,h","ld d,h","ld d,h",,
6800,6800,6956,04330f,04333f,sub b,sub b,sub b,main.asm,"DB    90H, ""PAGE"", 0"
6801,6801,6957,043310,043340,"ld d,b","ld d,b","ld d,b",main.asm,
6802,6802,6958,043311,043341,"ld b,c","ld b,c","ld b,c",main.asm,
6803,6803,6959,043312,043342,"ld b,a","ld b,a","ld b,a",main.asm,
6803,6803,6959,043312,043342,"ld b,a","ld b,a","ld b,a",main.asm,
6804,6804,6960,043313,043343,"ld b,l","ld b,l","ld b,l",main.asm,
6805,6805,6961,043314,043344,nop,nop,nop,,
6806,6806,6962,043315,043345,"adc a,a","adc a,a","adc a,a",main.asm,"DB    8FH, ""PTR"", 0"
6807,6807,6963,043316,043346,"ld d,b","ld d,b","ld d,b",main.asm,
6808,6808,6964,043317,043347,"ld d,h","ld d,h","ld d,h",main.asm,
6809,6809,6965,043318,043348,nop.sil,nop.sil,nop.sil,main.asm,
6809,6809,6965,043318,043348,nop.sil,nop.sil,nop.sil,main.asm,
6810,6810,6966,04331a,04334a,xor a,xor a,xor a,main.asm,"DB    AFH, ""PI"", 0"
6811,6811,6967,04331b,04334b,"ld d,b","ld d,b","ld d,b",main.asm,
6812,6812,6968,04331c,04334c,nop.lis,nop.lis,nop.lis,main.asm,
6813,6813,6969,04331e,04334e,ret p,ret p,ret p,main.asm,"DB    F0H, ""PLOT"""
6814,6814,6970,04331f,04334f,"ld d,b","ld d,b","ld d,b",main.asm,
6815,6815,6971,043320,043350,"ld c,h","ld c,h","ld c,h",main.asm,
6816,6816,6972,043321,043351,"ld c,a","ld c,a","ld c,a",main.asm,
6816,6816,6972,043321,043351,"ld c,a","ld c,a","ld c,a",main.asm,
6817,6817,6973,043322,043352,"ld d,h","ld d,h","ld d,h",,
6818,6818,6974,043323,043353,or b,or b,or b,main.asm,"DB    B0H, ""POINT("""
6819,6819,6975,043324,043354,"ld d,b","ld d,b","ld d,b",main.asm,
6820,6820,6976,043325,043355,"ld c,a","ld c,a","ld c,a",main.asm,
6821,6821,6977,043326,043356,"ld.lis c,(hl)","ld.lis c,(hl)","ld.lis c,(hl)",main.asm,
6821,6821,6977,043326,043356,"ld.lis c,(hl)","ld.lis c,(hl)","ld.lis c,(hl)",main.asm,
6822,6822,6978,043328,043358,"ld d,h","ld d,h","ld d,h",main.asm,
6823,6823,6979,043329,043359,"jr z,$-$0c","jr z,$-$0c","jr z,$-$00",,
6824,6824,6980,04332b,04335b,"ld d,b","ld d,b","ld d,b",main.asm,
6825,6825,6981,04332c,04335c,"ld.sil c,a","ld.sil c,a","ld.sil c,a",main.asm,
6826,6826,6982,04332e,04335e,"ld b,e","ld b,e","ld b,e",,
6827,6827,6983,04332f,04335f,or c,or c,or c,main.asm,"DB    B1H, ""POS"", 0"
6828,6828,6984,043330,043360,"ld d,b","ld d,b","ld d,b",main.asm,
6829,6829,6985,043331,043361,"ld c,a","ld c,a","ld c,a",main.asm,
6830,6830,6986,043332,043362,"ld d,e","ld d,e","ld d,e",main.asm,
6830,6830,6986,043332,043362,"ld d,e","ld d,e","ld d,e",main.asm,
6831,6831,6987,043333,043363,nop,nop,nop,,
6832,6832,6988,043334,043364,"adc a,$50","adc a,$50","adc a,$00",main.asm,"DB    CEH, ""PUT"""
6833,6833,6989,043336,043366,"ld d,l","ld d,l","ld d,l",main.asm,
6834,6834,6990,043337,043367,"ld d,h","ld d,h","ld d,h",main.asm,
6835,6835,6991,043338,043368,ret m,ret m,ret m,main.asm,"DB    F8H, ""RETURN"", 0"
6836,6836,6992,043339,043369,"ld.sil b,l","ld.sil b,l","ld.sil b,l",main.asm,
6837,6837,6993,04333b,04336b,"ld d,h","ld d,h","ld d,h",main.asm,
6837,6837,6993,04333b,04336b,"ld d,h","ld d,h","ld d,h",main.asm,
6838,6838,6994,04333c,04336c,"ld d,l","ld d,l","ld d,l",main.asm,
6839,6839,6995,04333d,04336d,"ld.sil c,(hl)","ld.sil c,(hl)","ld.sil c,(hl)",main.asm,
6840,6840,6996,04333f,04336f,nop,nop,nop,,
6841,6841,6997,043340,043370,push af,push af,push af,main.asm,"DB    F5H, ""REPEAT"""
6842,6842,6998,043341,043371,"ld.sil b,l","ld.sil b,l","ld.sil b,l",main.asm,
6843,6843,6999,043343,043373,"ld d,b","ld d,b","ld d,b",main.asm,
6843,6843,6999,043343,043373,"ld d,b","ld d,b","ld d,b",main.asm,
6844,6844,7000,043344,043374,"ld b,l","ld b,l","ld b,l",main.asm,
6845,6845,7001,043345,043375,"ld b,c","ld b,c","ld b,c",main.asm,
6846,6846,7002,043346,043376,"ld d,h","ld d,h","ld d,h",,
6847,6847,7003,043347,043377,or $52,or $52,or $00,main.asm,"DB    F6H, ""REPORT"", 0"
6848,6848,7004,043349,043379,"ld b,l","ld b,l","ld b,l",main.asm,
6849,6849,7005,04334a,04337a,"ld d,b","ld d,b","ld d,b",main.asm,
6849,6849,7005,04334a,04337a,"ld d,b","ld d,b","ld d,b",main.asm,
6850,6850,7006,04334b,04337b,"ld c,a","ld c,a","ld c,a",main.asm,
6851,6851,7007,04334c,04337c,"ld.sil d,h","ld.sil d,h","ld.sil d,h",main.asm,
6852,6852,7008,04334e,04337e,nop,nop,nop,,
6853,6853,7009,04334f,04337f,di,di,di,main.asm,"DB    F3H, ""READ"""
6854,6854,7010,043350,043380,"ld.sil b,l","ld.sil b,l","ld.sil b,l",main.asm,
6855,6855,7011,043352,043382,"ld b,c","ld b,c","ld b,c",main.asm,
6855,6855,7011,043352,043382,"ld b,c","ld b,c","ld b,c",main.asm,
6856,6856,7012,043353,043383,"ld b,h","ld b,h","ld b,h",,
6857,6857,7013,043354,043384,"call p,$4d4552","call p,$4d4552","call p,$000000",main.asm,"DB    F4H, ""REM"""
6858,6858,7014,043358,043388,"ld sp,hl","ld sp,hl","ld sp,hl",main.asm,"DB    F9H, ""RUN"", 0"
6859,6859,7015,043359,043389,"ld.sil d,l","ld.sil d,l","ld.sil d,l",main.asm,
6860,6860,7016,04335b,04338b,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,
6860,6860,7016,04335b,04338b,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,
6861,6861,7017,04335c,04338c,nop,nop,nop,,
6862,6862,7018,04335d,04338d,or d,or d,or d,main.asm,"DB    B2H, ""RAD"""
6863,6863,7019,04335e,04338e,"ld.sil b,c","ld.sil b,c","ld.sil b,c",main.asm,
6864,6864,7020,043360,043390,"ld b,h","ld b,h","ld b,h",main.asm,
6865,6865,7021,043361,043391,rst $30,rst $30,rst $00,main.asm,"DB    F7H, ""RESTORE"""
6866,6866,7022,043362,043392,"ld.sil b,l","ld.sil b,l","ld.sil b,l",main.asm,
6867,6867,7023,043364,043394,"ld d,e","ld d,e","ld d,e",main.asm,
6867,6867,7023,043364,043394,"ld d,e","ld d,e","ld d,e",main.asm,
6868,6868,7024,043365,043395,"ld d,h","ld d,h","ld d,h",main.asm,
6869,6869,7025,043366,043396,"ld c,a","ld c,a","ld c,a",main.asm,
6870,6870,7026,043367,043397,"ld.sil b,l","ld.sil b,l","ld.sil b,l",main.asm,
6871,6871,7027,043369,043399,"jp nz,$474952","jp nz,$474952","jp nz,$000000",main.asm,"DB    C2H, ""RIGHT$("""
6872,6872,7028,04336d,04339d,"ld c,b","ld c,b","ld c,b",main.asm,
6873,6873,7029,04336e,04339e,"ld d,h","ld d,h","ld d,h",main.asm,
6874,6874,7030,04336f,04339f,inc h,inc h,inc h,main.asm,
6875,6875,7031,043370,0433a0,"jr z,$-$4b","jr z,$-$4b","jr z,$-$00",,
6876,6876,7032,043372,0433a2,"ld.sil c,(hl)","ld.sil c,(hl)","ld.sil c,(hl)",main.asm,
6877,6877,7033,043374,0433a4,"ld b,h","ld b,h","ld b,h",main.asm,
6877,6877,7033,043374,0433a4,"ld b,h","ld b,h","ld b,h",main.asm,
6878,6878,7034,043375,0433a5,nop,nop,nop,,
6879,6879,7035,043376,0433a6,"call z,$4e4552","call z,$4e4552","call z,$000000",main.asm,"DB    CCH, ""RENUMBER"""
6880,6880,7036,04337a,0433aa,"ld d,l","ld d,l","ld d,l",main.asm,
6881,6881,7037,04337b,0433ab,"ld c,l","ld c,l","ld c,l",main.asm,
6882,6882,7038,04337c,0433ac,"ld b,d","ld b,d","ld b,d",main.asm,
6882,6882,7038,04337c,0433ac,"ld b,d","ld b,d","ld b,d",main.asm,
6883,6883,7039,04337d,0433ad,"ld b,l","ld b,l","ld b,l",,
6884,6884,7040,04337e,0433ae,"adc.sil a,b","adc.sil a,b","adc.sil a,b",,
6885,6885,7041,043380,0433b0,"ld d,e","ld d,e","ld d,e",main.asm,
6886,6886,7042,043381,0433b1,"ld d,h","ld d,h","ld d,h",main.asm,
6887,6887,7043,043382,0433b2,"ld b,l","ld b,l","ld b,l",main.asm,
6887,6887,7043,043382,0433b2,"ld b,l","ld b,l","ld b,l",main.asm,
6888,6888,7044,043383,0433b3,"ld d,b","ld d,b","ld d,b",,
6889,6889,7045,043384,0433b4,call $564153,call $564153,call $000000,main.asm,"DB    CDH, ""SAVE"""
6890,6890,7046,043388,0433b8,"ld b,l","ld b,l","ld b,l",,
6891,6891,7047,043389,0433b9,or h,or h,or h,main.asm,"DB    B4H, ""SGN"""
6892,6892,7048,04338a,0433ba,"ld d,e","ld d,e","ld d,e",main.asm,
6893,6893,7049,04338b,0433bb,"ld b,a","ld b,a","ld b,a",main.asm,
6894,6894,7050,04338c,0433bc,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,
6895,6895,7051,04338d,0433bd,or l,or l,or l,main.asm,"DB    B5H, ""SIN"""
6896,6896,7052,04338e,0433be,"ld d,e","ld d,e","ld d,e",main.asm,
6897,6897,7053,04338f,0433bf,"ld.lis c,(hl)","ld.lis c,(hl)","ld.lis c,(hl)",main.asm,
6898,6898,7054,043391,0433c1,or (hl),or (hl),or (hl),main.asm,"DB    B6H, ""SQR"""
6899,6899,7055,043392,0433c2,"ld d,e","ld d,e","ld d,e",main.asm,
6900,6900,7056,043393,0433c3,"ld d,c","ld d,c","ld d,c",main.asm,
6901,6901,7057,043394,0433c4,"adc.sil a,c","adc.sil a,c","adc.sil a,c",main.asm,
6902,6902,7058,043396,0433c6,"ld d,e","ld d,e","ld d,e",main.asm,
6903,6903,7059,043397,0433c7,"ld d,b","ld d,b","ld d,b",main.asm,
6904,6904,7060,043398,0433c8,"ld b,e","ld b,e","ld b,e",main.asm,
6905,6905,7061,043399,0433c9,jp $525453,jp $525453,jp $000000,main.asm,"DB    C3H, ""STR$"""
6906,6906,7062,04339d,0433cd,inc h,inc h,inc h,,
6907,6907,7063,04339e,0433ce,"call nz,$525453","call nz,$525453","call nz,$000000",main.asm,"DB    C4H, ""STRING$("""
6908,6908,7064,0433a2,0433d2,"ld.lis c,(hl)","ld.lis c,(hl)","ld.lis c,(hl)",main.asm,
6909,6909,7065,0433a4,0433d4,"ld b,a","ld b,a","ld b,a",main.asm,
6909,6909,7065,0433a4,0433d4,"ld b,a","ld b,a","ld b,a",main.asm,
6910,6910,7066,0433a5,0433d5,inc h,inc h,inc h,,
6911,6911,7067,0433a6,0433d6,"jr z,$-$2a","jr z,$-$2a","jr z,$-$00",,
6912,6912,7068,0433a8,0433d8,"ld d,e","ld d,e","ld d,e",main.asm,
6913,6913,7069,0433a9,0433d9,"ld c,a","ld c,a","ld c,a",main.asm,
6914,6914,7070,0433aa,0433da,"ld d,l","ld d,l","ld d,l",main.asm,
6914,6914,7070,0433aa,0433da,"ld d,l","ld d,l","ld d,l",main.asm,
6915,6915,7071,0433ab,0433db,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,
6916,6916,7072,0433ac,0433dc,"ld b,h","ld b,h","ld b,h",,
6917,6917,7073,0433ad,0433dd,"jp m,$4f5453","jp m,$4f5453","jp m,$000000",main.asm,"DB    FAH, ""STOP"", 0"
6918,6918,7074,0433b1,0433e1,"ld d,b","ld d,b","ld d,b",main.asm,
6919,6919,7075,0433b2,0433e2,nop,nop,nop,,
6920,6920,7076,0433b3,0433e3,or a,or a,or a,main.asm,"DB    B7H, ""TAN"""
6921,6921,7077,0433b4,0433e4,"ld d,h","ld d,h","ld d,h",main.asm,
6922,6922,7078,0433b5,0433e5,"ld b,c","ld b,c","ld b,c",main.asm,
6923,6923,7079,0433b6,0433e6,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,
6924,6924,7080,0433b7,0433e7,"adc a,h","adc a,h","adc a,h",main.asm,"DB    8CH, ""THEN"""
6925,6925,7081,0433b8,0433e8,"ld d,h","ld d,h","ld d,h",main.asm,
6926,6926,7082,0433b9,0433e9,"ld c,b","ld c,b","ld c,b",main.asm,
6927,6927,7083,0433ba,0433ea,"ld b,l","ld b,l","ld b,l",main.asm,
6927,6927,7083,0433ba,0433ea,"ld b,l","ld b,l","ld b,l",main.asm,
6928,6928,7084,0433bb,0433eb,"ld c,(hl)","ld c,(hl)","ld c,(hl)",,
6929,6929,7085,0433bc,0433ec,cp b,cp b,cp b,main.asm,"DB    B8H, ""TO"""
6930,6930,7086,0433bd,0433ed,"ld d,h","ld d,h","ld d,h",main.asm,
6931,6931,7087,0433be,0433ee,"ld c,a","ld c,a","ld c,a",main.asm,
6932,6932,7088,0433bf,0433ef,"adc a,d","adc a,d","adc a,d",main.asm,"DB    8AH, ""TAB("""
6933,6933,7089,0433c0,0433f0,"ld d,h","ld d,h","ld d,h",main.asm,
6934,6934,7090,0433c1,0433f1,"ld b,c","ld b,c","ld b,c",main.asm,
6935,6935,7091,0433c2,0433f2,"ld b,d","ld b,d","ld b,d",main.asm,
6935,6935,7091,0433c2,0433f2,"ld b,d","ld b,d","ld b,d",main.asm,
6936,6936,7092,0433c3,0433f3,"jr z,$-$02","jr z,$-$02","jr z,$-$00",,
6937,6937,7093,0433c5,0433f5,"ld d,h","ld d,h","ld d,h",main.asm,
6938,6938,7094,0433c6,0433f6,"ld.sil b,c","ld.sil b,c","ld.sil b,c",main.asm,
6939,6939,7095,0433c8,0433f8,"ld b,e","ld b,e","ld b,e",main.asm,
6940,6940,7096,0433c9,0433f9,"ld b,l","ld b,l","ld b,l",,
6941,6941,7097,0433ca,0433fa,sub c,sub c,sub c,main.asm,"DB    91H, ""TIME"", 0"
6942,6942,7098,0433cb,0433fb,"ld d,h","ld d,h","ld d,h",main.asm,
6943,6943,7099,0433cc,0433fc,"ld.lis c,l","ld.lis c,l","ld.lis c,l",main.asm,
6944,6944,7100,0433ce,0433fe,"ld b,l","ld b,l","ld b,l",main.asm,
6945,6945,7101,0433cf,0433ff,nop,nop,nop,,
6946,6946,7102,0433d0,043400,cp c,cp c,cp c,main.asm,"DB    B9H, ""TRUE"", 0"
6947,6947,7103,0433d1,043401,"ld d,h","ld d,h","ld d,h",main.asm,
6948,6948,7104,0433d2,043402,"ld.sil d,l","ld.sil d,l","ld.sil d,l",main.asm,
6949,6949,7105,0433d4,043404,"ld b,l","ld b,l","ld b,l",main.asm,
6950,6950,7106,0433d5,043405,nop,nop,nop,,
6951,6951,7107,0433d6,043406,"ld d,iyl","ld d,iyl","ld d,iyl",main.asm,"DB    FDH, ""UNTIL"""
6952,6952,7108,0433d8,043408,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,
6953,6953,7109,0433d9,043409,"ld d,h","ld d,h","ld d,h",main.asm,
6953,6953,7109,0433d9,043409,"ld d,h","ld d,h","ld d,h",main.asm,
6954,6954,7110,0433da,04340a,"ld.lis c,h","ld.lis c,h","ld.lis c,h",main.asm,
6955,6955,7111,0433dc,04340c,cp d,cp d,cp d,main.asm,"DB    BAH, ""USR"""
6956,6956,7112,0433dd,04340d,"ld d,l","ld d,l","ld d,l",main.asm,
6957,6957,7113,0433de,04340e,"ld d,e","ld d,e","ld d,e",main.asm,
6958,6958,7114,0433df,04340f,rst.sil $28,rst.sil $28,rst.sil $00,main.asm,
6959,6959,7115,0433e1,043411,"ld d,(hl)","ld d,(hl)","ld d,(hl)",main.asm,
6960,6960,7116,0433e2,043412,"ld b,h","ld b,h","ld b,h",main.asm,
6961,6961,7117,0433e3,043413,"ld d,l","ld d,l","ld d,l",main.asm,
6962,6962,7118,0433e4,043414,cp e,cp e,cp e,main.asm,"DB    BBH, ""VAL"""
6963,6963,7119,0433e5,043415,"ld d,(hl)","ld d,(hl)","ld d,(hl)",main.asm,
6964,6964,7120,0433e6,043416,"ld b,c","ld b,c","ld b,c",main.asm,
6965,6965,7121,0433e7,043417,"ld c,h","ld c,h","ld c,h",main.asm,
6966,6966,7122,0433e8,043418,cp h,cp h,cp h,main.asm,"DB    BCH, ""VPOS"", 0"
6967,6967,7123,0433e9,043419,"ld d,(hl)","ld d,(hl)","ld d,(hl)",main.asm,
6968,6968,7124,0433ea,04341a,"ld d,b","ld d,b","ld d,b",main.asm,
6969,6969,7125,0433eb,04341b,"ld c,a","ld c,a","ld c,a",main.asm,
6969,6969,7125,0433eb,04341b,"ld c,a","ld c,a","ld c,a",main.asm,
6970,6970,7126,0433ec,04341c,"ld d,e","ld d,e","ld d,e",main.asm,
6971,6971,7127,0433ed,04341d,nop,nop,nop,,
6972,6972,7128,0433ee,04341e,cp $57,cp $57,cp $00,main.asm,"DB    FEH, ""WIDTH"""
6973,6973,7129,0433f0,043420,"ld.lis b,h","ld.lis b,h","ld.lis b,h",main.asm,
6974,6974,7130,0433f2,043422,"ld d,h","ld d,h","ld d,h",main.asm,
6975,6975,7131,0433f3,043423,"ld c,b","ld c,b","ld c,b",,
6976,6976,7132,0433f4,043424,"out ($48),a","out ($48),a","out ($00),a",main.asm,"DB    D3H, ""HIMEM"""
6977,6977,7133,0433f6,043426,"ld.lis c,l","ld.lis c,l","ld.lis c,l",main.asm,
6978,6978,7134,0433f8,043428,"ld b,l","ld b,l","ld b,l",main.asm,
6979,6979,7135,0433f9,043429,"ld c,l","ld c,l","ld c,l",,
6980,6980,7136,0433fa,04342a,"jp nc,$4d4f4c","jp nc,$4d4f4c","jp nc,$000000",main.asm,"DB    D2H, ""LOMEM"""
6981,6981,7137,0433fe,04342e,"ld b,l","ld b,l","ld b,l",main.asm,
6982,6982,7138,0433ff,04342f,"ld c,l","ld c,l","ld c,l",,
6983,6983,7139,043400,043430,ret nc,ret nc,ret nc,main.asm,"DB    D0H, ""PAGE"""
6984,6984,7140,043401,043431,"ld d,b","ld d,b","ld d,b",main.asm,
6985,6985,7141,043402,043432,"ld b,c","ld b,c","ld b,c",main.asm,
6986,6986,7142,043403,043433,"ld b,a","ld b,a","ld b,a",main.asm,
6986,6986,7142,043403,043433,"ld b,a","ld b,a","ld b,a",main.asm,
6987,6987,7143,043404,043434,"ld b,l","ld b,l","ld b,l",,
6988,6988,7144,043405,043435,rst $08,rst $08,rst $00,main.asm,"DB    CFH, ""PTR"""
6989,6989,7145,043406,043436,"ld d,b","ld d,b","ld d,b",main.asm,
6990,6990,7146,043407,043437,"ld d,h","ld d,h","ld d,h",main.asm,
6991,6991,7147,043408,043438,pop.sil de,pop.sil de,pop.sil de,main.asm,
6992,6992,7148,04340a,04343a,"ld d,h","ld d,h","ld d,h",main.asm,
6993,6993,7149,04340b,04343b,"ld.lis c,l","ld.lis c,l","ld.lis c,l",main.asm,
6994,6994,7150,04340d,04343d,"ld b,l","ld b,l","ld b,l",,
6995,6995,7151,04340e,04343e,"ld bc,$73694d","ld bc,$73694d","ld bc,$000000",main.asm,"DB    01H, ""Missing """
6996,6996,7152,043412,043442,"ld (hl),e","ld (hl),e","ld (hl),e",main.asm,
6997,6997,7153,043413,043443,"ld l,c","ld l,c","ld l,c",main.asm,
6998,6998,7154,043414,043444,"ld l,(hl)","ld l,(hl)","ld l,(hl)",main.asm,
6998,6998,7154,043414,043444,"ld l,(hl)","ld l,(hl)","ld l,(hl)",main.asm,
6999,6999,7155,043415,043445,"ld h,a","ld h,a","ld h,a",,
7000,7000,7156,043416,043446,"jr nz,$+$04","jr nz,$+$04","jr nz,$+$00",,
7001,7001,7157,043418,043448,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,
7002,7002,7158,043419,043449,"ld l,a","ld l,a","ld l,a",main.asm,
7003,7003,7159,04341a,04344a,"jr nz,$+$75","jr nz,$+$75","jr nz,$+$00",main.asm,
7003,7003,7159,04341a,04344a,"jr nz,$+$75","jr nz,$+$75","jr nz,$+$00",main.asm,
7004,7004,7160,04341c,04344c,"ld (hl),l","ld (hl),l","ld (hl),l",main.asm,
7005,7005,7161,04341d,04344d,"ld h,e","ld h,e","ld h,e",main.asm,
7005,7005,7161,04341d,04344d,"ld h,e","ld h,e","ld h,e",main.asm,
7006,7006,7162,04341e,04344e,"ld l,b","ld l,b","ld l,b",,
7007,7007,7163,04341f,04344f,"jr nz,$+$05","jr nz,$+$05","jr nz,$+$00",,
7008,7008,7164,043421,043451,"ld b,d","ld b,d","ld b,d",main.asm,
7009,7009,7165,043422,043452,"ld h,c","ld h,c","ld h,c",main.asm,
7010,7010,7166,043423,043453,"ld h,h","ld h,h","ld h,h",main.asm,
7010,7010,7166,043423,043453,"ld h,h","ld h,h","ld h,h",main.asm,
7011,7011,7167,043424,043454,"jr nz,$+$06","jr nz,$+$06","jr nz,$+$00",,
7012,7012,7168,043426,043456,"jr nz,$+$74","jr nz,$+$74","jr nz,$+$00",main.asm,
7013,7013,7169,043428,043458,"ld h,c","ld h,c","ld h,c",main.asm,
7013,7013,7169,043428,043458,"ld h,c","ld h,c","ld h,c",main.asm,
7014,7014,7170,043429,043459,"ld l,(hl)","ld l,(hl)","ld l,(hl)",main.asm,
7015,7015,7171,04342a,04345a,"ld h,a","ld h,a","ld h,a",main.asm,
7016,7016,7172,04342b,04345b,"ld h,l","ld h,l","ld h,l",,
7017,7017,7173,04342c,04345c,dec b,dec b,dec b,main.asm,"DB    05H, ""variable"""
7018,7018,7174,04342d,04345d,halt,halt,halt,main.asm,
7019,7019,7175,04342e,04345e,"ld h,c","ld h,c","ld h,c",main.asm,
7020,7020,7176,04342f,04345f,"ld (hl),d","ld (hl),d","ld (hl),d",main.asm,
7020,7020,7176,04342f,04345f,"ld (hl),d","ld (hl),d","ld (hl),d",main.asm,
7021,7021,7177,043430,043460,"ld l,c","ld l,c","ld l,c",main.asm,
7022,7022,7178,043431,043461,"ld h,c","ld h,c","ld h,c",main.asm,
7023,7023,7179,043432,043462,"ld h,d","ld h,d","ld h,d",main.asm,
7023,7023,7179,043432,043462,"ld h,d","ld h,d","ld h,d",main.asm,
7024,7024,7180,043433,043463,"ld l,h","ld l,h","ld l,h",,
7025,7025,7181,043434,043464,"ld h,l","ld h,l","ld h,l",,
7026,7026,7182,043435,043465,"ld b,$4f","ld b,$4f","ld b,$00",main.asm,"DB    06H, ""Out of"""
7027,7027,7183,043437,043467,"ld (hl),l","ld (hl),l","ld (hl),l",main.asm,
7028,7028,7184,043438,043468,"ld (hl),h","ld (hl),h","ld (hl),h",main.asm,
7028,7028,7184,043438,043468,"ld (hl),h","ld (hl),h","ld (hl),h",main.asm,
7029,7029,7185,043439,043469,"jr nz,$+$71","jr nz,$+$71","jr nz,$+$00",main.asm,
7030,7030,7186,04343b,04346b,"ld h,(hl)","ld h,(hl)","ld h,(hl)",,
7031,7031,7187,04343c,04346c,rlca,rlca,rlca,main.asm,"DB    07H, ""No """
7032,7032,7188,04343d,04346d,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,
7033,7033,7189,04343e,04346e,"ld l,a","ld l,a","ld l,a",main.asm,
7034,7034,7190,04343f,04346f,"jr nz,$+$0a","jr nz,$+$0a","jr nz,$+$00",main.asm,
7035,7035,7191,043441,043471,"jr nz,$+$75","jr nz,$+$75","jr nz,$+$00",main.asm,
7036,7036,7192,043443,043473,"ld (hl),b","ld (hl),b","ld (hl),b",main.asm,
7036,7036,7192,043443,043473,"ld (hl),b","ld (hl),b","ld (hl),b",main.asm,
7037,7037,7193,043444,043474,"ld h,c","ld h,c","ld h,c",main.asm,
7038,7038,7194,043445,043475,"ld h,e","ld h,e","ld h,e",main.asm,
7039,7039,7195,043446,043476,"ld h,l","ld h,l","ld h,l",,
7040,7040,7196,043447,043477,rst $38,rst $38,rst $00,main.asm,DW    -1
7041,7041,7197,043448,043478,rst $38,rst $38,rst $00,main.asm,
7042,7042,7198,043449,043479,rlca,rlca,rlca,main.asm,"ERRWDS:			DB    7, ""room"", 0		;  0: No room"
7043,7043,7199,04344a,04347a,"ld (hl),d","ld (hl),d","ld (hl),d",main.asm,
7044,7044,7200,04344b,04347b,"ld l,a","ld l,a","ld l,a",main.asm,
7045,7045,7201,04344c,04347c,"ld l,a","ld l,a","ld l,a",main.asm,
7045,7045,7201,04344c,04347c,"ld l,a","ld l,a","ld l,a",main.asm,
7046,7046,7202,04344d,04347d,"ld l,l","ld l,l","ld l,l",main.asm,
7047,7047,7203,04344e,04347e,nop,nop,nop,,
7048,7048,7204,04344f,04347f,"ld b,$04","ld b,$04","ld b,$00",main.asm,"DB    6, 4, 0			;  1: Out of range"
7049,7049,7205,043451,043481,nop,nop,nop,main.asm,
7050,7050,7206,043452,043482,nop,nop,nop,main.asm,DB    0				;  2: *
7051,7051,7207,043453,043483,nop,nop,nop,main.asm,DB    0				;  3: *
7052,7052,7208,043454,043484,"ld c,l","ld c,l","ld c,l",main.asm,"DB    ""Mistake"", 0		;  4: Mistake"
7053,7053,7209,043455,043485,"ld l,c","ld l,c","ld l,c",main.asm,
7054,7054,7210,043456,043486,"ld (hl),e","ld (hl),e","ld (hl),e",main.asm,
7055,7055,7211,043457,043487,"ld (hl),h","ld (hl),h","ld (hl),h",main.asm,
7055,7055,7211,043457,043487,"ld (hl),h","ld (hl),h","ld (hl),h",main.asm,
7056,7056,7212,043458,043488,"ld h,c","ld h,c","ld h,c",main.asm,
7057,7057,7213,043459,043489,"ld l,e","ld l,e","ld l,e",main.asm,
7058,7058,7214,04345a,04348a,"ld h,l","ld h,l","ld h,l",main.asm,
7059,7059,7215,04345b,04348b,nop,nop,nop,,
7060,7060,7216,04345c,04348c,"ld bc,$54002c","ld bc,$54002c","ld bc,$000000",main.asm,"DB    1, "","", 0			;  5: Missing ,"
7061,7061,7217,043460,043490,"ld a,c","ld a,c","ld a,c",main.asm,
7062,7062,7218,043461,043491,"ld (hl),b","ld (hl),b","ld (hl),b",main.asm,
7063,7063,7219,043462,043492,"ld h,l","ld h,l","ld h,l",main.asm,
7063,7063,7219,043462,043492,"ld h,l","ld h,l","ld h,l",main.asm,
7064,7064,7220,043463,043493,"jr nz,$+$6f","jr nz,$+$6f","jr nz,$+$00",main.asm,
7065,7065,7221,043465,043495,"ld l,c","ld l,c","ld l,c",main.asm,
7065,7065,7221,043465,043495,"ld l,c","ld l,c","ld l,c",main.asm,
7066,7066,7222,043466,043496,"ld (hl),e","ld (hl),e","ld (hl),e",main.asm,
7067,7067,7223,043467,043497,"ld l,l","ld l,l","ld l,l",main.asm,
7068,7068,7224,043468,043498,"ld h,c","ld h,c","ld h,c",main.asm,
7068,7068,7224,043468,043498,"ld h,c","ld h,c","ld h,c",main.asm,
7069,7069,7225,043469,043499,"ld (hl),h","ld (hl),h","ld (hl),h",main.asm,
7070,7070,7226,04346a,04349a,"ld h,e","ld h,e","ld h,e",,
7071,7071,7227,04346b,04349b,"ld l,b","ld l,b","ld l,b",,
7072,7072,7228,04346c,04349c,nop,nop,nop,,
7073,7073,7229,04346d,04349d,rlca,rlca,rlca,main.asm,"DB    7, FN, 0			;  7: No FN"
7074,7074,7230,04346e,04349e,and h,and h,and h,main.asm,
7075,7075,7231,04346f,04349f,nop,nop,nop,main.asm,
7076,7076,7232,043470,0434a0,nop,nop,nop,main.asm,DB    0				;  8: *
7077,7077,7233,043471,0434a1,"ld bc,$030022","ld bc,$030022","ld bc,$000000",main.asm,"DB    1, 34, 0			;  9: Missing """
7078,7078,7234,043475,0434a5,"sbc a,$00","sbc a,$00","sbc a,$00",main.asm,
7079,7079,7235,043477,0434a7,"sbc a,$08","sbc a,$08","sbc a,$00",main.asm,"DB    DIM, 8, 0			; 11: DIM space"
7080,7080,7236,043479,0434a9,nop,nop,nop,main.asm,
7081,7081,7237,04347a,0434aa,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,"DB    ""Not "", LOCAL_, 0		; 12: Not LOCAL"
7082,7082,7238,04347b,0434ab,"ld l,a","ld l,a","ld l,a",main.asm,
7083,7083,7239,04347c,0434ac,"ld (hl),h","ld (hl),h","ld (hl),h",main.asm,
7084,7084,7240,04347d,0434ad,"jr nz,$-$14","jr nz,$-$14","jr nz,$-$00",main.asm,
7084,7084,7240,04347d,0434ad,"jr nz,$-$14","jr nz,$-$14","jr nz,$-$00",main.asm,
7085,7085,7241,04347f,0434af,nop,nop,nop,,
7086,7086,7242,043480,0434b0,rlca,rlca,rlca,main.asm,"DB    7, PROC, 0		; 13: No PROC"
7087,7087,7243,043481,0434b1,"jp p,$724100","jp p,$724100","jp p,$000000",main.asm,
7088,7088,7244,043485,0434b5,"ld (hl),d","ld (hl),d","ld (hl),d",main.asm,
7089,7089,7245,043486,0434b6,"ld h,c","ld h,c","ld h,c",main.asm,
7089,7089,7245,043486,0434b6,"ld h,c","ld h,c","ld h,c",main.asm,
7090,7090,7246,043487,0434b7,"ld a,c","ld a,c","ld a,c",main.asm,
7091,7091,7247,043488,0434b8,nop,nop,nop,,
7092,7092,7248,043489,0434b9,"ld d,e","ld d,e","ld d,e",main.asm,"DB    ""Subscript"", 0		; 15: Subscript"
7093,7093,7249,04348a,0434ba,"ld (hl),l","ld (hl),l","ld (hl),l",main.asm,
7094,7094,7250,04348b,0434bb,"ld h,d","ld h,d","ld h,d",main.asm,
7095,7095,7251,04348c,0434bc,"ld (hl),e","ld (hl),e","ld (hl),e",main.asm,
7095,7095,7251,04348c,0434bc,"ld (hl),e","ld (hl),e","ld (hl),e",main.asm,
7096,7096,7252,04348d,0434bd,"ld h,e","ld h,e","ld h,e",main.asm,
7097,7097,7253,04348e,0434be,"ld (hl),d","ld (hl),d","ld (hl),d",main.asm,
7098,7098,7254,04348f,0434bf,"ld l,c","ld l,c","ld l,c",main.asm,
7098,7098,7254,04348f,0434bf,"ld l,c","ld l,c","ld l,c",main.asm,
7099,7099,7255,043490,0434c0,"ld (hl),b","ld (hl),b","ld (hl),b",main.asm,
7100,7100,7256,043491,0434c1,"ld (hl),h","ld (hl),h","ld (hl),h",,
7101,7101,7257,043492,0434c2,nop,nop,nop,,
7102,7102,7258,043493,0434c3,"ld d,e","ld d,e","ld d,e",main.asm,"DB    ""Syntax error"", 0		; 16: Syntax error"
7103,7103,7259,043494,0434c4,"ld a,c","ld a,c","ld a,c",main.asm,
7104,7104,7260,043495,0434c5,"ld l,(hl)","ld l,(hl)","ld l,(hl)",main.asm,
7105,7105,7261,043496,0434c6,"ld (hl),h","ld (hl),h","ld (hl),h",main.asm,
7105,7105,7261,043496,0434c6,"ld (hl),h","ld (hl),h","ld (hl),h",main.asm,
7106,7106,7262,043497,0434c7,"ld h,c","ld h,c","ld h,c",main.asm,
7107,7107,7263,043498,0434c8,"ld a,b","ld a,b","ld a,b",main.asm,
7108,7108,7264,043499,0434c9,"jr nz,$+$67","jr nz,$+$67","jr nz,$+$00",main.asm,
7108,7108,7264,043499,0434c9,"jr nz,$+$67","jr nz,$+$67","jr nz,$+$00",main.asm,
7109,7109,7265,04349b,0434cb,"ld (hl),d","ld (hl),d","ld (hl),d",main.asm,
7110,7110,7266,04349c,0434cc,"ld (hl),d","ld (hl),d","ld (hl),d",main.asm,
7110,7110,7266,04349c,0434cc,"ld (hl),d","ld (hl),d","ld (hl),d",main.asm,
7111,7111,7267,04349d,0434cd,"ld l,a","ld l,a","ld l,a",,
7112,7112,7268,04349e,0434ce,"ld (hl),d","ld (hl),d","ld (hl),d",,
7113,7113,7269,04349f,0434cf,nop,nop,nop,,
7114,7114,7270,0434a0,0434d0,"ld b,l","ld b,l","ld b,l",main.asm,"DB    ""Escape"", 0		; 17: Escape"
7115,7115,7271,0434a1,0434d1,"ld (hl),e","ld (hl),e","ld (hl),e",main.asm,
7116,7116,7272,0434a2,0434d2,"ld h,e","ld h,e","ld h,e",main.asm,
7117,7117,7273,0434a3,0434d3,"ld h,c","ld h,c","ld h,c",main.asm,
7117,7117,7273,0434a3,0434d3,"ld h,c","ld h,c","ld h,c",main.asm,
7118,7118,7274,0434a4,0434d4,"ld (hl),b","ld (hl),b","ld (hl),b",main.asm,
7119,7119,7275,0434a5,0434d5,"ld h,l","ld h,l","ld h,l",main.asm,
7120,7120,7276,0434a6,0434d6,nop,nop,nop,,
7121,7121,7277,0434a7,0434d7,"ld b,h","ld b,h","ld b,h",main.asm,"DB    ""Division by zero"", 0	; 18: Division by zero"
7122,7122,7278,0434a8,0434d8,"ld l,c","ld l,c","ld l,c",main.asm,
7123,7123,7279,0434a9,0434d9,halt,halt,halt,main.asm,
7124,7124,7280,0434aa,0434da,"ld l,c","ld l,c","ld l,c",main.asm,
7124,7124,7280,0434aa,0434da,"ld l,c","ld l,c","ld l,c",main.asm,
7125,7125,7281,0434ab,0434db,"ld (hl),e","ld (hl),e","ld (hl),e",main.asm,
7126,7126,7282,0434ac,0434dc,"ld l,c","ld l,c","ld l,c",main.asm,
7127,7127,7283,0434ad,0434dd,"ld l,a","ld l,a","ld l,a",main.asm,
7127,7127,7283,0434ad,0434dd,"ld l,a","ld l,a","ld l,a",main.asm,
7128,7128,7284,0434ae,0434de,"ld l,(hl)","ld l,(hl)","ld l,(hl)",main.asm,
7129,7129,7285,0434af,0434df,"jr nz,$+$64","jr nz,$+$64","jr nz,$+$00",main.asm,
7130,7130,7286,0434b1,0434e1,"ld a,c","ld a,c","ld a,c",main.asm,
7131,7131,7287,0434b2,0434e2,"jr nz,$+$7c","jr nz,$+$7c","jr nz,$+$00",main.asm,
7132,7132,7288,0434b4,0434e4,"ld h,l","ld h,l","ld h,l",,
7133,7133,7289,0434b5,0434e5,"ld (hl),d","ld (hl),d","ld (hl),d",,
7134,7134,7290,0434b6,0434e6,"ld l,a","ld l,a","ld l,a",,
7135,7135,7291,0434b7,0434e7,nop,nop,nop,,
7136,7136,7292,0434b8,0434e8,"ld d,e","ld d,e","ld d,e",main.asm,"DB    ""String too long"", 0	; 19: String too long"
7137,7137,7293,0434b9,0434e9,"ld (hl),h","ld (hl),h","ld (hl),h",main.asm,
7138,7138,7294,0434ba,0434ea,"ld (hl),d","ld (hl),d","ld (hl),d",main.asm,
7139,7139,7295,0434bb,0434eb,"ld l,c","ld l,c","ld l,c",main.asm,
7139,7139,7295,0434bb,0434eb,"ld l,c","ld l,c","ld l,c",main.asm,
7140,7140,7296,0434bc,0434ec,"ld l,(hl)","ld l,(hl)","ld l,(hl)",main.asm,
7141,7141,7297,0434bd,0434ed,"ld h,a","ld h,a","ld h,a",main.asm,
7142,7142,7298,0434be,0434ee,"jr nz,$+$76","jr nz,$+$76","jr nz,$+$00",main.asm,
7142,7142,7298,0434be,0434ee,"jr nz,$+$76","jr nz,$+$76","jr nz,$+$00",main.asm,
7143,7143,7299,0434c0,0434f0,"ld l,a","ld l,a","ld l,a",main.asm,
7144,7144,7300,0434c1,0434f1,"ld l,a","ld l,a","ld l,a",main.asm,
7144,7144,7300,0434c1,0434f1,"ld l,a","ld l,a","ld l,a",main.asm,
7145,7145,7301,0434c2,0434f2,"jr nz,$+$6e","jr nz,$+$6e","jr nz,$+$00",main.asm,
7146,7146,7302,0434c4,0434f4,"ld l,a","ld l,a","ld l,a",main.asm,
7147,7147,7303,0434c5,0434f5,"ld l,(hl)","ld l,(hl)","ld l,(hl)",,
7148,7148,7304,0434c6,0434f6,"ld h,a","ld h,a","ld h,a",,
7149,7149,7305,0434c7,0434f7,nop,nop,nop,,
7150,7150,7306,0434c8,0434f8,"ld d,h","ld d,h","ld d,h",main.asm,"DB    ""Too big"", 0		; 20: Too big"
7151,7151,7307,0434c9,0434f9,"ld l,a","ld l,a","ld l,a",main.asm,
7152,7152,7308,0434ca,0434fa,"ld l,a","ld l,a","ld l,a",main.asm,
7153,7153,7309,0434cb,0434fb,"jr nz,$+$64","jr nz,$+$64","jr nz,$+$00",main.asm,
7153,7153,7309,0434cb,0434fb,"jr nz,$+$64","jr nz,$+$64","jr nz,$+$00",main.asm,
7154,7154,7310,0434cd,0434fd,"ld l,c","ld l,c","ld l,c",main.asm,
7155,7155,7311,0434ce,0434fe,"ld h,a","ld h,a","ld h,a",main.asm,
7156,7156,7312,0434cf,0434ff,nop,nop,nop,,
7157,7157,7313,0434d0,043500,dec l,dec l,dec l,main.asm,"DB    ""-ve root"", 0		; 21: -ve root"
7158,7158,7314,0434d1,043501,halt,halt,halt,main.asm,
7159,7159,7315,0434d2,043502,"ld h,l","ld h,l","ld h,l",main.asm,
7160,7160,7316,0434d3,043503,"jr nz,$+$74","jr nz,$+$74","jr nz,$+$00",main.asm,
7160,7160,7316,0434d3,043503,"jr nz,$+$74","jr nz,$+$74","jr nz,$+$00",main.asm,
7161,7161,7317,0434d5,043505,"ld l,a","ld l,a","ld l,a",main.asm,
7162,7162,7318,0434d6,043506,"ld l,a","ld l,a","ld l,a",main.asm,
7162,7162,7318,0434d6,043506,"ld l,a","ld l,a","ld l,a",main.asm,
7163,7163,7319,0434d7,043507,"ld (hl),h","ld (hl),h","ld (hl),h",,
7164,7164,7320,0434d8,043508,nop,nop,nop,,
7165,7165,7321,0434d9,043509,"ld c,h","ld c,h","ld c,h",main.asm,"DB    ""Log"", 4, 0		; 22: Log range"
7166,7166,7322,0434da,04350a,"ld l,a","ld l,a","ld l,a",main.asm,
7167,7167,7323,0434db,04350b,"ld h,a","ld h,a","ld h,a",main.asm,
7168,7168,7324,0434dc,04350c,inc b,inc b,inc b,main.asm,
7168,7168,7324,0434dc,04350c,inc b,inc b,inc b,main.asm,
7169,7169,7325,0434dd,04350d,nop,nop,nop,,
7170,7170,7326,0434de,04350e,"ld b,c","ld b,c","ld b,c",main.asm,"DB    ""Accuracy lost"", 0	; 23: Accuracy lost"
7171,7171,7327,0434df,04350f,"ld h,e","ld h,e","ld h,e",main.asm,
7172,7172,7328,0434e0,043510,"ld h,e","ld h,e","ld h,e",main.asm,
7173,7173,7329,0434e1,043511,"ld (hl),l","ld (hl),l","ld (hl),l",main.asm,
7173,7173,7329,0434e1,043511,"ld (hl),l","ld (hl),l","ld (hl),l",main.asm,
7174,7174,7330,0434e2,043512,"ld (hl),d","ld (hl),d","ld (hl),d",main.asm,
7175,7175,7331,0434e3,043513,"ld h,c","ld h,c","ld h,c",main.asm,
7176,7176,7332,0434e4,043514,"ld h,e","ld h,e","ld h,e",main.asm,
7176,7176,7332,0434e4,043514,"ld h,e","ld h,e","ld h,e",main.asm,
7177,7177,7333,0434e5,043515,"ld a,c","ld a,c","ld a,c",main.asm,
7178,7178,7334,0434e6,043516,"jr nz,$+$6e","jr nz,$+$6e","jr nz,$+$00",main.asm,
7179,7179,7335,0434e8,043518,"ld l,a","ld l,a","ld l,a",main.asm,
7180,7180,7336,0434e9,043519,"ld (hl),e","ld (hl),e","ld (hl),e",,
7181,7181,7337,0434ea,04351a,"ld (hl),h","ld (hl),h","ld (hl),h",,
7182,7182,7338,0434eb,04351b,nop,nop,nop,,
7183,7183,7339,0434ec,04351c,"ld b,l","ld b,l","ld b,l",main.asm,"DB    ""Exp"", 4, 0		; 24: Exp range"
7184,7184,7340,0434ed,04351d,"ld a,b","ld a,b","ld a,b",main.asm,
7185,7185,7341,0434ee,04351e,"ld (hl),b","ld (hl),b","ld (hl),b",main.asm,
7186,7186,7342,0434ef,04351f,inc b,inc b,inc b,main.asm,
7186,7186,7342,0434ef,04351f,inc b,inc b,inc b,main.asm,
7187,7187,7343,0434f0,043520,nop,nop,nop,,
7188,7188,7344,0434f1,043521,nop,nop,nop,main.asm,DB    0				; 25: *
7189,7189,7345,0434f2,043522,"ld (bc),a","ld (bc),a","ld (bc),a",main.asm,"DB    2, 5, 0			; 26: No such variable"
7190,7190,7346,0434f3,043523,dec b,dec b,dec b,main.asm,
7191,7191,7347,0434f4,043524,nop,nop,nop,main.asm,
7192,7192,7348,0434f5,043525,"ld bc,$030029","ld bc,$030029","ld bc,$000000",main.asm,"DB    1, "")"", 0			; 27: Missing )"
7193,7193,7349,0434f9,043529,"ld c,b","ld c,b","ld c,b",main.asm,
7194,7194,7350,0434fa,04352a,"ld b,l","ld b,l","ld b,l",main.asm,
7195,7195,7351,0434fb,04352b,"ld e,b","ld e,b","ld e,b",main.asm,
7195,7195,7351,0434fb,04352b,"ld e,b","ld e,b","ld e,b",main.asm,
7196,7196,7352,0434fc,04352c,nop,nop,nop,,
7197,7197,7353,0434fd,04352d,"ld (bc),a","ld (bc),a","ld (bc),a",main.asm,"DB    2, FN, ""/"", PROC, 0	; 29: No such FN/PROC"
7198,7198,7354,0434fe,04352e,and h,and h,and h,main.asm,
7199,7199,7355,0434ff,04352f,cpl,cpl,cpl,main.asm,
7200,7200,7356,043500,043530,"jp p,$630300","jp p,$630300","jp p,$000000",main.asm,
7200,7200,7356,043500,043530,"jp p,$630300","jp p,$630300","jp p,$000000",main.asm,
7201,7201,7357,043504,043534,"ld h,c","ld h,c","ld h,c",main.asm,
7202,7202,7358,043505,043535,"ld l,h","ld l,h","ld l,h",main.asm,
7202,7202,7358,043505,043535,"ld l,h","ld l,h","ld l,h",main.asm,
7203,7203,7359,043506,043536,"ld l,h","ld l,h","ld l,h",main.asm,
7204,7204,7360,043507,043537,nop,nop,nop,,
7205,7205,7361,043508,043538,"ld b,c","ld b,c","ld b,c",main.asm,"DB    ""Arguments"", 0		; 31: Arguments"
7206,7206,7362,043509,043539,"ld (hl),d","ld (hl),d","ld (hl),d",main.asm,
7207,7207,7363,04350a,04353a,"ld h,a","ld h,a","ld h,a",main.asm,
7208,7208,7364,04350b,04353b,"ld (hl),l","ld (hl),l","ld (hl),l",main.asm,
7208,7208,7364,04350b,04353b,"ld (hl),l","ld (hl),l","ld (hl),l",main.asm,
7209,7209,7365,04350c,04353c,"ld l,l","ld l,l","ld l,l",main.asm,
7210,7210,7366,04350d,04353d,"ld h,l","ld h,l","ld h,l",main.asm,
7211,7211,7367,04350e,04353e,"ld l,(hl)","ld l,(hl)","ld l,(hl)",main.asm,
7211,7211,7367,04350e,04353e,"ld l,(hl)","ld l,(hl)","ld l,(hl)",main.asm,
7212,7212,7368,04350f,04353f,"ld (hl),h","ld (hl),h","ld (hl),h",main.asm,
7213,7213,7369,043510,043540,"ld (hl),e","ld (hl),e","ld (hl),e",,
7214,7214,7370,043511,043541,nop,nop,nop,,
7215,7215,7371,043512,043542,rlca,rlca,rlca,main.asm,"DB    7, FOR, 0			; 32: No FOR"
7216,7216,7372,043513,043543,"ex (sp),hl","ex (sp),hl","ex (sp),hl",main.asm,
7217,7217,7373,043514,043544,nop,nop,nop,main.asm,
7218,7218,7374,043515,043545,"ld b,e","ld b,e","ld b,e",main.asm,"DB    ""Can't match "", FOR, 0	; 33: Can't match FOR"
7219,7219,7375,043516,043546,"ld h,c","ld h,c","ld h,c",main.asm,
7220,7220,7376,043517,043547,"ld l,(hl)","ld l,(hl)","ld l,(hl)",main.asm,
7221,7221,7377,043518,043548,daa,daa,daa,main.asm,
7221,7221,7377,043518,043548,daa,daa,daa,main.asm,
7222,7222,7378,043519,043549,"ld (hl),h","ld (hl),h","ld (hl),h",main.asm,
7223,7223,7379,04351a,04354a,"jr nz,$+$6f","jr nz,$+$6f","jr nz,$+$00",main.asm,
7224,7224,7380,04351c,04354c,"ld h,c","ld h,c","ld h,c",main.asm,
7225,7225,7381,04351d,04354d,"ld (hl),h","ld (hl),h","ld (hl),h",main.asm,
7226,7226,7382,04351e,04354e,"ld h,e","ld h,e","ld h,e",main.asm,
7226,7226,7382,04351e,04354e,"ld h,e","ld h,e","ld h,e",main.asm,
7227,7227,7383,04351f,04354f,"ld l,b","ld l,b","ld l,b",main.asm,
7228,7228,7384,043520,043550,"jr nz,$-$1b","jr nz,$-$1b","jr nz,$-$00",,
7229,7229,7385,043522,043552,nop,nop,nop,,
7230,7230,7386,043523,043553,"ex (sp),hl","ex (sp),hl","ex (sp),hl",main.asm,"DB    FOR, "" "", 5, 0		; 34: FOR variable"
7231,7231,7387,043524,043554,"jr nz,$+$07","jr nz,$+$07","jr nz,$+$00",main.asm,
7232,7232,7388,043526,043556,nop,nop,nop,main.asm,
7233,7233,7389,043527,043557,nop,nop,nop,main.asm,DB    0				; 35: *
7234,7234,7390,043528,043558,rlca,rlca,rlca,main.asm,"DB    7, TO_MN, 0			; 36: No TO"
7235,7235,7391,043529,043559,cp b,cp b,cp b,main.asm,
7236,7236,7392,04352a,04355a,nop,nop,nop,main.asm,
7237,7237,7393,04352b,04355b,nop,nop,nop,main.asm,DB    0				; 37: *
7238,7238,7394,04352c,04355c,rlca,rlca,rlca,main.asm,"DB    7, GOSUB, 0		; 38: No GOSUB"
7239,7239,7395,04352d,04355d,"call po,$20ee00","call po,$20ee00","call po,$000000",main.asm,
7240,7240,7396,043531,043561,"ld (hl),e","ld (hl),e","ld (hl),e",main.asm,
7241,7241,7397,043532,043562,"ld a,c","ld a,c","ld a,c",main.asm,
7241,7241,7397,043532,043562,"ld a,c","ld a,c","ld a,c",main.asm,
7242,7242,7398,043533,043563,"ld l,(hl)","ld l,(hl)","ld l,(hl)",main.asm,
7243,7243,7399,043534,043564,"ld (hl),h","ld (hl),h","ld (hl),h",main.asm,
7244,7244,7400,043535,043565,"ld h,c","ld h,c","ld h,c",main.asm,
7244,7244,7400,043535,043565,"ld h,c","ld h,c","ld h,c",main.asm,
7245,7245,7401,043536,043566,"ld a,b","ld a,b","ld a,b",,
7246,7246,7402,043537,043567,nop,nop,nop,,
7247,7247,7403,043538,043568,xor $04,xor $04,xor $00,main.asm,"DB    ON_, 4, 0			; 40: ON range"
7248,7248,7404,04353a,04356a,nop,nop,nop,main.asm,
7249,7249,7405,04353b,04356b,"ld (bc),a","ld (bc),a","ld (bc),a",main.asm,"DB    2, ""line"", 0		; 41: No such line"
7250,7250,7406,04353c,04356c,"ld l,h","ld l,h","ld l,h",main.asm,
7251,7251,7407,04353d,04356d,"ld l,c","ld l,c","ld l,c",main.asm,
7252,7252,7408,04353e,04356e,"ld l,(hl)","ld l,(hl)","ld l,(hl)",main.asm,
7252,7252,7408,04353e,04356e,"ld l,(hl)","ld l,(hl)","ld l,(hl)",main.asm,
7253,7253,7409,04353f,04356f,"ld h,l","ld h,l","ld h,l",main.asm,
7254,7254,7410,043540,043570,nop,nop,nop,,
7255,7255,7411,043541,043571,"ld b,$20","ld b,$20","ld b,$00",main.asm,"DB    6, "" "", DATA_MN_, 0		; 42: Out of DATA"
7256,7256,7412,043543,043573,"call c,$f50700","call c,$f50700","call c,$000000",main.asm,
7257,7257,7413,043547,043577,nop,nop,nop,main.asm,
7258,7258,7414,043548,043578,nop,nop,nop,main.asm,DB    0				; 44: *
7259,7259,7415,043549,043579,"ld bc,$cd0023","ld bc,$cd0023","ld bc,$000000",main.asm,"DB    1, ""#"", 0			; 45: Missing #"
7260,7260,,04354d,,"ld c,e",,"ld c,e",,
7261,7261,7417,04354e,04357e,"jr c,$+$06","jr c,$+$06","jr c,$+$00",main.asm,
7262,7262,7418,043550,043580,call $043c53,call $043c83,call $000000,main.asm,"CALL    DLPAIR			; Get the line number pair - HL: BASIC program address, BC: second number (or 0 if missing)"
7263,7263,7419,043554,043584,"ld a,(hl)","ld a,(hl)","ld a,(hl)",main.asm,"DELET1:			LD      A,(HL)			; Check whether it's the last line"
7264,7264,7420,043555,043585,or a,or a,or a,main.asm,OR      A
7265,7265,7421,043556,043586,"jp z,$0435dd","jp z,$04360d","jp z,$000000",main.asm,"JP      Z,WARMNC		; Yes, so do nothing"
7266,7266,7422,04355a,04358a,inc hl,inc hl,inc hl,main.asm,INC     HL			; Skip the line length byte
7267,7267,7423,04355b,04358b,"ld de,$000000","ld de,$000000","ld de,$000000",main.asm,"LD	DE, 0			; Clear DE"
7268,7268,7424,04355f,04358f,"ld e,(hl)","ld e,(hl)","ld e,(hl)",main.asm,"LD      E,(HL)			; Fetch the line number in DE"
7269,7269,7425,043560,043590,inc hl,inc hl,inc hl,main.asm,INC     HL
7270,7270,7426,043561,043591,"ld d,(hl)","ld d,(hl)","ld d,(hl)",main.asm,"LD      D,(HL)"
7271,7271,7427,043562,043592,"ld a,d","ld a,d","ld a,d",main.asm,"LD      A,D			; If the line number is zero then"
7272,7272,7428,043563,043593,or e,or e,or e,main.asm,OR      E
7273,7273,7429,043564,043594,"jr z,$+$1f","jr z,$+$1f","jr z,$+$00",main.asm,"JR      Z,CLOOP1        	; Do nothing"
7274,7274,7430,043566,043596,dec hl,dec hl,dec hl,main.asm,DEC     HL			; Decrement BASIC program pointer back to length
7275,7275,7431,043567,043597,dec hl,dec hl,dec hl,main.asm,DEC     HL
7276,7276,7432,043568,043598,"ex de,hl","ex de,hl","ex de,hl",main.asm,"EX      DE,HL			; Check if we've gone past the terminating line"
7277,7277,7433,043569,043599,scf,scf,scf,main.asm,SCF
7278,7278,7434,04356a,04359a,"sbc hl,bc","sbc hl,bc","sbc hl,bc",main.asm,"SBC     HL,BC"
7279,7279,7435,04356c,04359c,"ex de,hl","ex de,hl","ex de,hl",main.asm,"EX      DE,HL"
7280,7280,7436,04356d,04359d,"jr nc,$+$70","jr nc,$+$70","jr nc,$+$00",main.asm,"JR      NC,WARMNC		; Yes, so exit back to BASIC prompt"
7281,7281,7437,04356f,04359f,push bc,push bc,push bc,main.asm,PUSH    BC
7282,7282,7438,043570,0435a0,call $043802,call $043832,call $000000,main.asm,CALL    DEL			; Delete the line pointed to by HL
7283,7283,7439,043574,0435a4,pop bc,pop bc,pop bc,main.asm,POP     BC
7284,7284,7440,043575,0435a5,jr $-$21,jr $-$21,jr $-$00,main.asm,JR      DELET1			; And loop round to the next line
7285,7285,7441,043577,0435a7,inc iy,inc iy,inc iy,main.asm,"LISTO:			INC     IY              	; Skip ""O"" byte"
7286,7286,7442,043579,0435a9,call $04030a,call $04030a,call $000000,main.asm,CALL    EXPRI			; Get expr
7287,7287,7443,04357d,0435ad,exx,exx,exx,main.asm,EXX
7288,7288,7444,04357e,0435ae,"ld a,l","ld a,l","ld a,l",main.asm,"LD      A,L"
7289,7289,7445,04357f,0435af,"ld ($044d40),a","ld ($044d40),a","ld ($000000),a",main.asm,"LD      (LISTON),A		; Store in LISTON sysvar"
7290,7290,7446,043583,0435b3,jp $043080,jp $0430b0,jp $000000,main.asm,CLOOP1:			JP      CLOOP
7291,7291,7447,043587,0435b7,cp $4f,cp $4f,cp $00,main.asm,LIST_:			CP      'O'			; Check for O (LISTO)
7292,7292,7448,043589,0435b9,"jr z,$-$12","jr z,$-$12","jr z,$-$00",main.asm,"JR      Z,LISTO			; and jump to LISTO if zero"
7293,7293,7449,04358b,0435bb,call $043c53,call $043c83,call $000000,main.asm,"CALL    DLPAIR			; Get the line number pair - HL: BASIC program address, BC: second number (or 0 if missing)"
7294,7294,7450,04358f,0435bf,call $040a70,call $040a70,call $000000,main.asm,CALL    NXT			; Skip space
7295,7295,7451,043593,0435c3,cp $e7,cp $e7,cp $00,main.asm,CP      TIF             	; Check for IF clause (token IF)
7296,7296,7452,043595,0435c5,"ld a,$00","ld a,$00","ld a,$00",main.asm,"LD      A,0             	; Initialise the IF clause string length"
7297,7297,7453,043597,0435c7,"jr nz,$+$19","jr nz,$+$19","jr nz,$+$00",main.asm,"JR      NZ,LISTB		; If there is no IF clause, skip the next bit"
7298,7298,7454,043599,0435c9,inc iy,inc iy,inc iy,main.asm,INC     IY              	; Skip the IF token
7299,7299,7455,04359b,0435cb,call $040a70,call $040a70,call $000000,main.asm,CALL    NXT             	; And skip any spaces
7300,7300,7456,04359f,0435cf,"ex de,hl","ex de,hl","ex de,hl",main.asm,"EX      DE,HL			; DE: Address in memory"
7301,7301,7457,0435a0,0435d0,push iy,push iy,push iy,main.asm,"PUSH    IY			; LD IY, HL"
7302,7302,7458,0435a2,0435d2,pop hl,pop hl,pop hl,main.asm,POP     HL              	; HL is now the address of the tokenised line
7303,7303,7459,0435a3,0435d3,"ld a,$0d","ld a,$0d","ld a,$00",main.asm,"LD      A,CR"
7304,7304,7460,0435a5,0435d5,push bc,push bc,push bc,main.asm,PUSH    BC			; Stack the second line number arg
7305,7305,7461,0435a6,0435d6,"ld bc,$000100","ld bc,$000100","ld bc,$000000",main.asm,"LD      BC,256"
7306,7306,7462,0435aa,0435da,cpir,cpir,cpir,main.asm,CPIR                    	; Locate CR byte
7307,7307,7463,0435ac,0435dc,"ld a,c","ld a,c","ld a,c",main.asm,"LD      A,C"
7308,7308,7464,0435ad,0435dd,cpl,cpl,cpl,main.asm,CPL                    	 	; A: Substring length (of IF clause)
7309,7309,7465,0435ae,0435de,pop bc,pop bc,pop bc,main.asm,POP     BC			; Restore the second line number arg
7310,7310,7466,0435af,0435df,"ex de,hl","ex de,hl","ex de,hl",main.asm,"EX      DE,HL			; HL: Address in memory"
7311,7311,7467,0435b0,0435e0,"ld e,a","ld e,a","ld e,a",main.asm,"LISTB:			LD      E,A             	; E: IF clause string length"
7312,7312,7468,0435b1,0435e1,"ld a,b","ld a,b","ld a,b",main.asm,"LD      A,B			; Check whether a second line number was passed (BC!=0)"
7313,7313,7469,0435b2,0435e2,or c,or c,or c,main.asm,OR      C
7314,7314,7470,0435b3,0435e3,"jr nz,$+$03","jr nz,$+$03","jr nz,$+$00",main.asm,"JR      NZ,LISTA		; If there isn't a second line number"
7315,7315,7471,0435b5,0435e5,dec bc,dec bc,dec bc,main.asm,DEC     BC			; then we set it to the maximum of 65535
7316,7316,7472,0435b6,0435e6,exx,exx,exx,main.asm,LISTA:			EXX
7317,7317,7473,0435b7,0435e7,"ld ix,$044d40","ld ix,$044d40","ld ix,$000000",main.asm,"LD      IX,LISTON		; IX : Pointer to the LISTON (LISTO and OPT) sysvar"
7318,7318,7474,0435bc,0435ec,"ld bc,$000000","ld bc,$000000","ld bc,$000000",main.asm,"LD      BC,0            	; BC': Indentation counter (C: FOR/NEXT, B: REPEAT/UNTIL)"
7319,7319,7475,0435c0,0435f0,exx,exx,exx,main.asm,EXX
7320,7320,7476,0435c1,0435f1,"ld a,$14","ld a,$14","ld a,$00",main.asm,"LD      A,20			; Number of lines to list"
7321,7321,7477,0435c3,0435f3,push bc,push bc,push bc,main.asm,LISTC:			PUSH    BC              	; Save second line number
7322,7322,7478,0435c4,0435f4,push de,push de,push de,main.asm,PUSH    DE              	; Save IF clause length
7323,7323,7479,0435c5,0435f5,push hl,push hl,push hl,main.asm,PUSH    HL              	; Save BASIC program counter
7324,7324,7480,0435c6,0435f6,"ex af,af'","ex af,af'","ex af,af'",main.asm,"EX      AF,AF'"
7325,7325,7481,0435c7,0435f7,"ld a,(hl)","ld a,(hl)","ld a,(hl)",main.asm,"LD      A,(HL)			; Check for end of program marker"
7326,7326,7482,0435c8,0435f8,or a,or a,or a,main.asm,OR      A			; If found
7327,7327,7483,0435c9,0435f9,"jr z,$+$14","jr z,$+$14","jr z,$+$00",main.asm,"JR      Z,WARMNC		; Jump to WARMNC (F=NC, so will jump to WARM)"
7328,7328,7484,0435cb,0435fb,"ld a,e","ld a,e","ld a,e",main.asm,"LD      A,E             	; A: IF clause length"
7329,7329,7485,0435cc,0435fc,inc hl,inc hl,inc hl,main.asm,INC     HL			; Skip the length byte
7330,7330,7486,0435cd,0435fd,"ld de,$000000","ld de,$000000","ld de,$000000",main.asm,"LD	DE,0			; Clear DE"
7331,7331,7487,0435d1,043601,"ld e,(hl)","ld e,(hl)","ld e,(hl)",main.asm,"LD      E,(HL)			; Fetch the line number in DE"
7332,7332,7488,0435d2,043602,inc hl,inc hl,inc hl,main.asm,INC     HL
7333,7333,7489,0435d3,043603,"ld d,(hl)","ld d,(hl)","ld d,(hl)",main.asm,"LD      D,(HL)"
7334,7334,7490,0435d4,043604,dec hl,dec hl,dec hl,main.asm,DEC     HL			; Step HL back to the length byte
7335,7335,7491,0435d5,043605,dec hl,dec hl,dec hl,main.asm,DEC     HL
7336,7336,7492,0435d6,043606,push de,push de,push de,main.asm,PUSH    DE             	 	; Push the line number on the stack
7337,7337,7493,0435d7,043607,"ex de,hl","ex de,hl","ex de,hl",main.asm,"EX      DE,HL			; HL: line number"
7338,7338,7494,0435d8,043608,scf,scf,scf,main.asm,SCF				; Do a 16-bit compare of HL and DE
7339,7339,7495,0435d9,043609,"sbc hl,bc","sbc hl,bc","sbc hl,bc",main.asm,"SBC     HL,BC"
7340,7340,7496,0435db,04360b,"ex de,hl","ex de,hl","ex de,hl",main.asm,"EX      DE,HL"
7341,7341,7497,0435dc,04360c,pop de,pop de,pop de,main.asm,POP     DE              	; Restore the line number
7342,7342,7498,0435dd,04360d,"jp nc,$04307f","jp nc,$0430af","jp nc,$000000",main.asm,"WARMNC:			JP      NC,WARM			; If exceeded the terminating line number then jump to WARM"
7343,7343,7499,0435e1,043611,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,"LD      C,(HL)          	; C: Line length + 4"
7344,7344,7500,0435e2,043612,"ld b,a","ld b,a","ld b,a",main.asm,"LD      B,A             	; B: IF clause length"
7345,7345,7501,0435e3,043613,"ld a,d","ld a,d","ld a,d",main.asm,"LD      A,D			; TODO: What is ""UNLISTABLE?"""
7346,7346,7502,0435e4,043614,or e,or e,or e,main.asm,OR      E
7347,7347,7503,0435e5,043615,"jp z,$043080","jp z,$0430b0","jp z,$000000",main.asm,"JP      Z,CLOOP"
7348,7348,7504,0435e9,043619,inc hl,inc hl,inc hl,main.asm,INC     HL			; Skip the length
7349,7349,7505,0435ea,04361a,inc hl,inc hl,inc hl,main.asm,INC     HL			; Skip the line number
7350,7350,7506,0435eb,04361b,inc hl,inc hl,inc hl,main.asm,INC     HL              	; HL: Address of the tokenised BASIC line
7351,7351,7507,0435ec,04361c,dec c,dec c,dec c,main.asm,DEC     C			;  C: Line length
7352,7352,7508,0435ed,04361d,dec c,dec c,dec c,main.asm,DEC     C
7353,7353,7509,0435ee,04361e,dec c,dec c,dec c,main.asm,DEC     C
7354,7354,7510,0435ef,04361f,dec c,dec c,dec c,main.asm,DEC     C
7355,7355,7511,0435f0,043620,push de,push de,push de,main.asm,PUSH    DE              	; Save the line number
7356,7356,7512,0435f1,043621,push hl,push hl,push hl,main.asm,PUSH    HL              	; Save the BASIC program address
7357,7357,7513,0435f2,043622,xor a,xor a,xor a,main.asm,XOR     A               	;
7358,7358,7514,0435f3,043623,cp b,cp b,cp b,main.asm,CP      B              	 	; Check for an IF clause (B!=0)
7359,7359,7515,0435f4,043624,push iy,push iy,push iy,main.asm,"PUSH    IY			; LD IY, DE"
7360,7360,7516,0435f6,043626,pop de,pop de,pop de,main.asm,POP     DE              	; DE: Address of the IF clause string in the input buffer
7361,7361,7517,0435f7,043627,"call nz,$040785","call nz,$040785","call nz,$000000",main.asm,"CALL    NZ,SEARCH      		; If there is an IF clause (B!=0) then search for it"
7362,7362,7518,0435fb,04362b,pop hl,pop hl,pop hl,main.asm,POP     HL              	; Restore BASIC program address
7363,7363,7519,0435fc,04362c,pop de,pop de,pop de,main.asm,POP     DE              	; Restore line number
7364,7364,7520,0435fd,04362d,push iy,push iy,push iy,main.asm,PUSH    IY
7365,7365,7521,0435ff,04362f,"call z,$043892","call z,$0438c2","call z,$000000",main.asm,"CALL    Z,LISTIT        	; List if no IF clause OR there is an IF clause match"
7366,7366,7522,043603,043633,pop iy,pop iy,pop iy,main.asm,POP     IY
7367,7367,7523,043605,043635,"ex af,af'","ex af,af'","ex af,af'",main.asm,"EX      AF,AF'"
7368,7368,7524,043606,043636,dec a,dec a,dec a,main.asm,DEC     A			; Decrement line list counter
7369,7369,7525,043607,043637,call $043f71,call $043fa1,call $000000,main.asm,CALL    LTRAP			; TODO: This destroys A - is this a bug I've introduced in LTRAP?
7370,7370,7526,04360b,04363b,pop hl,pop hl,pop hl,main.asm,POP     HL             	 	; Restore BASIC program address to beginning of line
7371,7371,7527,04360c,04363c,"ld de,$000000","ld de,$000000","ld de,$000000",main.asm,"LD	DE,0"
7372,7372,7528,043610,043640,"ld e,(hl)","ld e,(hl)","ld e,(hl)",main.asm,"LD      E,(HL)			; Fetch the length of line in DE"
7373,7373,7529,043611,043641,"add hl,de","add hl,de","add hl,de",main.asm,"ADD     HL,DE           	; Go to the next line"
7374,7374,7530,043612,043642,pop de,pop de,pop de,main.asm,POP     DE              	; Restore IF clause length
7375,7375,7531,043613,043643,pop bc,pop bc,pop bc,main.asm,POP     BC              	; Restore second line number
7376,7376,7532,043614,043644,jr $-$51,jr $-$51,jr $-$00,main.asm,JR      LISTC			; Loop back to do next line
7377,7377,7533,043616,043646,call $043876,call $0438a6,call $000000,main.asm,RENUM:			CALL    CLEAR           	; Uses the heap so clear all dynamic variables and function/procedure pointers
7378,7378,7534,04361a,04364a,call $043c2b,call $043c5b,call $000000,main.asm,"CALL    PAIR            	; Fetch the parameters - HL: start (NEW line number), BC: increment"
7379,7379,7535,04361e,04364e,exx,exx,exx,main.asm,EXX
7380,7380,7536,04361f,04364f,"ld hl,($044d14)","ld hl,($044d14)","ld hl,($000000)",main.asm,"LD      HL,(PAGE_)		; HL: Top of program"
7381,7381,7537,043623,043653,"ld de,($044d1a)","ld de,($044d1a)","ld de,($000000)",main.asm,"LD      DE,(LOMEM)		; DE: Start address of the heap"
7382,7382,7538,043628,043658,"ld a,(hl)","ld a,(hl)","ld a,(hl)",main.asm,"RENUM1:			LD      A,(HL)          	; Fetch the line length byte"
7383,7383,7539,043629,043659,or a,or a,or a,main.asm,"OR      A			; Is it zero, i.e. the end of program marker?"
7384,7384,7540,04362a,04365a,"jr z,$+$38","jr z,$+$38","jr z,$+$00",main.asm,"JR      Z,RENUM2		; Yes, so skip to the next part"
7385,7385,7541,04362c,04365c,inc hl,inc hl,inc hl,main.asm,INC     HL
7386,7386,7542,04362d,04365d,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,"LD      C,(HL)          	; BC: The OLD line number"
7387,7387,7543,04362e,04365e,inc hl,inc hl,inc hl,main.asm,INC     HL
7388,7388,7544,04362f,04365f,"ld b,(hl)","ld b,(hl)","ld b,(hl)",main.asm,"LD      B,(HL)"
7389,7389,7545,043630,043660,"ld a,b","ld a,b","ld a,b",main.asm,"LD      A,B			; Check whether the line number is zero - we only need to check the LSW"
7390,7390,7546,043631,043661,or c,or c,or c,main.asm,OR      C
7391,7391,7547,043632,043662,"jp z,$043080","jp z,$0430b0","jp z,$000000",main.asm,"JP      Z,CLOOP        		; If the line number is zero, then exit back to the command line"
7392,7392,7548,043636,043666,"ex de,hl","ex de,hl","ex de,hl",main.asm,"EX      DE,HL			; DE: Pointer to BASIC program, HL: Pointer to heap"
7393,7393,7549,043637,043667,"ld (hl),c","ld (hl),c","ld (hl),c",main.asm,"LD      (HL),C			; Store the OLD line number in the heap"
7394,7394,7550,043638,043668,inc hl,inc hl,inc hl,main.asm,INC     HL
7395,7395,7551,043639,043669,"ld (hl),b","ld (hl),b","ld (hl),b",main.asm,"LD      (HL),B"
7396,7396,7552,04363a,04366a,inc hl,inc hl,inc hl,main.asm,INC     HL
7397,7397,7553,04363b,04366b,exx,exx,exx,main.asm,"EXX				; HL: line number, BC: increment (16-bit values)"
7398,7398,7554,04363c,04366c,push hl,push hl,push hl,main.asm,PUSH    HL			; HL: Stack the NEW line number value
7399,7399,7555,04363d,04366d,"add.sil hl,bc","add.sil hl,bc","add.sil hl,bc",main.asm,"ADD.S   HL,BC           	; Add the increment"
7400,7400,7556,04363f,04366f,"jp c,$043c25","jp c,$043c55","jp c,$000000",main.asm,"JP      C,TOOBIG        	; If > 65535, then error: ""Too big"""
7401,7401,7557,043643,043673,exx,exx,exx,main.asm,"EXX				; DE: Pointer to BASIC program, HL: Pointer to heap"
7402,7402,7558,043644,043674,pop bc,pop bc,pop bc,main.asm,POP     BC			; BC: Pop the NEW line number value off the stack
7403,7403,7559,043645,043675,"ld (hl),c","ld (hl),c","ld (hl),c",main.asm,"LD      (HL),C			; Store the NEW line number in the heap"
7404,7404,7560,043646,043676,inc hl,inc hl,inc hl,main.asm,INC     HL
7405,7405,7561,043647,043677,"ld (hl),b","ld (hl),b","ld (hl),b",main.asm,"LD      (HL),B"
7406,7406,7562,043648,043678,inc hl,inc hl,inc hl,main.asm,INC     HL
7407,7407,7563,043649,043679,"ex de,hl","ex de,hl","ex de,hl",main.asm,"EX      DE,HL			; HL: Pointer to BASIC program, DE: Pointer to heap"
7408,7408,7564,04364a,04367a,dec hl,dec hl,dec hl,main.asm,DEC     HL			; Back up to the line length byte
7409,7409,7565,04364b,04367b,dec hl,dec hl,dec hl,main.asm,DEC     HL
7410,7410,7566,04364c,04367c,"ld bc,$000000","ld bc,$000000","ld bc,$000000",main.asm,"LD	BC, 0"
7411,7411,7567,043650,043680,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,"LD      C,(HL)			; BC: Line length"
7412,7412,7568,043651,043681,"add hl,bc","add hl,bc","add hl,bc",main.asm,"ADD	HL,BC           	; Advance HL to next line"
7413,7413,7569,043652,043682,"ex de,hl","ex de,hl","ex de,hl",main.asm,"EX      DE,HL			; DE: Pointer to BASIC program, HL: Pointer to heap"
7414,7414,7570,043653,043683,push hl,push hl,push hl,main.asm,PUSH    HL
7415,7415,7571,043654,043684,inc h,inc h,inc h,main.asm,INC     H			; Increment to next page
7416,7416,7572,043655,043685,"sbc hl,sp","sbc hl,sp","sbc hl,sp",main.asm,"SBC     HL,SP			; Subtract from SP"
7417,7417,7573,043657,043687,pop hl,pop hl,pop hl,main.asm,POP     HL
7418,7418,7574,043658,043688,"ex de,hl","ex de,hl","ex de,hl",main.asm,"EX      DE, HL			; HL: Pointer to BASIC program, DE: Pointer to heap"
7419,7419,7575,043659,043689,"jr c,$-$31","jr c,$-$31","jr c,$-$00",main.asm,"JR      C,RENUM1        	; Loop, as the heap pointer has not strayed into the stack page"
7420,7420,7576,04365b,04368b,call $043777,call $0437a7,call $000000,main.asm,"CALL    EXTERR          	; Otherwise throw error: ""RENUMBER space'"
7421,7421,7577,04365f,04368f,"call z,$eb0008","call z,$eb0008","call z,$000000",main.asm,DB    	REN
7422,7422,7578,043663,043693,"ld (hl),$ff","ld (hl),$ff","ld (hl),$00",main.asm,"LD      (HL),-1			; Mark the end with FFFFh"
7423,7423,7579,043665,043695,inc hl,inc hl,inc hl,main.asm,INC     HL
7424,7424,7580,043666,043696,"ld (hl),$ff","ld (hl),$ff","ld (hl),$00",main.asm,"LD      (HL),-1"
7425,7425,7581,043668,043698,"ld de,($044d1a)","ld de,($044d1a)","ld de,($000000)",main.asm,"LD      DE,(LOMEM)		; DE: Pointer to the start of the heap"
7426,7426,7582,04366d,04369d,exx,exx,exx,main.asm,EXX
7427,7427,7583,04366e,04369e,"ld hl,($044d14)","ld hl,($044d14)","ld hl,($000000)",main.asm,"LD      HL,(PAGE_)		; HL: Start of the BASIC program area"
7428,7428,7584,043672,0436a2,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,"RENUM3:			LD      C,(HL)			; Fetch the first line length byte"
7429,7429,7585,043673,0436a3,"ld a,c","ld a,c","ld a,c",main.asm,"LD      A,C			; If it is zero, then no program, so..."
7430,7430,7586,043674,0436a4,or a,or a,or a,main.asm,OR      A
7431,7431,7587,043675,0436a5,"jp z,$04307f","jp z,$0430af","jp z,$000000",main.asm,"JP      Z,WARM			; Jump to warm start"
7432,7432,7588,043679,0436a9,exx,exx,exx,main.asm,"EXX				; HL: Pointer to end of heap, DE: Pointer to start of heap"
7433,7433,7589,04367a,0436aa,"ex de,hl","ex de,hl","ex de,hl",main.asm,"EX      DE,HL			; DE: Pointer to end of heap, HL: Pointer to start of heap"
7434,7434,7590,04367b,0436ab,inc hl,inc hl,inc hl,main.asm,INC     HL			; Skip to the NEW line number
7435,7435,7591,04367c,0436ac,inc hl,inc hl,inc hl,main.asm,INC     HL
7436,7436,7592,04367d,0436ad,"ld e,(hl)","ld e,(hl)","ld e,(hl)",main.asm,"LD      E,(HL)			; DE: The NEW line number"
7437,7437,7593,04367e,0436ae,inc hl,inc hl,inc hl,main.asm,INC     HL
7438,7438,7594,04367f,0436af,"ld d,(hl)","ld d,(hl)","ld d,(hl)",main.asm,"LD      D,(HL)"
7439,7439,7595,043680,0436b0,inc hl,inc hl,inc hl,main.asm,INC     HL
7440,7440,7596,043681,0436b1,push de,push de,push de,main.asm,PUSH    DE			; Stack the NEW line number
7441,7441,7597,043682,0436b2,"ex de,hl","ex de,hl","ex de,hl",main.asm,"EX      DE,HL			; HL: The NEW line number, DE: Pointer to the end of heap"
7442,7442,7598,043683,0436b3,"ld ($044d23),hl","ld ($044d23),hl","ld ($000000),hl",main.asm,"LD      (LINENO),HL		; Store the line number in LINENO"
7443,7443,7599,043687,0436b7,exx,exx,exx,main.asm,EXX				; HL: Pointer to the BASIC program area
7444,7444,7600,043688,0436b8,pop de,pop de,pop de,main.asm,POP     DE			; DE: The NEW line number
7445,7445,7601,043689,0436b9,inc hl,inc hl,inc hl,main.asm,INC     HL
7446,7446,7602,04368a,0436ba,"ld (hl),e","ld (hl),e","ld (hl),e",main.asm,"LD      (HL),E          	; Write out the NEW line number to the BASIC program"
7447,7447,7603,04368b,0436bb,inc hl,inc hl,inc hl,main.asm,INC     HL
7448,7448,7604,04368c,0436bc,"ld (hl),d","ld (hl),d","ld (hl),d",main.asm,"LD      (HL),D"
7449,7449,7605,04368d,0436bd,inc hl,inc hl,inc hl,main.asm,INC     HL
7450,7450,7606,04368e,0436be,dec c,dec c,dec c,main.asm,DEC     C			; Subtract 3 from the line length to compensate for increasing HL by 3 above
7451,7451,7607,04368f,0436bf,dec c,dec c,dec c,main.asm,DEC     C
7452,7452,7608,043690,0436c0,dec c,dec c,dec c,main.asm,DEC     C
7453,7453,7609,043691,0436c1,"ld a,c","ld a,c","ld a,c",main.asm,"LD	A,C"
7454,7454,7610,043692,0436c2,"ld bc,$000000","ld bc,$000000","ld bc,$000000",main.asm,"LD	BC,0"
7455,7455,7611,043696,0436c6,"ld c,a","ld c,a","ld c,a",main.asm,"LD	C,A			; BC: Line length"
7456,7456,7612,043697,0436c7,"ld a,$8d","ld a,$8d","ld a,$00",main.asm,"RENUM7:			LD      A,LINO_MN			; A: The token code that precedes any line number encoded in BASIC (i.e. GOTO/GOSUB)"
7457,7457,7613,043699,0436c9,cpir,cpir,cpir,main.asm,CPIR                    	; Search for the token
7458,7458,7614,04369b,0436cb,"jr nz,$-$29","jr nz,$-$29","jr nz,$-$00",main.asm,"JR      NZ,RENUM3		; If not found, then loop to process the next line"
7459,7459,7615,04369d,0436cd,push bc,push bc,push bc,main.asm,PUSH    BC			; Stack everything
7460,7460,7616,04369e,0436ce,push hl,push hl,push hl,main.asm,PUSH    HL
7461,7461,7617,04369f,0436cf,push hl,push hl,push hl,main.asm,PUSH    HL			; HL: Pointer to encoded line number
7462,7462,7618,0436a0,0436d0,pop iy,pop iy,pop iy,main.asm,POP     IY			; IY: Pointer to encoded line number
7463,7463,7619,0436a2,0436d2,exx,exx,exx,main.asm,EXX
7464,7464,7620,0436a3,0436d3,call $0408e6,call $0408e6,call $000000,main.asm,CALL    DECODE			; Decode the encoded line number (in HL')
7465,7465,7621,0436a7,0436d7,exx,exx,exx,main.asm,EXX				; HL: Decoded line number
7466,7466,7622,0436a8,0436d8,"ld b,h","ld b,h","ld b,h",main.asm,"LD      B,H			; BC: Decoded line number"
7467,7467,7623,0436a9,0436d9,"ld c,l","ld c,l","ld c,l",main.asm,"LD      C,L"
7468,7468,7624,0436aa,0436da,"ld hl,($044d1a)","ld hl,($044d1a)","ld hl,($000000)",main.asm,"LD      HL,(LOMEM)		; HL: Pointer to heap"
7469,7469,7625,0436ae,0436de,"ld e,(hl)","ld e,(hl)","ld e,(hl)",main.asm,"RENUM4:			LD      E,(HL)          	; DE: The OLD line number"
7470,7470,7626,0436af,0436df,inc hl,inc hl,inc hl,main.asm,INC     HL
7471,7471,7627,0436b0,0436e0,"ld d,(hl)","ld d,(hl)","ld d,(hl)",main.asm,"LD      D,(HL)"
7472,7472,7628,0436b1,0436e1,inc hl,inc hl,inc hl,main.asm,INC     HL
7473,7473,7629,0436b2,0436e2,"ex de,hl","ex de,hl","ex de,hl",main.asm,"EX      DE,HL			; HL: The OLD line number, DE: Pointer in the global heap"
7474,7474,7630,0436b3,0436e3,or a,or a,or a,main.asm,OR      A               	; Clear the carry and...
7475,7475,7631,0436b4,0436e4,"sbc.sil hl,bc","sbc.sil hl,bc","sbc.sil hl,bc",main.asm,"SBC.S   HL,BC			; Compare by means of subtraction the OLD line number against the one in the heap"
7476,7476,7632,0436b7,0436e7,"ex de,hl","ex de,hl","ex de,hl",main.asm,"EX      DE,HL			; HL: Pointer in the global heap"
7477,7477,7633,0436b8,0436e8,"ld e,(hl)","ld e,(hl)","ld e,(hl)",main.asm,"LD      E,(HL)          	; DE: The NEW line number"
7478,7478,7634,0436b9,0436e9,inc hl,inc hl,inc hl,main.asm,INC     HL
7479,7479,7635,0436ba,0436ea,"ld d,(hl)","ld d,(hl)","ld d,(hl)",main.asm,"LD      D,(HL)"
7480,7480,7636,0436bb,0436eb,inc hl,inc hl,inc hl,main.asm,INC     HL
7481,7481,7637,0436bc,0436ec,"jr c,$-$0e","jr c,$-$0e","jr c,$-$00",main.asm,"JR      C,RENUM4		; Loop until there is a match (Z) or not (NC)"
7482,7482,7638,0436be,0436ee,"ex de,hl","ex de,hl","ex de,hl",main.asm,"EX      DE,HL			; DE: Pointer in the global heap"
7483,7483,7639,0436bf,0436ef,"jr z,$+$1f","jr z,$+$1f","jr z,$+$00",main.asm,"JR      Z,RENUM5        	; If Z flag is set, there is an exact match to the decoded line number on the heap"
7484,7484,7640,0436c1,0436f1,call $043d90,call $043dc0,call $000000,main.asm,CALL    TELL			; Display this error if the line number is not found
7485,7485,7641,0436c5,0436f5,"ld b,(hl)","ld b,(hl)","ld b,(hl)",main.asm,"DB    	""Failed at """
7486,7486,7642,0436c6,0436f6,"ld h,c","ld h,c","ld h,c",main.asm,
7487,7487,7643,0436c7,0436f7,"ld l,c","ld l,c","ld l,c",main.asm,
7488,7488,7644,0436c8,0436f8,"ld l,h","ld l,h","ld l,h",main.asm,
7488,7488,7644,0436c8,0436f8,"ld l,h","ld l,h","ld l,h",main.asm,
7489,7489,7645,0436c9,0436f9,"ld h,l","ld h,l","ld h,l",main.asm,
7490,7490,7646,0436ca,0436fa,"ld h,h","ld h,h","ld h,h",main.asm,
7491,7491,7647,0436cb,0436fb,"jr nz,$+$63","jr nz,$+$63","jr nz,$+$00",main.asm,
7491,7491,7647,0436cb,0436fb,"jr nz,$+$63","jr nz,$+$63","jr nz,$+$00",main.asm,
7492,7492,7648,0436cd,0436fd,"ld (hl),h","ld (hl),h","ld (hl),h",,
7493,7493,7649,0436ce,0436fe,"jr nz,$+$02","jr nz,$+$02","jr nz,$+$00",,
7494,7494,7650,0436d0,043700,"ld hl,($044d23)","ld hl,($044d23)","ld hl,($000000)",main.asm,"LD      HL,(LINENO)"
7495,7495,7651,0436d4,043704,call $0439f7,call $043a27,call $000000,main.asm,CALL    PBCDL
7496,7496,7652,0436d8,043708,call $043947,call $043977,call $000000,main.asm,CALL    CRLF
7497,7497,7653,0436dc,04370c,jr $+$09,jr $+$09,jr $+$00,main.asm,JR      RENUM6			; And carry on renumbering
7498,7498,7654,0436de,04370e,pop de,pop de,pop de,main.asm,RENUM5:			POP     DE			; DE: Pointer to the encoded line number in the listing
7499,7499,7655,0436df,04370f,push de,push de,push de,main.asm,PUSH    DE
7500,7500,7656,0436e0,043710,dec de,dec de,dec de,main.asm,DEC     DE			; Back up a byte to the LINO token
7501,7501,7657,0436e1,043711,call $043d5c,call $043d8c,call $000000,main.asm,CALL    ENCODE          	; Re-write the new line number out
7502,7502,7658,0436e5,043715,pop hl,pop hl,pop hl,main.asm,RENUM6:			POP     HL			; HL: Pointer to the encoded line number in the listing
7503,7503,7659,0436e6,043716,pop bc,pop bc,pop bc,main.asm,POP     BC			; BC: The remaining line length
7504,7504,7660,0436e7,043717,jr $-$50,jr $-$50,jr $-$00,main.asm,JR      RENUM7			; Carry on checking for any more encoded line numbers in this line
7505,7505,7661,0436e9,043719,call $043c2b,call $043c5b,call $000000,main.asm,"AUTO:			CALL    PAIR			; Get the parameter pair (HL: first parameter, BC: second parameter)"
7506,7506,7662,0436ed,04371d,"ld ($044d29),hl","ld ($044d29),hl","ld ($000000),hl",main.asm,"LD      (AUTONO),HL		; Store the start in AUTONO"
7507,7507,7663,0436f1,043721,"ld a,c","ld a,c","ld a,c",main.asm,"LD      A,C			; Increment is 8 bit (0-255)"
7508,7508,7664,0436f2,043722,"ld ($044d41),a","ld ($044d41),a","ld ($000000),a",main.asm,"LD      (INCREM),A		; Store that in INCREM"
7509,7509,7665,0436f6,043726,jr $+$30,jr $+$30,jr $+$00,main.asm,JR      CLOOP0			; Jump back indirectly to the command loop via CLOOP0 (optimisation for size)
7510,7510,7666,0436f8,043728,call $043d90,call $043dc0,call $000000,main.asm,"BAD:			CALL    TELL            	; Output ""Bad program"" error"
7511,7511,7667,0436fc,04372c,inc bc,inc bc,inc bc,main.asm,"DB    3				; Token for ""BAD"""
7512,7512,7668,0436fd,04372d,"ld (hl),b","ld (hl),b","ld (hl),b",main.asm,"DB    ""program"""
7513,7513,7669,0436fe,04372e,"ld (hl),d","ld (hl),d","ld (hl),d",main.asm,
7514,7514,7670,0436ff,04372f,"ld l,a","ld l,a","ld l,a",main.asm,
7515,7515,7671,043700,043730,"ld h,a","ld h,a","ld h,a",main.asm,
7515,7515,7671,043700,043730,"ld h,a","ld h,a","ld h,a",main.asm,
7516,7516,7672,043701,043731,"ld (hl),d","ld (hl),d","ld (hl),d",main.asm,
7517,7517,7673,043702,043732,"ld h,c","ld h,c","ld h,c",main.asm,
7518,7518,7674,043703,043733,"ld l,l","ld l,l","ld l,l",,
7519,7519,7675,043704,043734,dec c,dec c,dec c,main.asm,DB    CR
7520,7520,7676,043705,043735,"ld a,(bc)","ld a,(bc)","ld a,(bc)",main.asm,DB    LF
7521,7521,7677,043706,043736,nop,nop,nop,main.asm,DB    0				; Falls through to NEW
7522,7522,7678,043707,043737,call $04386c,call $04389c,call $000000,main.asm,NEW:			CALL    NEWIT			; Call NEWIT (clears program area and variables)
7523,7523,7679,04370b,04373b,jr $+$1b,jr $+$1b,jr $+$00,main.asm,JR      CLOOP0			; Jump back indirectly to the command loop via CLOOP0 (optimisation for size)
7524,7524,7680,04370d,04373d,"ld hl,($044d14)","ld hl,($044d14)","ld hl,($000000)",main.asm,"OLD:			LD      HL,(PAGE_)		; HL: The start of the BASIC program area"
7525,7525,7681,043711,043741,push hl,push hl,push hl,main.asm,PUSH    HL			; Stack it
7526,7526,7682,043712,043742,inc hl,inc hl,inc hl,main.asm,INC     HL			; Skip the potential length byte of first line of code
7527,7527,7683,043713,043743,inc hl,inc hl,inc hl,main.asm,INC     HL			; And the line number word
7528,7528,7684,043714,043744,inc hl,inc hl,inc hl,main.asm,INC     HL
7529,7529,7685,043715,043745,"ld bc,$0000fc","ld bc,$0000fc","ld bc,$000000",main.asm,"LD      BC,252			; Look for a CR in the first 252 bytes of code; maximum line length"
7530,7530,7686,043719,043749,"ld a,$0d","ld a,$0d","ld a,$00",main.asm,"LD      A,CR"
7531,7531,7687,04371b,04374b,cpir,cpir,cpir,main.asm,CPIR
7532,7532,7688,04371d,04374d,"jr nz,$-$25","jr nz,$-$25","jr nz,$-$00",main.asm,"JR      NZ,BAD			; If not found, then the first line of code is not a valid BBC BASIC code"
7533,7533,7689,04371f,04374f,"ld a,l","ld a,l","ld a,l",main.asm,"LD      A,L			; It could still be garbage though! Store the position in A; this requires"
7534,7534,7690,043720,043750,pop hl,pop hl,pop hl,main.asm,"POP     HL			; PAGE to be on a 256 page boundary, and is now the length of the first line"
7535,7535,7691,043721,043751,"ld (hl),a","ld (hl),a","ld (hl),a",main.asm,"LD      (HL),A			; Restore the length byte (this will have been set to 0 by NEW)"
7536,7536,7692,043722,043752,call $04383f,call $04386f,call $000000,main.asm,"CALL    CLEAN			; Further checks for bad program, set TOP, write out &FFFF end of program marker"
7537,7537,7693,043726,043756,jp $043080,jp $0430b0,jp $000000,main.asm,CLOOP0:			JP      CLOOP			; Jump back to the command loop
7538,7538,7694,04372a,04375a,call $040315,call $040315,call $000000,main.asm,LOAD:			CALL    EXPRS           	; Get the filename
7539,7539,7695,04372e,04375e,"ld a,$0d","ld a,$0d","ld a,$00",main.asm,"LD      A,CR			; DE points to the last byte of filename in ACCS"
7540,7540,7696,043730,043760,"ld (de),a","ld (de),a","ld (de),a",main.asm,"LD      (DE),A			; Terminate filename with a CR"
7541,7541,7697,043731,043761,call $04381f,call $04384f,call $000000,main.asm,"CALL    LOAD0			; Load the file in, then CLEAN"
7542,7542,7698,043735,043765,call $043876,call $0438a6,call $000000,main.asm,"CALL    CLEAR			; Further checks for bad program, set TOP, write out &FFFF end of program marker"
7543,7543,7699,043739,043769,jr $+$23,jr $+$23,jr $+$00,main.asm,JR      WARM0			; Jump back to the command loop
7544,7544,7700,04373b,04376b,call $04384b,call $04387b,call $000000,main.asm,SAVE:			CALL    SETTOP          	; Set TOP sysvar
7545,7545,7701,04373f,04376f,call $040315,call $040315,call $000000,main.asm,CALL    EXPRS           	; Get the filename
7546,7546,7702,043743,043773,"ld a,$0d","ld a,$0d","ld a,$00",main.asm,"LD      A,CR			; Terminate the filename with a CR"
7547,7547,7703,043745,043775,"ld (de),a","ld (de),a","ld (de),a",main.asm,"LD      (DE),A"
7548,7548,7704,043746,043776,"ld de,($044d14)","ld de,($044d14)","ld de,($000000)",main.asm,"LD      DE,(PAGE_)		; DE: Start of program memory"
7549,7549,7705,04374b,04377b,"ld hl,($044d17)","ld hl,($044d17)","ld hl,($000000)",main.asm,"LD      HL,(TOP)		; HL: Top of program memory"
7550,7550,7706,04374f,04377f,or a,or a,or a,main.asm,OR      A			; Calculate program size (TOP-PAGE)
7551,7551,7707,043750,043780,"sbc hl,de","sbc hl,de","sbc hl,de",main.asm,"SBC     HL,DE"
7552,7552,7708,043752,043782,"ld b,h","ld b,h","ld b,h",main.asm,"LD      B,H             	; BC: Length of program in bytes"
7553,7553,7709,043753,043783,"ld c,l","ld c,l","ld c,l",main.asm,"LD      C,L"
7554,7554,7710,043754,043784,"ld hl,$044a00","ld hl,$044a00","ld hl,$000000",main.asm,"LD      HL,ACCS			; HL: Address of the filename"
7555,7555,7711,043758,043788,call $04422d,call $04426e,call $000000,main.asm,CALL    OSSAVE			; Call the SAVE routine in patch.asm
7556,7556,7712,04375c,04378c,jp $04307f,jp $0430af,jp $000000,main.asm,WARM0:			JP      WARM			; Jump back to the command loop
7557,7557,7713,043760,043790,"ld sp,($044d20)","ld sp,($044d20)","ld sp,($000000)",main.asm,"ERROR_:			LD      SP,(HIMEM)		; Set SP to HIMEM"
7558,7558,7714,043765,043795,"ld hl,$043449","ld hl,$043479","ld hl,$000000",main.asm,"LD      HL,ERRWDS		; Index into the error string table"
7559,7559,7715,043769,043799,or a,or a,or a,main.asm,OR      A			; We don't need to search for the first error
7560,7560,7716,04376a,04379a,"jr z,$+$0c","jr z,$+$0c","jr z,$+$00",main.asm,"JR      Z,ERROR1		; So skip the search routine"
7561,7561,7717,04376c,04379c,"ld b,a","ld b,a","ld b,a",main.asm,"LD      B,A             	; Store error number in B"
7562,7562,7718,04376d,04379d,"ex af,af'","ex af,af'","ex af,af'",main.asm,"EX      AF,AF'			; Store error number in AF'"
7563,7563,7719,04376e,04379e,xor a,xor a,xor a,main.asm,XOR     A
7564,7564,7720,04376f,04379f,cp (hl),cp (hl),cp (hl),main.asm,ERROR0:			CP      (HL)			; Compare the character with 0 (the terminator byte)
7565,7565,7721,043770,0437a0,inc hl,inc hl,inc hl,main.asm,INC     HL			; Increment the string pointer
7566,7566,7722,043771,0437a1,"jr nz,$-$02","jr nz,$-$02","jr nz,$-$00",main.asm,"JR      NZ,ERROR0		; Loop until with hit a 0"
7567,7567,7723,043773,0437a3,djnz $-$04,djnz $-$04,djnz $-$00,main.asm,DJNZ    ERROR0			; Decrements the error number and loop until 0
7568,7568,7724,043775,0437a5,"ex af,af'","ex af,af'","ex af,af'",main.asm,"EX      AF,AF'			; Restore the error number from AF'"
7569,7569,7725,043776,0437a6,push hl,push hl,push hl,main.asm,ERROR1:			PUSH    HL			; Stack the error string pointer and fall through to EXTERR
7570,7570,7726,043777,0437a7,pop hl,pop hl,pop hl,main.asm,EXTERR:			POP     HL			; Pop the error string pointer
7571,7571,7727,043778,0437a8,"ld ($044d2f),hl","ld ($044d2f),hl","ld ($000000),hl",main.asm,"LD      (ERRTXT),HL		; Store in ERRTXT sysvar"
7572,7572,7728,04377c,0437ac,"ld sp,($044d20)","ld sp,($044d20)","ld sp,($000000)",main.asm,"LD      SP,(HIMEM)		; Set SP to HIMEM"
7573,7573,7729,043781,0437b1,"ld ($044d3f),a","ld ($044d3f),a","ld ($000000),a",main.asm,"LD      (ERR),A			; Store error number in ERR sysvar"
7574,7574,7730,043785,0437b5,call $0439ae,call $0439de,call $000000,main.asm,CALL    SETLIN			; Get line number
7575,7575,7731,043789,0437b9,"ld ($044d33),hl","ld ($044d33),hl","ld ($000000),hl",main.asm,"LD      (ERL),HL		; Store in ERL sysvar"
7576,7576,7732,04378d,0437bd,or a,or a,or a,main.asm,OR      A			; Is error number 0?
7577,7577,7733,04378e,0437be,"jr z,$+$0f","jr z,$+$0f","jr z,$+$00",main.asm,"JR      Z,ERROR2		; Yes, so skip the next bit as error number 0 is untrappable"
7578,7578,7734,043790,0437c0,"ld hl,($044d2c)","ld hl,($044d2c)","ld hl,($000000)",main.asm,"LD      HL,(ERRTRP)		; Check whether the error is trapped"
7579,7579,7735,043794,0437c4,"ld a,h","ld a,h","ld a,h",main.asm,"LD      A,H"
7580,7580,7736,043795,0437c5,or l,or l,or l,main.asm,OR      L
7581,7581,7737,043796,0437c6,push hl,push hl,push hl,main.asm,PUSH    HL			; HL: Error line
7582,7582,7738,043797,0437c7,pop iy,pop iy,pop iy,main.asm,POP     IY			; IY: HL
7583,7583,7739,043799,0437c9,"jp nz,$040b96","jp nz,$040b96","jp nz,$000000",main.asm,"JP      NZ,XEQ         	 	; If error trapped, jump to XEQ"
7584,7584,7740,04379d,0437cd,"ld hl,$000000","ld hl,$000000","ld hl,$000000",main.asm,"ERROR2:			LD      HL,0"
7585,7585,7741,0437a1,0437d1,"ld ($044d29),hl","ld ($044d29),hl","ld ($000000),hl",main.asm,"LD      (AUTONO),HL		; Cancel AUTO"
7586,7586,7742,0437a5,0437d5,"ld ($044d26),hl","ld ($044d26),hl","ld ($000000),hl",main.asm,"LD      (TRACEN),HL     	; Cancel TRACE"
7587,7587,7743,0437a9,0437d9,call $0443b6,call $0443f7,call $000000,main.asm,CALL    RESET           	; Reset OPSYS
7588,7588,7744,0437ad,0437dd,call $043947,call $043977,call $000000,main.asm,CALL    CRLF			; Output newline
7589,7589,7745,0437b1,0437e1,call $043d82,call $043db2,call $000000,main.asm,CALL    REPORT          	; Output the error message
7590,7590,7746,0437b5,0437e5,call $0439e2,call $043a12,call $000000,main.asm,"CALL    SAYLN			; Output "" at line nnnn"" message."
7591,7591,7747,0437b9,0437e9,"ld e,$00","ld e,$00","ld e,$00",main.asm,"LD      E,0			; Close all files"
7592,7592,7748,0437bb,0437eb,"call c,$04432b","call c,$04436c","call c,$000000",main.asm,"CALL    C,OSSHUT"
7593,7593,7749,0437bf,0437ef,call $043947,call $043977,call $000000,main.asm,CALL    CRLF			; Output newline
7594,7594,7750,0437c3,0437f3,jp $043080,jp $0430b0,jp $000000,main.asm,JP      CLOOP			; Back to CLOOP
7595,7595,7751,0437c7,0437f7,"ld hl,$043168","ld hl,$043198","ld hl,$000000",main.asm,"LEX:			LD      HL,KEYWDS		; Address of the keywords table"
7596,7596,7752,0437cb,0437fb,"ld a,(iy)","ld a,(iy)","ld a,(iy)",main.asm,"LEX0:			LD      A,(IY)			; Fetch the character to match"
7597,7597,7753,0437ce,0437fe,"ld b,(hl)","ld b,(hl)","ld b,(hl)",main.asm,"LD      B,(HL)			; B: The token from the keywords table"
7598,7598,7754,0437cf,0437ff,inc hl,inc hl,inc hl,main.asm,INC     HL			; Increment the pointer in the keywords table
7599,7599,7755,0437d0,043800,cp (hl),cp (hl),cp (hl),main.asm,CP      (HL)			; Compare the first characters
7600,7600,7756,0437d1,043801,"jr z,$+$0a","jr z,$+$0a","jr z,$+$00",main.asm,"JR      Z,LEX2			; If there is a match, then skip to LEX2"
7601,7601,7757,0437d3,043803,ret c,ret c,ret c,main.asm,"RET     C               	; No match, so fail"
7602,7602,7758,0437d4,043804,inc hl,inc hl,inc hl,main.asm,LEX1:			INC     HL			; Increment the pointer
7603,7603,7759,0437d5,043805,"bit 7,(hl)","bit 7,(hl)","bit 7,(hl)",main.asm,"BIT     7,(HL)			; Check if bit 7 set (all token IDs have bit 7 set)"
7604,7604,7760,0437d7,043807,"jr z,$-$03","jr z,$-$03","jr z,$-$00",main.asm,"JR      Z,LEX1			; No, so loop"
7605,7605,7761,0437d9,043809,jr $-$0e,jr $-$0e,jr $-$00,main.asm,JR      LEX0			; At this point HL is pointing to the start of the next keyword
7606,7606,7762,0437db,04380b,push iy,push iy,push iy,main.asm,LEX2:			PUSH    IY              	; Save the input pointer
7607,7607,7763,0437dd,04380d,inc hl,inc hl,inc hl,main.asm,LEX3:			INC     HL			; Increment the keyword pointer
7608,7608,7764,0437de,04380e,"bit 7,(hl)","bit 7,(hl)","bit 7,(hl)",main.asm,"BIT     7,(HL)			; If we've reached the end (marked by the start of the next token) then"
7609,7609,7765,0437e0,043810,"jr nz,$+$1e","jr nz,$+$1e","jr nz,$+$00",main.asm,"JR      NZ,LEX6         	; Jump to here as we've found a token"
7610,7610,7766,0437e2,043812,inc iy,inc iy,inc iy,main.asm,INC     IY			; Increment the text pointer
7611,7611,7767,0437e4,043814,"ld a,(iy)","ld a,(iy)","ld a,(iy)",main.asm,"LD      A,(IY)			; Fetch the character"
7612,7612,7768,0437e7,043817,cp $2e,cp $2e,cp $00,main.asm,CP      '.'			; Is it an abbreviated keyword?
7613,7613,7769,0437e9,043819,"jr z,$+$15","jr z,$+$15","jr z,$+$00",main.asm,"JR      Z,LEX6          	; Yes, so we'll return with the token we've found"
7614,7614,7770,0437eb,04381b,cp (hl),cp (hl),cp (hl),main.asm,CP      (HL)			; Compare with the keywords list
7615,7615,7771,0437ec,04381c,"jr z,$-$0f","jr z,$-$0f","jr z,$-$00",main.asm,"JR      Z,LEX3			; It's a match, so continue checking this keyword"
7616,7616,7772,0437ee,04381e,call $043c7b,call $043cab,call $000000,main.asm,"CALL    RANGE1			; Is it alphanumeric, '@', '_' or '`'"
7617,7617,7773,0437f2,043822,"jr c,$+$06","jr c,$+$06","jr c,$+$00",main.asm,"JR      C,LEX5			; No, so check whether keyword needs to be immediately delimited"
7618,7618,7774,0437f4,043824,pop iy,pop iy,pop iy,main.asm,LEX4:			POP     IY              	; Restore the input pointer ready for the next search
7619,7619,7775,0437f6,043826,jr $-$22,jr $-$22,jr $-$00,main.asm,JR      LEX1			; And loop back to start again
7620,7620,7776,0437f8,043828,"ld a,(hl)","ld a,(hl)","ld a,(hl)",main.asm,"LEX5:			LD      A,(HL)			; Fetch the byte from the keywords table"
7621,7621,7777,0437f9,043829,or a,or a,or a,main.asm,"OR      A			; If it is not zero, then..."
7622,7622,7778,0437fa,04382a,"jr nz,$-$06","jr nz,$-$06","jr nz,$-$00",main.asm,"JR      NZ,LEX4			; Keep searching"
7623,7623,7779,0437fc,04382c,dec iy,dec iy,dec iy,main.asm,"DEC     IY			; If it is zero, then skip the input pointer back one byte"
7624,7624,7780,0437fe,04382e,pop af,pop af,pop af,main.asm,LEX6:			POP     AF			; Discard IY input pointer pushed on the stack
7625,7625,7781,0437ff,04382f,xor a,xor a,xor a,main.asm,XOR     A			; Set the Z flag
7626,7626,7782,043800,043830,"ld a,b","ld a,b","ld a,b",main.asm,"LD      A,B			; A: The token"
7627,7627,7783,043801,043831,ret,ret,ret,main.asm,RET
7628,7628,7784,043802,043832,push de,push de,push de,main.asm,DEL:			PUSH    DE
7629,7629,7785,043803,043833,push hl,push hl,push hl,main.asm,PUSH    HL
7630,7630,7786,043804,043834,push hl,push hl,push hl,main.asm,PUSH    HL			; HL: Address of the program line
7631,7631,7787,043805,043835,"ld b,$00","ld b,$00","ld b,$00",main.asm,"LD      B,0			; BC: Length of the line"
7632,7632,7788,043807,043837,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,"LD      C,(HL)"
7633,7633,7789,043808,043838,"add hl,bc","add hl,bc","add hl,bc",main.asm,"ADD     HL,BC			; HL: Advanced to the start of the next line"
7634,7634,7790,043809,043839,push hl,push hl,push hl,main.asm,PUSH    HL
7635,7635,7791,04380a,04383a,"ex de,hl","ex de,hl","ex de,hl",main.asm,"EX      DE,HL			; DE: Pointer to the next line"
7636,7636,7792,04380b,04383b,"ld hl,($044d17)","ld hl,($044d17)","ld hl,($000000)",main.asm,"LD      HL,(TOP)		; HL: Pointer to the end of the program"
7637,7637,7793,04380f,04383f,"sbc hl,de","sbc hl,de","sbc hl,de",main.asm,"SBC     HL,DE"
7638,7638,7794,043811,043841,"ld b,h","ld b,h","ld b,h",main.asm,"LD      B,H			; BC: Size of block to move"
7639,7639,7795,043812,043842,"ld c,l","ld c,l","ld c,l",main.asm,"LD      C,L"
7640,7640,7796,043813,043843,pop hl,pop hl,pop hl,main.asm,POP     HL			; HL: Pointer to next line
7641,7641,7797,043814,043844,pop de,pop de,pop de,main.asm,POP     DE			; DE: Pointer to this line
7642,7642,7798,043815,043845,ldir,ldir,ldir,main.asm,LDIR                    	; Delete the line
7643,7643,7799,043817,043847,"ld ($044d17),de","ld ($044d17),de","ld ($000000),de",main.asm,"LD      (TOP),DE		; Adjust TOP"
7644,7644,7800,04381c,04384c,pop hl,pop hl,pop hl,main.asm,POP     HL
7645,7645,7801,04381d,04384d,pop de,pop de,pop de,main.asm,POP     DE
7646,7646,7802,04381e,04384e,ret,ret,ret,main.asm,RET
7647,7647,7803,04381f,04384f,"ld de,($044d14)","ld de,($044d14)","ld de,($000000)",main.asm,"LOAD0: 			LD      DE,(PAGE_)		; DE: Beginning of BASIC program area"
7648,7648,7804,043824,043854,"ld hl,$ffff00","ld hl,$ffff00","ld hl,$000000",main.asm,"LD      HL,-256"
7649,7649,7805,043828,043858,"add hl,sp","add hl,sp","add hl,sp",main.asm,"ADD     HL,SP"
7650,7650,7806,043829,043859,"sbc hl,de","sbc hl,de","sbc hl,de",main.asm,"SBC     HL,DE           	; Find available space"
7651,7651,7807,04382b,04385b,"ld b,h","ld b,h","ld b,h",main.asm,"LD      B,H"
7652,7652,7808,04382c,04385c,"ld c,l","ld c,l","ld c,l",main.asm,"LD      C,L"
7653,7653,7809,04382d,04385d,"ld hl,$044a00","ld hl,$044a00","ld hl,$000000",main.asm,"LD      HL,ACCS"
7654,7654,7810,043831,043861,call $044194,call $0441d5,call $000000,main.asm,CALL    OSLOAD          	; Call the OSLOAD function in patch
7655,7655,7811,043835,043865,"call nc,$04386c","call nc,$04389c","call nc,$000000",main.asm,"CALL    NC,NEWIT		; If NC then NEW"
7656,7656,7812,043839,043869,"ld a,$00","ld a,$00","ld a,$00",main.asm,"LD      A,0"
7657,7657,7813,04383b,04386b,"jp nc,$043760","jp nc,$043790","jp nc,$000000",main.asm,"JP      NC,ERROR_        	; And trigger a ""No room"" error, otherwise..."
7658,7658,7814,04383f,04386f,call $04384b,call $04387b,call $000000,main.asm,CLEAN:			CALL    SETTOP			; Set TOP sysvar
7659,7659,7815,043843,043873,dec hl,dec hl,dec hl,main.asm,DEC     HL			; Write out the end of program markers
7660,7660,7816,043844,043874,"ld (hl),$ff","ld (hl),$ff","ld (hl),$00",main.asm,"LD      (HL),-1"
7661,7661,7817,043846,043876,dec hl,dec hl,dec hl,main.asm,DEC     HL
7662,7662,7818,043847,043877,"ld (hl),$ff","ld (hl),$ff","ld (hl),$00",main.asm,"LD      (HL),-1"
7663,7663,7819,043849,043879,jr $+$2d,jr $+$2d,jr $+$00,main.asm,JR      CLEAR			; Clear all dynamic variables and function/procedure pointers
7664,7664,7820,04384b,04387b,"ld hl,($044d14)","ld hl,($044d14)","ld hl,($000000)",main.asm,"SETTOP:			LD      HL,(PAGE_)		; Start at beginning of BASIC program area"
7665,7665,7821,04384f,04387f,"ld bc,$000000","ld bc,$000000","ld bc,$000000",main.asm,"LD	BC, 0			; BC: 0"
7666,7666,7822,043853,043883,"ld a,$0d","ld a,$0d","ld a,$00",main.asm,"LD      A,CR			; End of line marker"
7667,7667,7823,043855,043885,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,"SETOP1:			LD      C,(HL)			; BC: Get first byte of program line (line length)"
7668,7668,7824,043856,043886,inc c,inc c,inc c,main.asm,INC     C			; Check for zero
7669,7669,7825,043857,043887,dec c,dec c,dec c,main.asm,DEC     C
7670,7670,7826,043858,043888,"jr z,$+$0c","jr z,$+$0c","jr z,$+$00",main.asm,"JR      Z,SETOP2		; If it is zero, we've reached the end"
7671,7671,7827,04385a,04388a,"add hl,bc","add hl,bc","add hl,bc",main.asm,"ADD     HL,BC			; Skip to next line"
7672,7672,7828,04385b,04388b,dec hl,dec hl,dec hl,main.asm,DEC     HL			; Check end of previous line
7673,7673,7829,04385c,04388c,cp (hl),cp (hl),cp (hl),main.asm,CP      (HL)
7674,7674,7830,04385d,04388d,inc hl,inc hl,inc hl,main.asm,INC     HL
7675,7675,7831,04385e,04388e,"jr z,$-$09","jr z,$-$09","jr z,$-$00",main.asm,"JR      Z,SETOP1		; If CR then loop"
7676,7676,7832,043860,043890,jp $0436f8,jp $043728,jp $000000,main.asm,"JP      BAD			; If anything else, then something has gone wrong - trip a Bad Program error"
7677,7677,7833,043864,043894,inc hl,inc hl,inc hl,main.asm,"SETOP2:			INC     HL             		; Skip the 3 byte end of program marker (&00, &FF, &FF)"
7678,7678,7834,043865,043895,inc hl,inc hl,inc hl,main.asm,INC     HL			; NB: Called from NEWIT
7679,7679,7835,043866,043896,inc hl,inc hl,inc hl,main.asm,INC     HL
7680,7680,7836,043867,043897,"ld ($044d17),hl","ld ($044d17),hl","ld ($000000),hl",main.asm,"LD      (TOP),HL		; Store in TOP sysvar"
7681,7681,7837,04386b,04389b,ret,ret,ret,main.asm,RET
7682,7682,7838,04386c,04389c,"ld hl,($044d14)","ld hl,($044d14)","ld hl,($000000)",main.asm,"NEWIT:			LD      HL,(PAGE_)		; HL: First byte of BASIC program area"
7683,7683,7839,043870,0438a0,"ld (hl),$00","ld (hl),$00","ld (hl),$00",main.asm,"LD      (HL),0			; Stick a 0 in there"
7684,7684,7840,043872,0438a2,call $043864,call $043894,call $000000,main.asm,CALL    SETOP2			; Skip three bytes to get to end of empty BASIC program area and set TOP sysvar
7685,7685,7841,043876,0438a6,push hl,push hl,push hl,main.asm,CLEAR:			PUSH    HL			; Stack the BASIC program pointer
7686,7686,7842,043877,0438a7,"ld hl,($044d17)","ld hl,($044d17)","ld hl,($000000)",main.asm,"LD      HL,(TOP)		; Get the TOP sysvar - first available byte after BASIC"
7687,7687,7843,04387b,0438ab,"ld ($044d1a),hl","ld ($044d1a),hl","ld ($000000),hl",main.asm,"LD      (LOMEM),HL		; Set the LOMEM sysvar"
7688,7688,7844,04387f,0438af,"ld ($044d1d),hl","ld ($044d1d),hl","ld ($000000),hl",main.asm,"LD      (FREE),HL		; And the FREE sysvar with that value"
7689,7689,7845,043883,0438b3,"ld hl,$044c6c","ld hl,$044c6c","ld hl,$000000",main.asm,"LD      HL,DYNVAR		; Get the pointer to the dynamic variable pointers buffer in RAM"
7690,7690,7846,043887,0438b7,push bc,push bc,push bc,main.asm,PUSH    BC
7691,7691,7847,043888,0438b8,"ld b,$a8","ld b,$a8","ld b,$00",main.asm,"LD      B,54+2*3		; ez80asm doesn't do () in expressions"
7692,7692,7848,04388a,0438ba,"ld (hl),$00","ld (hl),$00","ld (hl),$00",main.asm,"CLEAR1:			LD      (HL),0			; Clear the dynamic variable pointers"
7693,7693,7849,04388c,0438bc,inc hl,inc hl,inc hl,main.asm,INC     HL
7694,7694,7850,04388d,0438bd,djnz $-$03,djnz $-$03,djnz $-$00,main.asm,DJNZ    CLEAR1
7695,7695,7851,04388f,0438bf,pop bc,pop bc,pop bc,main.asm,POP     BC
7696,7696,7852,043890,0438c0,pop hl,pop hl,pop hl,main.asm,POP     HL			; Restore the BASIC program pointer
7697,7697,7853,043891,0438c1,ret,ret,ret,main.asm,RET
7698,7698,7854,043892,0438c2,push hl,push hl,push hl,main.asm,LISTIT:			PUSH    HL			; Stack the address of the line
7699,7699,7855,043893,0438c3,"ex de,hl","ex de,hl","ex de,hl",main.asm,"EX      DE,HL			; HL: Line number"
7700,7700,7856,043894,0438c4,push bc,push bc,push bc,main.asm,PUSH    BC
7701,7701,7857,043895,0438c5,call $0439fb,call $043a2b,call $000000,main.asm,CALL    PBCD			; Print the line number
7702,7702,7858,043899,0438c9,pop bc,pop bc,pop bc,main.asm,POP     BC
7703,7703,7859,04389a,0438ca,pop hl,pop hl,pop hl,main.asm,POP     HL			; HL: Address of the first token/character
7704,7704,7860,04389b,0438cb,"ld a,(hl)","ld a,(hl)","ld a,(hl)",main.asm,"LD      A,(HL)			; Fetch the token"
7705,7705,7861,04389c,0438cc,cp $ed,cp $ed,cp $00,main.asm,CP      NEXT			; Is it NEXT...
7706,7706,7862,04389e,0438ce,"call z,$043928","call z,$043958","call z,$000000",main.asm,"CALL    Z,INDENT		; Yes, so indent in"
7707,7707,7863,0438a2,0438d2,cp $fd,cp $fd,cp $00,main.asm,CP      UNTIL			; Or is it UNTIL...
7708,7708,7864,0438a4,0438d4,"call z,$043928","call z,$043958","call z,$000000",main.asm,"CALL    Z,INDENT		; Yes, so indent in"
7709,7709,7865,0438a8,0438d8,exx,exx,exx,main.asm,EXX
7710,7710,7866,0438a9,0438d9,"ld a,$20","ld a,$20","ld a,$00",main.asm,"LD      A,' '"
7711,7711,7867,0438ab,0438db,"bit 0,(ix)","bit 0,(ix)","bit 0,(ix)",main.asm,"BIT     0,(IX)			; If BIT 0 of LISTON is set"
7712,7712,7868,0438af,0438df,"call nz,$04394f","call nz,$04397f","call nz,$000000",main.asm,"CALL    NZ,OUTCHR		; Then print a space after the line number"
7713,7713,7869,0438b3,0438e3,"ld a,b","ld a,b","ld a,b",main.asm,"LD      A,B			; Fetch the FOR/NEXT indent level"
7714,7714,7870,0438b4,0438e4,"add a,a","add a,a","add a,a",main.asm,"ADD     A,A			; Multiply by 2"
7715,7715,7871,0438b5,0438e5,"bit 1,(ix)","bit 1,(ix)","bit 1,(ix)",main.asm,"BIT     1,(IX)			; If BIT 1 of LISTON is set"
7716,7716,7872,0438b9,0438e9,"call nz,$0417ef","call nz,$041819","call nz,$000000",main.asm,"CALL    NZ,FILL			; Then print the FOR/NEXT indent"
7717,7717,7873,0438bd,0438ed,"ld a,c","ld a,c","ld a,c",main.asm,"LD      A,C			; Fetch the REPEAT/UNTIL indent level"
7718,7718,7874,0438be,0438ee,"add a,a","add a,a","add a,a",main.asm,"ADD     A,A			; Multiply by 2"
7719,7719,7875,0438bf,0438ef,"bit 2,(ix)","bit 2,(ix)","bit 2,(ix)",main.asm,"BIT     2,(IX)			; If BIT 2 of LISTON is set"
7720,7720,7876,0438c3,0438f3,"call nz,$0417ef","call nz,$041819","call nz,$000000",main.asm,"CALL    NZ,FILL			; Then print the REPEAT/UNTIL indent"
7721,7721,7877,0438c7,0438f7,exx,exx,exx,main.asm,EXX
7722,7722,7878,0438c8,0438f8,"ld a,(hl)","ld a,(hl)","ld a,(hl)",main.asm,"LD      A,(HL)			; Fetch the token"
7723,7723,7879,0438c9,0438f9,cp $e3,cp $e3,cp $00,main.asm,CP      FOR			; Is it FOR?
7724,7724,7880,0438cb,0438fb,"call z,$043928","call z,$043958","call z,$000000",main.asm,"CALL    Z,INDENT		; Yes, so indent"
7725,7725,7881,0438cf,0438ff,cp $f5,cp $f5,cp $00,main.asm,CP      REPEAT			; Is it REPEAT?
7726,7726,7882,0438d1,043901,"call z,$043928","call z,$043958","call z,$000000",main.asm,"CALL    Z,INDENT		; Yes, so indent"
7727,7727,7883,0438d5,043905,"ld e,$00","ld e,$00","ld e,$00",main.asm,"LD      E,0			; E: The quote counter - reset to 0"
7728,7728,7884,0438d7,043907,"ld a,(hl)","ld a,(hl)","ld a,(hl)",main.asm,"LIST8:			LD      A,(HL)			; Fetch a character / token byte"
7729,7729,7885,0438d8,043908,inc hl,inc hl,inc hl,main.asm,INC     HL
7730,7730,7886,0438d9,043909,cp $0d,cp $0d,cp $00,main.asm,CP      CR			; Is it end of line?
7731,7731,7887,0438db,04390b,"jr z,$+$0d","jr z,$+$0d","jr z,$+$00",main.asm,"JR      Z,LISTE			; Yes, so finish (DB: Used to jump to CRLF, modified for *EDIT)"
7732,7732,7888,0438dd,04390d,cp $22,cp $22,cp $00,main.asm,CP      34			; Is it a quote character?
7733,7733,7889,0438df,04390f,"jr nz,$+$03","jr nz,$+$03","jr nz,$+$00",main.asm,"JR      NZ,LIST7		; No, so skip to next bit"
7734,7734,7890,0438e1,043911,inc e,inc e,inc e,main.asm,INC     E			; Otherwise increment quote counter
7735,7735,7891,0438e2,043912,call $043917,call $043947,call $000000,main.asm,LIST7:			CALL    LOUT			; Output the character / token
7736,7736,7892,0438e6,043916,jr $-$0f,jr $-$0f,jr $-$00,main.asm,JR      LIST8			; And repeat
7737,7737,7893,0438e8,043918,"bit 3,(ix)","bit 3,(ix)","bit 3,(ix)",main.asm,"LISTE:			BIT 	3,(IX)			; Are we printing to buffer?"
7738,7738,7894,0438ec,04391c,"jr z,$+$5b","jr z,$+$5b","jr z,$+$00",main.asm,"JR	Z, CRLF			; Yes, so print a CRLF"
7739,7739,7895,0438ee,04391e,xor a,xor a,xor a,main.asm,XOR	A			; Otherwise print a NUL (0)
7740,7740,7896,0438ef,04391f,jp $043f00,jp $043f30,jp $000000,main.asm,JP	OSWRCH
7741,7741,7897,0438f3,043923,push hl,push hl,push hl,main.asm,PRLINO:			PUSH    HL			; Swap HL and IY
7742,7742,7898,0438f4,043924,pop iy,pop iy,pop iy,main.asm,POP     IY			; IY: Pointer to the line number
7743,7743,7899,0438f6,043926,push bc,push bc,push bc,main.asm,PUSH    BC
7744,7744,7900,0438f7,043927,call $0408e6,call $0408e6,call $000000,main.asm,CALL    DECODE			; Decode
7745,7745,7901,0438fb,04392b,pop bc,pop bc,pop bc,main.asm,POP     BC
7746,7746,7902,0438fc,04392c,exx,exx,exx,main.asm,EXX
7747,7747,7903,0438fd,04392d,push bc,push bc,push bc,main.asm,PUSH    BC
7748,7748,7904,0438fe,04392e,call $0439f7,call $043a27,call $000000,main.asm,CALL    PBCDL			; Output the line number
7749,7749,7905,043902,043932,pop bc,pop bc,pop bc,main.asm,POP     BC
7750,7750,7906,043903,043933,exx,exx,exx,main.asm,EXX
7751,7751,7907,043904,043934,push iy,push iy,push iy,main.asm,PUSH    IY			; Swap HL and IY
7752,7752,7908,043906,043936,pop hl,pop hl,pop hl,main.asm,POP     HL			; HL: Pointer to the next character in the line
7753,7753,7909,043907,043937,ret,ret,ret,main.asm,RET
7754,7754,7910,043908,043938,call $04396c,call $04399c,call $000000,main.asm,PRREM:			CALL	OUT_			; Output the REM token
7755,7755,7911,04390c,04393c,"ld a,(hl)","ld a,(hl)","ld a,(hl)",main.asm,"@@:			LD	A, (HL)			; Fetch the character"
7756,7756,7912,04390d,04393d,cp $0d,cp $0d,cp $00,main.asm,"CP	CR			; If it is end of line, then"
7757,7757,7913,04390f,04393f,ret z,ret z,ret z,main.asm,RET	Z			; we have finished
7758,7758,7914,043910,043940,call $04394f,call $04397f,call $000000,main.asm,CALL	OUTCHR			; Ouput the character
7759,7759,7915,043914,043944,inc hl,inc hl,inc hl,main.asm,INC	HL
7760,7760,7916,043915,043945,jr $-$09,jr $-$09,jr $-$00,main.asm,JR	@B			; And loop
7761,7761,7917,043917,043947,"bit 0,e","bit 0,e","bit 0,e",main.asm,"LOUT:			BIT     0,E			; If the quote counter is odd (bit 1 set) then"
7762,7762,7918,043919,043949,"jr nz,$+$36","jr nz,$+$36","jr nz,$+$00",main.asm,"JR      NZ,OUTCHR		; don't tokenise, just output the character"
7763,7763,7919,04391b,04394b,cp $f4,cp $f4,cp $00,main.asm,CP	REM			; DB: Is it REM
7764,7764,7920,04391d,04394d,"jr z,$-$15","jr z,$-$15","jr z,$-$00",main.asm,"JR	Z, PRREM		; DB: Yes so jump to the special case for REM"
7765,7765,7921,04391f,04394f,cp $8d,cp $8d,cp $00,main.asm,CP      LINO_MN			; Is it a line number (following GOTO/GOSUB etc)?
7766,7766,7922,043921,043951,"jr z,$-$2e","jr z,$-$2e","jr z,$-$00",main.asm,"JR      Z,PRLINO		; Yes, so decode and print the line number"
7767,7767,7923,043923,043953,call $04396c,call $04399c,call $000000,main.asm,CALL    OUT_			; Output a character / keyword
7768,7768,7924,043927,043957,"ld a,(hl)","ld a,(hl)","ld a,(hl)",main.asm,"LD      A,(HL)			; Fetch the next character"
7769,7769,7925,043928,043958,exx,exx,exx,main.asm,INDENT:			EXX
7770,7770,7926,043929,043959,cp $e3,cp $e3,cp $00,main.asm,CP      FOR			; If the token is FOR
7771,7771,7927,04392b,04395b,"jr z,$+$0b","jr z,$+$0b","jr z,$+$00",main.asm,"JR      Z,IND1			; Then INC B"
7772,7772,7928,04392d,04395d,cp $ed,cp $ed,cp $00,main.asm,CP      NEXT			; If it is NEXT
7773,7773,7929,04392f,04395f,"jr nz,$+$08","jr nz,$+$08","jr nz,$+$00",main.asm,"JR      NZ,IND2_		; Then..."
7774,7774,7930,043931,043961,dec b,dec b,dec b,main.asm,DEC     B			; DEC B
7775,7775,7931,043932,043962,"jp p,$043937","jp p,$043967","jp p,$000000",main.asm,"JP      P,IND2_			; If we have gone below 0 then"
7776,7776,7932,043936,043966,inc b,inc b,inc b,main.asm,IND1:			INC     B			; Increment back to 0
7777,7777,7933,043937,043967,cp $f5,cp $f5,cp $00,main.asm,IND2_:			CP      REPEAT			; If the token is REPEAT
7778,7778,7934,043939,043969,"jr z,$+$0b","jr z,$+$0b","jr z,$+$00",main.asm,"JR      Z,IND3			; Then INC C"
7779,7779,7935,04393b,04396b,cp $fd,cp $fd,cp $00,main.asm,CP      UNTIL			; If it is UNTIL
7780,7780,7936,04393d,04396d,"jr nz,$+$08","jr nz,$+$08","jr nz,$+$00",main.asm,"JR      NZ,IND4			; Then..."
7781,7781,7937,04393f,04396f,dec c,dec c,dec c,main.asm,DEC     C			; DEC C
7782,7782,7938,043940,043970,"jp p,$043945","jp p,$043975","jp p,$000000",main.asm,"JP      P,IND4			; If we have gone below 0 then"
7783,7783,7939,043944,043974,inc c,inc c,inc c,main.asm,IND3:			INC     C			; Incremet back to 0
7784,7784,7940,043945,043975,exx,exx,exx,main.asm,IND4:			EXX
7785,7785,7941,043946,043976,ret,ret,ret,main.asm,RET
7786,7786,7942,043947,043977,"ld a,$0d","ld a,$0d","ld a,$00",main.asm,"CRLF:			LD      A,CR			; Output CR"
7787,7787,7943,043949,043979,call $04394f,call $04397f,call $000000,main.asm,CALL    OUTCHR
7788,7788,7944,04394d,04397d,"ld a,$0a","ld a,$0a","ld a,$00",main.asm,"LD      A,LF			; Output LF"
7789,7789,7945,04394f,04397f,call $043f00,call $043f30,call $000000,main.asm,OUTCHR:			CALL    OSWRCH			; Output the character in A
7790,7790,7946,043953,043983,sub $0d,sub $0d,sub $00,main.asm,SUB     CR			; Check for CR
7791,7791,7947,043955,043985,"jr z,$+$08","jr z,$+$08","jr z,$+$00",main.asm,"JR      Z,CARRET		; If it is CR then A will be 0, this will clear the count"
7792,7792,7948,043957,043987,ret c,ret c,ret c,main.asm,"RET     C              		; If it is less than CR, it is non-printing, so don't increment the count"
7793,7793,7949,043958,043988,"ld a,($044d3d)","ld a,($044d3d)","ld a,($000000)",main.asm,"LD      A,(COUNT)		; Increment the count"
7794,7794,7950,04395c,04398c,inc a,inc a,inc a,main.asm,INC     A
7795,7795,7951,04395d,04398d,"ld ($044d3d),a","ld ($044d3d),a","ld ($000000),a",main.asm,"CARRET:			LD      (COUNT),A		; Store the new count value"
7796,7796,7952,043961,043991,ret z,ret z,ret z,main.asm,RET     Z			; Return if the count has wrapped to 0
7797,7797,7953,043962,043992,push hl,push hl,push hl,main.asm,PUSH    HL			; Now check if count = print width
7798,7798,7954,043963,043993,"ld hl,($044d3e)","ld hl,($044d3e)","ld hl,($000000)",main.asm,"LD      HL,(WIDTH)		; Get the print width; it's a byte value, so"
7799,7799,7955,043967,043997,cp l,cp l,cp l,main.asm,CP      L			; L is the width. Compare it with count.
7800,7800,7956,043968,043998,pop hl,pop hl,pop hl,main.asm,POP     HL
7801,7801,7957,043969,043999,ret nz,ret nz,ret nz,main.asm,"RET     NZ			; If we've not hit print width, then just return"
7802,7802,7958,04396a,04399a,jr $-$23,jr $-$23,jr $-$00,main.asm,JR      CRLF			; Otherwise output CRLF
7803,7803,7959,04396c,04399c,cp $8a,cp $8a,cp $00,main.asm,OUT_:			CP      138			; Neat trick to do condition: If A >= 10 or < 128 then PE flag is set
7804,7804,7960,04396e,04399e,"jp pe,$04394f","jp pe,$04397f","jp pe,$000000",main.asm,"JP      PE,OUTCHR		; If so, then it's a character, so just output it"
7805,7805,7961,043972,0439a2,push bc,push bc,push bc,main.asm,PUSH    BC			; Preserve BC and HL
7806,7806,7962,043973,0439a3,push hl,push hl,push hl,main.asm,PUSH    HL
7807,7807,7963,043974,0439a4,"ld hl,$043168","ld hl,$043198","ld hl,$000000",main.asm,"LD      HL,KEYWDS		; The list of tokens and keywords"
7808,7808,7964,043978,0439a8,"ld bc,$0002df","ld bc,$0002df","ld bc,$000000",main.asm,"LD      BC,KEYWDL		; The length of the keyword list"
7809,7809,7965,04397c,0439ac,cpir,cpir,cpir,main.asm,CPIR				; We can just do a straight CPIR as the token characters are unique in the list
7810,7810,7966,04397e,0439ae,"ld a,(hl)","ld a,(hl)","ld a,(hl)",main.asm,"TOKEN1:			LD      A,(HL)			; Fetch the character"
7811,7811,7967,04397f,0439af,inc hl,inc hl,inc hl,main.asm,INC     HL			; Increment to the next byte in the token table
7812,7812,7968,043980,0439b0,cp $8a,cp $8a,cp $00,main.asm,"CP      138			; If A >= 10 or < 128, i.e. we've not hit the token code for the next token"
7813,7813,7969,043982,0439b2,push af,push af,push af,main.asm,PUSH    AF			; Then...
7814,7814,7970,043983,0439b3,"call pe,$04394f","call pe,$04397f","call pe,$000000",main.asm,"CALL    PE,OUTCHR		; Output the character..."
7815,7815,7971,043987,0439b7,pop af,pop af,pop af,main.asm,POP     AF			;
7816,7816,7972,043988,0439b8,"jp pe,$04397e","jp pe,$0439ae","jp pe,$000000",main.asm,"JP      PE,TOKEN1		; And loop to the next character"
7817,7817,7973,04398c,0439bc,pop hl,pop hl,pop hl,main.asm,"POP     HL			; Done, so tidy up the stack and exit"
7818,7818,7974,04398d,0439bd,pop bc,pop bc,pop bc,main.asm,POP     BC
7819,7819,7975,04398e,0439be,ret,ret,ret,main.asm,RET
7820,7820,7976,04398f,0439bf,"ex de,hl","ex de,hl","ex de,hl",main.asm,"FINDL:			EX      DE,HL			; DE: Line number (binary)"
7821,7821,7977,043990,0439c0,"ld hl,($044d14)","ld hl,($044d14)","ld hl,($000000)",main.asm,"LD      HL,(PAGE_)		; HL: Top of BASIC program area"
7822,7822,7978,043994,0439c4,xor a,xor a,xor a,main.asm,XOR     A               	;  A: 0
7823,7823,7979,043995,0439c5,cp (hl),cp (hl),cp (hl),main.asm,CP      (HL)			; Check for end of program marker
7824,7824,7980,043996,0439c6,inc a,inc a,inc a,main.asm,INC     A			;  A: 1
7825,7825,7981,043997,0439c7,ret nc,ret nc,ret nc,main.asm,RET     NC			; Return with 1 if 0
7826,7826,7982,043998,0439c8,xor a,xor a,xor a,main.asm,XOR     A               	; Clear the carry flag
7827,7827,7983,043999,0439c9,"ld bc,$000000","ld bc,$000000","ld bc,$000000",main.asm,"LD	BC, 0			; BC: 0"
7828,7828,7984,04399d,0439cd,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,"FINDL1:			LD      C,(HL)			;  C: The line length"
7829,7829,7985,04399e,0439ce,push hl,push hl,push hl,main.asm,PUSH    HL			; Stack the current program counter
7830,7830,7986,04399f,0439cf,inc hl,inc hl,inc hl,main.asm,INC     HL			; Skip to the line number bytes
7831,7831,7987,0439a0,0439d0,"ld a,(hl)","ld a,(hl)","ld a,(hl)",main.asm,"LD      A,(HL)			; Fetch the line number (in binary) from the BASIC line in HL"
7832,7832,7988,0439a1,0439d1,inc hl,inc hl,inc hl,main.asm,INC     HL
7833,7833,7989,0439a2,0439d2,"ld h,(hl)","ld h,(hl)","ld h,(hl)",main.asm,"LD      H,(HL)"
7834,7834,7990,0439a3,0439d3,"ld l,a","ld l,a","ld l,a",main.asm,"LD      L,A"
7835,7835,7991,0439a4,0439d4,"sbc.sil hl,de","sbc.sil hl,de","sbc.sil hl,de",main.asm,"SBC.S   HL,DE			; Compare with the line number we're searching for"
7836,7836,7992,0439a7,0439d7,pop hl,pop hl,pop hl,main.asm,POP     HL			; Get the current program counter
7837,7837,7993,0439a8,0439d8,ret nc,ret nc,ret nc,main.asm,RET     NC              	; Then return if found or past (Z flag will be set if line number matches)
7838,7838,7994,0439a9,0439d9,"add hl,bc","add hl,bc","add hl,bc",main.asm,"ADD     HL,BC			; Skip to the next line (B was set to 0 before the loop was entered)"
7839,7839,7995,0439aa,0439da,jp $04399d,jp $0439cd,jp $000000,main.asm,JP      FINDL1			; And loop
7840,7840,7996,0439ae,0439de,"ld bc,$000000","ld bc,$000000","ld bc,$000000",main.asm,"SETLIN:			LD	BC, 0			; Zero BC for later"
7841,7841,7997,0439b2,0439e2,"ld de,($044d35)","ld de,($044d35)","ld de,($000000)",main.asm,"LD      DE, (ERRLIN)		; DE: Address of line"
7842,7842,7998,0439b7,0439e7,"ld hl,($044d14)","ld hl,($044d14)","ld hl,($000000)",main.asm,"LD      HL, (PAGE_)		; HL: Start of user program area"
7843,7843,7999,0439bb,0439eb,or a,or a,or a,main.asm,OR      A			; Do a 24 bit compare without destroying HL
7844,7844,8000,0439bc,0439ec,"sbc hl,de","sbc hl,de","sbc hl,de",main.asm,"SBC     HL, DE			;  Z: DE = HL, NC: DE <= HL"
7845,7845,8001,0439be,0439ee,"add hl,de","add hl,de","add hl,de",main.asm,"ADD     HL, DE			;  C: DE > HL"
7846,7846,8002,0439bf,0439ef,"jr nc,$+$1d","jr nc,$+$1d","jr nc,$+$00",main.asm,"JR      NC, SET3		; So skip, as the address is less than or equal to the top of program area"
7847,7847,8003,0439c1,0439f1,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,"SET1:			LD      C, (HL)			; Get the length of the line; zero indicates the end of the BASIC program"
7848,7848,8004,0439c2,0439f2,inc c,inc c,inc c,main.asm,INC     C			; This is a way to check for zero without using the accumulator
7849,7849,8005,0439c3,0439f3,dec c,dec c,dec c,main.asm,"DEC     C			; If it is zero, then..."
7850,7850,8006,0439c4,0439f4,"jr z,$+$18","jr z,$+$18","jr z,$+$00",main.asm,"JR      Z, SET3			; We've reached the end of the current BASIC program, not found the line"
7851,7851,8007,0439c6,0439f6,"add hl,bc","add hl,bc","add hl,bc",main.asm,"ADD     HL, BC			; Skip to the next line (we set B to 0 at the top of this subroutine)"
7852,7852,8008,0439c7,0439f7,"sbc hl,de","sbc hl,de","sbc hl,de",main.asm,"SBC     HL, DE			; Do a 24-bit compare; the previous ADD will have cleared the carry flag"
7853,7853,8009,0439c9,0439f9,"add hl,de","add hl,de","add hl,de",main.asm,"ADD     HL, DE"
7854,7854,8010,0439ca,0439fa,"jr c,$-$09","jr c,$-$09","jr c,$-$00",main.asm,"JR      C, SET1			; Loop whilst DE (the address to search for) is > HL (the current line)"
7855,7855,8011,0439cc,0439fc,"sbc hl,bc","sbc hl,bc","sbc hl,bc",main.asm,"SBC     HL, BC			; We've found it, so back up to the beginning of the line"
7856,7856,8012,0439ce,0439fe,inc hl,inc hl,inc hl,main.asm,INC     HL			; Skip the length counter
7857,7857,8013,0439cf,0439ff,"ld de,$000000","ld de,$000000","ld de,$000000",main.asm,"LD	DE, 0			; Zero DE"
7858,7858,8014,0439d3,043a03,"ld e,(hl)","ld e,(hl)","ld e,(hl)",main.asm,"LD      E, (HL)          	; Fetch the line number"
7859,7859,8015,0439d4,043a04,inc hl,inc hl,inc hl,main.asm,INC     HL
7860,7860,8016,0439d5,043a05,"ld d,(hl)","ld d,(hl)","ld d,(hl)",main.asm,"LD      D, (HL)"
7861,7861,8017,0439d6,043a06,"ex de,hl","ex de,hl","ex de,hl",main.asm,"EX      DE, HL			; HL: The line number"
7862,7862,8018,0439d7,043a07,"ld ($044d23),hl","ld ($044d23),hl","ld ($000000),hl",main.asm,"SET2:			LD      (LINENO), HL		; Store in the variable LINENO"
7863,7863,8019,0439db,043a0b,ret,ret,ret,main.asm,RET
7864,7864,8020,0439dc,043a0c,"ld hl,$000000","ld hl,$000000","ld hl,$000000",main.asm,"SET3:			LD      HL, 0			; We've not found the line at this point so"
7865,7865,8021,0439e0,043a10,jr $-$09,jr $-$09,jr $-$00,main.asm,JR      SET2			; Set LINENO to 0
7866,7866,8022,0439e2,043a12,"ld hl,($044d23)","ld hl,($044d23)","ld hl,($000000)",main.asm,"SAYLN:			LD      HL,(LINENO)		; Get the LINENO sysvar"
7867,7867,8023,0439e6,043a16,"ld a,h","ld a,h","ld a,h",main.asm,"LD      A,H			; If it is zero then"
7868,7868,8024,0439e7,043a17,or l,or l,or l,main.asm,OR      L
7869,7869,8025,0439e8,043a18,ret z,ret z,ret z,main.asm,RET     Z			; Don't need to do anything; return with F:C set to 0
7870,7870,8026,0439e9,043a19,call $043d90,call $043dc0,call $000000,main.asm,CALL    TELL			; Output the error message
7871,7871,8027,0439ed,043a1d,"jr nz,$+$63","jr nz,$+$63","jr nz,$+$00",main.asm,"DB    	"" at line "", 0"
7872,7872,8028,0439ef,043a1f,"ld (hl),h","ld (hl),h","ld (hl),h",main.asm,
7873,7873,8029,0439f0,043a20,"jr nz,$+$6e","jr nz,$+$6e","jr nz,$+$00",main.asm,
7873,7873,8029,0439f0,043a20,"jr nz,$+$6e","jr nz,$+$6e","jr nz,$+$00",main.asm,
7874,7874,8030,0439f2,043a22,"ld l,c","ld l,c","ld l,c",main.asm,
7875,7875,8031,0439f3,043a23,"ld l,(hl)","ld l,(hl)","ld l,(hl)",main.asm,
7875,7875,8031,0439f3,043a23,"ld l,(hl)","ld l,(hl)","ld l,(hl)",main.asm,
7876,7876,8032,0439f4,043a24,"ld h,l","ld h,l","ld h,l",main.asm,
7877,7877,8033,0439f5,043a25,"jr nz,$+$02","jr nz,$+$02","jr nz,$+$00",,
7878,7878,8034,0439f7,043a27,"ld c,$00","ld c,$00","ld c,$00",main.asm,"PBCDL:			LD      C,0			; C: Leading character (NUL)"
7879,7879,8035,0439f9,043a29,jr $+$04,jr $+$04,jr $+$00,main.asm,JR      PBCD0			; Output the line number; return with F:C set to 1
7880,7880,8036,0439fb,043a2b,"ld c,$20","ld c,$20","ld c,$00",main.asm,"PBCD:			LD      C,' '			; C: Leading character ("" "")"
7881,7881,8037,0439fd,043a2d,"ld b,$05","ld b,$05","ld b,$00",main.asm,"PBCD0:			LD      B,5			; Number of digits in result"
7882,7882,8038,0439ff,043a2f,"ld de,$002710","ld de,$002710","ld de,$000000",main.asm,"LD      DE,10000		; Start off with the 10,000 column"
7883,7883,8039,043a03,043a33,xor a,xor a,xor a,main.asm,PBCD1:			XOR     A			; Counter
7884,7884,8040,043a04,043a34,"sbc hl,de","sbc hl,de","sbc hl,de",main.asm,"PBCD2:			SBC     HL,DE			; Loop and count how many 10,000s we have"
7885,7885,8041,043a06,043a36,inc a,inc a,inc a,main.asm,INC     A
7886,7886,8042,043a07,043a37,"jr nc,$-$03","jr nc,$-$03","jr nc,$-$00",main.asm,"JR      NC,PBCD2"
7887,7887,8043,043a09,043a39,"add hl,de","add hl,de","add hl,de",main.asm,"ADD     HL,DE			; The loop overruns by one, so adjust here"
7888,7888,8044,043a0a,043a3a,dec a,dec a,dec a,main.asm,"DEC     A			; A: Number of 10,000s"
7889,7889,8045,043a0b,043a3b,"jr z,$+$06","jr z,$+$06","jr z,$+$00",main.asm,"JR      Z,PBCD3			; If it is 0, then skip the next bit"
7890,7890,8046,043a0d,043a3d,"set 4,c","set 4,c","set 4,c",main.asm,"SET     4,C			; C: Set to '0' ASCII (30h)"
7891,7891,8047,043a0f,043a3f,"set 5,c","set 5,c","set 5,c",main.asm,"SET     5,C"
7892,7892,8048,043a11,043a41,or c,or c,or c,main.asm,"PBCD3:			OR      C			; A is then an ASCII character, or 00h if we've not processed any non-zero digits yet"
7893,7893,8049,043a12,043a42,"call nz,$04394f","call nz,$04397f","call nz,$000000",main.asm,"CALL    NZ,OUTCHR		; If it is not a leading NUL character then output it"
7894,7894,8050,043a16,043a46,"ld a,b","ld a,b","ld a,b",main.asm,"LD      A,B			; If on first transition, skip this"
7895,7895,8051,043a17,043a47,cp $05,cp $05,cp $00,main.asm,CP      5			; TODO: Need to find out why
7896,7896,8052,043a19,043a49,"jr z,$+$08","jr z,$+$08","jr z,$+$00",main.asm,"JR      Z,PBCD4"
7897,7897,8053,043a1b,043a4b,"add hl,hl","add hl,hl","add hl,hl",main.asm,"ADD     HL,HL			; HL x  2 : We shift the number being tested left,"
7898,7898,8054,043a1c,043a4c,"ld d,h","ld d,h","ld d,h",main.asm,"LD      D,H			;         : rather than shifting DE right"
7899,7899,8055,043a1d,043a4d,"ld e,l","ld e,l","ld e,l",main.asm,"LD      E,L			;         : This makes a lot of sense"
7900,7900,8056,043a1e,043a4e,"add hl,hl","add hl,hl","add hl,hl",main.asm,"ADD     HL,HL			; HL x  4"
7901,7901,8057,043a1f,043a4f,"add hl,hl","add hl,hl","add hl,hl",main.asm,"ADD     HL,HL			; HL x  8"
7902,7902,8058,043a20,043a50,"add hl,de","add hl,de","add hl,de",main.asm,"ADD     HL,DE			; HL x 10"
7903,7903,8059,043a21,043a51,"ld de,$0003e8","ld de,$0003e8","ld de,$000000",main.asm,"PBCD4:			LD      DE,1000			; Set the column heading to 1,000s for subsequent runs"
7904,7904,8060,043a25,043a55,djnz $-$22,djnz $-$22,djnz $-$00,main.asm,DJNZ    PBCD1			; Loop until done
7905,7905,8061,043a27,043a57,scf,scf,scf,main.asm,SCF				; SCF set for SAYLN in this module
7906,7906,8062,043a28,043a58,ret,ret,ret,main.asm,RET
7907,7907,8063,043a29,043a59,call $043bae,call $043bde,call $000000,main.asm,PUTVAR:			CALL    CREATE			; Create the variable
7908,7908,8064,043a2d,043a5d,"ld a,(iy)","ld a,(iy)","ld a,(iy)",main.asm,"LD      A,(IY)			; Fetch the next character"
7909,7909,8065,043a30,043a60,cp $28,cp $28,cp $00,main.asm,CP      '('			; Check for bad use of array
7910,7910,8066,043a32,043a62,"jr nz,$+$72","jr nz,$+$72","jr nz,$+$00",main.asm,"JR      NZ,GETVZ        	; It's fine, so set the exit conditions"
7911,7911,8067,043a34,043a64,"ld a,$0e","ld a,$0e","ld a,$00",main.asm,"ARRAY:			LD      A,14            	; Otherwise Error: 'Array'"
7912,7912,8068,043a36,043a66,jp $043760,jp $043790,jp $000000,main.asm,ERROR3:			JP      ERROR_
7913,7913,8069,043a3a,043a6a,"ld a,(iy)","ld a,(iy)","ld a,(iy)",main.asm,"GETVAR:			LD      A,(IY)			; Get the first character"
7914,7914,8070,043a3d,043a6d,cp $24,cp $24,cp $00,main.asm,CP      '$'			; Is it a string?
7915,7915,8071,043a3f,043a6f,"jr z,$+$6b","jr z,$+$6b","jr z,$+$00",main.asm,"JR      Z,GETV4			; Yes, so branch here"
7916,7916,8072,043a41,043a71,cp $21,cp $21,cp $00,main.asm,CP      '!'			; Is it indirection (32-bit)?
7917,7917,8073,043a43,043a73,"jr z,$+$6b","jr z,$+$6b","jr z,$+$00",main.asm,"JR      Z,GETV5			; Yes, so branch here"
7918,7918,8074,043a45,043a75,cp $3f,cp $3f,cp $00,main.asm,CP      '?'			; Is it indirection (8-bit)?
7919,7919,8075,043a47,043a77,"jr z,$+$6b","jr z,$+$6b","jr z,$+$00",main.asm,"JR      Z,GETV6			; Yes, so branch here"
7920,7920,8076,043a49,043a79,call $043b18,call $043b48,call $000000,main.asm,CALL    LOCATE			; Locate the variable
7921,7921,8077,043a4d,043a7d,ret nz,ret nz,ret nz,main.asm,RET     NZ			; And exit here if not found
7922,7922,8078,043a4e,043a7e,"ld a,(iy)","ld a,(iy)","ld a,(iy)",main.asm,"LD      A,(IY)			; Further checks"
7923,7923,8079,043a51,043a81,cp $28,cp $28,cp $00,main.asm,CP      '('             	; Is it an array?
7924,7924,8080,043a53,043a83,"jr nz,$+$49","jr nz,$+$49","jr nz,$+$00",main.asm,"JR      NZ,GETVX        	; No, so exit"
7925,7925,8081,043a55,043a85,push de,push de,push de,main.asm,PUSH    DE              	; Save the variable type (in D)
7926,7926,8082,043a56,043a86,"ld a,(hl)","ld a,(hl)","ld a,(hl)",main.asm,"LD      A,(HL)          	; Fetch the number of dimensions"
7927,7927,8083,043a57,043a87,or a,or a,or a,main.asm,OR      A
7928,7928,8084,043a58,043a88,"jr z,$-$24","jr z,$-$24","jr z,$-$00",main.asm,"JR      Z,ARRAY			; If there are none, then Error: 'Array'"
7929,7929,8085,043a5a,043a8a,inc hl,inc hl,inc hl,main.asm,INC     HL			;
7930,7930,8086,043a5b,043a8b,"ld de,$000000","ld de,$000000","ld de,$000000",main.asm,"LD      DE,0            	; Accumulator"
7931,7931,8087,043a5f,043a8f,push af,push af,push af,main.asm,PUSH    AF
7932,7932,8088,043a60,043a90,inc iy,inc iy,inc iy,main.asm,"INC     IY              	; Skip ""("""
7933,7933,8089,043a62,043a92,jr $+$07,jr $+$07,jr $+$00,main.asm,JR      GETV3
7934,7934,8090,043a64,043a94,push af,push af,push af,main.asm,GETV2:			PUSH    AF
7935,7935,8091,043a65,043a95,call $040a22,call $040a22,call $000000,main.asm,CALL    COMMA
7936,7936,8092,043a69,043a99,push hl,push hl,push hl,main.asm,GETV3:			PUSH    HL
7937,7937,8093,043a6a,043a9a,push de,push de,push de,main.asm,PUSH    DE
7938,7938,8094,043a6b,043a9b,call $04030a,call $04030a,call $000000,main.asm,CALL    EXPRI			; Get the subscript
7939,7939,8095,043a6f,043a9f,exx,exx,exx,main.asm,EXX
7940,7940,8096,043a70,043aa0,pop de,pop de,pop de,main.asm,POP     DE
7941,7941,8097,043a71,043aa1,"ex (sp),hl","ex (sp),hl","ex (sp),hl",main.asm,"EX      (SP),HL"
7942,7942,8098,043a72,043aa2,"ld c,(hl)","ld c,(hl)","ld c,(hl)",main.asm,"LD      C,(HL)"
7943,7943,8099,043a73,043aa3,inc hl,inc hl,inc hl,main.asm,INC     HL
7944,7944,8100,043a74,043aa4,"ld b,(hl)","ld b,(hl)","ld b,(hl)",main.asm,"LD      B,(HL)"
7945,7945,8101,043a75,043aa5,inc hl,inc hl,inc hl,main.asm,INC     HL
7946,7946,8102,043a76,043aa6,"ex (sp),hl","ex (sp),hl","ex (sp),hl",main.asm,"EX      (SP),HL"
7947,7947,8103,043a77,043aa7,"ex de,hl","ex de,hl","ex de,hl",main.asm,"EX      DE,HL"
7948,7948,8104,043a78,043aa8,push de,push de,push de,main.asm,PUSH    DE
7949,7949,8105,043a79,043aa9,call $041872,call $04189c,call $000000,main.asm,CALL    MUL16			; HL=HL*BC
7950,7950,8106,043a7d,043aad,pop de,pop de,pop de,main.asm,POP     DE
7951,7951,8107,043a7e,043aae,"add hl,de","add hl,de","add hl,de",main.asm,"ADD     HL,DE"
7952,7952,8108,043a7f,043aaf,"ex de,hl","ex de,hl","ex de,hl",main.asm,"EX      DE,HL"
7953,7953,8109,043a80,043ab0,or a,or a,or a,main.asm,OR      A
7954,7954,8110,043a81,043ab1,"sbc hl,bc","sbc hl,bc","sbc hl,bc",main.asm,"SBC     HL,BC"
7955,7955,8111,043a83,043ab3,"ld a,$0f","ld a,$0f","ld a,$00",main.asm,"LD      A,15"
7956,7956,8112,043a85,043ab5,"jr nc,$-$4f","jr nc,$-$4f","jr nc,$-$00",main.asm,"JR      NC,ERROR3		; Throw a ""Subscript"" error"
7957,7957,8113,043a87,043ab7,pop hl,pop hl,pop hl,main.asm,POP     HL
7958,7958,8114,043a88,043ab8,pop af,pop af,pop af,main.asm,POP     AF
7959,7959,8115,043a89,043ab9,dec a,dec a,dec a,main.asm,DEC     A               	; Dimension counter
7960,7960,8116,043a8a,043aba,"jr nz,$-$26","jr nz,$-$26","jr nz,$-$00",main.asm,"JR      NZ,GETV2"
7961,7961,8117,043a8c,043abc,call $040a2f,call $040a2f,call $000000,main.asm,CALL    BRAKET          	; Check for closing bracket
7962,7962,8118,043a90,043ac0,pop af,pop af,pop af,main.asm,POP     AF              	; Restore the type
7963,7963,8119,043a91,043ac1,push hl,push hl,push hl,main.asm,PUSH    HL
7964,7964,8120,043a92,043ac2,call $041865,call $04188f,call $000000,main.asm,CALL    X4OR5           	; DE=DE*n
7965,7965,8121,043a96,043ac6,pop hl,pop hl,pop hl,main.asm,POP     HL
7966,7966,8122,043a97,043ac7,"add hl,de","add hl,de","add hl,de",main.asm,"ADD     HL,DE"
7967,7967,8123,043a98,043ac8,"ld d,a","ld d,a","ld d,a",main.asm,"LD      D,A             	; The type"
7968,7968,8124,043a99,043ac9,"ld a,(iy)","ld a,(iy)","ld a,(iy)",main.asm,"LD      A,(IY)"
7969,7969,8125,043a9c,043acc,cp $3f,cp $3f,cp $00,main.asm,GETVX:			CP      '?'
7970,7970,8126,043a9e,043ace,"jr z,$+$20","jr z,$+$20","jr z,$+$00",main.asm,"JR      Z,GETV9"
7971,7971,8127,043aa0,043ad0,cp $21,cp $21,cp $00,main.asm,CP      '!'
7972,7972,8128,043aa2,043ad2,"jr z,$+$18","jr z,$+$18","jr z,$+$00",main.asm,"JR      Z,GETV8"
7973,7973,8129,043aa4,043ad4,push hl,push hl,push hl,main.asm,GETVZ:			PUSH    HL              	; Set exit conditions
7974,7974,8130,043aa5,043ad5,pop ix,pop ix,pop ix,main.asm,POP     IX
7975,7975,8131,043aa7,043ad7,"ld a,d","ld a,d","ld a,d",main.asm,"LD      A,D"
7976,7976,8132,043aa8,043ad8,cp a,cp a,cp a,main.asm,CP      A
7977,7977,8133,043aa9,043ad9,ret,ret,ret,main.asm,RET
7978,7978,8134,043aaa,043ada,"ld a,$80","ld a,$80","ld a,$00",main.asm,"GETV4:			LD      A,128           	; Static strings"
7979,7979,8135,043aac,043adc,jr $+$07,jr $+$07,jr $+$00,main.asm,JR      GETV7
7980,7980,8136,043aae,043ade,"ld a,$04","ld a,$04","ld a,$00",main.asm,"GETV5:			LD      A,4             	; Unary 32-bit indirection"
7981,7981,8137,043ab0,043ae0,jr $+$03,jr $+$03,jr $+$00,main.asm,JR      GETV7
7982,7982,8138,043ab2,043ae2,xor a,xor a,xor a,main.asm,GETV6:			XOR     A               	; Unary 8-bit indirection
7983,7983,8139,043ab3,043ae3,"ld hl,$000000","ld hl,$000000","ld hl,$000000",main.asm,"GETV7:			LD      HL,0"
7984,7984,8140,043ab7,043ae7,push af,push af,push af,main.asm,PUSH    AF
7985,7985,8141,043ab8,043ae8,jr $+$26,jr $+$26,jr $+$00,main.asm,JR      GETV0
7986,7986,8142,043aba,043aea,"ld b,$04","ld b,$04","ld b,$00",main.asm,"GETV8:			LD      B,4             	; Binary 32-bt indirection"
7987,7987,8143,043abc,043aec,jr $+$04,jr $+$04,jr $+$00,main.asm,JR      GETVA
7988,7988,8144,043abe,043aee,"ld b,$00","ld b,$00","ld b,$00",main.asm,"GETV9:			LD      B,0             	; Binary 8-bit indirection"
7989,7989,8145,043ac0,043af0,push hl,push hl,push hl,main.asm,GETVA:			PUSH    HL
7990,7990,8146,043ac1,043af1,pop ix,pop ix,pop ix,main.asm,POP     IX
7991,7991,8147,043ac3,043af3,"ld a,d","ld a,d","ld a,d",main.asm,"LD      A,D            		; Fetch the variable type"
7992,7992,8148,043ac4,043af4,cp $81,cp $81,cp $00,main.asm,CP      129			; Is it a string?
7993,7993,8149,043ac6,043af6,ret z,ret z,ret z,main.asm,"RET     Z               	; Yes, so exit here"
7994,7994,8150,043ac7,043af7,push bc,push bc,push bc,main.asm,PUSH    BC
7995,7995,8151,043ac8,043af8,call $040416,call $040416,call $000000,main.asm,CALL    LOADN           	; Left operand of the binary indirection (var?index or var!index)
7996,7996,8152,043acc,043afc,call $040662,call $040662,call $000000,main.asm,CALL    SFIX
7997,7997,8153,043ad0,043b00,"ld a,l","ld a,l","ld a,l",main.asm,"LD	A,L"
7998,7998,8154,043ad1,043b01,exx,exx,exx,main.asm,EXX
7999,7999,8155,043ad2,043b02,"ld ($044d4a),hl","ld ($044d4a),hl","ld ($000000),hl",main.asm,"LD	(R0+0),HL"
8000,8000,8156,043ad6,043b06,"ld ($044d4c),a","ld ($044d4c),a","ld ($000000),a",main.asm,"LD	(R0+2),A"
8001,8001,8157,043ada,043b0a,"ld hl,($044d4a)","ld hl,($044d4a)","ld hl,($000000)",main.asm,"LD	HL,(R0)			; HL: 24-bit address of the variable in memory"
8002,8002,8158,043ade,043b0e,push hl,push hl,push hl,main.asm,"GETV0:			PUSH    HL			; HL will be 0 for a unary indirection, or the address of the variable for a binary indirection"
8003,8003,8159,043adf,043b0f,inc iy,inc iy,inc iy,main.asm,INC     IY
8004,8004,8160,043ae1,043b11,call $040325,call $040325,call $000000,main.asm,CALL    ITEMI
8005,8005,8161,043ae5,043b15,"ld a,l","ld a,l","ld a,l",main.asm,"LD	A,L			;  A: The MSB of the address"
8006,8006,8162,043ae6,043b16,exx,exx,exx,main.asm,EXX
8007,8007,8163,043ae7,043b17,"ld ($044d4a),hl","ld ($044d4a),hl","ld ($000000),hl",main.asm,"LD	(R0+0),HL		; HL: The LSW of the address"
8008,8008,8164,043aeb,043b1b,"ld ($044d4c),a","ld ($044d4c),a","ld ($000000),a",main.asm,"LD	(R0+2),A		; R0: L'HL or the 24-bit address"
8009,8009,8165,043aef,043b1f,pop de,pop de,pop de,main.asm,POP     DE
8010,8010,8166,043af0,043b20,pop af,pop af,pop af,main.asm,POP     AF
8011,8011,8167,043af1,043b21,"ld hl,($044d4a)","ld hl,($044d4a)","ld hl,($000000)",main.asm,"LD	HL,(R0)			; HL: L'HL"
8012,8012,8168,043af5,043b25,"add hl,de","add hl,de","add hl,de",main.asm,"ADD     HL,DE"
8013,8013,8169,043af6,043b26,push hl,push hl,push hl,main.asm,PUSH    HL
8014,8014,8170,043af7,043b27,pop ix,pop ix,pop ix,main.asm,POP     IX
8015,8015,8171,043af9,043b29,cp a,cp a,cp a,main.asm,CP      A
8016,8016,8172,043afa,043b2a,ret,ret,ret,main.asm,RET
8017,8017,8173,043afb,043b2b,"ld a,(iy+$01)","ld a,(iy+$01)","ld a,(iy+$00)",main.asm,"GETDEF:			LD      A,(IY+1)		; Get the next character from the tokenised line (the start of the procedure name)"
8018,8018,8174,043afe,043b2e,call $043c7b,call $043cab,call $000000,main.asm,"CALL    RANGE1			; Is it in range: ""0"" to ""9"", ""A"" to ""Z"", ""a' to ""z"", ""@"", ""_"" or ""`""?"
8019,8019,8175,043b02,043b32,ret c,ret c,ret c,main.asm,RET     C			; No so return with C set
8020,8020,8176,043b03,043b33,"ld a,(iy)","ld a,(iy)","ld a,(iy)",main.asm,"LD      A,(IY)			; Fetch the current character from the tokenised line"
8021,8021,8177,043b06,043b36,"ld hl,$044d0e","ld hl,$044d0e","ld hl,$000000",main.asm,"LD      HL,FNPTR		; HL: Address of the dynamic function pointer in ram.asm"
8022,8022,8178,043b0a,043b3a,cp $a4,cp $a4,cp $00,main.asm,CP      FN			; Is it the token FN?
8023,8023,8179,043b0c,043b3c,"jr z,$+$4c","jr z,$+$4c","jr z,$+$00",main.asm,"JR      Z,LOC2			; Yes, so skip to LOC2 with that pointer to find a match"
8024,8024,8180,043b0e,043b3e,"ld hl,$044d11","ld hl,$044d11","ld hl,$000000",main.asm,"LD      HL,PROPTR		; HL: Address of the dynamic procedure pointer in ram.asm"
8025,8025,8181,043b12,043b42,cp $f2,cp $f2,cp $00,main.asm,CP      PROC			; Is it the token PROC?
8026,8026,8182,043b14,043b44,"jr z,$+$44","jr z,$+$44","jr z,$+$00",main.asm,"JR      Z,LOC2			; Yes, so skip to LOC2 with that pointer to find a match"
8027,8027,8183,043b16,043b46,scf,scf,scf,main.asm,"SCF				; No, so just return with C set"
8028,8028,8184,043b17,043b47,ret,ret,ret,main.asm,RET
8029,8029,8185,043b18,043b48,sub $40,sub $40,sub $00,main.asm,LOCATE:			SUB     '@'			; Check for valid range
8030,8030,8186,043b1a,043b4a,ret c,ret c,ret c,main.asm,"RET     C			; First character not ""@"", ""A"" to ""Z"" or ""a"" to ""z"", so not a variable"
8031,8031,8187,043b1b,043b4b,"ld hl,$000000","ld hl,$000000","ld hl,$000000",main.asm,"LD      HL, 0			; Clear HL"
8032,8032,8188,043b1f,043b4f,cp $1b,cp $1b,cp $00,main.asm,"CP      'Z'-'@'+1		; Check for static (""@"", ""A"" to ""Z""); if it is not static..."
8033,8033,8189,043b21,043b51,"jr nc,$+$20","jr nc,$+$20","jr nc,$+$00",main.asm,"JR      NC,LOC0         	; Then branch here"
8034,8034,8190,043b23,043b53,"ld l,a","ld l,a","ld l,a",main.asm,"LD	L, A			; HL = A"
8035,8035,8191,043b24,043b54,"ld a,(iy+$01)","ld a,(iy+$01)","ld a,(iy+$00)",main.asm,"LD      A,(IY+1)        	; Check the 2nd character"
8036,8036,8192,043b27,043b57,cp $25,cp $25,cp $00,main.asm,"CP      '%'			; If not ""%"" then it is not static..."
8037,8037,8193,043b29,043b59,"jr nz,$+$23","jr nz,$+$23","jr nz,$+$00",main.asm,"JR      NZ,LOC1         	; Branch here"
8038,8038,8194,043b2b,043b5b,"ld a,(iy+$02)","ld a,(iy+$02)","ld a,(iy+$00)",main.asm,"LD      A,(IY+2)		; Check the 3rd character"
8039,8039,8195,043b2e,043b5e,cp $28,cp $28,cp $00,main.asm,"CP      '('			; If it is ""("" (array) then it is not static..."
8040,8040,8196,043b30,043b60,"jr z,$+$1c","jr z,$+$1c","jr z,$+$00",main.asm,"JR      Z,LOC1          	; Branch here"
8041,8041,8197,043b32,043b62,"add hl,hl","add hl,hl","add hl,hl",main.asm,"ADD     HL,HL			; HL: Variable index * 4"
8042,8042,8198,043b33,043b63,"add hl,hl","add hl,hl","add hl,hl",main.asm,"ADD	HL,HL"
8043,8043,8199,043b34,043b64,"ld de,$044c00","ld de,$044c00","ld de,$000000",main.asm,"LD      DE,STAVAR       	; The static variable area in memory"
8044,8044,8200,043b38,043b68,"add hl,de","add hl,de","add hl,de",main.asm,"ADD     HL,DE			; HL: The address of the static variable"
8045,8045,8201,043b39,043b69,inc iy,inc iy,inc iy,main.asm,INC     IY			; Skip the program pointer past the static variable name
8046,8046,8202,043b3b,043b6b,inc iy,inc iy,inc iy,main.asm,INC     IY
8047,8047,8203,043b3d,043b6d,"ld d,$04","ld d,$04","ld d,$00",main.asm,"LD      D,4             	; Set the type to be integer"
8048,8048,8204,043b3f,043b6f,xor a,xor a,xor a,main.asm,XOR     A			; Set the Z flag
8049,8049,8205,043b40,043b70,ret,ret,ret,main.asm,RET
8050,8050,8206,043b41,043b71,cp $1f,cp $1f,cp $00,main.asm,LOC0:			CP      '_'-'@'			; Check the first character is in
8051,8051,8207,043b43,043b73,ret c,ret c,ret c,main.asm,"RET     C			; the range ""_"" to"
8052,8052,8208,043b44,043b74,cp $3b,cp $3b,cp $00,main.asm,"CP      'z'-'@'+1		; ""z"" (lowercase characters only)"
8053,8053,8209,043b46,043b76,ccf,ccf,ccf,main.asm,CCF				; If it is not in range then
8054,8054,8210,043b47,043b77,dec a,dec a,dec a,main.asm,DEC     A               	; Set NZ flag and
8055,8055,8211,043b48,043b78,ret c,ret c,ret c,main.asm,RET     C			; Exit here
8056,8056,8212,043b49,043b79,sub $03,sub $03,sub $00,main.asm,SUB     3			; This brings it in the range of 27 upwards (need to confirm)
8057,8057,8213,043b4b,043b7b,"ld l,a","ld l,a","ld l,a",main.asm,"LD	L, A			; HL = A"
8058,8058,8214,043b4c,043b7c,"ld a,l","ld a,l","ld a,l",main.asm,"LOC1:			LD	A, L			; Fetch variable index"
8059,8059,8215,043b4d,043b7d,"add a,a","add a,a","add a,a",main.asm,"ADD	A, A			; x 2"
8060,8060,8216,043b4e,043b7e,"add a,l","add a,l","add a,l",main.asm,"ADD	A, L			; x 3"
8061,8061,8217,043b4f,043b7f,sub $03,sub $03,sub $00,main.asm,SUB	3			; Subtract 2 TODO: Should be 3
8062,8062,8218,043b51,043b81,"ld l,a","ld l,a","ld l,a",main.asm,"LD	L, A"
8063,8063,8219,043b52,043b82,"ld de,$044c6c","ld de,$044c6c","ld de,$000000",main.asm,"LD      DE, DYNVAR       	; The dynamic variable storage"
8064,8064,8220,043b56,043b86,ret c,ret c,ret c,main.asm,RET	C			; Bounds check to trap for variable '@'
8065,8065,8221,043b57,043b87,"add hl,de","add hl,de","add hl,de",main.asm,"ADD     HL, DE			; HL: Address of first entry"
8066,8066,8222,043b58,043b88,"ld de,(hl)","ld de,(hl)","ld de,(hl)",main.asm,"LOC2:			LD	DE, (HL)		; Fetch the original pointer"
8067,8067,8223,043b5a,043b8a,push hl,push hl,push hl,main.asm,PUSH	HL			; Need to preserve HL for LOC6
8068,8068,8224,043b5b,043b8b,xor a,xor a,xor a,main.asm,XOR	A			; Reset carry flag
8069,8069,8225,043b5c,043b8c,"sbc hl,hl","sbc hl,hl","sbc hl,hl",main.asm,"SBC	HL, HL			; Set HL to 0"
8070,8070,8226,043b5e,043b8e,"sbc hl,de","sbc hl,de","sbc hl,de",main.asm,"SBC	HL, DE			; Compare with 0"
8071,8071,8227,043b60,043b90,pop hl,pop hl,pop hl,main.asm,POP	HL			; Restore the original pointer
8072,8072,8228,043b61,043b91,"jr z,$+$4b","jr z,$+$4b","jr z,$+$00",main.asm,"JR	Z, LOC6			; If the pointer in DE is zero, the variable is undefined at this point"
8073,8073,8229,043b63,043b93,push de,push de,push de,main.asm,push de
8074,8074,8230,043b64,043b94,pop hl,pop hl,pop hl,main.asm,pop hl ; how was that even possible?
8075,8075,8231,043b65,043b95,inc hl,inc hl,inc hl,main.asm,INC     HL              	; Skip the link (24-bits)
8076,8076,8232,043b66,043b96,inc hl,inc hl,inc hl,main.asm,INC     HL
8077,8077,8233,043b67,043b97,inc hl,inc hl,inc hl,main.asm,INC	HL			; HL: Address of the variable name in DYNVARS
8078,8078,8234,043b68,043b98,push iy,push iy,push iy,main.asm,PUSH    IY			; IY: Address of the variable name in the program
8079,8079,8235,043b6a,043b9a,"ld a,(hl)","ld a,(hl)","ld a,(hl)",main.asm,"LOC3:			LD      A,(HL)         		; Compare"
8080,8080,8236,043b6b,043b9b,inc hl,inc hl,inc hl,main.asm,INC     HL
8081,8081,8237,043b6c,043b9c,inc iy,inc iy,inc iy,main.asm,INC     IY
8082,8082,8238,043b6e,043b9e,cp (iy),cp (iy),cp (iy),main.asm,CP      (IY)
8083,8083,8239,043b71,043ba1,"jr z,$-$07","jr z,$-$07","jr z,$-$00",main.asm,"JR      Z, LOC3			; Keep looping whilst we've got a match..."
8084,8084,8240,043b73,043ba3,or a,or a,or a,main.asm,OR      A               	; Have we hit a terminator?
8085,8085,8241,043b74,043ba4,"jr z,$+$09","jr z,$+$09","jr z,$+$00",main.asm,"JR      Z,LOC5          	; Yes, so maybe we've found a variable"
8086,8086,8242,043b76,043ba6,pop iy,pop iy,pop iy,main.asm,LOC4:			POP     IY			; Restore the pointer in the program
8087,8087,8243,043b78,043ba8,"ex de,hl","ex de,hl","ex de,hl",main.asm,"EX      DE, HL			; HL: New pointer in DYNVARS"
8088,8088,8244,043b79,043ba9,jp $043b58,jp $043b88,jp $000000,main.asm,JP      LOC2            	; Loop round and try again
8089,8089,8245,043b7d,043bad,dec iy,dec iy,dec iy,main.asm,LOC5:			DEC     IY
8090,8090,8246,043b7f,043baf,"ld a,(iy)","ld a,(iy)","ld a,(iy)",main.asm,"LD      A,(IY)"
8091,8091,8247,043b82,043bb2,cp $28,cp $28,cp $00,main.asm,CP      '('
8092,8092,8248,043b84,043bb4,"jr z,$+$17","jr z,$+$17","jr z,$+$00",main.asm,"JR      Z,LOC5A         	; FOUND"
8093,8093,8249,043b86,043bb6,inc iy,inc iy,inc iy,main.asm,INC     IY
8094,8094,8250,043b88,043bb8,call $043c6f,call $043c9f,call $000000,main.asm,CALL    RANGE
8095,8095,8251,043b8c,043bbc,"jr c,$+$0f","jr c,$+$0f","jr c,$+$00",main.asm,"JR      C,LOC5A         	; FOUND"
8096,8096,8252,043b8e,043bbe,cp $28,cp $28,cp $00,main.asm,CP      '('
8097,8097,8253,043b90,043bc0,"jr z,$-$1a","jr z,$-$1a","jr z,$-$00",main.asm,"JR      Z,LOC4          	; KEEP LOOKING"
8098,8098,8254,043b92,043bc2,"ld a,(iy-$01)","ld a,(iy-$01)","ld a,(iy-$00)",main.asm,"LD      A,(IY-1)"
8099,8099,8255,043b95,043bc5,call $043c7b,call $043cab,call $000000,main.asm,CALL    RANGE1
8100,8100,8256,043b99,043bc9,"jr nc,$-$23","jr nc,$-$23","jr nc,$-$00",main.asm,"JR      NC,LOC4         	; KEEP LOOKING"
8101,8101,8257,043b9b,043bcb,pop de,pop de,pop de,main.asm,LOC5A:			POP     DE
8102,8102,8258,043b9c,043bcc,"ld a,(iy-$01)","ld a,(iy-$01)","ld a,(iy-$00)",main.asm,"TYPE_:			LD      A,(IY-1)		; Check the string type postfix"
8103,8103,8259,043b9f,043bcf,cp $24,cp $24,cp $00,main.asm,CP      '$'			; Is it a string?
8104,8104,8260,043ba1,043bd1,"ld d,$81","ld d,$81","ld d,$00",main.asm,"LD      D,129			; Yes, so return D = 129"
8105,8105,8261,043ba3,043bd3,ret z,ret z,ret z,main.asm,RET     Z
8106,8106,8262,043ba4,043bd4,cp $25,cp $25,cp $00,main.asm,CP      '%'			; Is it an integer?
8107,8107,8263,043ba6,043bd6,"ld d,$04","ld d,$04","ld d,$00",main.asm,"LD      D,4			; Yes, so return D = 4"
8108,8108,8264,043ba8,043bd8,ret z,ret z,ret z,main.asm,RET     Z
8109,8109,8265,043ba9,043bd9,inc d,inc d,inc d,main.asm,INC     D			; At this point it must be a float
8110,8110,8266,043baa,043bda,cp a,cp a,cp a,main.asm,CP      A			; Set the flags
8111,8111,8267,043bab,043bdb,ret,ret,ret,main.asm,RET
8112,8112,8268,043bac,043bdc,inc a,inc a,inc a,main.asm,LOC6:			INC     A               	; Set NZ flag
8113,8113,8269,043bad,043bdd,ret,ret,ret,main.asm,RET
8114,8114,8270,043bae,043bde,xor a,xor a,xor a,main.asm,CREATE:			XOR     A
8115,8115,8271,043baf,043bdf,"ld de,($044d1d)","ld de,($044d1d)","ld de,($000000)",main.asm,"LD      DE,(FREE)		; Get the last byte of available RAM"
8116,8116,8272,043bb4,043be4,"ld (hl),de","ld (hl),de","ld (hl),de",main.asm,"LD	(HL), DE		; Store"
8117,8117,8273,043bb6,043be6,"ex de,hl","ex de,hl","ex de,hl",main.asm,"EX      DE,HL"
8118,8118,8274,043bb7,043be7,"ld (hl),a","ld (hl),a","ld (hl),a",main.asm,"LD      (HL),A			; Clear the link of the new entity"
8119,8119,8275,043bb8,043be8,inc hl,inc hl,inc hl,main.asm,INC     HL
8120,8120,8276,043bb9,043be9,"ld (hl),a","ld (hl),a","ld (hl),a",main.asm,"LD      (HL),A"
8121,8121,8277,043bba,043bea,inc hl,inc hl,inc hl,main.asm,INC     HL
8122,8122,8278,043bbb,043beb,"ld (hl),a","ld (hl),a","ld (hl),a",main.asm,"LD      (HL),A"
8123,8123,8279,043bbc,043bec,inc hl,inc hl,inc hl,main.asm,INC     HL
8124,8124,8280,043bbd,043bed,inc iy,inc iy,inc iy,main.asm,LOC7:			INC     IY
8125,8125,8281,043bbf,043bef,call $043c6f,call $043c9f,call $000000,main.asm,CALL    RANGE           	; END OF VARIABLE?
8126,8126,8282,043bc3,043bf3,"jr c,$+$17","jr c,$+$17","jr c,$+$00",main.asm,"JR      C,LOC8"
8127,8127,8283,043bc5,043bf5,"ld (hl),a","ld (hl),a","ld (hl),a",main.asm,"LD      (HL),A"
8128,8128,8284,043bc6,043bf6,inc hl,inc hl,inc hl,main.asm,INC     HL
8129,8129,8285,043bc7,043bf7,call $043c7b,call $043cab,call $000000,main.asm,CALL    RANGE1
8130,8130,8286,043bcb,043bfb,"jr nc,$-$0e","jr nc,$-$0e","jr nc,$-$00",main.asm,"JR      NC,LOC7"
8131,8131,8287,043bcd,043bfd,cp $28,cp $28,cp $00,main.asm,CP      '('
8132,8132,8288,043bcf,043bff,"jr z,$+$0b","jr z,$+$0b","jr z,$+$00",main.asm,"JR      Z,LOC8"
8133,8133,8289,043bd1,043c01,"ld a,(iy+$01)","ld a,(iy+$01)","ld a,(iy+$00)",main.asm,"LD      A,(IY+1)"
8134,8134,8290,043bd4,043c04,cp $28,cp $28,cp $00,main.asm,CP      '('
8135,8135,8291,043bd6,043c06,"jr z,$-$19","jr z,$-$19","jr z,$-$00",main.asm,"JR      Z,LOC7"
8136,8136,8292,043bd8,043c08,inc iy,inc iy,inc iy,main.asm,INC     IY
8137,8137,8293,043bda,043c0a,"ld (hl),$00","ld (hl),$00","ld (hl),$00",main.asm,"LOC8:			LD      (HL),0          	; TERMINATOR"
8138,8138,8294,043bdc,043c0c,inc hl,inc hl,inc hl,main.asm,INC     HL
8139,8139,8295,043bdd,043c0d,push hl,push hl,push hl,main.asm,PUSH    HL
8140,8140,8296,043bde,043c0e,call $043b9c,call $043bcc,call $000000,main.asm,CALL    TYPE_			; Get the variable type in D
8141,8141,8297,043be2,043c12,"ld a,$04","ld a,$04","ld a,$00",main.asm,"LD      A,4			; If it is an integer then it takes up 4 bytes"
8142,8142,8298,043be4,043c14,cp d,cp d,cp d,main.asm,CP      D
8143,8143,8299,043be5,043c15,"jr z,$+$03","jr z,$+$03","jr z,$+$00",main.asm,"JR      Z,LOC9			; So skip the next bit"
8144,8144,8300,043be7,043c17,inc a,inc a,inc a,main.asm,INC     A			; Strings and floats take up 5 bytes (NB: Strings take up 4 in BBC BASIC for Z80)
8145,8145,8301,043be8,043c18,"ld (hl),$00","ld (hl),$00","ld (hl),$00",main.asm,"LOC9:			LD      (HL),0          	; Initialise the memory to zero"
8146,8146,8302,043bea,043c1a,inc hl,inc hl,inc hl,main.asm,INC     HL
8147,8147,8303,043beb,043c1b,dec a,dec a,dec a,main.asm,DEC     A
8148,8148,8304,043bec,043c1c,"jr nz,$-$04","jr nz,$-$04","jr nz,$-$00",main.asm,"JR      NZ,LOC9"
8149,8149,8305,043bee,043c1e,"ld ($044d1d),hl","ld ($044d1d),hl","ld ($000000),hl",main.asm,"LD      (FREE),HL		; Adjust the stack"
8150,8150,8306,043bf2,043c22,call $04164f,call $041679,call $000000,main.asm,CALL    CHECK			; Check whether we are out of space
8151,8151,8307,043bf6,043c26,pop hl,pop hl,pop hl,main.asm,POP     HL
8152,8152,8308,043bf7,043c27,xor a,xor a,xor a,main.asm,XOR     A
8153,8153,8309,043bf8,043c28,ret,ret,ret,main.asm,RET
8154,8154,8310,043bf9,043c29,call $040a70,call $040a70,call $000000,main.asm,LINNUM:			CALL    NXT			; Skip whitespace to the first character
8155,8155,8311,043bfd,043c2d,"ld.sis hl,$0000","ld.sis hl,$0000","ld.sis hl,$0000",main.asm,"LD.SIS  HL,0			; The running total"
8156,8156,8312,043c01,043c31,"ld a,(iy)","ld a,(iy)","ld a,(iy)",main.asm,"LINNM1:			LD      A,(IY)			; A: Fetch the digit to add in"
8157,8157,8313,043c04,043c34,sub $30,sub $30,sub $00,main.asm,SUB     '0'			; Sub ASCII '0' to make a binary number (0-9)
8158,8158,8314,043c06,043c36,ret c,ret c,ret c,main.asm,RET     C			; And return if less than 0
8159,8159,8315,043c07,043c37,cp $0a,cp $0a,cp $00,main.asm,CP      10			; Or greater than or equal to 10
8160,8160,8316,043c09,043c39,ret nc,ret nc,ret nc,main.asm,RET     NC			; As we've hit a non-numeric character (end of number) at this point
8161,8161,8317,043c0a,043c3a,inc iy,inc iy,inc iy,main.asm,INC     IY			; Increment the string pointer
8162,8162,8318,043c0c,043c3c,"ld d,h","ld d,h","ld d,h",main.asm,"LD      D,H			; This next block multiplys HL by 10, shifting the result left in BASE 10"
8163,8163,8319,043c0d,043c3d,"ld e,l","ld e,l","ld e,l",main.asm,"LD      E,L			; Store the original number in DE"
8164,8164,8320,043c0e,043c3e,"add.sil hl,hl","add.sil hl,hl","add.sil hl,hl",main.asm,"ADD.S   HL,HL           	; *2"
8165,8165,8321,043c10,043c40,"jr c,$+$15","jr c,$+$15","jr c,$+$00",main.asm,"JR      C,TOOBIG		; At each point, error if > 65535 (carry flag set)"
8166,8166,8322,043c12,043c42,"add.sil hl,hl","add.sil hl,hl","add.sil hl,hl",main.asm,"ADD.S   HL,HL           	; *4S"
8167,8167,8323,043c14,043c44,"jr c,$+$11","jr c,$+$11","jr c,$+$00",main.asm,"JR      C,TOOBIG"
8168,8168,8324,043c16,043c46,"add.sil hl,de","add.sil hl,de","add.sil hl,de",main.asm,"ADD.S   HL,DE           	; *5"
8169,8169,8325,043c18,043c48,"jr c,$+$0d","jr c,$+$0d","jr c,$+$00",main.asm,"JR      C,TOOBIG"
8170,8170,8326,043c1a,043c4a,"add.sil hl,hl","add.sil hl,hl","add.sil hl,hl",main.asm,"ADD.S   HL,HL           	; *10"
8171,8171,8327,043c1c,043c4c,"jr c,$+$09","jr c,$+$09","jr c,$+$00",main.asm,"JR      C,TOOBIG"
8172,8172,8328,043c1e,043c4e,"ld e,a","ld e,a","ld e,a",main.asm,"LD      E,A			; A->DE: the digit to add in"
8173,8173,8329,043c1f,043c4f,"ld d,$00","ld d,$00","ld d,$00",main.asm,"LD      D,0"
8174,8174,8330,043c21,043c51,"add.sil hl,de","add.sil hl,de","add.sil hl,de",main.asm,"ADD.S   HL,DE           	; Add in the digit to the running total"
8175,8175,8331,043c23,043c53,"jr nc,$-$22","jr nc,$-$22","jr nc,$-$00",main.asm,"JR      NC,LINNM1       	; And if it is still <= 65535, loop"
8176,8176,8332,043c25,043c55,"ld a,$14","ld a,$14","ld a,$00",main.asm,"TOOBIG:			LD      A,20"
8177,8177,8333,043c27,043c57,jp $043760,jp $043790,jp $000000,main.asm,"JP      ERROR_           	; Error: ""Too big"""
8178,8178,8334,043c2b,043c5b,call $043bf9,call $043c29,call $000000,main.asm,PAIR:			CALL    LINNUM          	; Parse the first line number
8179,8179,8335,043c2f,043c5f,"ld a,h","ld a,h","ld a,h",main.asm,"LD      A,H			; If it is not zero, then..."
8180,8180,8336,043c30,043c60,or l,or l,or l,main.asm,OR      L
8181,8181,8337,043c31,043c61,"jr nz,$+$04","jr nz,$+$04","jr nz,$+$00",main.asm,"JR      NZ,PAIR1		; Skip..."
8182,8182,8338,043c33,043c63,"ld l,$0a","ld l,$0a","ld l,$00",main.asm,"LD      L,10			; HL: the default value (10)"
8183,8183,8339,043c35,043c65,call $04177a,call $0417a4,call $000000,main.asm,"PAIR1:			CALL    TERMQ			; Check for ELSE, : or CR"
8184,8184,8340,043c39,043c69,inc iy,inc iy,inc iy,main.asm,INC     IY			; Skip to next character
8185,8185,8341,043c3b,043c6b,push hl,push hl,push hl,main.asm,PUSH    HL			; Stack the first line number
8186,8186,8342,043c3c,043c6c,"ld hl,$00000a","ld hl,$00000a","ld hl,$000000",main.asm,"LD      HL,10			; HL: the second default (10)"
8187,8187,8343,043c40,043c70,"call nz,$043bf9","call nz,$043c29","call nz,$000000",main.asm,"CALL    NZ,LINNUM       	; Parse the second line number"
8188,8188,8344,043c44,043c74,"ex (sp),hl","ex (sp),hl","ex (sp),hl",main.asm,"EX      (SP),HL			; HL: The first line number (off the stack)"
8189,8189,8345,043c45,043c75,pop bc,pop bc,pop bc,main.asm,POP     BC			; BC: Second line number
8190,8190,8346,043c46,043c76,"ld a,b","ld a,b","ld a,b",main.asm,"LD      A,B			; If the second line number is not zero then..."
8191,8191,8347,043c47,043c77,or c,or c,or c,main.asm,OR      C			; We're good...
8192,8192,8348,043c48,043c78,ret nz,ret nz,ret nz,main.asm,"RET     NZ			; Exit, otherwise..."
8193,8193,8349,043c49,043c79,call $043777,call $0437a7,call $000000,main.asm,"CALL    EXTERR			; Throw error: ""Silly"""
8194,8194,8350,043c4d,043c7d,"ld d,e","ld d,e","ld d,e",main.asm,"DB    	""Silly"", 0"
8195,8195,8351,043c4e,043c7e,"ld l,c","ld l,c","ld l,c",main.asm,
8196,8196,8352,043c4f,043c7f,"ld l,h","ld l,h","ld l,h",main.asm,
8197,8197,8353,043c50,043c80,"ld l,h","ld l,h","ld l,h",main.asm,
8197,8197,8353,043c50,043c80,"ld l,h","ld l,h","ld l,h",main.asm,
8198,8198,8354,043c51,043c81,"ld a,c","ld a,c","ld a,c",main.asm,
8199,8199,8355,043c52,043c82,nop,nop,nop,,
8200,8200,8356,043c53,043c83,call $043bf9,call $043c29,call $000000,main.asm,DLPAIR:			CALL    LINNUM			; Parse the first line number
8201,8201,8357,043c57,043c87,push hl,push hl,push hl,main.asm,PUSH    HL			; Stack it
8202,8202,8358,043c58,043c88,call $04177a,call $0417a4,call $000000,main.asm,"CALL    TERMQ			; Check for ELSE, : or CR"
8203,8203,8359,043c5c,043c8c,"jr z,$+$0c","jr z,$+$0c","jr z,$+$00",main.asm,"JR      Z,DLP1			; And exit if so"
8204,8204,8360,043c5e,043c8e,cp $e7,cp $e7,cp $00,main.asm,CP      TIF			; Is the token IF?
8205,8205,8361,043c60,043c90,"jr z,$+$08","jr z,$+$08","jr z,$+$00",main.asm,"JR      Z,DLP1			; Yes, so skip the next bit..."
8206,8206,8362,043c62,043c92,inc iy,inc iy,inc iy,main.asm,INC     IY			; Otherwise...
8207,8207,8363,043c64,043c94,call $043bf9,call $043c29,call $000000,main.asm,CALL    LINNUM			; Fetch the second line number
8208,8208,8364,043c68,043c98,"ex (sp),hl","ex (sp),hl","ex (sp),hl",main.asm,"DLP1:			EX      (SP),HL			; HL: The first line number (off the stack)"
8209,8209,8365,043c69,043c99,call $04398f,call $0439bf,call $000000,main.asm,CALL    FINDL			; HL: Find the address of the line
8210,8210,8366,043c6d,043c9d,pop bc,pop bc,pop bc,main.asm,POP     BC			; BC: The second number
8211,8211,8367,043c6e,043c9e,ret,ret,ret,main.asm,RET
8212,8212,8368,043c6f,043c9f,"ld a,(iy)","ld a,(iy)","ld a,(iy)",main.asm,"RANGE:			LD      A,(IY)			; Fetch the character"
8213,8213,8369,043c72,043ca2,cp $24,cp $24,cp $00,main.asm,CP      '$'			; Postfix for string variable is valid
8214,8214,8370,043c74,043ca4,ret z,ret z,ret z,main.asm,RET     Z
8215,8215,8371,043c75,043ca5,cp $25,cp $25,cp $00,main.asm,CP      '%'			; Postfix for integer variable is valid
8216,8216,8372,043c77,043ca7,ret z,ret z,ret z,main.asm,RET     Z
8217,8217,8373,043c78,043ca8,cp $28,cp $28,cp $00,main.asm,CP      '('			; Postfix for array is valid
8218,8218,8374,043c7a,043caa,ret z,ret z,ret z,main.asm,RET     Z
8219,8219,8375,043c7b,043cab,cp $30,cp $30,cp $00,main.asm,RANGE1:			CP      '0'			; If it is between '0'...
8220,8220,8376,043c7d,043cad,ret c,ret c,ret c,main.asm,RET     C
8221,8221,8377,043c7e,043cae,cp $3a,cp $3a,cp $00,main.asm,CP      '9'+1			; And '9'...
8222,8222,8378,043c80,043cb0,ccf,ccf,ccf,main.asm,CCF
8223,8223,8379,043c81,043cb1,ret nc,ret nc,ret nc,main.asm,RET     NC			; Then it is valid
8224,8224,8380,043c82,043cb2,cp $40,cp $40,cp $00,main.asm,CP      '@'             	; The prefix @ is valid (@% controls numeric print formatting - v2.4)
8225,8225,8381,043c84,043cb4,ret z,ret z,ret z,main.asm,RET     Z
8226,8226,8382,043c85,043cb5,cp $41,cp $41,cp $00,main.asm,RANGE2:			CP      'A'			; If it is between 'A'...
8227,8227,8383,043c87,043cb7,ret c,ret c,ret c,main.asm,RET     C
8228,8228,8384,043c88,043cb8,cp $5b,cp $5b,cp $00,main.asm,CP      'Z'+1			; And 'Z'...
8229,8229,8385,043c8a,043cba,ccf,ccf,ccf,main.asm,CCF
8230,8230,8386,043c8b,043cbb,ret nc,ret nc,ret nc,main.asm,RET     NC			; Then it is valid
8231,8231,8387,043c8c,043cbc,cp $5f,cp $5f,cp $00,main.asm,"CP      '_'			; If it is underscore, grave, or between 'a'"
8232,8232,8388,043c8e,043cbe,ret c,ret c,ret c,main.asm,RET     C
8233,8233,8389,043c8f,043cbf,cp $7b,cp $7b,cp $00,main.asm,CP      'z'+1			; And 'z'
8234,8234,8390,043c91,043cc1,ccf,ccf,ccf,main.asm,CCF				; Then it is valid
8235,8235,8391,043c92,043cc2,ret,ret,ret,main.asm,RET
8236,8236,8392,043c93,043cc3,xor a,xor a,xor a,main.asm,SPACE_: 		XOR     A
8237,8237,8393,043c94,043cc4,call $043777,call $0437a7,call $000000,main.asm,"CALL    EXTERR          	; ""LINE space"""
8238,8238,8394,043c98,043cc8,"add a,(hl)","add a,(hl)","add a,(hl)",main.asm,"DB    	LINE_MN_, 8, 0"
8239,8239,8395,043c99,043cc9,"ex af,af'","ex af,af'","ex af,af'",main.asm,
8240,8240,8396,043c9a,043cca,nop,nop,nop,main.asm,
8241,8241,8397,043c9b,043ccb,"ld (de),a","ld (de),a","ld (de),a",main.asm,"LEXAN1:			LD      (DE),A          	; Transfer to buffer"
8242,8242,8398,043c9c,043ccc,inc de,inc de,inc de,main.asm,INC     DE              	; Increment the pointers
8243,8243,8399,043c9d,043ccd,inc iy,inc iy,inc iy,main.asm,INC     IY			; And fall through to the main function
8244,8244,8400,043c9f,043ccf,"ld a,e","ld a,e","ld a,e",main.asm,"LEXAN2:			LD      A,E             	; Destination buffer on page boundary, so E can be used as length"
8245,8245,8401,043ca0,043cd0,cp $fc,cp $fc,cp $00,main.asm,"CP      252             	; If it is >= 252 bytes, then..."
8246,8246,8402,043ca2,043cd2,"jr nc,$-$0f","jr nc,$-$0f","jr nc,$-$00",main.asm,"JR      NC,SPACE_        	; Throw a 'LINE space' error (line too long)"
8247,8247,8403,043ca4,043cd4,"ld a,(iy)","ld a,(iy)","ld a,(iy)",main.asm,"LD      A,(IY)			; Fetch character from source string"
8248,8248,8404,043ca7,043cd7,cp $0d,cp $0d,cp $00,main.asm,CP      CR			; If it is a CR
8249,8249,8405,043ca9,043cd9,ret z,ret z,ret z,main.asm,RET     Z               	; Then it is end of line; we're done parsing
8250,8250,8406,043caa,043cda,call $043c7b,call $043cab,call $000000,main.asm,"CALL    RANGE1			; Is it alphanumeric, '@', '_' or '`'"
8251,8251,8407,043cae,043cde,"jr nc,$+$08","jr nc,$+$08","jr nc,$+$00",main.asm,"JR      NC,LEXAN3		; Yes, so skip"
8252,8252,8408,043cb0,043ce0,"res 5,c","res 5,c","res 5,c",main.asm,"RES     5,C             	; FLAG: NOT IN VARIABLE"
8253,8253,8409,043cb2,043ce2,"res 3,c","res 3,c","res 3,c",main.asm,"RES     3,C             	; FLAG: NOT IN HEX"
8254,8254,8410,043cb4,043ce4,"res 2,c","res 2,c","res 2,c",main.asm,"RES	2,C			; FLAG: NOT IN BINARY"
8255,8255,8411,043cb6,043ce6,cp $20,cp $20,cp $00,main.asm,LEXAN3:			CP      ' '			; Ignore spaces
8256,8256,8412,043cb8,043ce8,"jr z,$-$1d","jr z,$-$1d","jr z,$-$00",main.asm,"JR      Z,LEXAN1"
8257,8257,8413,043cba,043cea,cp $2c,cp $2c,cp $00,main.asm,"CP      ','			; Ignore commas"
8258,8258,8414,043cbc,043cec,"jr z,$-$21","jr z,$-$21","jr z,$-$00",main.asm,"JR      Z,LEXAN1"
8259,8259,8415,043cbe,043cee,cp $32,cp $32,cp $00,main.asm,CP	'2'			; If less than '2'
8260,8260,8416,043cc0,043cf0,"jr nc,$+$04","jr nc,$+$04","jr nc,$+$00",main.asm,"JR	NC, @F			; No, so skip"
8261,8261,8417,043cc2,043cf2,"res 2,c","res 2,c","res 2,c",main.asm,"RES	2,C			; FLAG: NOT IN BINARY"
8262,8262,8418,043cc4,043cf4,cp $47,cp $47,cp $00,main.asm,@@:			CP      'G'			; If less then 'G'
8263,8263,8419,043cc6,043cf6,"jr c,$+$04","jr c,$+$04","jr c,$+$00",main.asm,"JR      C,LEXAN4		; Yes, so skip"
8264,8264,8420,043cc8,043cf8,"res 3,c","res 3,c","res 3,c",main.asm,"RES     3,C             	; FLAG: NOT IN HEX"
8265,8265,8421,043cca,043cfa,cp $22,cp $22,cp $00,main.asm,LEXAN4:			CP      34			; Is it a quote character?
8266,8266,8422,043ccc,043cfc,"jr nz,$+$07","jr nz,$+$07","jr nz,$+$00",main.asm,"JR      NZ,LEXAN5		; No, so skip"
8267,8267,8423,043cce,043cfe,rl c,rl c,rl c,main.asm,RL      C			; Toggle bit 7 of C by shifting it into carry flag
8268,8268,8424,043cd0,043d00,ccf,ccf,ccf,main.asm,CCF                     	; Toggle the carry
8269,8269,8425,043cd1,043d01,rr c,rr c,rr c,main.asm,RR      C			; And then shifting it back into bit 7 of C
8270,8270,8426,043cd3,043d03,"bit 4,c","bit 4,c","bit 4,c",main.asm,"LEXAN5:			BIT     4,C			; Accept line number?"
8271,8271,8427,043cd5,043d05,"jr z,$+$14","jr z,$+$14","jr z,$+$00",main.asm,"JR      Z,LEXAN6		; No, so skip"
8272,8272,8428,043cd7,043d07,"res 4,c","res 4,c","res 4,c",main.asm,"RES     4,C			; FLAG: DON'T ACCEPT LINE NUMBER"
8273,8273,8429,043cd9,043d09,push bc,push bc,push bc,main.asm,PUSH    BC
8274,8274,8430,043cda,043d0a,push de,push de,push de,main.asm,PUSH    DE
8275,8275,8431,043cdb,043d0b,call $043bf9,call $043c29,call $000000,main.asm,CALL    LINNUM         		; Parse the line number to HL
8276,8276,8432,043cdf,043d0f,pop de,pop de,pop de,main.asm,POP     DE
8277,8277,8433,043ce0,043d10,pop bc,pop bc,pop bc,main.asm,POP     BC
8278,8278,8434,043ce1,043d11,"ld a,h","ld a,h","ld a,h",main.asm,"LD      A,H			; If it is not zero"
8279,8279,8435,043ce2,043d12,or l,or l,or l,main.asm,OR      L
8280,8280,8436,043ce3,043d13,"call nz,$043d5c","call nz,$043d8c","call nz,$000000",main.asm,"CALL    NZ,ENCODE       	; Then encode the line number HL to the destination (DE)"
8281,8281,8437,043ce7,043d17,jr $-$48,jr $-$48,jr $-$00,main.asm,JR      LEXAN2          	; And loop
8282,8282,8438,043ce9,043d19,dec c,dec c,dec c,main.asm,LEXAN6:			DEC     C			; Check for C=1 (LEFT)
8283,8283,8439,043cea,043d1a,"jr z,$+$0c","jr z,$+$0c","jr z,$+$00",main.asm,"JR      Z,LEXAN7        	; If so, skip"
8284,8284,8440,043cec,043d1c,inc c,inc c,inc c,main.asm,INC     C			; Otherwise restore C
8285,8285,8441,043ced,043d1d,"jr nz,$-$52","jr nz,$-$52","jr nz,$-$00",main.asm,"JR      NZ,LEXAN1		; If C was 0 (RIGHT) then..."
8286,8286,8442,043cef,043d1f,or a,or a,or a,main.asm,OR      A			; Set the flags based on the character
8287,8287,8443,043cf0,043d20,"call p,$0437c7","call p,$0437f7","call p,$000000",main.asm,"CALL    P,LEX           	; Tokenise if A < 128"
8288,8288,8444,043cf4,043d24,jr $+$15,jr $+$15,jr $+$00,main.asm,JR      LEXAN8			; And skip
8289,8289,8445,043cf6,043d26,cp $2a,cp $2a,cp $00,main.asm,LEXAN7:			CP      '*'			; Is it a '*' (for star commands)
8290,8290,8446,043cf8,043d28,"jr z,$+$19","jr z,$+$19","jr z,$+$00",main.asm,"JR      Z,LEXAN9		; Yes, so skip to quit tokenising"
8291,8291,8447,043cfa,043d2a,or a,or a,or a,main.asm,OR      A			; Set the flags based on the character
8292,8292,8448,043cfb,043d2b,"call p,$0437c7","call p,$0437f7","call p,$000000",main.asm,"CALL    P,LEX           	; Tokenise if A < 128"
8293,8293,8449,043cff,043d2f,cp $8f,cp $8f,cp $00,main.asm,CP      TOKLO			; TOKLO is 8Fh
8294,8294,8450,043d01,043d31,"jr c,$+$08","jr c,$+$08","jr c,$+$00",main.asm,"JR      C,LEXAN8		; If A is < 8Fh then skip to LEX8"
8295,8295,8451,043d03,043d33,cp $94,cp $94,cp $00,main.asm,CP      TOKHI+1			; TOKHI is 93h
8296,8296,8452,043d05,043d35,"jr nc,$+$04","jr nc,$+$04","jr nc,$+$00",main.asm,"JR      NC,LEXAN8		; If A is >= 94h then skip to LEX8"
8297,8297,8453,043d07,043d37,"add a,$40","add a,$40","add a,$00",main.asm,"ADD     A,OFFSET       		; Add OFFSET (40h) to make the token the SET version"
8298,8298,8454,043d09,043d39,cp $f4,cp $f4,cp $00,main.asm,LEXAN8:			CP      REM			; If the token is REM
8299,8299,8455,043d0b,043d3b,"jr z,$+$06","jr z,$+$06","jr z,$+$00",main.asm,"JR      Z,LEXAN9		; Then stop tokenising"
8300,8300,8456,043d0d,043d3d,cp $dc,cp $dc,cp $00,main.asm,CP      DATA_MN_			; If it is not DATA then
8301,8301,8457,043d0f,043d3f,"jr nz,$+$04","jr nz,$+$04","jr nz,$+$00",main.asm,"JR      NZ,LEXANA		; Skip"
8302,8302,8458,043d11,043d41,"set 6,c","set 6,c","set 6,c",main.asm,"LEXAN9:			SET     6,C             	; FLAG: STOP TOKENISING"
8303,8303,8459,043d13,043d43,cp $a4,cp $a4,cp $00,main.asm,LEXANA:			CP      FN			; If the token is FN
8304,8304,8460,043d15,043d45,"jr z,$+$0c","jr z,$+$0c","jr z,$+$00",main.asm,"JR      Z,LEXANB"
8305,8305,8461,043d17,043d47,cp $f2,cp $f2,cp $00,main.asm,CP      PROC			; Or the token is PROC
8306,8306,8462,043d19,043d49,"jr z,$+$08","jr z,$+$08","jr z,$+$00",main.asm,"JR      Z,LEXANB		; Then jump to here"
8307,8307,8463,043d1b,043d4b,call $043c85,call $043cb5,call $000000,main.asm,"CALL    RANGE2			; Otherwise check the input is alphanumeric, ""_"" or ""`"""
8308,8308,8464,043d1f,043d4f,"jr c,$+$04","jr c,$+$04","jr c,$+$00",main.asm,"JR      C,LEXANC		; Jump here if out of range"
8309,8309,8465,043d21,043d51,"set 5,c","set 5,c","set 5,c",main.asm,"LEXANB:			SET     5,C             	; FLAG: IN VARIABLE/FN/PROC"
8310,8310,8466,043d23,043d53,cp $26,cp $26,cp $00,main.asm,LEXANC:			CP      '&'			; Check for hex prefix
8311,8311,8467,043d25,043d55,"jr nz,$+$04","jr nz,$+$04","jr nz,$+$00",main.asm,"JR      NZ,LEXAND		; If not, skip"
8312,8312,8468,043d27,043d57,"set 3,c","set 3,c","set 3,c",main.asm,"SET     3,C             	; FLAG: IN HEX"
8313,8313,8469,043d29,043d59,cp $25,cp $25,cp $00,main.asm,LEXAND:			CP	'%'			; Check for binary prefix
8314,8314,8470,043d2b,043d5b,"jr nz,$+$04","jr nz,$+$04","jr nz,$+$00",main.asm,"JR	NZ,LEXANE		; If not, skip"
8315,8315,8471,043d2d,043d5d,"set 2,c","set 2,c","set 2,c",main.asm,"SET	2,C			; FLAG: IN BINARY"
8316,8316,8472,043d2f,043d5f,"ld hl,$043d53","ld hl,$043d83","ld hl,$000000",main.asm,"LEXANE:			LD      HL,LIST1		; List of tokens that must be followed by a line number"
8317,8317,8473,043d33,043d63,push bc,push bc,push bc,main.asm,PUSH    BC
8318,8318,8474,043d34,043d64,"ld bc,$000006","ld bc,$000006","ld bc,$000000",main.asm,"LD      BC,LIST1L		; The list length"
8319,8319,8475,043d38,043d68,cpir,cpir,cpir,main.asm,CPIR				; Check if the token is in this list
8320,8320,8476,043d3a,043d6a,pop bc,pop bc,pop bc,main.asm,POP     BC
8321,8321,8477,043d3b,043d6b,"jr nz,$+$04","jr nz,$+$04","jr nz,$+$00",main.asm,"JR      NZ,LEXANF		; If not, then skip"
8322,8322,8478,043d3d,043d6d,"set 4,c","set 4,c","set 4,c",main.asm,"SET     4,C             	; FLAG: ACCEPT LINE NUMBER"
8323,8323,8479,043d3f,043d6f,"ld hl,$043d57","ld hl,$043d87","ld hl,$000000",main.asm,"LEXANF:			LD      HL,LIST2		; List of tokens that switch the lexical analysis back to LEFT mode"
8324,8324,8480,043d43,043d73,push bc,push bc,push bc,main.asm,PUSH    BC
8325,8325,8481,043d44,043d74,"ld bc,$000005","ld bc,$000005","ld bc,$000000",main.asm,"LD      BC,LIST2L		; The list length"
8326,8326,8482,043d48,043d78,cpir,cpir,cpir,main.asm,CPIR				; Check if the token is in this list
8327,8327,8483,043d4a,043d7a,pop bc,pop bc,pop bc,main.asm,POP     BC
8328,8328,8484,043d4b,043d7b,"jr nz,$+$04","jr nz,$+$04","jr nz,$+$00",main.asm,"JR      NZ,LEXANG		; If not, then skip"
8329,8329,8485,043d4d,043d7d,"set 0,c","set 0,c","set 0,c",main.asm,"SET     0,C             	; FLAG: ENTER LEFT MODE"
8330,8330,8486,043d4f,043d7f,jp $043c9b,jp $043ccb,jp $000000,main.asm,LEXANG:			JP      LEXAN1			; And loop
8331,8331,8487,043d53,043d83,push hl,push hl,push hl,main.asm,LIST1:			DB	GOTO
8332,8332,8488,043d54,043d84,"call po,$8cfcf7","call po,$8cfcf7","call po,$000000",main.asm,DB	GOSUB
8333,8333,8489,043d58,043d88,"adc a,e","adc a,e","adc a,e",main.asm,DB	ELSE_MN_
8334,8334,8490,043d59,043d89,push af,push af,push af,main.asm,DB	REPEAT
8335,8335,8491,043d5a,043d8a,"add a,l","add a,l","add a,l",main.asm,DB	TERROR_MN
8336,8336,8492,043d5b,043d8b,"ld a,($ebe1cb)","ld a,($ebe1cb)","ld a,($000000)",main.asm,DB    	':'
8337,8337,8493,043d5f,043d8f,"ld (hl),$8d","ld (hl),$8d","ld (hl),$00",main.asm,"LD      (HL), LINO_MN		; Store 8Dh first to flag next bytes as an encoded line number"
8338,8338,8494,043d61,043d91,inc hl,inc hl,inc hl,main.asm,INC     HL
8339,8339,8495,043d62,043d92,"ld a,d","ld a,d","ld a,d",main.asm,"LD      A,D			; Get the high byte"
8340,8340,8496,043d63,043d93,and $c0,and $c0,and $00,main.asm,AND     0C0H			; Get the top two bits	DD000000
8341,8341,8497,043d65,043d95,rrca,rrca,rrca,main.asm,RRCA				; Shift right		00DD0000
8342,8342,8498,043d66,043d96,rrca,rrca,rrca,main.asm,RRCA
8343,8343,8499,043d67,043d97,"ld b,a","ld b,a","ld b,a",main.asm,"LD      B,A			; Store in B"
8344,8344,8500,043d68,043d98,"ld a,e","ld a,e","ld a,e",main.asm,"LD      A,E			; Get the low byte"
8345,8345,8501,043d69,043d99,and $c0,and $c0,and $00,main.asm,AND     0C0H			; Get the top two bits	EE000000
8346,8346,8502,043d6b,043d9b,or b,or b,or b,main.asm,OR      B			; Combine with D	EEDD0000
8347,8347,8503,043d6c,043d9c,rrca,rrca,rrca,main.asm,RRCA				; Shift right		00EEDD00
8348,8348,8504,043d6d,043d9d,rrca,rrca,rrca,main.asm,RRCA
8349,8349,8505,043d6e,043d9e,xor $54,xor $54,xor $00,main.asm,XOR     01010100B		; XOR with 54h
8350,8350,8506,043d70,043da0,"ld (hl),a","ld (hl),a","ld (hl),a",main.asm,"LD      (HL),A			; Store this as the second byte"
8351,8351,8507,043d71,043da1,inc hl,inc hl,inc hl,main.asm,INC     HL
8352,8352,8508,043d72,043da2,"ld a,e","ld a,e","ld a,e",main.asm,"LD      A,E			; Get the low byte"
8353,8353,8509,043d73,043da3,and $3f,and $3f,and $00,main.asm,AND     3FH			; Strip the top two bits off
8354,8354,8510,043d75,043da5,or $40,or $40,or $00,main.asm,OR      '@'			; OR with 40h
8355,8355,8511,043d77,043da7,"ld (hl),a","ld (hl),a","ld (hl),a",main.asm,"LD      (HL),A			; Store"
8356,8356,8512,043d78,043da8,inc hl,inc hl,inc hl,main.asm,INC     HL
8357,8357,8513,043d79,043da9,"ld a,d","ld a,d","ld a,d",main.asm,"LD      A,D			; Get the high byte"
8358,8358,8514,043d7a,043daa,and $3f,and $3f,and $00,main.asm,AND     3FH			; Strip the top two bits off
8359,8359,8515,043d7c,043dac,or $40,or $40,or $00,main.asm,OR      '@'			; OR with 40h
8360,8360,8516,043d7e,043dae,"ld (hl),a","ld (hl),a","ld (hl),a",main.asm,"LD      (HL),A			; Store"
8361,8361,8517,043d7f,043daf,inc hl,inc hl,inc hl,main.asm,INC     HL
8362,8362,8518,043d80,043db0,"ex de,hl","ex de,hl","ex de,hl",main.asm,"EX      DE,HL			; DE: string pointer, HL: line number"
8363,8363,8519,043d81,043db1,ret,ret,ret,main.asm,RET
8364,8364,8520,043d82,043db2,"ld hl,($044d2f)","ld hl,($044d2f)","ld hl,($000000)",main.asm,"REPORT:			LD      HL, (ERRTXT)		; Output an error message pointed to by ERRTXT"
8365,8365,8521,043d86,043db6,"ld a,(hl)","ld a,(hl)","ld a,(hl)",main.asm,"TEXT_:			LD      A, (HL)			; Fetch the character"
8366,8366,8522,043d87,043db7,inc hl,inc hl,inc hl,main.asm,INC     HL			; Increment pointer to next character
8367,8367,8523,043d88,043db8,or a,or a,or a,main.asm,OR      A			; Check for the nul (0) string terminator
8368,8368,8524,043d89,043db9,ret z,ret z,ret z,main.asm,RET     Z			; And return if so
8369,8369,8525,043d8a,043dba,call $04396c,call $04399c,call $000000,main.asm,CALL    OUT_			; Output the character; note that OUT_ will detokenise tokens
8370,8370,8526,043d8e,043dbe,jr $-$08,jr $-$08,jr $-$00,main.asm,JR      TEXT_			; And loop
8371,8371,8527,043d90,043dc0,"ex (sp),hl","ex (sp),hl","ex (sp),hl",main.asm,"TELL:			EX      (SP), HL		; Get the return address off the stack into HL, this is the"
8372,8372,8528,043d91,043dc1,call $043d86,call $043db6,call $000000,main.asm,"CALL    TEXT_			; first byte of the string that follows it. Print it, then"
8373,8373,8529,043d95,043dc5,"ex (sp),hl","ex (sp),hl","ex (sp),hl",main.asm,"EX      (SP), HL		; HL will point to the next instruction, swap this back onto the stack"
8374,8374,8530,043d96,043dc6,ret,ret,ret,main.asm,RET				; at this point we'll return to the first instruction after the message; --- End main.asm ---
8375,8375,8531,043d97,043dc7,push bc,push bc,push bc,misc.asm,ASC_TO_NUMBER:		PUSH	BC			; Preserve BC
8376,8376,8532,043d98,043dc8,"ld de,$000000","ld de,$000000","ld de,$000000",misc.asm,"LD	DE, 0			; Initialise DE"
8377,8377,8533,043d9c,043dcc,call $043dde,call $043e0e,call $000000,misc.asm,CALL	SKIPSPC			; Skip whitespace
8378,8378,8534,043da0,043dd0,"ld a,(hl)","ld a,(hl)","ld a,(hl)",misc.asm,"LD	A, (HL)			; Read first character"
8379,8379,8535,043da1,043dd1,cp $26,cp $26,cp $00,misc.asm,CP	'&'			; Is it prefixed with '&' (HEX number)?
8380,8380,8536,043da3,043dd3,"jr nz,$+$21","jr nz,$+$21","jr nz,$+$00",misc.asm,"JR	NZ, ASC_TO_NUMBER3	; Jump to decimal parser if not"
8381,8381,8537,043da5,043dd5,inc hl,inc hl,inc hl,misc.asm,INC	HL			; Otherwise fall through to ASC_TO_HEX
8382,8382,8538,043da6,043dd6,"ld a,(hl)","ld a,(hl)","ld a,(hl)",misc.asm,"ASC_TO_NUMBER1:		LD	A, (HL)			; Fetch the character"
8383,8383,8539,043da7,043dd7,call $043dec,call $043e1c,call $000000,misc.asm,CALL    UPPERC			; Convert to uppercase
8384,8384,8540,043dab,043ddb,sub $30,sub $30,sub $00,misc.asm,SUB	'0'			; Normalise to 0
8385,8385,8541,043dad,043ddd,"jr c,$+$30","jr c,$+$30","jr c,$+$00",misc.asm,"JR 	C, ASC_TO_NUMBER4	; Return if < ASCII '0'"
8386,8386,8542,043daf,043ddf,cp $0a,cp $0a,cp $00,misc.asm,CP 	10			; Check if >= 10
8387,8387,8543,043db1,043de1,"jr c,$+$08","jr c,$+$08","jr c,$+$00",misc.asm,"JR 	C,ASC_TO_NUMBER2	; No, so skip next bit"
8388,8388,8544,043db3,043de3,sub $07,sub $07,sub $00,misc.asm,SUB 	7			; Adjust ASCII A-F to nibble
8389,8389,8545,043db5,043de5,cp $10,cp $10,cp $00,misc.asm,CP 	16			; Check for > F
8390,8390,8546,043db7,043de7,"jr nc,$+$26","jr nc,$+$26","jr nc,$+$00",misc.asm,"JR 	NC, ASC_TO_NUMBER4	; Return if out of range"
8391,8391,8547,043db9,043de9,"ex de,hl","ex de,hl","ex de,hl",misc.asm,"ASC_TO_NUMBER2:		EX 	DE, HL 			; Shift DE left 4 times"
8392,8392,8548,043dba,043dea,"add hl,hl","add hl,hl","add hl,hl",misc.asm,"ADD	HL, HL"
8393,8393,8549,043dbb,043deb,"add hl,hl","add hl,hl","add hl,hl",misc.asm,"ADD	HL, HL"
8394,8394,8550,043dbc,043dec,"add hl,hl","add hl,hl","add hl,hl",misc.asm,"ADD	HL, HL"
8395,8395,8551,043dbd,043ded,"add hl,hl","add hl,hl","add hl,hl",misc.asm,"ADD	HL, HL"
8396,8396,8552,043dbe,043dee,"ex de,hl","ex de,hl","ex de,hl",misc.asm,"EX	DE, HL"
8397,8397,8553,043dbf,043def,or e,or e,or e,misc.asm,OR      E			; OR the new digit in to the least significant nibble
8398,8398,8554,043dc0,043df0,"ld e,a","ld e,a","ld e,a",misc.asm,"LD      E, A"
8399,8399,8555,043dc1,043df1,inc hl,inc hl,inc hl,misc.asm,INC     HL			; Onto the next character
8400,8400,8556,043dc2,043df2,jr $-$1c,jr $-$1c,jr $-$00,misc.asm,JR      ASC_TO_NUMBER1		; And loop
8401,8401,8557,043dc4,043df4,"ld a,(hl)","ld a,(hl)","ld a,(hl)",misc.asm,"ASC_TO_NUMBER3:		LD	A, (HL)"
8402,8402,8558,043dc5,043df5,sub $30,sub $30,sub $00,misc.asm,SUB	'0'			; Normalise to 0
8403,8403,8559,043dc7,043df7,"jr c,$+$16","jr c,$+$16","jr c,$+$00",misc.asm,"JR	C, ASC_TO_NUMBER4	; Return if < ASCII '0'"
8404,8404,8560,043dc9,043df9,cp $0a,cp $0a,cp $00,misc.asm,CP	10			; Check if >= 10
8405,8405,8561,043dcb,043dfb,"jr nc,$+$12","jr nc,$+$12","jr nc,$+$00",misc.asm,"JR	NC, ASC_TO_NUMBER4	; Return if >= 10"
8406,8406,8562,043dcd,043dfd,"ex de,hl","ex de,hl","ex de,hl",misc.asm,"EX 	DE, HL 			; Stick DE in HL"
8407,8407,8563,043dce,043dfe,"ld b,h","ld b,h","ld b,h",misc.asm,"LD	B, H 			; And copy HL into BC"
8408,8408,8564,043dcf,043dff,"ld c,l","ld c,l","ld c,l",misc.asm,"LD	C, L"
8409,8409,8565,043dd0,043e00,"add hl,hl","add hl,hl","add hl,hl",misc.asm,"ADD	HL, HL 			; x 2"
8410,8410,8566,043dd1,043e01,"add hl,hl","add hl,hl","add hl,hl",misc.asm,"ADD	HL, HL 			; x 4"
8411,8411,8567,043dd2,043e02,"add hl,bc","add hl,bc","add hl,bc",misc.asm,"ADD	HL, BC 			; x 5"
8412,8412,8568,043dd3,043e03,"add hl,hl","add hl,hl","add hl,hl",misc.asm,"ADD	HL, HL 			; x 10"
8413,8413,8569,043dd4,043e04,"ex de,hl","ex de,hl","ex de,hl",misc.asm,"EX	DE, HL"
8414,8414,8570,043dd5,043e05,"add a,e","add a,e","add a,e",misc.asm,"ADD	A, E"
8415,8415,8571,043dd6,043e06,"ld e,a","ld e,a","ld e,a",misc.asm,"LD	E, A"
8416,8416,8572,043dd7,043e07,"adc a,d","adc a,d","adc a,d",misc.asm,"ADC	A, D"
8417,8417,8573,043dd8,043e08,sub e,sub e,sub e,misc.asm,SUB	E
8418,8418,8574,043dd9,043e09,"ld d,a","ld d,a","ld d,a",misc.asm,"LD	D, A"
8419,8419,8575,043dda,043e0a,inc hl,inc hl,inc hl,misc.asm,INC	HL
8420,8420,8576,043ddb,043e0b,jr $-$17,jr $-$17,jr $-$00,misc.asm,JR	ASC_TO_NUMBER3
8421,8421,8577,043ddd,043e0d,pop bc,pop bc,pop bc,misc.asm,ASC_TO_NUMBER4:		POP	BC 			; Fall through to SKIPSPC here
8422,8422,8578,043dde,043e0e,"ld a,(hl)","ld a,(hl)","ld a,(hl)",misc.asm,"SKIPSPC:			LD      A, (HL)"
8423,8423,8579,043ddf,043e0f,cp $20,cp $20,cp $00,misc.asm,CP      ' '
8424,8424,8580,043de1,043e11,ret nz,ret nz,ret nz,misc.asm,RET     NZ
8425,8425,8581,043de2,043e12,inc hl,inc hl,inc hl,misc.asm,INC     HL
8426,8426,8582,043de3,043e13,jr $-$05,jr $-$05,jr $-$00,misc.asm,JR      SKIPSPC
8427,8427,8583,043de5,043e15,"ld a,(hl)","ld a,(hl)","ld a,(hl)",misc.asm,"SKIPNOTSP:		LD	A, (HL)"
8428,8428,8584,043de6,043e16,cp $20,cp $20,cp $00,misc.asm,CP	' '
8429,8429,8585,043de8,043e18,ret z,ret z,ret z,misc.asm,RET	Z
8430,8430,8586,043de9,043e19,inc hl,inc hl,inc hl,misc.asm,INC	HL
8431,8431,8587,043dea,043e1a,jr $-$05,jr $-$05,jr $-$00,misc.asm,JR	SKIPNOTSP
8432,8432,8588,043dec,043e1c,and $7f,and $7f,and $00,misc.asm,UPPERC:  		AND     7FH
8433,8433,8589,043dee,043e1e,cp $60,cp $60,cp $00,misc.asm,CP      '`'
8434,8434,8590,043df0,043e20,ret c,ret c,ret c,misc.asm,RET     C
8435,8435,8591,043df1,043e21,and $5f,and $5f,and $00,misc.asm,AND     5FH			; Convert to upper case
8436,8436,8592,043df3,043e23,ret,ret,ret,misc.asm,RET
8437,8437,8593,043df4,043e24,"ex (sp),hl","ex (sp),hl","ex (sp),hl",misc.asm,"SWITCH_A:		EX	(SP), HL		; Swap HL with the contents of the top of the stack"
8438,8438,8594,043df5,043e25,"add a,a","add a,a","add a,a",misc.asm,"ADD	A, A			; Multiply A by two"
8439,8439,8595,043df6,043e26,"add a,l","add a,l","add a,l",misc.asm,"ADD	A, L"
8440,8440,8596,043df7,043e27,"ld l,a","ld l,a","ld l,a",misc.asm,"LD	L, A"
8441,8441,8597,043df8,043e28,"adc a,h","adc a,h","adc a,h",misc.asm,"ADC	A, H"
8442,8442,8598,043df9,043e29,sub l,sub l,sub l,misc.asm,SUB	L
8443,8443,8599,043dfa,043e2a,"ld h,a","ld h,a","ld h,a",misc.asm,"LD	H, A"
8444,8444,8600,043dfb,043e2b,"ld a,(hl)","ld a,(hl)","ld a,(hl)",misc.asm,"LD	A, (HL)			; follow the call. Fetch an address from the"
8445,8445,8601,043dfc,043e2c,inc hl,inc hl,inc hl,misc.asm,INC	HL 			; table.
8446,8446,8602,043dfd,043e2d,"ld h,(hl)","ld h,(hl)","ld h,(hl)",misc.asm,"LD	H, (HL)"
8447,8447,8603,043dfe,043e2e,"ld l,a","ld l,a","ld l,a",misc.asm,"LD	L, A"
8448,8448,8604,043dff,043e2f,"ex (sp),hl","ex (sp),hl","ex (sp),hl",misc.asm,"EX	(SP), HL		; Swap this new address back, restores HL"
8449,8449,8605,043e00,043e30,ret,ret,ret,misc.asm,RET				; Return program control to this new address
8450,8450,8606,043e01,043e31,push bc,push bc,push bc,misc.asm,NULLTOCR:		PUSH 	BC
8451,8451,8607,043e02,043e32,"ld b,$00","ld b,$00","ld b,$00",misc.asm,"LD	B, 0"
8452,8452,8608,043e04,043e34,"ld c,$0d","ld c,$0d","ld c,$00",misc.asm,"LD	C, CR"
8453,8453,8609,043e06,043e36,jr $+$07,jr $+$07,jr $+$00,misc.asm,JR	CRTONULL0
8454,8454,8610,043e08,043e38,push bc,push bc,push bc,misc.asm,CRTONULL:		PUSH	BC
8455,8455,8611,043e09,043e39,"ld b,$0d","ld b,$0d","ld b,$00",misc.asm,"LD	B, CR"
8456,8456,8612,043e0b,043e3b,"ld c,$00","ld c,$00","ld c,$00",misc.asm,"LD	C, 0"
8457,8457,8613,043e0d,043e3d,push hl,push hl,push hl,misc.asm,CRTONULL0:		PUSH	HL
8458,8458,8614,043e0e,043e3e,"ld a,(hl)","ld a,(hl)","ld a,(hl)",misc.asm,"CRTONULL1:		LD	A, (HL)"
8459,8459,8615,043e0f,043e3f,cp b,cp b,cp b,misc.asm,CP 	B
8460,8460,8616,043e10,043e40,"jr z,$+$05","jr z,$+$05","jr z,$+$00",misc.asm,"JR	Z, CRTONULL2"
8461,8461,8617,043e12,043e42,inc hl,inc hl,inc hl,misc.asm,INC	HL
8462,8462,8618,043e13,043e43,jr $-$05,jr $-$05,jr $-$00,misc.asm,JR	CRTONULL1
8463,8463,8619,043e15,043e45,"ld (hl),c","ld (hl),c","ld (hl),c",misc.asm,"CRTONULL2:		LD	(HL), C"
8464,8464,8620,043e16,043e46,pop hl,pop hl,pop hl,misc.asm,POP 	HL
8465,8465,8621,043e17,043e47,pop bc,pop bc,pop bc,misc.asm,POP	BC
8466,8466,8622,043e18,043e48,ret,ret,ret,misc.asm,RET
8467,8467,8623,043e19,043e49,"ld a,(hl)","ld a,(hl)","ld a,(hl)",misc.asm,"CSTR_FNAME:		LD	A, (HL)			; Get source"
8468,8468,8624,043e1a,043e4a,cp $20,cp $20,cp $00,misc.asm,CP	32			; Is it space
8469,8469,8625,043e1c,043e4c,"jr z,$+$0b","jr z,$+$0b","jr z,$+$00",misc.asm,"JR	Z, @F"
8470,8470,8626,043e1e,043e4e,cp $0d,cp $0d,cp $00,misc.asm,CP	CR			; Or is it CR
8471,8471,8627,043e20,043e50,"jr z,$+$07","jr z,$+$07","jr z,$+$00",misc.asm,"JR	Z, @F"
8472,8472,8628,043e22,043e52,"ld (de),a","ld (de),a","ld (de),a",misc.asm,"LD	(DE), A			; No, so store"
8473,8473,8629,043e23,043e53,inc hl,inc hl,inc hl,misc.asm,INC	HL			; Increment
8474,8474,8630,043e24,043e54,inc de,inc de,inc de,misc.asm,INC	DE
8475,8475,8631,043e25,043e55,jr $-$0c,jr $-$0c,jr $-$00,misc.asm,JR	CSTR_FNAME		; And loop
8476,8476,8632,043e27,043e57,xor a,xor a,xor a,misc.asm,@@:			XOR	A			; Zero terminate the target string
8477,8477,8633,043e28,043e58,"ld (de),a","ld (de),a","ld (de),a",misc.asm,"LD	(DE), A"
8478,8478,8634,043e29,043e59,inc de,inc de,inc de,misc.asm,INC	DE			; And point to next free address
8479,8479,8635,043e2a,043e5a,ret,ret,ret,misc.asm,RET
8480,8480,8636,043e2b,043e5b,"ld a,(hl)","ld a,(hl)","ld a,(hl)",misc.asm,"CSTR_LINE:		LD	A, (HL)			; Get source"
8481,8481,8637,043e2c,043e5c,cp $0d,cp $0d,cp $00,misc.asm,CP	CR			; Is it CR
8482,8482,8638,043e2e,043e5e,"jr z,$+$07","jr z,$+$07","jr z,$+$00",misc.asm,"JR	Z, @F"
8483,8483,8639,043e30,043e60,"ld (de),a","ld (de),a","ld (de),a",misc.asm,"LD	(DE), A			; No, so store"
8484,8484,8640,043e31,043e61,inc hl,inc hl,inc hl,misc.asm,INC	HL			; Increment
8485,8485,8641,043e32,043e62,inc de,inc de,inc de,misc.asm,INC	DE
8486,8486,8642,043e33,043e63,jr $-$08,jr $-$08,jr $-$00,misc.asm,JR	CSTR_LINE		; And loop
8487,8487,8643,043e35,043e65,xor a,xor a,xor a,misc.asm,@@:			XOR	A			; Zero terminate the target string
8488,8488,8644,043e36,043e66,"ld (de),a","ld (de),a","ld (de),a",misc.asm,"LD	(DE), A"
8489,8489,8645,043e37,043e67,inc de,inc de,inc de,misc.asm,INC	DE			; And point to next free address
8490,8490,8646,043e38,043e68,ret,ret,ret,misc.asm,RET
8491,8491,8647,043e39,043e69,"ld a,(hl)","ld a,(hl)","ld a,(hl)",misc.asm,"CSTR_FINDCH:		LD	A, (HL)			; Get source"
8492,8492,8648,043e3a,043e6a,cp c,cp c,cp c,misc.asm,CP	C			; Is it our character?
8493,8493,8649,043e3b,043e6b,ret z,ret z,ret z,misc.asm,"RET	Z			; Yes, so exit"
8494,8494,8650,043e3c,043e6c,or a,or a,or a,misc.asm,OR	A			; Is it the end of string?
8495,8495,8651,043e3d,043e6d,ret z,ret z,ret z,misc.asm,"RET	Z			; Yes, so exit"
8496,8496,8652,043e3e,043e6e,inc hl,inc hl,inc hl,misc.asm,INC	HL
8497,8497,8653,043e3f,043e6f,jr $-$06,jr $-$06,jr $-$00,misc.asm,JR	CSTR_FINDCH
8498,8498,8654,043e41,043e71,"ld a,(hl)","ld a,(hl)","ld a,(hl)",misc.asm,"CSTR_ENDSWITH:		LD	A, (HL)			; Get the source string byte"
8499,8499,8655,043e42,043e72,call $043dec,call $043e1c,call $000000,misc.asm,CALL	UPPERC			; Convert to upper case
8500,8500,8656,043e46,043e76,"ld c,a","ld c,a","ld c,a",misc.asm,"LD	C, A"
8501,8501,8657,043e47,043e77,"ld a,(de)","ld a,(de)","ld a,(de)",misc.asm,"LD	A, (DE)			; Get the substring byte"
8502,8502,8658,043e48,043e78,cp c,cp c,cp c,misc.asm,CP	C
8503,8503,8659,043e49,043e79,ret nz,ret nz,ret nz,misc.asm,RET	NZ			; Return NZ if at any point the strings don't match
8504,8504,8660,043e4a,043e7a,or c,or c,or c,misc.asm,OR	C			; Check whether both bytes are zero
8505,8505,8661,043e4b,043e7b,ret z,ret z,ret z,misc.asm,"RET	Z			; If so, return, as we have reached the end of both strings"
8506,8506,8662,043e4c,043e7c,inc hl,inc hl,inc hl,misc.asm,INC	HL
8507,8507,8663,043e4d,043e7d,inc de,inc de,inc de,misc.asm,INC	DE
8508,8508,8664,043e4e,043e7e,jr $-$0d,jr $-$0d,jr $-$00,misc.asm,JR	CSTR_ENDSWITH		; And loop
8509,8509,8665,043e50,043e80,"ld a,(hl)","ld a,(hl)","ld a,(hl)",misc.asm,"CSTR_CAT:		LD	A, (HL)			; Loop until we find the end of the first string"
8510,8510,8666,043e51,043e81,or a,or a,or a,misc.asm,OR	A
8511,8511,8667,043e52,043e82,"jr z,$+$05","jr z,$+$05","jr z,$+$00",misc.asm,"JR	Z, CSTR_CAT_1"
8512,8512,8668,043e54,043e84,inc hl,inc hl,inc hl,misc.asm,INC	HL
8513,8513,8669,043e55,043e85,jr $-$05,jr $-$05,jr $-$00,misc.asm,JR	CSTR_CAT
8514,8514,8670,043e57,043e87,"ld a,(de)","ld a,(de)","ld a,(de)",misc.asm,"CSTR_CAT_1:		LD	A, (DE)			; Copy the second string onto the end of the first string"
8515,8515,8671,043e58,043e88,"ld (hl),a","ld (hl),a","ld (hl),a",misc.asm,"LD	(HL), A"
8516,8516,8672,043e59,043e89,or a,or a,or a,misc.asm,OR	A			; Check for end of string
8517,8517,8673,043e5a,043e8a,ret z,ret z,ret z,misc.asm,RET	Z			; And return
8518,8518,8674,043e5b,043e8b,inc hl,inc hl,inc hl,misc.asm,INC	HL
8519,8519,8675,043e5c,043e8c,inc de,inc de,inc de,misc.asm,INC	DE
8520,8520,8676,043e5d,043e8d,jr $-$06,jr $-$06,jr $-$00,misc.asm,JR	CSTR_CAT_1		; Loop until finished						; --- End misc.asm ---
8521,8521,8677,043e5f,043e8f,"ld e,$01","ld e,$01","ld e,$00",patch.asm,"OSLINE:			LD 	E, 1			; Default is to clear the buffer"
8522,8522,8678,043e61,043e91,push iy,push iy,push iy,patch.asm,OSLINE1:		PUSH	IY
8523,8523,8679,043e63,043e93,push hl,push hl,push hl,patch.asm,PUSH	HL			; Buffer address
8524,8524,8680,043e64,043e94,"ld bc,$000100","ld bc,$000100","ld bc,$000000",patch.asm,"LD	BC, 256			; Buffer length"
8525,8525,8681,043e68,043e98,"ld a,$09","ld a,$09","ld a,$00",patch.asm,"LD	A, function"
8526,8526,8682,043e6a,043e9a,rst.lis $08,rst.lis $08,rst.lis $00,patch.asm,RST.LIS	08h
8527,8527,8683,043e6c,043e9c,pop hl,pop hl,pop hl,patch.asm,POP	HL			; Pop the address
8528,8528,8684,043e6d,043e9d,pop iy,pop iy,pop iy,patch.asm,POP	IY
8529,8529,8685,043e6f,043e9f,push af,push af,push af,patch.asm,PUSH	AF			; Stack the return value (key pressed)
8530,8530,8686,043e70,043ea0,call $043e01,call $043e31,call $000000,patch.asm,CALL	NULLTOCR		; Turn the 0 character to a CR
8531,8531,8687,043e74,043ea4,call $043947,call $043977,call $000000,patch.asm,CALL	CRLF			; Display CRLF
8532,8532,8688,043e78,043ea8,pop af,pop af,pop af,patch.asm,POP	AF
8533,8533,8689,043e79,043ea9,cp $1b,cp $1b,cp $00,patch.asm,CP	1Bh 			; Check if ESC terminated the input
8534,8534,8690,043e7b,043eab,"jp z,$043f77","jp z,$043fa7","jp z,$000000",patch.asm,"JP	Z, LTRAP1 		; Yes, so do the ESC thing"
8535,8535,8691,043e7f,043eaf,"ld a,($044d42)","ld a,($044d42)","ld a,($000000)",patch.asm,"LD	A, (FLAGS)		; Otherwise"
8536,8536,8692,043e83,043eb3,"res 7,a","res 7,a","res 7,a",patch.asm,"RES	7, A 			; Clear the escape flag"
8537,8537,8693,043e85,043eb5,"ld ($044d42),a","ld ($044d42),a","ld ($000000),a",patch.asm,"LD	(FLAGS), A"
8538,8538,8694,043e89,043eb9,call $04413d,call $04417e,call $000000,patch.asm,CALL	WAIT_VBLANK 		; Wait a frame
8539,8539,8695,043e8d,043ebd,xor a,xor a,xor a,patch.asm,XOR	A			; Return A = 0
8540,8540,8696,043e8e,043ebe,"ld ($044d47),a","ld ($044d47),a","ld ($000000),a",patch.asm,"LD	(KEYDOWN), A"
8541,8541,8697,043e92,043ec2,"ld ($044d48),a","ld ($044d48),a","ld ($000000),a",patch.asm,"LD	(KEYASCII), A"
8542,8542,8698,043e96,043ec6,ret,ret,ret,patch.asm,RET
8543,8543,8699,043e97,043ec7,push ix,push ix,push ix,patch.asm,PUTIME:			PUSH 	IX
8544,8544,8700,043e99,043ec9,"ld a,$08","ld a,$08","ld a,$00",patch.asm,"LD	A, function"
8545,8545,8701,043e9b,043ecb,rst.lis $08,rst.lis $08,rst.lis $00,patch.asm,RST.LIS	08h
8546,8546,8702,043e9d,043ecd,"ld (ix),l","ld (ix),l","ld (ix),l",patch.asm,"LD	(IX + sysvar_time + 0), L"
8547,8547,8703,043ea0,043ed0,"ld (ix+$01),h","ld (ix+$01),h","ld (ix+$00),h",patch.asm,"LD	(IX + sysvar_time + 1), H"
8548,8548,8704,043ea3,043ed3,"ld (ix+$02),e","ld (ix+$02),e","ld (ix+$00),e",patch.asm,"LD	(IX + sysvar_time + 2), E"
8549,8549,8705,043ea6,043ed6,"ld (ix+$03),d","ld (ix+$03),d","ld (ix+$00),d",patch.asm,"LD	(IX + sysvar_time + 3), D"
8550,8550,8706,043ea9,043ed9,pop ix,pop ix,pop ix,patch.asm,POP	IX
8551,8551,8707,043eab,043edb,ret,ret,ret,patch.asm,RET
8552,8552,8708,043eac,043edc,push ix,push ix,push ix,patch.asm,GETIME:			PUSH 	IX
8553,8553,8709,043eae,043ede,"ld a,$08","ld a,$08","ld a,$00",patch.asm,"LD	A, function"
8554,8554,8710,043eb0,043ee0,rst.lis $08,rst.lis $08,rst.lis $00,patch.asm,RST.LIS	08h
8555,8555,8711,043eb2,043ee2,"ld l,(ix)","ld l,(ix)","ld l,(ix)",patch.asm,"LD	L, (IX + sysvar_time + 0)"
8556,8556,8712,043eb5,043ee5,"ld h,(ix+$01)","ld h,(ix+$01)","ld h,(ix+$00)",patch.asm,"LD	H, (IX + sysvar_time + 1)"
8557,8557,8713,043eb8,043ee8,"ld e,(ix+$02)","ld e,(ix+$02)","ld e,(ix+$00)",patch.asm,"LD	E, (IX + sysvar_time + 2)"
8558,8558,8714,043ebb,043eeb,"ld d,(ix+$03)","ld d,(ix+$03)","ld d,(ix+$00)",patch.asm,"LD	D, (IX + sysvar_time + 3)"
8559,8559,8715,043ebe,043eee,pop ix,pop ix,pop ix,patch.asm,POP	IX
8560,8560,8716,043ec0,043ef0,ret,ret,ret,patch.asm,RET
8561,8561,8717,043ec1,043ef1,"ld a,$1f","ld a,$1f","ld a,$00",patch.asm,"PUTCSR:			LD	A, 1Fh			; TAB"
8562,8562,8718,043ec3,043ef3,rst.lil $10,rst.lil $10,rst.lil $00,patch.asm,RST.LIL	10h
8563,8563,8719,043ec5,043ef5,"ld a,e","ld a,e","ld a,e",patch.asm,"LD	A, E			; X"
8564,8564,8720,043ec6,043ef6,rst.lil $10,rst.lil $10,rst.lil $00,patch.asm,RST.LIL 10h
8565,8565,8721,043ec8,043ef8,"ld a,l","ld a,l","ld a,l",patch.asm,"LD	A, L			; Y"
8566,8566,8722,043ec9,043ef9,rst.lil $10,rst.lil $10,rst.lil $00,patch.asm,RST.LIL 10h
8567,8567,8723,043ecb,043efb,ret,ret,ret,patch.asm,RET
8568,8568,8724,043ecc,043efc,push ix,push ix,push ix,patch.asm,GETCSR:			PUSH	IX			; Get the system vars in IX
8569,8569,8725,043ece,043efe,"ld a,$08","ld a,$08","ld a,$00",patch.asm,"LD	A, function"
8570,8570,8726,043ed0,043f00,rst.lis $08,rst.lis $08,rst.lis $00,patch.asm,RST.LIS	08h
8571,8571,8727,043ed2,043f02,"res 0,(ix+$04)","res 0,(ix+$04)","res 0,(ix+$00)",patch.asm,"RES	0, (IX+sysvar_vpd_pflags)"
8572,8572,8728,043ed6,043f06,"ld a,$17","ld a,$17","ld a,$00",patch.asm,"LD	A, val"
8573,8573,8729,043ed8,043f08,call $043f00,call $043f30,call $000000,patch.asm,CALL	OSWRCH
8574,8574,8730,043edc,043f0c,"ld a,$00","ld a,$00","ld a,$00",patch.asm,"LD	A, val"
8575,8575,8731,043ede,043f0e,call $043f00,call $043f30,call $000000,patch.asm,CALL	OSWRCH
8576,8576,8732,043ee2,043f12,"ld a,$82","ld a,$82","ld a,$00",patch.asm,"LD	A, val"
8577,8577,8733,043ee4,043f14,call $043f00,call $043f30,call $000000,patch.asm,CALL	OSWRCH
8578,8578,8734,043ee8,043f18,"bit 0,(ix+$04)","bit 0,(ix+$04)","bit 0,(ix+$00)",patch.asm,"@@:			BIT	0, (IX+sysvar_vpd_pflags)"
8579,8579,8735,043eec,043f1c,"jr z,$-$04","jr z,$-$04","jr z,$-$00",patch.asm,"JR	Z, @B			; Wait for the result"
8580,8580,8736,043eee,043f1e,"ld d,$00","ld d,$00","ld d,$00",patch.asm,"LD 	D, 0"
8581,8581,8737,043ef0,043f20,"ld h,d","ld h,d","ld h,d",patch.asm,"LD	H, D"
8582,8582,8738,043ef1,043f21,"ld e,(ix+$07)","ld e,(ix+$07)","ld e,(ix+$00)",patch.asm,"LD	E, (IX + sysvar_cursorX)"
8583,8583,8739,043ef4,043f24,"ld l,(ix+$08)","ld l,(ix+$08)","ld l,(ix+$00)",patch.asm,"LD	L, (IX + sysvar_cursorY)"
8584,8584,8740,043ef7,043f27,pop ix,pop ix,pop ix,patch.asm,POP	IX
8585,8585,8741,043ef9,043f29,ret,ret,ret,patch.asm,RET
8586,8586,8742,043efa,043f2a,"ld a,$3e","ld a,$3e","ld a,$00",patch.asm,"PROMPT: 		LD	A,'>'"
8587,8587,8743,043efc,043f2c,jp $043f00,jp $043f30,jp $000000,patch.asm,JP	OSWRCH
8588,8588,8744,043f00,043f30,push hl,push hl,push hl,patch.asm,OSWRCH:			PUSH	HL
8589,8589,8745,043f01,043f31,"ld hl,$044d40","ld hl,$044d40","ld hl,$000000",patch.asm,"LD	HL, LISTON		; Fetch the LISTON variable"
8590,8590,8746,043f05,043f35,"bit 3,(hl)","bit 3,(hl)","bit 3,(hl)",patch.asm,"BIT	3, (HL)			; Check whether we are in *EDIT mode"
8591,8591,8747,043f07,043f37,"jr nz,$+$0d","jr nz,$+$0d","jr nz,$+$00",patch.asm,"JR	NZ, OSWRCH_BUFFER	; Yes, so just output to buffer"
8592,8592,8748,043f09,043f39,"ld hl,($044d45)","ld hl,($044d45)","ld hl,($000000)",patch.asm,"LD	HL, (OSWRCHCH)		; L: Channel #"
8593,8593,8749,043f0d,043f3d,dec l,dec l,dec l,patch.asm,DEC	L			; If it is 1
8594,8594,8750,043f0e,043f3e,"jr z,$+$12","jr z,$+$12","jr z,$+$00",patch.asm,"JR	Z, OSWRCH_FILE		; Then we are outputting to a file"
8595,8595,8751,043f10,043f40,pop hl,pop hl,pop hl,patch.asm,POP	HL			; Otherwise
8596,8596,8752,043f11,043f41,rst.lil $10,rst.lil $10,rst.lil $00,patch.asm,RST.LIL	10h			; Output the character to MOS
8597,8597,8753,043f13,043f43,ret,ret,ret,patch.asm,RET
8598,8598,8754,043f14,043f44,"ld hl,($044d43)","ld hl,($044d43)","ld hl,($000000)",patch.asm,"OSWRCH_BUFFER:		LD	HL, (OSWRCHPT)		; Fetch the pointer buffer"
8599,8599,8755,043f18,043f48,"ld (hl),a","ld (hl),a","ld (hl),a",patch.asm,"LD	(HL), A			; Echo the character into the buffer"
8600,8600,8756,043f19,043f49,inc hl,inc hl,inc hl,patch.asm,INC	HL			; Increment pointer
8601,8601,8757,043f1a,043f4a,"ld ($044d43),hl","ld ($044d43),hl","ld ($000000),hl",patch.asm,"LD	(OSWRCHPT), HL		; Write pointer back"
8602,8602,8758,043f1e,043f4e,pop hl,pop hl,pop hl,patch.asm,POP	HL
8603,8603,8759,043f1f,043f4f,ret,ret,ret,patch.asm,RET
8604,8604,8760,043f20,043f50,push de,push de,push de,patch.asm,OSWRCH_FILE:		PUSH	DE
8605,8605,8761,043f21,043f51,"ld e,h","ld e,h","ld e,h",patch.asm,"LD	E, H			; Filehandle to E"
8606,8606,8762,043f22,043f52,call $04433b,call $04437c,call $000000,patch.asm,CALL	OSBPUT			; Write the byte out
8607,8607,8763,043f26,043f56,pop de,pop de,pop de,patch.asm,POP	DE
8608,8608,8764,043f27,043f57,pop hl,pop hl,pop hl,patch.asm,POP	HL
8609,8609,8765,043f28,043f58,ret,ret,ret,patch.asm,RET
8610,8610,8766,043f29,043f59,"ld a,$00","ld a,$00","ld a,$00",patch.asm,"LD	A, function"
8611,8611,8767,043f2b,043f5b,rst.lis $08,rst.lis $08,rst.lis $00,patch.asm,RST.LIS	08h
8612,8612,8768,043f2d,043f5d,cp $1b,cp $1b,cp $00,patch.asm,CP	1Bh
8613,8613,8769,043f2f,043f5f,"jr z,$+$48","jr z,$+$48","jr z,$+$00",patch.asm,"JR	Z, LTRAP1"
8614,8614,8770,043f31,043f61,ret,ret,ret,patch.asm,RET
8615,8615,8771,043f32,043f62,call $043f63,call $043f93,call $000000,patch.asm,OSKEY:			CALL	READKEY			; Read the keyboard
8616,8616,8772,043f36,043f66,"jr z,$+$0c","jr z,$+$0c","jr z,$+$00",patch.asm,"JR	Z, @F 			; Skip if we have a key"
8617,8617,8773,043f38,043f68,"ld a,h","ld a,h","ld a,h",patch.asm,"LD	A, H 			; Check loop counter"
8618,8618,8774,043f39,043f69,or l,or l,or l,patch.asm,OR 	L
8619,8619,8775,043f3a,043f6a,ret z,ret z,ret z,patch.asm,"RET 	Z 			; Return, we've not got a key at this point"
8620,8620,8776,043f3b,043f6b,call $04413d,call $04417e,call $000000,patch.asm,CALL	WAIT_VBLANK 		; Wait a frame
8621,8621,8777,043f3f,043f6f,dec hl,dec hl,dec hl,patch.asm,DEC 	HL			; Decrement
8622,8622,8778,043f40,043f70,jr $-$0e,jr $-$0e,jr $-$00,patch.asm,JR	OSKEY 			; And loop
8623,8623,8779,043f42,043f72,"ld hl,$044d47","ld hl,$044d47","ld hl,$000000",patch.asm,"@@:			LD	HL, KEYDOWN		; We have a key, so"
8624,8624,8780,043f46,043f76,"ld (hl),$00","ld (hl),$00","ld (hl),$00",patch.asm,"LD	(HL), 0			; clear the keydown flag"
8625,8625,8781,043f48,043f78,cp $1b,cp $1b,cp $00,patch.asm,"CP	1BH			; If we are not pressing ESC,"
8626,8626,8782,043f4a,043f7a,scf,scf,scf,patch.asm,SCF 				; then flag we've got a character
8627,8627,8783,043f4b,043f7b,ret nz,ret nz,ret nz,patch.asm,RET	NZ
8628,8628,8784,043f4c,043f7c,push hl,push hl,push hl,patch.asm,ESCSET: 		PUSH    HL
8629,8629,8785,043f4d,043f7d,"ld hl,$044d42","ld hl,$044d42","ld hl,$000000",patch.asm,"LD      HL,FLAGS		; Pointer to FLAGS"
8630,8630,8786,043f51,043f81,"bit 6,(hl)","bit 6,(hl)","bit 6,(hl)",patch.asm,"BIT     6,(HL)			; If bit 6 is set, then"
8631,8631,8787,043f53,043f83,"jr nz,$+$04","jr nz,$+$04","jr nz,$+$00",patch.asm,"JR      NZ,ESCDIS		; escape is disabled, so skip"
8632,8632,8788,043f55,043f85,"set 7,(hl)","set 7,(hl)","set 7,(hl)",patch.asm,"SET     7,(HL)			; Set bit 7, the escape flag"
8633,8633,8789,043f57,043f87,pop hl,pop hl,pop hl,patch.asm,ESCDIS: 		POP     HL
8634,8634,8790,043f58,043f88,ret,ret,ret,patch.asm,RET
8635,8635,8791,043f59,043f89,call $043f63,call $043f93,call $000000,patch.asm,ESCTEST:		CALL	READKEY			; Read the keyboard
8636,8636,8792,043f5d,043f8d,ret nz,ret nz,ret nz,patch.asm,RET	NZ			; Skip if no key is pressed
8637,8637,8793,043f5e,043f8e,cp $1b,cp $1b,cp $00,patch.asm,CP	1BH			; If ESC pressed then
8638,8638,8794,043f60,043f90,"jr z,$-$14","jr z,$-$14","jr z,$-$00",patch.asm,"JR	Z,ESCSET		; jump to the escape set routine"
8639,8639,8795,043f62,043f92,ret,ret,ret,patch.asm,RET
8640,8640,8796,043f63,043f93,"ld a,($044d47)","ld a,($044d47)","ld a,($000000)",patch.asm,"READKEY:		LD	A, (KEYDOWN)		; Get key down"
8641,8641,8797,043f67,043f97,dec a,dec a,dec a,patch.asm,DEC	A 			; Set Z flag if keydown is 1
8642,8642,8798,043f68,043f98,"ld a,($044d48)","ld a,($044d48)","ld a,($000000)",patch.asm,"LD	A, (KEYASCII)		; Get key ASCII value"
8643,8643,8799,043f6c,043f9c,ret,ret,ret,patch.asm,RET
8644,8644,8800,043f6d,043f9d,call $043f59,call $043f89,call $000000,patch.asm,"TRAP:			CALL	ESCTEST			; Read keyboard, test for ESC, set FLAGS"
8645,8645,8801,043f71,043fa1,"ld a,($044d42)","ld a,($044d42)","ld a,($000000)",patch.asm,"LTRAP:			LD	A,(FLAGS)		; Get FLAGS"
8646,8646,8802,043f75,043fa5,or a,or a,or a,patch.asm,OR	A			; This checks for bit 7; if it is not set then the result will
8647,8647,8803,043f76,043fa6,ret p,ret p,ret p,patch.asm,"RET	P			; be positive (bit 7 is the sign bit in Z80), so return"
8648,8648,8804,043f77,043fa7,"ld hl,$044d42","ld hl,$044d42","ld hl,$000000",patch.asm,"LTRAP1:			LD	HL,FLAGS 		; Escape is pressed at this point, so"
8649,8649,8805,043f7b,043fab,"res 7,(hl)","res 7,(hl)","res 7,(hl)",patch.asm,"RES	7,(HL)			; Clear the escape pressed flag and"
8650,8650,8806,043f7d,043fad,jp $040c9b,jp $040c9b,jp $000000,patch.asm,JP	ESCAPE			; Jump to the ESCAPE error routine in exec.asm
8651,8651,8807,043f81,043fb1,call $0448e0,call $044916,call $000000,patch.asm,OSINIT:			CALL	VBLANK_INIT
8652,8652,8808,043f85,043fb5,xor a,xor a,xor a,patch.asm,XOR	A
8653,8653,8809,043f86,043fb6,"ld hl,$044e00","ld hl,$044e00","ld hl,$000000",patch.asm,"LD 	HL, USER"
8654,8654,8810,043f8a,043fba,"ld de,$0b0000","ld de,$0b0000","ld de,$000000",patch.asm,"LD	DE, RAM_Top"
8655,8655,8811,043f8e,043fbe,"ld e,a","ld e,a","ld e,a",patch.asm,"LD	E, A			; Page boundary"
8656,8656,8812,043f8f,043fbf,ret,ret,ret,patch.asm,RET
8657,8657,8813,043f90,043fc0,call $044004,call $044034,call $000000,patch.asm,OSCLI: 			CALL    SKIPSP
8658,8658,8814,043f94,043fc4,cp $0d,cp $0d,cp $00,patch.asm,CP      CR
8659,8659,8815,043f96,043fc6,ret z,ret z,ret z,patch.asm,RET     Z
8660,8660,8816,043f97,043fc7,cp $7c,cp $7c,cp $00,patch.asm,CP      '|'
8661,8661,8817,043f99,043fc9,ret z,ret z,ret z,patch.asm,RET     Z
8662,8662,8818,043f9a,043fca,"ex de,hl","ex de,hl","ex de,hl",patch.asm,"EX      DE,HL"
8663,8663,8819,043f9b,043fcb,"ld hl,$044013","ld hl,$044043","ld hl,$000000",patch.asm,"LD      HL,COMDS"
8664,8664,8820,043f9f,043fcf,"ld a,(de)","ld a,(de)","ld a,(de)",patch.asm,"OSCLI0:			LD      A,(DE)"
8665,8665,8821,043fa0,043fd0,call $04400b,call $04403b,call $000000,patch.asm,CALL    UPPRC
8666,8666,8822,043fa4,043fd4,cp (hl),cp (hl),cp (hl),patch.asm,CP      (HL)
8667,8667,8823,043fa5,043fd5,"jr z,$+$0d","jr z,$+$0d","jr z,$+$00",patch.asm,"JR      Z,OSCLI2"
8668,8668,8824,043fa7,043fd7,"jr c,$+$32","jr c,$+$32","jr c,$+$00",patch.asm,"JR      C,OSCLI6"
8669,8669,8825,043fa9,043fd9,"bit 7,(hl)","bit 7,(hl)","bit 7,(hl)",patch.asm,"OSCLI1:			BIT     7,(HL)"
8670,8670,8826,043fab,043fdb,inc hl,inc hl,inc hl,patch.asm,INC     HL
8671,8671,8827,043fac,043fdc,"jr z,$-$03","jr z,$-$03","jr z,$-$00",patch.asm,"JR      Z,OSCLI1"
8672,8672,8828,043fae,043fde,inc hl,inc hl,inc hl,patch.asm,INC     HL
8673,8673,8829,043faf,043fdf,inc hl,inc hl,inc hl,patch.asm,INC     HL
8674,8674,8830,043fb0,043fe0,jr $-$11,jr $-$11,jr $-$00,patch.asm,JR      OSCLI0
8675,8675,8831,043fb2,043fe2,push de,push de,push de,patch.asm,OSCLI2:			PUSH    DE
8676,8676,8832,043fb3,043fe3,inc de,inc de,inc de,patch.asm,OSCLI3:			INC     DE
8677,8677,8833,043fb4,043fe4,inc hl,inc hl,inc hl,patch.asm,INC     HL
8678,8678,8834,043fb5,043fe5,"ld a,(de)","ld a,(de)","ld a,(de)",patch.asm,"LD      A,(DE)"
8679,8679,8835,043fb6,043fe6,call $04400b,call $04403b,call $000000,patch.asm,CALL    UPPRC
8680,8680,8836,043fba,043fea,cp $2e,cp $2e,cp $00,patch.asm,CP      '.'			; ABBREVIATED?
8681,8681,8837,043fbc,043fec,"jr z,$+$0c","jr z,$+$0c","jr z,$+$00",patch.asm,"JR      Z,OSCLI4"
8682,8682,8838,043fbe,043fee,xor (hl),xor (hl),xor (hl),patch.asm,XOR     (HL)
8683,8683,8839,043fbf,043fef,"jr z,$-$0c","jr z,$-$0c","jr z,$-$00",patch.asm,"JR      Z,OSCLI3"
8684,8684,8840,043fc1,043ff1,cp $80,cp $80,cp $00,patch.asm,CP      80H
8685,8685,8841,043fc3,043ff3,"jr z,$+$05","jr z,$+$05","jr z,$+$00",patch.asm,"JR      Z,OSCLI4"
8686,8686,8842,043fc5,043ff5,pop de,pop de,pop de,patch.asm,POP     DE
8687,8687,8843,043fc6,043ff6,jr $-$1d,jr $-$1d,jr $-$00,patch.asm,JR      OSCLI1
8688,8688,8844,043fc8,043ff8,pop af,pop af,pop af,patch.asm,OSCLI4:			POP     AF
8689,8689,8845,043fc9,043ff9,inc de,inc de,inc de,patch.asm,INC     DE
8690,8690,8846,043fca,043ffa,"bit 7,(hl)","bit 7,(hl)","bit 7,(hl)",patch.asm,"OSCLI5:			BIT     7,(HL)"
8691,8691,8847,043fcc,043ffc,inc hl,inc hl,inc hl,patch.asm,INC     HL
8692,8692,8848,043fcd,043ffd,"jr z,$-$03","jr z,$-$03","jr z,$-$00",patch.asm,"JR      Z,OSCLI5"
8693,8693,8849,043fcf,043fff,"ld a,(hl)","ld a,(hl)","ld a,(hl)",patch.asm,"LD      A,(HL)"
8694,8694,8850,043fd0,044000,inc hl,inc hl,inc hl,patch.asm,INC     HL
8695,8695,8851,043fd1,044001,"ld h,(hl)","ld h,(hl)","ld h,(hl)",patch.asm,"LD      H,(HL)"
8696,8696,8852,043fd2,044002,"ld l,a","ld l,a","ld l,a",patch.asm,"LD      L,A"
8697,8697,8853,043fd3,044003,push hl,push hl,push hl,patch.asm,PUSH    HL
8698,8698,8854,043fd4,044004,"ex de,hl","ex de,hl","ex de,hl",patch.asm,"EX      DE,HL"
8699,8699,8855,043fd5,044005,jp $044004,jp $044034,jp $000000,patch.asm,JP      SKIPSP
8700,8700,8856,043fd9,044009,"ex de,hl","ex de,hl","ex de,hl",patch.asm,"OSCLI6:			EX	DE, HL			; HL: Buffer for command"
8701,8701,8857,043fda,04400a,"ld de,$044a00","ld de,$044a00","ld de,$000000",patch.asm,"LD	DE, ACCS		; Buffer for command string is ACCS (the string accumulator)"
8702,8702,8858,043fde,04400e,push de,push de,push de,patch.asm,PUSH	DE			; Store buffer address
8703,8703,8859,043fdf,04400f,call $043e2b,call $043e5b,call $000000,patch.asm,CALL	CSTR_LINE		; Fetch the line
8704,8704,8860,043fe3,044013,pop hl,pop hl,pop hl,patch.asm,POP	HL			; HL: Pointer to command string in ACCS
8705,8705,8861,043fe4,044014,push iy,push iy,push iy,patch.asm,PUSH	IY
8706,8706,8862,043fe6,044016,"ld a,$10","ld a,$10","ld a,$00",patch.asm,"LD	A, function"
8707,8707,8863,043fe8,044018,rst.lis $08,rst.lis $08,rst.lis $00,patch.asm,RST.LIS	08h
8708,8708,8864,043fea,04401a,pop iy,pop iy,pop iy,patch.asm,POP	IY
8709,8709,8865,043fec,04401c,or a,or a,or a,patch.asm,OR	A			; 0 means MOS returned OK
8710,8710,8866,043fed,04401d,ret z,ret z,ret z,patch.asm,RET	Z			; So don't do anything
8711,8711,8867,043fee,04401e,jp $044217,jp $044258,jp $000000,patch.asm,JP 	OSERROR			; Otherwise it's a MOS error
8712,8712,8868,043ff2,044022,"ld a,$fe","ld a,$fe","ld a,$00",patch.asm,"HUH:    		LD      A,254			; Bad command error"
8713,8713,8869,043ff4,044024,call $043777,call $0437a7,call $000000,patch.asm,CALL    EXTERR
8714,8714,8870,043ff8,044028,"ld b,d","ld b,d","ld b,d",patch.asm,"DB    	""Bad command"""
8715,8715,8871,043ff9,044029,"ld h,c","ld h,c","ld h,c",patch.asm,
8716,8716,8872,043ffa,04402a,"ld h,h","ld h,h","ld h,h",patch.asm,
8717,8717,8873,043ffb,04402b,"jr nz,$+$65","jr nz,$+$65","jr nz,$+$00",patch.asm,
8717,8717,8873,043ffb,04402b,"jr nz,$+$65","jr nz,$+$65","jr nz,$+$00",patch.asm,
8718,8718,8874,043ffd,04402d,"ld l,a","ld l,a","ld l,a",patch.asm,
8719,8719,8875,043ffe,04402e,"ld l,l","ld l,l","ld l,l",patch.asm,
8719,8719,8875,043ffe,04402e,"ld l,l","ld l,l","ld l,l",patch.asm,
8720,8720,8876,043fff,04402f,"ld l,l","ld l,l","ld l,l",patch.asm,
8721,8721,8877,044000,044030,"ld h,c","ld h,c","ld h,c",patch.asm,
8722,8722,8878,044001,044031,"ld l,(hl)","ld l,(hl)","ld l,(hl)",,
8723,8723,8879,044002,044032,"ld h,h","ld h,h","ld h,h",,
8724,8724,8880,044003,044033,nop,nop,nop,patch.asm,DEFB    0
8725,8725,8881,044004,044034,"ld a,(hl)","ld a,(hl)","ld a,(hl)",patch.asm,"SKIPSP:			LD      A,(HL)"
8726,8726,8882,044005,044035,cp $20,cp $20,cp $00,patch.asm,CP      ' '
8727,8727,8883,044007,044037,ret nz,ret nz,ret nz,patch.asm,RET     NZ
8728,8728,8884,044008,044038,inc hl,inc hl,inc hl,patch.asm,INC     HL
8729,8729,8885,044009,044039,jr $-$05,jr $-$05,jr $-$00,patch.asm,JR      SKIPSP
8730,8730,8886,04400b,04403b,and $7f,and $7f,and $00,patch.asm,UPPRC:  		AND     7FH
8731,8731,8887,04400d,04403d,cp $60,cp $60,cp $00,patch.asm,CP      '`'
8732,8732,8888,04400f,04403f,ret c,ret c,ret c,patch.asm,RET     C
8733,8733,8889,044010,044040,and $5f,and $5f,and $00,patch.asm,AND     5FH			; CONVERT TO UPPER CASE
8734,8734,8890,044012,044042,ret,ret,ret,patch.asm,RET
8735,8735,,044013,,"ld b,d",,"ld b,d",,
8736,8736,,044014,,"ld e,c",,"ld e,c",,
8737,8737,,044015,,push bc,,push bc,,
8738,8738,,044016,,inc l,,inc l,,
8739,8739,,044017,,"ld.sis b,l",,"ld.sis b,l",,
8740,8740,,044019,,"ld b,h",,"ld b,h",,
8741,8741,,04401a,,"call.lis nc,$4061",,"call.lis nc,$0000",,
8742,8742,,04401e,,"ld b,(hl)",,"ld b,(hl)",,
8743,8743,,04401f,,ret c,,ret c,,
8744,8744,,044020,,and c,,and c,,
8745,8745,,044021,,"ld.sis d,(hl)",,"ld.sis d,(hl)",,
8746,8746,,044023,,"ld b,l",,"ld b,l",,
8747,8747,,044024,,"ld.sil d,e",,"ld.sil d,e",,
8748,8748,,044026,,"ld.lis c,a",,"ld.lis c,a",,
8749,8749,,044028,,"adc a,$38",,"adc a,$00",,
8750,8750,,04402a,,rst.sis $38,,rst.sis $00,,
8751,8751,8917,04402c,04406d,call $0448f4,call $04492a,call $000000,patch.asm,STAR_BYE:		CALL	VBLANK_STOP		; Restore MOS interrupts
8752,8752,8918,044030,044071,"ld hl,$000000","ld hl,$000000","ld hl,$000000",patch.asm,"LD	HL, 0			; The return value"
8753,8753,8919,044034,044075,jp $040068,jp $040068,jp $000000,patch.asm,JP	_end 			; Jump back to the end routine in init.asm
8754,8754,8920,044038,044079,call $043d90,call $043dc0,call $000000,patch.asm,STAR_VERSION:		CALL    TELL			; Output the welcome message
8755,8755,8921,04403c,04407d,"ld b,d","ld b,d","ld b,d",patch.asm,"DB    	""BBC BASIC (Agon ADL) Version 1.03\n\r"",0"
8756,8756,8922,04403d,04407e,"ld b,d","ld b,d","ld b,d",patch.asm,
8757,8757,8923,04403e,04407f,"ld b,e","ld b,e","ld b,e",patch.asm,
8758,8758,8924,04403f,044080,"jr nz,$+$44","jr nz,$+$44","jr nz,$+$00",patch.asm,
8758,8758,8924,04403f,044080,"jr nz,$+$44","jr nz,$+$44","jr nz,$+$00",patch.asm,
8759,8759,8925,044041,044082,"ld b,c","ld b,c","ld b,c",patch.asm,
8760,8760,8926,044042,044083,"ld d,e","ld d,e","ld d,e",patch.asm,
8760,8760,8926,044042,044083,"ld d,e","ld d,e","ld d,e",patch.asm,
8761,8761,8927,044043,044084,"ld.lis b,e","ld.lis b,e","ld.lis b,e",patch.asm,
8762,8762,8928,044045,044086,"jr nz,$+$2a","jr nz,$+$2a","jr nz,$+$00",patch.asm,
8762,8762,8928,044045,044086,"jr nz,$+$2a","jr nz,$+$2a","jr nz,$+$00",patch.asm,
8763,8763,8929,044047,044088,"ld b,c","ld b,c","ld b,c",patch.asm,
8764,8764,8930,044048,044089,"ld h,a","ld h,a","ld h,a",patch.asm,
8764,8764,8930,044048,044089,"ld h,a","ld h,a","ld h,a",patch.asm,
8765,8765,8931,044049,04408a,"ld l,a","ld l,a","ld l,a",patch.asm,
8766,8766,8932,04404a,04408b,"ld l,(hl)","ld l,(hl)","ld l,(hl)",patch.asm,
8767,8767,8933,04404b,04408c,"jr nz,$+$43","jr nz,$+$43","jr nz,$+$00",patch.asm,
8767,8767,8933,04404b,04408c,"jr nz,$+$43","jr nz,$+$43","jr nz,$+$00",patch.asm,
8768,8768,8934,04404d,04408e,"ld b,h","ld b,h","ld b,h",patch.asm,
8769,8769,8935,04404e,04408f,"ld c,h","ld c,h","ld c,h",patch.asm,
8769,8769,8935,04404e,04408f,"ld c,h","ld c,h","ld c,h",patch.asm,
8770,8770,8936,04404f,044090,"add hl,hl","add hl,hl","add hl,hl",patch.asm,
8771,8771,8937,044050,044091,"jr nz,$+$58","jr nz,$+$58","jr nz,$+$00",patch.asm,
8772,8772,8938,044052,044093,"ld h,l","ld h,l","ld h,l",patch.asm,
8773,8773,8939,044053,044094,"ld (hl),d","ld (hl),d","ld (hl),d",patch.asm,
8774,8774,8940,044054,044095,"ld (hl),e","ld (hl),e","ld (hl),e",patch.asm,
8774,8774,8940,044054,044095,"ld (hl),e","ld (hl),e","ld (hl),e",patch.asm,
8775,8775,8941,044055,044096,"ld l,c","ld l,c","ld l,c",patch.asm,
8776,8776,8942,044056,044097,"ld l,a","ld l,a","ld l,a",patch.asm,
8777,8777,8943,044057,044098,"ld l,(hl)","ld l,(hl)","ld l,(hl)",patch.asm,
8778,8778,8944,044058,044099,"jr nz,$+$33","jr nz,$+$33","jr nz,$+$00",,
8779,8779,8945,04405a,04409b,"ld l,$30","ld l,$30","ld l,$00",,
8780,8780,8946,04405c,04409d,inc sp,inc sp,inc sp,,
8781,8781,8947,04405d,04409e,"ld a,(bc)","ld a,(bc)","ld a,(bc)",,
8782,8782,8948,04405e,04409f,dec c,dec c,dec c,,
8783,8783,8949,04405f,0440a0,nop,nop,nop,,
8784,8784,8950,044060,0440a1,ret,ret,ret,patch.asm,RET
8785,8785,8951,044061,0440a2,call $043d97,call $043dc7,call $000000,patch.asm,STAR_EDIT:		CALL	ASC_TO_NUMBER		; DE: Line number to edit
8786,8786,8952,044065,0440a6,"ex de,hl","ex de,hl","ex de,hl",patch.asm,"EX	DE, HL			; HL: Line number"
8787,8787,8953,044066,0440a7,call $04398f,call $0439bf,call $000000,patch.asm,CALL	FINDL			; HL: Address in RAM of tokenised line
8788,8788,8954,04406a,0440ab,"ld a,$29","ld a,$29","ld a,$00",patch.asm,"LD	A, 41			; F:NZ If the line is not found"
8789,8789,8955,04406c,0440ad,"jp nz,$043760","jp nz,$043790","jp nz,$000000",patch.asm,"JP	NZ, ERROR_		; Do error 41: No such line in that case"
8790,8790,8956,044070,0440b1,inc hl,inc hl,inc hl,patch.asm,INC	HL			; Skip the length byte
8791,8791,8957,044071,0440b2,"ld e,(hl)","ld e,(hl)","ld e,(hl)",patch.asm,"LD	E, (HL)			; Fetch the line number"
8792,8792,8958,044072,0440b3,inc hl,inc hl,inc hl,patch.asm,INC	HL
8793,8793,8959,044073,0440b4,"ld d,(hl)","ld d,(hl)","ld d,(hl)",patch.asm,"LD	D, (HL)"
8794,8794,8960,044074,0440b5,inc hl,inc hl,inc hl,patch.asm,INC	HL
8795,8795,8961,044075,0440b6,"ld ix,$044a00","ld ix,$044a00","ld ix,$000000",patch.asm,"LD	IX, ACCS		; Pointer to where the copy is to be stored"
8796,8796,8962,04407a,0440bb,"ld ($044d43),ix","ld ($044d43),ix","ld ($000000),ix",patch.asm,"LD	(OSWRCHPT), IX"
8797,8797,8963,04407f,0440c0,"ld ix,$044d40","ld ix,$044d40","ld ix,$000000",patch.asm,"LD	IX, LISTON		; Pointer to LISTON variable in RAM"
8798,8798,8964,044084,0440c5,"ld a,(ix)","ld a,(ix)","ld a,(ix)",patch.asm,"LD	A, (IX)			; Store that variable"
8799,8799,8965,044087,0440c8,push af,push af,push af,patch.asm,PUSH	AF
8800,8800,8966,044088,0440c9,"ld (ix),$09","ld (ix),$09","ld (ix),$00",patch.asm,"LD	(IX), 09h		; Set to echo to buffer"
8801,8801,8967,04408c,0440cd,call $043892,call $0438c2,call $000000,patch.asm,CALL	LISTIT
8802,8802,8968,044090,0440d1,pop af,pop af,pop af,patch.asm,POP	AF
8803,8803,8969,044091,0440d2,"ld (ix),a","ld (ix),a","ld (ix),a",patch.asm,"LD	(IX), A			; Restore the original LISTON variable"
8804,8804,8970,044094,0440d5,"ld hl,$044a00","ld hl,$044a00","ld hl,$000000",patch.asm,"LD	HL, ACCS		; HL: ACCS"
8805,8805,8971,044098,0440d9,"ld e,l","ld e,l","ld e,l",patch.asm,"LD	E, L			;  E: 0 - Don't clear the buffer; ACCS is on a page boundary so L is 0"
8806,8806,8972,044099,0440da,call $043e61,call $043e91,call $000000,patch.asm,CALL	OSLINE1			; Invoke the editor
8807,8807,8973,04409d,0440de,jp $0430d0,jp $043100,jp $000000,patch.asm,JP	ONEDIT			; Jump back to the BASIC loop just after the normal line edit
8808,8808,8974,0440a1,0440e2,call $043d97,call $043dc7,call $000000,patch.asm,STAR_FX:		CALL	ASC_TO_NUMBER
8809,8809,8975,0440a5,0440e6,"ld c,e","ld c,e","ld c,e",patch.asm,"LD	C, E			; C: Save FX #"
8810,8810,8976,0440a6,0440e7,call $043d97,call $043dc7,call $000000,patch.asm,CALL	ASC_TO_NUMBER
8811,8811,8977,0440aa,0440eb,"ld a,d","ld a,d","ld a,d",patch.asm,"LD	A, D  			; Is first parameter > 255?"
8812,8812,8978,0440ab,0440ec,or a,or a,or a,patch.asm,OR 	A
8813,8813,8979,0440ac,0440ed,"jr z,$+$05","jr z,$+$05","jr z,$+$00",patch.asm,"JR	Z, STAR_FX1		; Yes, so skip next bit"
8814,8814,8980,0440ae,0440ef,"ex de,hl","ex de,hl","ex de,hl",patch.asm,"EX	DE, HL 			; Parameter is 16-bit"
8815,8815,8981,0440af,0440f0,jr $+$09,jr $+$09,jr $+$00,patch.asm,JR	STAR_FX2
8816,8816,8982,0440b1,0440f2,"ld b,e","ld b,e","ld b,e",patch.asm,"STAR_FX1:		LD	B, E 			; B: Save First parameter"
8817,8817,8983,0440b2,0440f3,call $043d97,call $043dc7,call $000000,patch.asm,CALL	ASC_TO_NUMBER		; Fetch second parameter
8818,8818,8984,0440b6,0440f7,"ld l,b","ld l,b","ld l,b",patch.asm,"LD	L, B 			; L: First parameter"
8819,8819,8985,0440b7,0440f8,"ld h,e","ld h,e","ld h,e",patch.asm,"LD	H, E 			; H: Second parameter"
8820,8820,8986,0440b8,0440f9,"ld a,c","ld a,c","ld a,c",patch.asm,"STAR_FX2:		LD	A, C 			; A: FX #, and fall through to OSBYTE"
8821,8821,8987,0440b9,0440fa,cp $0b,cp $0b,cp $00,patch.asm,"OSBYTE:			CP	0BH			; *FX 11, n: Keyboard auto-repeat delay"
8822,8822,8988,0440bb,0440fc,"jr z,$+$1a","jr z,$+$1a","jr z,$+$00",patch.asm,"JR	Z, OSBYTE_0B"
8823,8823,8989,0440bd,0440fe,cp $0c,cp $0c,cp $00,patch.asm,"CP	0CH			; *FX 12, n: Keyboard auto-repeat rate"
8824,8824,8990,0440bf,044100,"jr z,$+$45","jr z,$+$45","jr z,$+$00",patch.asm,"JR	Z, OSBYTE_0C"
8825,8825,8991,0440c1,044102,cp $13,cp $13,cp $00,patch.asm,CP	13H			; *FX 19: Wait for vblank
8826,8826,8992,0440c3,044104,"jr z,$+$70","jr z,$+$70","jr z,$+$00",patch.asm,"JR	Z, OSBYTE_13"
8827,8827,8993,0440c5,044106,cp $76,cp $76,cp $00,patch.asm,"CP	76H			; *FX 118, n: Set keyboard LED"
8828,8828,8994,0440c7,044108,"jp z,$04414e","jp z,$04418f","jp z,$000000",patch.asm,"JP	Z, OSBYTE_76"
8829,8829,8995,0440cb,04410c,cp $a0,cp $a0,cp $00,patch.asm,CP	A0H
8830,8830,8996,0440cd,04410e,"jp z,$04417e","jp z,$0441bf","jp z,$000000",patch.asm,"JP	Z, OSBYTE_A0"
8831,8831,8997,0440d1,044112,jp $043ff2,jp $044022,jp $000000,patch.asm,JP	HUH			; Anything else trips an error
8832,8832,8998,0440d5,044116,"ld a,$17","ld a,$17","ld a,$00",patch.asm,"LD	A, val"
8833,8833,8999,0440d7,044118,call $043f00,call $043f30,call $000000,patch.asm,CALL	OSWRCH
8834,8834,9000,0440db,04411c,"ld a,$00","ld a,$00","ld a,$00",patch.asm,"LD	A, val"
8835,8835,9001,0440dd,04411e,call $043f00,call $043f30,call $000000,patch.asm,CALL	OSWRCH
8836,8836,9002,0440e1,044122,"ld a,$88","ld a,$88","ld a,$00",patch.asm,"LD	A, val"
8837,8837,9003,0440e3,044124,call $043f00,call $043f30,call $000000,patch.asm,CALL	OSWRCH
8838,8838,9004,0440e7,044128,"ld a,l","ld a,l","ld a,l",patch.asm,"LD	A, val"
8839,8839,9005,0440e8,044129,call $043f00,call $043f30,call $000000,patch.asm,CALL	OSWRCH
8840,8840,9006,0440ec,04412d,"ld a,h","ld a,h","ld a,h",patch.asm,"LD	A, val"
8841,8841,9007,0440ed,04412e,call $043f00,call $043f30,call $000000,patch.asm,CALL	OSWRCH
8842,8842,9008,0440f1,044132,"ld a,$00","ld a,$00","ld a,$00",patch.asm,"LD	A, val"
8843,8843,9009,0440f3,044134,call $043f00,call $043f30,call $000000,patch.asm,CALL	OSWRCH
8844,8844,9010,0440f7,044138,"ld a,$00","ld a,$00","ld a,$00",patch.asm,"LD	A, val"
8845,8845,9011,0440f9,04413a,call $043f00,call $043f30,call $000000,patch.asm,CALL	OSWRCH
8846,8846,9012,0440fd,04413e,"ld a,$ff","ld a,$ff","ld a,$00",patch.asm,"LD	A, val"
8847,8847,9013,0440ff,044140,call $043f00,call $043f30,call $000000,patch.asm,CALL	OSWRCH
8848,8848,9014,044103,044144,ret,ret,ret,patch.asm,RET
8849,8849,9015,044104,044145,"ld a,$17","ld a,$17","ld a,$00",patch.asm,"LD	A, val"
8850,8850,9016,044106,044147,call $043f00,call $043f30,call $000000,patch.asm,CALL	OSWRCH
8851,8851,9017,04410a,04414b,"ld a,$00","ld a,$00","ld a,$00",patch.asm,"LD	A, val"
8852,8852,9018,04410c,04414d,call $043f00,call $043f30,call $000000,patch.asm,CALL	OSWRCH
8853,8853,9019,044110,044151,"ld a,$88","ld a,$88","ld a,$00",patch.asm,"LD	A, val"
8854,8854,9020,044112,044153,call $043f00,call $043f30,call $000000,patch.asm,CALL	OSWRCH
8855,8855,9021,044116,044157,"ld a,$00","ld a,$00","ld a,$00",patch.asm,"LD	A, val"
8856,8856,9022,044118,044159,call $043f00,call $043f30,call $000000,patch.asm,CALL	OSWRCH
8857,8857,9023,04411c,04415d,"ld a,$00","ld a,$00","ld a,$00",patch.asm,"LD	A, val"
8858,8858,9024,04411e,04415f,call $043f00,call $043f30,call $000000,patch.asm,CALL	OSWRCH
8859,8859,9025,044122,044163,"ld a,l","ld a,l","ld a,l",patch.asm,"LD	A, val"
8860,8860,9026,044123,044164,call $043f00,call $043f30,call $000000,patch.asm,CALL	OSWRCH
8861,8861,9027,044127,044168,"ld a,h","ld a,h","ld a,h",patch.asm,"LD	A, val"
8862,8862,9028,044128,044169,call $043f00,call $043f30,call $000000,patch.asm,CALL	OSWRCH
8863,8863,9029,04412c,04416d,"ld a,$ff","ld a,$ff","ld a,$00",patch.asm,"LD	A, val"
8864,8864,9030,04412e,04416f,call $043f00,call $043f30,call $000000,patch.asm,CALL	OSWRCH
8865,8865,9031,044132,044173,ret,ret,ret,patch.asm,RET
8866,8866,9032,044133,044174,call $04413d,call $04417e,call $000000,patch.asm,OSBYTE_13:		CALL	WAIT_VBLANK
8867,8867,9033,044137,044178,"ld l,$00","ld l,$00","ld l,$00",patch.asm,"LD	L, 0			; Returns 0"
8868,8868,9034,044139,04417a,jp $04057f,jp $04057f,jp $000000,patch.asm,JP	COUNT0
8869,8869,9035,04413d,04417e,push ix,push ix,push ix,patch.asm,WAIT_VBLANK:		PUSH 	IX			; Wait for VBLANK interrupt
8870,8870,9036,04413f,044180,"ld a,$08","ld a,$08","ld a,$00",patch.asm,"LD	A, function"
8871,8871,9037,044141,044182,rst.lis $08,rst.lis $08,rst.lis $00,patch.asm,RST.LIS	08h
8872,8872,9038,044143,044184,"ld a,(ix)","ld a,(ix)","ld a,(ix)",patch.asm,"LD	A, (IX + sysvar_time + 0)"
8873,8873,9039,044146,044187,cp (ix),cp (ix),cp (ix),patch.asm,"@@:			CP 	A, (IX + sysvar_time + 0)"
8874,8874,9040,044149,04418a,"jr z,$-$03","jr z,$-$03","jr z,$-$00",patch.asm,"JR	Z, @B"
8875,8875,9041,04414b,04418c,pop ix,pop ix,pop ix,patch.asm,POP	IX
8876,8876,9042,04414d,04418e,ret,ret,ret,patch.asm,RET
8877,8877,9043,04414e,04418f,"ld a,$17","ld a,$17","ld a,$00",patch.asm,"LD	A, val"
8878,8878,9044,044150,044191,call $043f00,call $043f30,call $000000,patch.asm,CALL	OSWRCH
8879,8879,9045,044154,044195,"ld a,$00","ld a,$00","ld a,$00",patch.asm,"LD	A, val"
8880,8880,9046,044156,044197,call $043f00,call $043f30,call $000000,patch.asm,CALL	OSWRCH
8881,8881,9047,04415a,04419b,"ld a,$88","ld a,$88","ld a,$00",patch.asm,"LD	A, val"
8882,8882,9048,04415c,04419d,call $043f00,call $043f30,call $000000,patch.asm,CALL	OSWRCH
8883,8883,9049,044160,0441a1,"ld a,$00","ld a,$00","ld a,$00",patch.asm,"LD	A, val"
8884,8884,9050,044162,0441a3,call $043f00,call $043f30,call $000000,patch.asm,CALL	OSWRCH
8885,8885,9051,044166,0441a7,"ld a,$00","ld a,$00","ld a,$00",patch.asm,"LD	A, val"
8886,8886,9052,044168,0441a9,call $043f00,call $043f30,call $000000,patch.asm,CALL	OSWRCH
8887,8887,9053,04416c,0441ad,"ld a,$00","ld a,$00","ld a,$00",patch.asm,"LD	A, val"
8888,8888,9054,04416e,0441af,call $043f00,call $043f30,call $000000,patch.asm,CALL	OSWRCH
8889,8889,9055,044172,0441b3,"ld a,$00","ld a,$00","ld a,$00",patch.asm,"LD	A, val"
8890,8890,9056,044174,0441b5,call $043f00,call $043f30,call $000000,patch.asm,CALL	OSWRCH
8891,8891,9057,044178,0441b9,"ld a,l","ld a,l","ld a,l",patch.asm,"LD	A, val"
8892,8892,9058,044179,0441ba,call $043f00,call $043f30,call $000000,patch.asm,CALL	OSWRCH
8893,8893,9059,04417d,0441be,ret,ret,ret,patch.asm,RET
8894,8894,9060,04417e,0441bf,push ix,push ix,push ix,patch.asm,OSBYTE_A0:		PUSH	IX
8895,8895,9061,044180,0441c1,"ld a,$08","ld a,$08","ld a,$00",patch.asm,"LD	A, function"
8896,8896,9062,044182,0441c3,rst.lis $08,rst.lis $08,rst.lis $00,patch.asm,RST.LIS	08h
8897,8897,9063,044184,0441c5,"ld bc,$000000","ld bc,$000000","ld bc,$000000",patch.asm,"LD	BC, 0"
8898,8898,9064,044188,0441c9,"ld c,l","ld c,l","ld c,l",patch.asm,"LD	C, L			; BCU = L"
8899,8899,9065,044189,0441ca,"add ix,bc","add ix,bc","add ix,bc",patch.asm,"ADD	IX, BC			; Add to IX"
8900,8900,9066,04418b,0441cc,"ld l,(ix)","ld l,(ix)","ld l,(ix)",patch.asm,"LD	L, (IX + 0)		; Fetch the return value"
8901,8901,9067,04418e,0441cf,pop ix,pop ix,pop ix,patch.asm,POP	IX
8902,8902,9068,044190,0441d1,jp $04057f,jp $04057f,jp $000000,patch.asm,JP 	COUNT0
8903,8903,9069,044194,0441d5,push bc,push bc,push bc,patch.asm,OSLOAD:			PUSH	BC			; Stack the size
8904,8904,9070,044195,0441d6,push de,push de,push de,patch.asm,PUSH	DE			; Stack the load address
8905,8905,9071,044196,0441d7,"ld de,$044a00","ld de,$044a00","ld de,$000000",patch.asm,"LD	DE, ACCS		; Buffer address for filename"
8906,8906,9072,04419a,0441db,call $043e19,call $043e49,call $000000,patch.asm,CALL	CSTR_FNAME		; Fetch filename from MOS into buffer
8907,8907,9073,04419e,0441df,"ld hl,$044a00","ld hl,$044a00","ld hl,$000000",patch.asm,"LD	HL, ACCS		; HL: Filename"
8908,8908,9074,0441a2,0441e3,call $044294,call $0442d5,call $000000,patch.asm,CALL	EXT_DEFAULT		; Tack on the extension .BBC if not specified
8909,8909,9075,0441a6,0441e7,call $0442a8,call $0442e9,call $000000,patch.asm,CALL	EXT_HANDLER		; Get the default handler
8910,8910,9076,0441aa,0441eb,pop de,pop de,pop de,patch.asm,POP	DE			; Restore the load address
8911,8911,9077,0441ab,0441ec,pop bc,pop bc,pop bc,patch.asm,POP	BC			; Restore the size
8912,8912,9078,0441ac,0441ed,or a,or a,or a,patch.asm,OR	A
8913,8913,9079,0441ad,0441ee,"jr z,$+$62","jr z,$+$62","jr z,$+$00",patch.asm,"JR 	Z, OSLOAD_BBC"
8914,8914,9080,0441af,0441f0,xor a,xor a,xor a,patch.asm,OSLOAD_TXT:		XOR	A			; Set file attributes to read
8915,8915,9081,0441b0,0441f1,call $04431c,call $04435d,call $000000,patch.asm,CALL	OSOPEN			; Open the file
8916,8916,9082,0441b4,0441f5,"ld e,a","ld e,a","ld e,a",patch.asm,"LD 	E, A 			; The filehandle"
8917,8917,9083,0441b5,0441f6,or a,or a,or a,patch.asm,OR	A
8918,8918,9084,0441b6,0441f7,"ld a,$04","ld a,$04","ld a,$00",patch.asm,"LD	A, 4			; File not found error"
8919,8919,9085,0441b8,0441f9,"jr z,$+$5f","jr z,$+$5f","jr z,$+$00",patch.asm,"JR	Z, OSERROR		; Jump to error handler"
8920,8920,9086,0441ba,0441fb,call $04386c,call $04389c,call $000000,patch.asm,CALL	NEWIT			; Call NEW to clear the program space
8921,8921,9087,0441be,0441ff,"ld hl,$044a00","ld hl,$044a00","ld hl,$000000",patch.asm,"OSLOAD_TXT1:		LD	HL, ACCS 		; Where the input is going to be stored"
8922,8922,9088,0441c2,044203,call $044333,call $044374,call $000000,patch.asm,@@:			CALL	OSBGET			; Read the byte into A
8923,8923,9089,0441c6,044207,"jr c,$+$20","jr c,$+$20","jr c,$+$00",patch.asm,"JR	C, OSLOAD_TXT3		; Is it EOF?"
8924,8924,9090,0441c8,044209,cp $0a,cp $0a,cp $00,patch.asm,CP	LF 			; Is it LF?
8925,8925,9091,0441ca,04420b,"jr z,$+$1c","jr z,$+$1c","jr z,$+$00",patch.asm,"JR	Z, OSLOAD_TXT3 		; Yes, so skip to the next line"
8926,8926,9092,0441cc,04420d,cp $21,cp $21,cp $00,patch.asm,CP	21h			; Is it less than or equal to ASCII space?
8927,8927,9093,0441ce,04420f,"jr c,$-$0c","jr c,$-$0c","jr c,$-$00",patch.asm,"JR	C, @B 			; Yes, so keep looping"
8928,8928,9094,0441d0,044211,"ld (hl),a","ld (hl),a","ld (hl),a",patch.asm,"LD	(HL), A 		; Store the first character"
8929,8929,9095,0441d1,044212,inc l,inc l,inc l,patch.asm,INC	L
8930,8930,9096,0441d2,044213,call $044333,call $044374,call $000000,patch.asm,OSLOAD_TXT2:		CALL	OSBGET			; Read the byte into A
8931,8931,9097,0441d6,044217,"jr c,$+$2d","jr c,$+$2d","jr c,$+$00",patch.asm,"JR	C, OSLOAD_TXT4		; Is it EOF?"
8932,8932,9098,0441d8,044219,cp $20,cp $20,cp $00,patch.asm,CP	20h			; Skip if not an ASCII character
8933,8933,9099,0441da,04421b,"jr c,$+$08","jr c,$+$08","jr c,$+$00",patch.asm,"JR	C, @F"
8934,8934,9100,0441dc,04421d,"ld (hl),a","ld (hl),a","ld (hl),a",patch.asm,"LD	(HL), A 		; Store in the input buffer"
8935,8935,9101,0441dd,04421e,inc l,inc l,inc l,patch.asm,INC	L			; Increment the buffer pointer
8936,8936,9102,0441de,04421f,"jp z,$0436f8","jp z,$043728","jp z,$000000",patch.asm,"JP	Z, BAD			; If the buffer is full (wrapped to 0) then jump to Bad Program error"
8937,8937,9103,0441e2,044223,cp $0a,cp $0a,cp $00,patch.asm,@@:			CP	LF			; Check for LF
8938,8938,9104,0441e4,044225,"jr nz,$-$12","jr nz,$-$12","jr nz,$-$00",patch.asm,"JR	NZ, OSLOAD_TXT2		; If not, then loop to read the rest of the characters in"
8939,8939,9105,0441e6,044227,"ld (hl),$0d","ld (hl),$0d","ld (hl),$00",patch.asm,"OSLOAD_TXT3:		LD	(HL), CR		; Store a CR for BBC BASIC"
8940,8940,9106,0441e8,044229,"ld a,l","ld a,l","ld a,l",patch.asm,"LD	A, L			; Check for minimum line length"
8941,8941,9107,0441e9,04422a,cp $02,cp $02,cp $00,patch.asm,CP	2			; If it is 2 characters or less (including CR)
8942,8942,9108,0441eb,04422c,"jr c,$+$0c","jr c,$+$0c","jr c,$+$00",patch.asm,"JR	C, @F			; Then don't bother entering it"
8943,8943,9109,0441ed,04422e,push de,push de,push de,patch.asm,PUSH	DE			; Preserve the filehandle
8944,8944,9110,0441ee,04422f,call $0430dc,call $04310c,call $000000,patch.asm,CALL	ONEDIT1			; Enter the line in memory
8945,8945,9111,0441f2,044233,"call c,$04383f","call c,$04386f","call c,$000000",patch.asm,"CALL	C,CLEAN			; If a new line has been entered, then call CLEAN to set TOP and write &FFFF end of program marker"
8946,8946,9112,0441f6,044237,pop de,pop de,pop de,patch.asm,POP	DE
8947,8947,9113,0441f7,044238,call $044344,call $044385,call $000000,patch.asm,@@:			CALL	OSSTAT			; End of file?
8948,8948,9114,0441fb,04423c,"jr nz,$-$3d","jr nz,$-$3d","jr nz,$-$00",patch.asm,"JR	NZ, OSLOAD_TXT1		; No, so loop"
8949,8949,9115,0441fd,04423e,call $04432b,call $04436c,call $000000,patch.asm,CALL	OSSHUT			; Close the file
8950,8950,9116,044201,044242,scf,scf,scf,patch.asm,SCF				; Flag to BASIC that we're good
8951,8951,9117,044202,044243,ret,ret,ret,patch.asm,RET
8952,8952,9118,044203,044244,cp $20,cp $20,cp $00,patch.asm,OSLOAD_TXT4:		CP	20h			; Skip if not an ASCII character
8953,8953,9119,044205,044246,"jr c,$+$08","jr c,$+$08","jr c,$+$00",patch.asm,"JR	C, @F"
8954,8954,9120,044207,044248,"ld (hl),a","ld (hl),a","ld (hl),a",patch.asm,"LD	(HL), A			; Store the character"
8955,8955,9121,044208,044249,inc l,inc l,inc l,patch.asm,INC	L
8956,8956,9122,044209,04424a,"jp z,$0436f8","jp z,$043728","jp z,$000000",patch.asm,"JP	Z, BAD"
8957,8957,9123,04420d,04424e,jr $-$27,jr $-$27,jr $-$00,patch.asm,@@:			JR	OSLOAD_TXT3
8958,8958,9124,04420f,044250,"ld a,$01","ld a,$01","ld a,$00",patch.asm,"LD	A, function"
8959,8959,9125,044211,044252,rst.lis $08,rst.lis $08,rst.lis $00,patch.asm,RST.LIS	08h
8960,8960,9126,044213,044254,ret nc,ret nc,ret nc,patch.asm,RET	NC			; If load returns with carry reset - NO ROOM
8961,8961,9127,044214,044255,or a,or a,or a,patch.asm,OR	A			; If there is no error (A=0)
8962,8962,9128,044215,044256,scf,scf,scf,patch.asm,SCF				; Need to set carry indicating there was room
8963,8963,9129,044216,044257,ret z,ret z,ret z,patch.asm,RET	Z			; Return
8964,8964,9130,044217,044258,push af,push af,push af,patch.asm,OSERROR:		PUSH	AF			; Handle the MOS error
8965,8965,9131,044218,044259,"ld hl,$044a00","ld hl,$044a00","ld hl,$000000",patch.asm,"LD	HL, ACCS		; Address of the buffer"
8966,8966,9132,04421c,04425d,"ld bc,$000100","ld bc,$000100","ld bc,$000000",patch.asm,"LD	BC, 256			; Length of the buffer"
8967,8967,9133,044220,044261,"ld e,a","ld e,a","ld e,a",patch.asm,"LD	E, A			; The error code"
8968,8968,9134,044221,044262,"ld a,$0f","ld a,$0f","ld a,$00",patch.asm,"LD	A, function"
8969,8969,9135,044223,044264,rst.lis $08,rst.lis $08,rst.lis $00,patch.asm,RST.LIS	08h
8970,8970,9136,044225,044266,pop af,pop af,pop af,patch.asm,POP	AF
8971,8971,9137,044226,044267,push hl,push hl,push hl,patch.asm,PUSH	HL			; Stack the address of the error (now in ACCS)
8972,8972,9138,044227,044268,"add a,$7f","add a,$7f","add a,$00",patch.asm,"ADD	A, 127			; Add 127 to the error code (MOS errors start at 128, and are trappable)"
8973,8973,9139,044229,04426a,jp $043777,jp $0437a7,jp $000000,patch.asm,JP	EXTERR			; Trigger an external error
8974,8974,9140,04422d,04426e,push bc,push bc,push bc,patch.asm,OSSAVE:			PUSH	BC			; Stack the size
8975,8975,9141,04422e,04426f,push de,push de,push de,patch.asm,PUSH	DE			; Stack the save address
8976,8976,9142,04422f,044270,"ld de,$044a00","ld de,$044a00","ld de,$000000",patch.asm,"LD	DE, ACCS		; Buffer address for filename"
8977,8977,9143,044233,044274,call $043e19,call $043e49,call $000000,patch.asm,CALL	CSTR_FNAME		; Fetch filename from MOS into buffer
8978,8978,9144,044237,044278,"ld hl,$044a00","ld hl,$044a00","ld hl,$000000",patch.asm,"LD	HL, ACCS		; HL: Filename"
8979,8979,9145,04423b,04427c,call $044294,call $0442d5,call $000000,patch.asm,CALL	EXT_DEFAULT		; Tack on the extension .BBC if not specified
8980,8980,9146,04423f,044280,call $0442a8,call $0442e9,call $000000,patch.asm,CALL	EXT_HANDLER		; Get the default handler
8981,8981,9147,044243,044284,pop de,pop de,pop de,patch.asm,POP	DE			; Restore the save address
8982,8982,9148,044244,044285,pop bc,pop bc,pop bc,patch.asm,POP	BC			; Restore the size
8983,8983,9149,044245,044286,or a,or a,or a,patch.asm,OR	A			; Is the extension .BBC
8984,8984,9150,044246,044287,"jr z,$+$46","jr z,$+$46","jr z,$+$00",patch.asm,"JR	Z, OSSAVE_BBC		; Yes, so use that"
8985,8985,9151,044248,044289,"ld a,($044d45)","ld a,($044d45)","ld a,($000000)",patch.asm,"OSSAVE_TXT:		LD 	A, (OSWRCHCH)		; Stack the current channel"
8986,8986,9152,04424c,04428d,push af,push af,push af,patch.asm,PUSH	AF
8987,8987,9153,04424d,04428e,xor a,xor a,xor a,patch.asm,XOR	A
8988,8988,9154,04424e,04428f,inc a,inc a,inc a,patch.asm,"INC	A			; Make sure C is clear, A is 1, for OPENOUT"
8989,8989,9155,04424f,044290,"ld ($044d45),a","ld ($044d45),a","ld ($000000),a",patch.asm,"LD	(OSWRCHCH), A"
8990,8990,9156,044253,044294,call $04431c,call $04435d,call $000000,patch.asm,CALL	OSOPEN			; Open the file
8991,8991,9157,044257,044298,"ld ($044d46),a","ld ($044d46),a","ld ($000000),a",patch.asm,"LD	(OSWRCHFH), A		; Store the file handle for OSWRCH"
8992,8992,9158,04425b,04429c,"ld ix,$044d40","ld ix,$044d40","ld ix,$000000",patch.asm,"LD	IX, LISTON		; Required for LISTIT"
8993,8993,9159,044260,0442a1,"ld hl,($044d14)","ld hl,($044d14)","ld hl,($000000)",patch.asm,"LD	HL, (PAGE_)		; Get start of program area"
8994,8994,9160,044264,0442a5,exx,exx,exx,patch.asm,EXX
8995,8995,9161,044265,0442a6,"ld bc,$000000","ld bc,$000000","ld bc,$000000",patch.asm,"LD	BC, 0			; Set the initial indent counters"
8996,8996,9162,044269,0442aa,exx,exx,exx,patch.asm,EXX
8997,8997,9163,04426a,0442ab,"ld a,(hl)","ld a,(hl)","ld a,(hl)",patch.asm,"OSSAVE_TXT1:		LD	A, (HL)			; Check for end of program marker"
8998,8998,9164,04426b,0442ac,or a,or a,or a,patch.asm,OR	A
8999,8999,9165,04426c,0442ad,"jr z,$+$11","jr z,$+$11","jr z,$+$00",patch.asm,"JR	Z, OSSAVE_TXT2"
9000,9000,9166,04426e,0442af,inc hl,inc hl,inc hl,patch.asm,INC	HL			; Skip the length byte
9001,9001,9167,04426f,0442b0,"ld de,$000000","ld de,$000000","ld de,$000000",patch.asm,"LD	DE, 0			; Clear DE to ensure we get a 16-bit line number"
9002,9002,9168,044273,0442b4,"ld e,(hl)","ld e,(hl)","ld e,(hl)",patch.asm,"LD	E, (HL)			; Get the line number"
9003,9003,9169,044274,0442b5,inc hl,inc hl,inc hl,patch.asm,INC	HL
9004,9004,9170,044275,0442b6,"ld d,(hl)","ld d,(hl)","ld d,(hl)",patch.asm,"LD	D, (HL)"
9005,9005,9171,044276,0442b7,inc hl,inc hl,inc hl,patch.asm,INC	HL
9006,9006,9172,044277,0442b8,call $043892,call $0438c2,call $000000,patch.asm,CALL	LISTIT			; List the line
9007,9007,9173,04427b,0442bc,jr $-$11,jr $-$11,jr $-$00,patch.asm,JR	OSSAVE_TXT1
9008,9008,9174,04427d,0442be,"ld a,($044d46)","ld a,($044d46)","ld a,($000000)",patch.asm,"OSSAVE_TXT2:		LD	A, (OSWRCHFH)		; Get the file handle"
9009,9009,9175,044281,0442c2,"ld e,a","ld e,a","ld e,a",patch.asm,"LD	E, A"
9010,9010,9176,044282,0442c3,call $04432b,call $04436c,call $000000,patch.asm,CALL	OSSHUT			; Close it
9011,9011,9177,044286,0442c7,pop af,pop af,pop af,patch.asm,POP	AF			; Restore the channel
9012,9012,9178,044287,0442c8,"ld ($044d45),a","ld ($044d45),a","ld ($000000),a",patch.asm,"LD	(OSWRCHCH), A"
9013,9013,9179,04428b,0442cc,ret,ret,ret,patch.asm,RET
9014,9014,9180,04428c,0442cd,"ld a,$02","ld a,$02","ld a,$00",patch.asm,"LD	A, function"
9015,9015,9181,04428e,0442cf,rst.lis $08,rst.lis $08,rst.lis $00,patch.asm,RST.LIS	08h
9016,9016,9182,044290,0442d1,or a,or a,or a,patch.asm,OR	A			; If there is no error (A=0)
9017,9017,9183,044291,0442d2,ret z,ret z,ret z,patch.asm,RET	Z			; Just return
9018,9018,9184,044292,0442d3,jr $-$7b,jr $-$7b,jr $-$00,patch.asm,JR	OSERROR			; Trip an error
9019,9019,9185,044294,0442d5,push hl,push hl,push hl,patch.asm,EXT_DEFAULT:		PUSH	HL			; Stack the filename pointer
9020,9020,9186,044295,0442d6,"ld c,$2e","ld c,$2e","ld c,$00",patch.asm,"LD	C, '.'			; Search for dot (marks start of extension)"
9021,9021,9187,044297,0442d8,call $043e39,call $043e69,call $000000,patch.asm,CALL	CSTR_FINDCH
9022,9022,9188,04429b,0442dc,or a,or a,or a,patch.asm,OR	A			; Check for end of string marker
9023,9023,9189,04429c,0442dd,"jr nz,$+$0a","jr nz,$+$0a","jr nz,$+$00",patch.asm,"JR	NZ, @F			; No, so skip as we have an extension at this point"
9024,9024,9190,04429e,0442df,"ld de,$0442d8","ld de,$044319","ld de,$000000",patch.asm,"LD	DE, EXT_LOOKUP		; Get the first (default extension)"
9025,9025,9191,0442a2,0442e3,call $043e50,call $043e80,call $000000,patch.asm,CALL	CSTR_CAT		; Concat it to string pointed to by HL
9026,9026,9192,0442a6,0442e7,pop hl,pop hl,pop hl,patch.asm,@@:			POP	HL			; Restore the filename pointer
9027,9027,9193,0442a7,0442e8,ret,ret,ret,patch.asm,RET
9028,9028,9194,0442a8,0442e9,push hl,push hl,push hl,patch.asm,EXT_HANDLER:		PUSH	HL			; Stack the filename pointer
9029,9029,9195,0442a9,0442ea,"ld c,$2e","ld c,$2e","ld c,$00",patch.asm,"LD	C, '.'			; Find the '.'"
9030,9030,9196,0442ab,0442ec,call $043e39,call $043e69,call $000000,patch.asm,CALL	CSTR_FINDCH
9031,9031,9197,0442af,0442f0,"ld de,$0442d8","ld de,$044319","ld de,$000000",patch.asm,"LD	DE, EXT_LOOKUP		; The lookup table"
9032,9032,9198,0442b3,0442f4,push hl,push hl,push hl,patch.asm,EXT_HANDLER_1:		PUSH	HL			; Stack the pointer to the extension
9033,9033,9199,0442b4,0442f5,call $043e41,call $043e71,call $000000,patch.asm,CALL	CSTR_ENDSWITH		; Check whether the string ends with the entry in the lookup
9034,9034,9200,0442b8,0442f9,pop hl,pop hl,pop hl,patch.asm,POP	HL			; Restore the pointer to the extension
9035,9035,9201,0442b9,0442fa,"jr z,$+$1b","jr z,$+$1b","jr z,$+$00",patch.asm,"JR	Z, EXT_HANDLER_2	; We have a match!"
9036,9036,9202,0442bb,0442fc,"ld a,(de)","ld a,(de)","ld a,(de)",patch.asm,"@@:			LD	A, (DE)			; Skip to the end of the entry in the lookup"
9037,9037,9203,0442bc,0442fd,inc de,inc de,inc de,patch.asm,INC	DE
9038,9038,9204,0442bd,0442fe,or a,or a,or a,patch.asm,OR	A
9039,9039,9205,0442be,0442ff,"jr nz,$-$03","jr nz,$-$03","jr nz,$-$00",patch.asm,"JR	NZ, @B"
9040,9040,9206,0442c0,044301,inc de,inc de,inc de,patch.asm,INC	DE			; Skip the file extension # byte
9041,9041,9207,0442c1,044302,"ld a,(de)","ld a,(de)","ld a,(de)",patch.asm,"LD	A, (DE)			; Are we at the end of the table?"
9042,9042,9208,0442c2,044303,or a,or a,or a,patch.asm,OR	A
9043,9043,9209,0442c3,044304,"jr nz,$-$10","jr nz,$-$10","jr nz,$-$00",patch.asm,"JR	NZ, EXT_HANDLER_1	; No, so loop"
9044,9044,9210,0442c5,044306,"ld a,$cc","ld a,$cc","ld a,$00",patch.asm,"LD      A,204			; Throw a ""Bad name"" error"
9045,9045,9211,0442c7,044308,call $043777,call $0437a7,call $000000,patch.asm,CALL    EXTERR
9046,9046,9212,0442cb,04430c,"ld b,d","ld b,d","ld b,d",patch.asm,"DB    	""Bad name"", 0"
9047,9047,9213,0442cc,04430d,"ld h,c","ld h,c","ld h,c",patch.asm,
9048,9048,9214,0442cd,04430e,"ld h,h","ld h,h","ld h,h",patch.asm,
9049,9049,9215,0442ce,04430f,"jr nz,$+$70","jr nz,$+$70","jr nz,$+$00",patch.asm,
9049,9049,9215,0442ce,04430f,"jr nz,$+$70","jr nz,$+$70","jr nz,$+$00",patch.asm,
9050,9050,9216,0442d0,044311,"ld h,c","ld h,c","ld h,c",patch.asm,
9051,9051,9217,0442d1,044312,"ld l,l","ld l,l","ld l,l",patch.asm,
9051,9051,9217,0442d1,044312,"ld l,l","ld l,l","ld l,l",patch.asm,
9052,9052,9218,0442d2,044313,"ld h,l","ld h,l","ld h,l",,
9053,9053,9219,0442d3,044314,nop,nop,nop,,
9054,9054,9220,0442d4,044315,inc de,inc de,inc de,patch.asm,EXT_HANDLER_2:		INC	DE			; Skip to the file extension # byte
9055,9055,9221,0442d5,044316,"ld a,(de)","ld a,(de)","ld a,(de)",patch.asm,"LD	A, (DE)"
9056,9056,9222,0442d6,044317,pop hl,pop hl,pop hl,patch.asm,POP	HL			; Restore the filename pointer
9057,9057,9223,0442d7,044318,ret,ret,ret,patch.asm,RET
9058,9058,9224,0442d8,044319,"ld l,$42","ld l,$42","ld l,$00",patch.asm,"EXT_LOOKUP:		DB	"".BBC"", 0, 0		; First entry is the default extension"
9059,9059,9225,0442da,04431b,"ld b,d","ld b,d","ld b,d",patch.asm,
9060,9060,9226,0442db,04431c,"ld b,e","ld b,e","ld b,e",patch.asm,
9060,9060,9226,0442db,04431c,"ld b,e","ld b,e","ld b,e",patch.asm,
9061,9061,9227,0442dc,04431d,nop,nop,nop,patch.asm,
9062,9062,9228,0442dd,04431e,nop,nop,nop,,
9063,9063,9229,0442de,04431f,"ld l,$54","ld l,$54","ld l,$00",patch.asm,"DB	"".TXT"", 0, 1"
9064,9064,9230,0442e0,044321,"ld e,b","ld e,b","ld e,b",patch.asm,
9065,9065,9231,0442e1,044322,"ld d,h","ld d,h","ld d,h",patch.asm,
9065,9065,9231,0442e1,044322,"ld d,h","ld d,h","ld d,h",patch.asm,
9066,9066,9232,0442e2,044323,nop,nop,nop,patch.asm,
9067,9067,9233,0442e3,044324,"ld bc,$53412e","ld bc,$53412e","ld bc,$000000",,
9068,9068,9234,0442e7,044328,"ld b,e","ld b,e","ld b,e",patch.asm,
9068,9068,9234,0442e7,044328,"ld b,e","ld b,e","ld b,e",patch.asm,
9069,9069,9235,0442e8,044329,nop,nop,nop,patch.asm,
9070,9070,9236,0442e9,04432a,"ld bc,$41422e","ld bc,$41422e","ld bc,$000000",,
9071,9071,9237,0442ed,04432e,"ld d,e","ld d,e","ld d,e",patch.asm,
9071,9071,9237,0442ed,04432e,"ld d,e","ld d,e","ld d,e",patch.asm,
9072,9072,9238,0442ee,04432f,nop,nop,nop,patch.asm,
9073,9073,9239,0442ef,044330,"ld bc,$072100","ld bc,$482100","ld bc,$000000",,
9074,9074,9240,0442f3,044334,"ld b,e","ld b,e","ld b,e",patch.asm,
9075,9075,9241,0442f4,044335,inc b,inc b,inc b,patch.asm,
9076,9076,9242,0442f5,044336,"ld a,(hl)","ld a,(hl)","ld a,(hl)",patch.asm,"OSCALL_1:		LD	A, (HL)"
9077,9077,9243,0442f6,044337,inc hl,inc hl,inc hl,patch.asm,INC	HL
9078,9078,9244,0442f7,044338,cp $ff,cp $ff,cp $00,patch.asm,CP	FFh
9079,9079,9245,0442f9,04433a,ret z,ret z,ret z,patch.asm,RET	Z
9080,9080,9246,0442fa,04433b,cp iyl,cp iyl,cp iyl,patch.asm,"CP	A, IYL"
9081,9081,9247,0442fc,04433d,"jr z,$+$08","jr z,$+$08","jr z,$+$00",patch.asm,"JR	Z, OSCALL_2"
9082,9082,9248,0442fe,04433f,ret nc,ret nc,ret nc,patch.asm,RET	NC
9083,9083,9249,0442ff,044340,inc hl,inc hl,inc hl,patch.asm,INC	HL
9084,9084,9250,044300,044341,inc hl,inc hl,inc hl,patch.asm,INC	HL
9085,9085,9251,044301,044342,inc hl,inc hl,inc hl,patch.asm,INC	HL
9086,9086,9252,044302,044343,jr $-$0d,jr $-$0d,jr $-$00,patch.asm,JR	OSCALL_1
9087,9087,9253,044304,044345,"ld iy,(hl)","ld iy,(hl)","ld iy,(hl)",patch.asm,"OSCALL_2:		LD	IY,(HL)"
9088,9088,9254,044306,044347,ret,ret,ret,patch.asm,RET
9089,9089,9255,044307,044348,"call nc,$04433b","call nc,$04437c","call nc,$000000",patch.asm,OSCALL_TABLE:		DB 	D4h
9090,9090,9256,04430b,04434c,rst $10,rst $10,rst $00,patch.asm,DB 	D7h
9091,9091,,04430c,,inc sp,,inc sp,,
9092,9092,9258,04430d,04434e,"ld b,e","ld b,e","ld b,e",patch.asm,
9093,9093,9259,04430e,04434f,inc b,inc b,inc b,patch.asm,
9094,9094,9260,04430f,044350,xor $00,xor $30,xor $00,patch.asm,DB 	EEh
9095,9095,9261,044311,044352,ccf,ccf,ccf,patch.asm,
9096,9096,9262,044312,044353,inc b,inc b,inc b,patch.asm,
9097,9097,9263,044313,044354,"call p,$0440b9","call p,$0440fa","call p,$000000",patch.asm,DB	F4h
9098,9098,9264,044317,044358,rst $30,rst $30,rst $00,patch.asm,DB	F7h
9099,9099,,044318,,sub b,,sub b,,
9100,9100,9266,044319,04435a,ccf,ccf,ccf,patch.asm,
9101,9101,9267,04431a,04435b,inc b,inc b,inc b,patch.asm,
9102,9102,9268,04431b,04435c,rst $38,rst $38,rst $00,patch.asm,DB	FFh
9103,9103,9269,04431c,04435d,"ld c,$01","ld c,$01","ld c,$00",patch.asm,"OSOPEN:			LD	C, fa_read"
9104,9104,9270,04431e,04435f,"jr z,$+$08","jr z,$+$08","jr z,$+$00",patch.asm,"JR	Z, @F"
9105,9105,9271,044320,044361,"ld c,$32","ld c,$32","ld c,$00",patch.asm,"LD	C, fa_write | fa_open_append"
9106,9106,9272,044322,044363,"jr c,$+$04","jr c,$+$04","jr c,$+$00",patch.asm,"JR	C, @F"
9107,9107,9273,044324,044365,"ld c,$0a","ld c,$0a","ld c,$00",patch.asm,"LD	C, fa_write | fa_create_always"
9108,9108,9274,044326,044367,"ld a,$0a","ld a,$0a","ld a,$00",patch.asm,"LD	A, function"
9109,9109,9275,044328,044369,rst.lis $08,rst.lis $08,rst.lis $00,patch.asm,RST.LIS	08h
9110,9110,9276,04432a,04436b,ret,ret,ret,patch.asm,RET
9111,9111,9277,04432b,04436c,push bc,push bc,push bc,patch.asm,OSSHUT:			PUSH	BC
9112,9112,9278,04432c,04436d,"ld c,e","ld c,e","ld c,e",patch.asm,"LD	C, E"
9113,9113,9279,04432d,04436e,"ld a,$0b","ld a,$0b","ld a,$00",patch.asm,"LD	A, function"
9114,9114,9280,04432f,044370,rst.lis $08,rst.lis $08,rst.lis $00,patch.asm,RST.LIS	08h
9115,9115,9281,044331,044372,pop bc,pop bc,pop bc,patch.asm,POP	BC
9116,9116,9282,044332,044373,ret,ret,ret,patch.asm,RET
9117,9117,9283,044333,044374,push bc,push bc,push bc,patch.asm,OSBGET:			PUSH	BC
9118,9118,9284,044334,044375,"ld c,e","ld c,e","ld c,e",patch.asm,"LD	C, E"
9119,9119,9285,044335,044376,"ld a,$0c","ld a,$0c","ld a,$00",patch.asm,"LD	A, function"
9120,9120,9286,044337,044378,rst.lis $08,rst.lis $08,rst.lis $00,patch.asm,RST.LIS	08h
9121,9121,9287,044339,04437a,pop bc,pop bc,pop bc,patch.asm,POP	BC
9122,9122,9288,04433a,04437b,ret,ret,ret,patch.asm,RET
9123,9123,9289,04433b,04437c,push bc,push bc,push bc,patch.asm,OSBPUT:			PUSH	BC
9124,9124,9290,04433c,04437d,"ld c,e","ld c,e","ld c,e",patch.asm,"LD	C, E"
9125,9125,9291,04433d,04437e,"ld b,a","ld b,a","ld b,a",patch.asm,"LD	B, A"
9126,9126,9292,04433e,04437f,"ld a,$0d","ld a,$0d","ld a,$00",patch.asm,"LD	A, function"
9127,9127,9293,044340,044381,rst.lis $08,rst.lis $08,rst.lis $00,patch.asm,RST.LIS	08h
9128,9128,9294,044342,044383,pop bc,pop bc,pop bc,patch.asm,POP	BC
9129,9129,9295,044343,044384,ret,ret,ret,patch.asm,RET
9130,9130,9296,044344,044385,push bc,push bc,push bc,patch.asm,OSSTAT:			PUSH	BC
9131,9131,9297,044345,044386,"ld c,e","ld c,e","ld c,e",patch.asm,"LD	C, E"
9132,9132,9298,044346,044387,"ld a,$0e","ld a,$0e","ld a,$00",patch.asm,"LD	A, function"
9133,9133,9299,044348,044389,rst.lis $08,rst.lis $08,rst.lis $00,patch.asm,RST.LIS	08h
9134,9134,9300,04434a,04438b,pop bc,pop bc,pop bc,patch.asm,POP	BC
9135,9135,9301,04434b,04438c,cp $01,cp $01,cp $00,patch.asm,CP	1
9136,9136,9302,04434d,04438e,ret,ret,ret,patch.asm,RET
9137,9137,9303,04434e,04438f,push iy,push iy,push iy,patch.asm,GETPTR:			PUSH		IY
9138,9138,9304,044350,044391,"ld c,e","ld c,e","ld c,e",patch.asm,"LD		C, E"
9139,9139,9305,044351,044392,"ld a,$19","ld a,$19","ld a,$00",patch.asm,"LD	A, function"
9140,9140,9306,044353,044394,rst.lis $08,rst.lis $08,rst.lis $00,patch.asm,RST.LIS	08h
9141,9141,9307,044355,044396,push hl,push hl,push hl,patch.asm,PUSH		HL
9142,9142,9308,044356,044397,pop iy,pop iy,pop iy,patch.asm,POP		IY		; IYU: Pointer to FIL structure
9143,9143,9309,044358,044399,"ld l,(iy+$11)","ld l,(iy+$11)","ld l,(iy+$00)",patch.asm,"LD		L, (IY + FIL.fptr + 0)"
9144,9144,9310,04435b,04439c,"ld h,(iy+$12)","ld h,(iy+$12)","ld h,(iy+$00)",patch.asm,"LD		H, (IY + FIL.fptr + 1)"
9145,9145,9311,04435e,04439f,"ld e,(iy+$13)","ld e,(iy+$13)","ld e,(iy+$00)",patch.asm,"LD		E, (IY + FIL.fptr + 2)"
9146,9146,9312,044361,0443a2,"ld d,(iy+$14)","ld d,(iy+$14)","ld d,(iy+$00)",patch.asm,"LD		D, (IY + FIL.fptr + 3)"
9147,9147,9313,044364,0443a5,pop iy,pop iy,pop iy,patch.asm,POP		IY
9148,9148,9314,044366,0443a7,ret,ret,ret,patch.asm,RET
9149,9149,9315,044367,0443a8,push iy,push iy,push iy,patch.asm,PUTPTR:			PUSH		IY
9150,9150,9316,044369,0443aa,"ld c,a","ld c,a","ld c,a",patch.asm,"LD		C, A  		; C: Filehandle"
9151,9151,9317,04436a,0443ab,push hl,push hl,push hl,patch.asm,PUSH		HL
9152,9152,9318,04436b,0443ac,"ld hl,$000002","ld hl,$000002","ld hl,$000000",patch.asm,"LD		HL, 2"
9153,9153,9319,04436f,0443b0,"add hl,sp","add hl,sp","add hl,sp",patch.asm,"ADD		HL, SP"
9154,9154,9320,044370,0443b1,"ld (hl),e","ld (hl),e","ld (hl),e",patch.asm,"LD		(HL), E 	; 3rd byte of DWORD set to E"
9155,9155,9321,044371,0443b2,pop hl,pop hl,pop hl,patch.asm,POP		HL
9156,9156,9322,044372,0443b3,"ld e,d","ld e,d","ld e,d",patch.asm,"LD		E, D  		; 4th byte passed as E"
9157,9157,9323,044373,0443b4,"ld a,$1c","ld a,$1c","ld a,$00",patch.asm,"LD	A, function"
9158,9158,9324,044375,0443b6,rst.lis $08,rst.lis $08,rst.lis $00,patch.asm,RST.LIS	08h
9159,9159,9325,044377,0443b8,pop iy,pop iy,pop iy,patch.asm,POP		IY
9160,9160,9326,044379,0443ba,ret,ret,ret,patch.asm,RET
9161,9161,9327,04437a,0443bb,push iy,push iy,push iy,patch.asm,GETEXT:         PUSH    IY
9162,9162,9328,04437c,0443bd,"ld c,e","ld c,e","ld c,e",patch.asm,"LD      C, E"
9163,9163,9329,04437d,0443be,"ld a,$19","ld a,$19","ld a,$00",patch.asm,"LD	A, function"
9164,9164,9330,04437f,0443c0,rst.lis $08,rst.lis $08,rst.lis $00,patch.asm,RST.LIS	08h
9165,9165,9331,044381,0443c2,push hl,push hl,push hl,patch.asm,PUSH    HL
9166,9166,9332,044382,0443c3,pop iy,pop iy,pop iy,patch.asm,POP     IY          ; IYU: Pointer to FIL structure
9167,9167,9333,044384,0443c5,"ld l,(iy+$0b)","ld l,(iy+$0b)","ld l,(iy+$00)",patch.asm,"LD      L, (IY + FIL.obj + FFOBJID.objsize + 0)"
9168,9168,9334,044387,0443c8,"ld h,(iy+$0c)","ld h,(iy+$0c)","ld h,(iy+$00)",patch.asm,"LD      H, (IY + FIL.obj + FFOBJID.objsize + 1)"
9169,9169,9335,04438a,0443cb,"ld e,(iy+$0d)","ld e,(iy+$0d)","ld e,(iy+$00)",patch.asm,"LD      E, (IY + FIL.obj + FFOBJID.objsize + 2)"
9170,9170,9336,04438d,0443ce,"ld d,(iy+$0e)","ld d,(iy+$0e)","ld d,(iy+$00)",patch.asm,"LD      D, (IY + FIL.obj + FFOBJID.objsize + 3)"
9171,9171,9337,044390,0443d1,pop iy,pop iy,pop iy,patch.asm,POP     IY
9172,9172,9338,044392,0443d3,ret,ret,ret,patch.asm,RET
9173,9173,9339,044393,0443d4,push iy,push iy,push iy,patch.asm,GETIMS:			PUSH	IY
9174,9174,9340,044395,0443d6,"ld hl,$044a00","ld hl,$044a00","ld hl,$000000",patch.asm,"LD	HL, ACCS 		; Where to store the time string"
9175,9175,9341,044399,0443da,"ld a,$12","ld a,$12","ld a,$00",patch.asm,"LD	A, function"
9176,9176,9342,04439b,0443dc,rst.lis $08,rst.lis $08,rst.lis $00,patch.asm,RST.LIS	08h
9177,9177,9343,04439d,0443de,"ld de,$044a00","ld de,$044a00","ld de,$000000",patch.asm,"LD	DE, ACCS		; DE: pointer to start of string accumulator"
9178,9178,9344,0443a1,0443e2,"ld e,a","ld e,a","ld e,a",patch.asm,"LD	E, A 			;  E: now points to the end of the string"
9179,9179,9345,0443a2,0443e3,pop iy,pop iy,pop iy,patch.asm,POP	IY
9180,9180,9346,0443a4,0443e5,ret,ret,ret,patch.asm,RET
9181,9181,9347,0443a5,0443e6,call $04030a,call $04030a,call $000000,patch.asm,EXPR_W2:		CALL	EXPRI			; Get first parameter
9182,9182,9348,0443a9,0443ea,exx,exx,exx,patch.asm,EXX
9183,9183,9349,0443aa,0443eb,push hl,push hl,push hl,patch.asm,PUSH	HL
9184,9184,9350,0443ab,0443ec,call $040a22,call $040a22,call $000000,patch.asm,CALL	COMMA
9185,9185,9351,0443af,0443f0,call $04030a,call $04030a,call $000000,patch.asm,CALL	EXPRI			; Get second parameter
9186,9186,9352,0443b3,0443f4,exx,exx,exx,patch.asm,EXX
9187,9187,9353,0443b4,0443f5,pop de,pop de,pop de,patch.asm,POP	DE
9188,9188,9354,0443b5,0443f6,ret,ret,ret,patch.asm,RET
9189,9189,9355,0443b6,0443f7,ret,ret,ret,patch.asm,RESET:			RET
9190,9190,,0443b7,,xor a,,xor a,,
9191,9191,,0443b8,,call $043777,,call $000000,,
9192,9192,,0443bc,,"ld d,e",,"ld d,e",,
9193,9193,,0443bd,,"ld l,a",,"ld l,a",,
9194,9194,,0443be,,"ld (hl),d",,"ld (hl),d",,
9195,9195,,0443bf,,"ld (hl),d",,"ld (hl),d",,
9196,9196,,0443c0,,"ld a,c",,"ld a,c",,
9197,9197,,0443c1,,nop,,nop,,
9198,9198,9356,0443c2,0443f8,"ld a,$10","ld a,$10","ld a,$00",agon_graphics.asm,"LD	A, val"
9199,9199,9357,0443c4,0443fa,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9200,9200,9358,0443c8,0443fe,jp $040b96,jp $040b96,jp $000000,agon_graphics.asm,JP	XEQ
9201,9201,9359,0443cc,044402,"ld a,$0c","ld a,$0c","ld a,$00",agon_graphics.asm,"CLRSCN:			LD	A, 0Ch"
9202,9202,9360,0443ce,044404,jp $043f00,jp $043f30,jp $000000,agon_graphics.asm,JP	OSWRCH
9203,9203,9361,0443d2,044408,push ix,push ix,push ix,agon_graphics.asm,MODE:			PUSH	IX			; Get the system vars in IX
9204,9204,9362,0443d4,04440a,"ld a,$08","ld a,$08","ld a,$00",agon_graphics.asm,"LD	A, function"
9205,9205,9363,0443d6,04440c,rst.lis $08,rst.lis $08,rst.lis $00,agon_graphics.asm,RST.LIS	08h
9206,9206,9364,0443d8,04440e,"res 4,(ix+$04)","res 4,(ix+$04)","res 4,(ix+$00)",agon_graphics.asm,"RES	4, (IX+sysvar_vpd_pflags)"
9207,9207,9365,0443dc,044412,call $04030a,call $04030a,call $000000,agon_graphics.asm,CALL    EXPRI
9208,9208,9366,0443e0,044416,exx,exx,exx,agon_graphics.asm,EXX
9209,9209,9367,0443e1,044417,"ld a,$16","ld a,$16","ld a,$00",agon_graphics.asm,"LD	A, val"
9210,9210,9368,0443e3,044419,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9211,9211,9369,0443e7,04441d,"ld a,l","ld a,l","ld a,l",agon_graphics.asm,"LD	A, val"
9212,9212,9370,0443e8,04441e,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9213,9213,9371,0443ec,044422,"ld a,$08","ld a,$08","ld a,$00",agon_graphics.asm,"LD	A, function"
9214,9214,9372,0443ee,044424,rst.lis $08,rst.lis $08,rst.lis $00,agon_graphics.asm,RST.LIS	08h
9215,9215,9373,0443f0,044426,"bit 4,(ix+$04)","bit 4,(ix+$04)","bit 4,(ix+$00)",agon_graphics.asm,"@@:			BIT	4, (IX+sysvar_vpd_pflags)"
9216,9216,9374,0443f4,04442a,"jr z,$-$04","jr z,$-$04","jr z,$-$00",agon_graphics.asm,"JR	Z, @B			; Wait for the result"
9217,9217,9375,0443f6,04442c,pop ix,pop ix,pop ix,agon_graphics.asm,POP	IX
9218,9218,9376,0443f8,04442e,jp $040b96,jp $040b96,jp $000000,agon_graphics.asm,JP	XEQ
9219,9219,9377,0443fc,044432,inc iy,inc iy,inc iy,agon_graphics.asm,GETSCHR:		INC	IY
9220,9220,9378,0443fe,044434,call $04030a,call $04030a,call $000000,agon_graphics.asm,CALL    EXPRI      		; Get X coordinate
9221,9221,9379,044402,044438,exx,exx,exx,agon_graphics.asm,EXX
9222,9222,9380,044403,044439,"ld ($044a00),hl","ld ($044a00),hl","ld ($000000),hl",agon_graphics.asm,"LD	(VDU_BUFFER+0), HL"
9223,9223,9381,044407,04443d,call $040a22,call $040a22,call $000000,agon_graphics.asm,CALL	COMMA
9224,9224,9382,04440b,044441,call $04030a,call $04030a,call $000000,agon_graphics.asm,CALL	EXPRI			; Get Y coordinate
9225,9225,9383,04440f,044445,exx,exx,exx,agon_graphics.asm,EXX
9226,9226,9384,044410,044446,"ld ($044a02),hl","ld ($044a02),hl","ld ($000000),hl",agon_graphics.asm,"LD	(VDU_BUFFER+2), HL"
9227,9227,9385,044414,04444a,call $040a2f,call $040a2f,call $000000,agon_graphics.asm,CALL	BRAKET			; Closing bracket
9228,9228,9386,044418,04444e,push ix,push ix,push ix,agon_graphics.asm,PUSH	IX			; Get the system vars in IX
9229,9229,9387,04441a,044450,"ld a,$08","ld a,$08","ld a,$00",agon_graphics.asm,"LD	A, function"
9230,9230,9388,04441c,044452,rst.lis $08,rst.lis $08,rst.lis $00,agon_graphics.asm,RST.LIS	08h
9231,9231,9389,04441e,044454,"res 1,(ix+$04)","res 1,(ix+$04)","res 1,(ix+$00)",agon_graphics.asm,"RES	1, (IX+sysvar_vpd_pflags)"
9232,9232,9390,044422,044458,"ld a,$17","ld a,$17","ld a,$00",agon_graphics.asm,"LD	A, val"
9233,9233,9391,044424,04445a,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9234,9234,9392,044428,04445e,"ld a,$00","ld a,$00","ld a,$00",agon_graphics.asm,"LD	A, val"
9235,9235,9393,04442a,044460,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9236,9236,9394,04442e,044464,"ld a,$83","ld a,$83","ld a,$00",agon_graphics.asm,"LD	A, val"
9237,9237,9395,044430,044466,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9238,9238,9396,044434,04446a,"ld a,($044a00)","ld a,($044a00)","ld a,($000000)",agon_graphics.asm,"LD	A, val"
9239,9239,9397,044438,04446e,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9240,9240,9398,04443c,044472,"ld a,($044a01)","ld a,($044a01)","ld a,($000000)",agon_graphics.asm,"LD	A, val"
9241,9241,9399,044440,044476,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9242,9242,9400,044444,04447a,"ld a,($044a02)","ld a,($044a02)","ld a,($000000)",agon_graphics.asm,"LD	A, val"
9243,9243,9401,044448,04447e,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9244,9244,9402,04444c,044482,"ld a,($044a03)","ld a,($044a03)","ld a,($000000)",agon_graphics.asm,"LD	A, val"
9245,9245,9403,044450,044486,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9246,9246,9404,044454,04448a,"bit 1,(ix+$04)","bit 1,(ix+$04)","bit 1,(ix+$00)",agon_graphics.asm,"@@:			BIT	1, (IX+sysvar_vpd_pflags)"
9247,9247,9405,044458,04448e,"jr z,$-$04","jr z,$-$04","jr z,$-$00",agon_graphics.asm,"JR	Z, @B			; Wait for the result"
9248,9248,9406,04445a,044490,"ld a,(ix+$09)","ld a,(ix+$09)","ld a,(ix+$00)",agon_graphics.asm,"LD	A, (IX+sysvar_scrchar)	; Fetch the result in A"
9249,9249,9407,04445d,044493,or a,or a,or a,agon_graphics.asm,OR	A			; Check for 00h
9250,9250,9408,04445e,044494,scf,scf,scf,agon_graphics.asm,SCF				; C = character map
9251,9251,9409,04445f,044495,"jr nz,$+$04","jr nz,$+$04","jr nz,$+$00",agon_graphics.asm,"JR	NZ, @F			; We have a character, so skip next bit"
9252,9252,9410,044461,044497,xor a,xor a,xor a,agon_graphics.asm,XOR	A			; Clear carry
9253,9253,9411,044462,044498,dec a,dec a,dec a,agon_graphics.asm,DEC	A			; Set A to FFh
9254,9254,9412,044463,044499,pop ix,pop ix,pop ix,agon_graphics.asm,@@:			POP	IX
9255,9255,9413,044465,04449b,jp $0407e1,jp $0407e1,jp $000000,agon_graphics.asm,JP	INKEY1			; Jump back to the GET command
9256,9256,9414,044469,04449f,call $04030a,call $04030a,call $000000,agon_graphics.asm,POINT:			CALL    EXPRI      		; Get X coordinate
9257,9257,9415,04446d,0444a3,exx,exx,exx,agon_graphics.asm,EXX
9258,9258,9416,04446e,0444a4,"ld ($044a00),hl","ld ($044a00),hl","ld ($000000),hl",agon_graphics.asm,"LD	(VDU_BUFFER+0), HL"
9259,9259,9417,044472,0444a8,call $040a22,call $040a22,call $000000,agon_graphics.asm,CALL	COMMA
9260,9260,9418,044476,0444ac,call $04030a,call $04030a,call $000000,agon_graphics.asm,CALL	EXPRI			; Get Y coordinate
9261,9261,9419,04447a,0444b0,exx,exx,exx,agon_graphics.asm,EXX
9262,9262,9420,04447b,0444b1,"ld ($044a02),hl","ld ($044a02),hl","ld ($000000),hl",agon_graphics.asm,"LD	(VDU_BUFFER+2), HL"
9263,9263,9421,04447f,0444b5,call $040a2f,call $040a2f,call $000000,agon_graphics.asm,CALL	BRAKET			; Closing bracket
9264,9264,9422,044483,0444b9,push ix,push ix,push ix,agon_graphics.asm,PUSH	IX			; Get the system vars in IX
9265,9265,9423,044485,0444bb,"ld a,$08","ld a,$08","ld a,$00",agon_graphics.asm,"LD	A, function"
9266,9266,9424,044487,0444bd,rst.lis $08,rst.lis $08,rst.lis $00,agon_graphics.asm,RST.LIS	08h
9267,9267,9425,044489,0444bf,"res 2,(ix+$04)","res 2,(ix+$04)","res 2,(ix+$00)",agon_graphics.asm,"RES	2, (IX+sysvar_vpd_pflags)"
9268,9268,9426,04448d,0444c3,"ld a,$17","ld a,$17","ld a,$00",agon_graphics.asm,"LD	A, val"
9269,9269,9427,04448f,0444c5,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9270,9270,9428,044493,0444c9,"ld a,$00","ld a,$00","ld a,$00",agon_graphics.asm,"LD	A, val"
9271,9271,9429,044495,0444cb,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9272,9272,9430,044499,0444cf,"ld a,$84","ld a,$84","ld a,$00",agon_graphics.asm,"LD	A, val"
9273,9273,9431,04449b,0444d1,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9274,9274,9432,04449f,0444d5,"ld a,($044a00)","ld a,($044a00)","ld a,($000000)",agon_graphics.asm,"LD	A, val"
9275,9275,9433,0444a3,0444d9,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9276,9276,9434,0444a7,0444dd,"ld a,($044a01)","ld a,($044a01)","ld a,($000000)",agon_graphics.asm,"LD	A, val"
9277,9277,9435,0444ab,0444e1,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9278,9278,9436,0444af,0444e5,"ld a,($044a02)","ld a,($044a02)","ld a,($000000)",agon_graphics.asm,"LD	A, val"
9279,9279,9437,0444b3,0444e9,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9280,9280,9438,0444b7,0444ed,"ld a,($044a03)","ld a,($044a03)","ld a,($000000)",agon_graphics.asm,"LD	A, val"
9281,9281,9439,0444bb,0444f1,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9282,9282,9440,0444bf,0444f5,"bit 2,(ix+$04)","bit 2,(ix+$04)","bit 2,(ix+$00)",agon_graphics.asm,"@@:			BIT	2, (IX+sysvar_vpd_pflags)"
9283,9283,9441,0444c3,0444f9,"jr z,$-$04","jr z,$-$04","jr z,$-$00",agon_graphics.asm,"JR	Z, @B			; Wait for the result"
9284,9284,9442,0444c5,0444fb,"ld l,(ix+$16)","ld l,(ix+$16)","ld l,(ix+$00)",agon_graphics.asm,"LD	L, (IX+sysvar_scrpixelIndex)"
9285,9285,9443,0444c8,0444fe,pop ix,pop ix,pop ix,agon_graphics.asm,POP	IX
9286,9286,9444,0444ca,044500,jp $04057f,jp $04057f,jp $000000,agon_graphics.asm,JP	COUNT0
9287,9287,9445,0444ce,044504,call $04030a,call $04030a,call $000000,agon_graphics.asm,COLOUR:			CALL	EXPRI			; The colour / mode
9288,9288,9446,0444d2,044508,exx,exx,exx,agon_graphics.asm,EXX
9289,9289,9447,0444d3,044509,"ld a,l","ld a,l","ld a,l",agon_graphics.asm,"LD	A, L"
9290,9290,9448,0444d4,04450a,"ld ($044a00),a","ld ($044a00),a","ld ($000000),a",agon_graphics.asm,"LD	(VDU_BUFFER+0), A	; Store first parameter"
9291,9291,9449,0444d8,04450e,call $040a70,call $040a70,call $000000,agon_graphics.asm,CALL	NXT			; Are there any more parameters?
9292,9292,9450,0444dc,044512,cp $2c,cp $2c,cp $00,agon_graphics.asm,"CP	','"
9293,9293,9451,0444de,044514,"jr z,$+$14","jr z,$+$14","jr z,$+$00",agon_graphics.asm,"JR	Z, COLOUR_1		; Yes, so we're doing a palette change next"
9294,9294,9452,0444e0,044516,"ld a,$11","ld a,$11","ld a,$00",agon_graphics.asm,"LD	A, val"
9295,9295,9453,0444e2,044518,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9296,9296,9454,0444e6,04451c,"ld a,($044a00)","ld a,($044a00)","ld a,($000000)",agon_graphics.asm,"LD	A, val"
9297,9297,9455,0444ea,044520,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9298,9298,9456,0444ee,044524,jp $040b96,jp $040b96,jp $000000,agon_graphics.asm,JP	XEQ
9299,9299,9457,0444f2,044528,call $040a22,call $040a22,call $000000,agon_graphics.asm,COLOUR_1:		CALL	COMMA
9300,9300,9458,0444f6,04452c,call $04030a,call $04030a,call $000000,agon_graphics.asm,CALL	EXPRI			; Parse R (OR P)
9301,9301,9459,0444fa,044530,exx,exx,exx,agon_graphics.asm,EXX
9302,9302,9460,0444fb,044531,"ld a,l","ld a,l","ld a,l",agon_graphics.asm,"LD	A, L"
9303,9303,9461,0444fc,044532,"ld ($044a01),a","ld ($044a01),a","ld ($000000),a",agon_graphics.asm,"LD	(VDU_BUFFER+1), A"
9304,9304,9462,044500,044536,call $040a70,call $040a70,call $000000,agon_graphics.asm,CALL	NXT			; Are there any more parameters?
9305,9305,9463,044504,04453a,cp $2c,cp $2c,cp $00,agon_graphics.asm,"CP	','"
9306,9306,9464,044506,04453c,"jr z,$+$2e","jr z,$+$2e","jr z,$+$00",agon_graphics.asm,"JR	Z, COLOUR_2		; Yes, so we're doing COLOUR L,R,G,B"
9307,9307,9465,044508,04453e,"ld a,$13","ld a,$13","ld a,$00",agon_graphics.asm,"LD	A, val"
9308,9308,9466,04450a,044540,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9309,9309,9467,04450e,044544,"ld a,($044a00)","ld a,($044a00)","ld a,($000000)",agon_graphics.asm,"LD	A, val"
9310,9310,9468,044512,044548,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9311,9311,9469,044516,04454c,"ld a,($044a01)","ld a,($044a01)","ld a,($000000)",agon_graphics.asm,"LD	A, val"
9312,9312,9470,04451a,044550,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9313,9313,9471,04451e,044554,"ld a,$00","ld a,$00","ld a,$00",agon_graphics.asm,"LD	A, val"
9314,9314,9472,044520,044556,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9315,9315,9473,044524,04455a,"ld a,$00","ld a,$00","ld a,$00",agon_graphics.asm,"LD	A, val"
9316,9316,9474,044526,04455c,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9317,9317,9475,04452a,044560,"ld a,$00","ld a,$00","ld a,$00",agon_graphics.asm,"LD	A, val"
9318,9318,9476,04452c,044562,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9319,9319,9477,044530,044566,jp $040b96,jp $040b96,jp $000000,agon_graphics.asm,JP	XEQ
9320,9320,9478,044534,04456a,call $040a22,call $040a22,call $000000,agon_graphics.asm,COLOUR_2:		CALL	COMMA
9321,9321,9479,044538,04456e,call $04030a,call $04030a,call $000000,agon_graphics.asm,CALL	EXPRI			; Parse G
9322,9322,9480,04453c,044572,exx,exx,exx,agon_graphics.asm,EXX
9323,9323,9481,04453d,044573,"ld a,l","ld a,l","ld a,l",agon_graphics.asm,"LD	A, L"
9324,9324,9482,04453e,044574,"ld ($044a02),a","ld ($044a02),a","ld ($000000),a",agon_graphics.asm,"LD	(VDU_BUFFER+2), A"
9325,9325,9483,044542,044578,call $040a22,call $040a22,call $000000,agon_graphics.asm,CALL	COMMA
9326,9326,9484,044546,04457c,call $04030a,call $04030a,call $000000,agon_graphics.asm,CALL	EXPRI			; Parse B
9327,9327,9485,04454a,044580,exx,exx,exx,agon_graphics.asm,EXX
9328,9328,9486,04454b,044581,"ld a,l","ld a,l","ld a,l",agon_graphics.asm,"LD	A, L"
9329,9329,9487,04454c,044582,"ld ($044a03),a","ld ($044a03),a","ld ($000000),a",agon_graphics.asm,"LD	(VDU_BUFFER+3), A"
9330,9330,9488,044550,044586,"ld a,$13","ld a,$13","ld a,$00",agon_graphics.asm,"LD	A, val"
9331,9331,9489,044552,044588,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9332,9332,9490,044556,04458c,"ld a,($044a00)","ld a,($044a00)","ld a,($000000)",agon_graphics.asm,"LD	A, val"
9333,9333,9491,04455a,044590,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9334,9334,9492,04455e,044594,"ld a,$ff","ld a,$ff","ld a,$00",agon_graphics.asm,"LD	A, val"
9335,9335,9493,044560,044596,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9336,9336,9494,044564,04459a,"ld a,($044a01)","ld a,($044a01)","ld a,($000000)",agon_graphics.asm,"LD	A, val"
9337,9337,9495,044568,04459e,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9338,9338,9496,04456c,0445a2,"ld a,($044a02)","ld a,($044a02)","ld a,($000000)",agon_graphics.asm,"LD	A, val"
9339,9339,9497,044570,0445a6,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9340,9340,9498,044574,0445aa,"ld a,($044a03)","ld a,($044a03)","ld a,($000000)",agon_graphics.asm,"LD	A, val"
9341,9341,9499,044578,0445ae,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9342,9342,9500,04457c,0445b2,jp $040b96,jp $040b96,jp $000000,agon_graphics.asm,JP	XEQ
9343,9343,9501,044580,0445b6,call $04030a,call $04030a,call $000000,agon_graphics.asm,GCOL:			CALL	EXPRI			; Parse MODE
9344,9344,9502,044584,0445ba,exx,exx,exx,agon_graphics.asm,EXX
9345,9345,9503,044585,0445bb,"ld a,l","ld a,l","ld a,l",agon_graphics.asm,"LD	A, L"
9346,9346,9504,044586,0445bc,"ld ($044a00),a","ld ($044a00),a","ld ($000000),a",agon_graphics.asm,"LD	(VDU_BUFFER+0), A"
9347,9347,9505,04458a,0445c0,call $040a22,call $040a22,call $000000,agon_graphics.asm,CALL	COMMA
9348,9348,9506,04458e,0445c4,call $04030a,call $04030a,call $000000,agon_graphics.asm,CALL	EXPRI			; Parse Colour
9349,9349,9507,044592,0445c8,exx,exx,exx,agon_graphics.asm,EXX
9350,9350,9508,044593,0445c9,"ld a,l","ld a,l","ld a,l",agon_graphics.asm,"LD	A, L"
9351,9351,9509,044594,0445ca,"ld ($044a01),a","ld ($044a01),a","ld ($000000),a",agon_graphics.asm,"LD	(VDU_BUFFER+1), A"
9352,9352,9510,044598,0445ce,"ld a,$12","ld a,$12","ld a,$00",agon_graphics.asm,"LD	A, val"
9353,9353,9511,04459a,0445d0,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9354,9354,9512,04459e,0445d4,"ld a,($044a00)","ld a,($044a00)","ld a,($000000)",agon_graphics.asm,"LD	A, val"
9355,9355,9513,0445a2,0445d8,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9356,9356,9514,0445a6,0445dc,"ld a,($044a01)","ld a,($044a01)","ld a,($000000)",agon_graphics.asm,"LD	A, val"
9357,9357,9515,0445aa,0445e0,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9358,9358,9516,0445ae,0445e4,jp $040b96,jp $040b96,jp $000000,agon_graphics.asm,JP	XEQ
9359,9359,9517,0445b2,0445e8,call $04030a,call $04030a,call $000000,agon_graphics.asm,PLOT:			CALL	EXPRI		; Parse mode
9360,9360,9518,0445b6,0445ec,exx,exx,exx,agon_graphics.asm,EXX
9361,9361,9519,0445b7,0445ed,push hl,push hl,push hl,agon_graphics.asm,PUSH	HL		; Push mode (L) onto stack
9362,9362,9520,0445b8,0445ee,call $040a22,call $040a22,call $000000,agon_graphics.asm,CALL	COMMA
9363,9363,9521,0445bc,0445f2,call $0443a5,call $0443e6,call $000000,agon_graphics.asm,CALL	EXPR_W2		; Parse X and Y
9364,9364,9522,0445c0,0445f6,pop bc,pop bc,pop bc,agon_graphics.asm,POP	BC		; Pop mode (C) off stack
9365,9365,9523,0445c1,0445f7,"ld a,$19","ld a,$19","ld a,$00",agon_graphics.asm,"LD	A, val"
9366,9366,9524,0445c3,0445f9,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9367,9367,9525,0445c7,0445fd,"ld a,c","ld a,c","ld a,c",agon_graphics.asm,"LD	A, val"
9368,9368,9526,0445c8,0445fe,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9369,9369,9527,0445cc,044602,"ld a,e","ld a,e","ld a,e",agon_graphics.asm,"LD	A, val"
9370,9370,9528,0445cd,044603,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9371,9371,9529,0445d1,044607,"ld a,d","ld a,d","ld a,d",agon_graphics.asm,"LD	A, val"
9372,9372,9530,0445d2,044608,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9373,9373,9531,0445d6,04460c,"ld a,l","ld a,l","ld a,l",agon_graphics.asm,"LD	A, val"
9374,9374,9532,0445d7,04460d,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9375,9375,9533,0445db,044611,"ld a,h","ld a,h","ld a,h",agon_graphics.asm,"LD	A, val"
9376,9376,9534,0445dc,044612,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9377,9377,9535,0445e0,044616,jp $040b96,jp $040b96,jp $000000,agon_graphics.asm,JP	XEQ
9378,9378,9536,0445e4,04461a,call $0443a5,call $0443e6,call $000000,agon_graphics.asm,MOVE:			CALL	EXPR_W2		; Parse X and Y
9379,9379,9537,0445e8,04461e,"ld c,$04","ld c,$04","ld c,$00",agon_graphics.asm,"LD	C, 04H		; Plot mode 04H (Move)"
9380,9380,9538,0445ea,044620,jr $-$29,jr $-$29,jr $-$00,agon_graphics.asm,JR	PLOT_1		; Plot
9381,9381,9539,0445ec,044622,call $0443a5,call $0443e6,call $000000,agon_graphics.asm,DRAW:			CALL	EXPR_W2		; Get X1 and Y1
9382,9382,9540,0445f0,044626,call $040a70,call $040a70,call $000000,agon_graphics.asm,CALL	NXT		; Are there any more parameters?
9383,9383,9541,0445f4,04462a,cp $2c,cp $2c,cp $00,agon_graphics.asm,"CP	','"
9384,9384,9542,0445f6,04462c,"ld c,$05","ld c,$05","ld c,$00",agon_graphics.asm,"LD	C, 05h		; Code for LINE"
9385,9385,9543,0445f8,04462e,"jr nz,$-$37","jr nz,$-$37","jr nz,$-$00",agon_graphics.asm,"JR	NZ, PLOT_1	; No, so just do DRAW x1,y1"
9386,9386,9544,0445fa,044630,"ld a,$19","ld a,$19","ld a,$00",agon_graphics.asm,"LD	A, val"
9387,9387,9545,0445fc,044632,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9388,9388,9546,044600,044636,"ld a,$04","ld a,$04","ld a,$00",agon_graphics.asm,"LD	A, val"
9389,9389,9547,044602,044638,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9390,9390,9548,044606,04463c,"ld a,e","ld a,e","ld a,e",agon_graphics.asm,"LD	A, val"
9391,9391,9549,044607,04463d,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9392,9392,9550,04460b,044641,"ld a,d","ld a,d","ld a,d",agon_graphics.asm,"LD	A, val"
9393,9393,9551,04460c,044642,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9394,9394,9552,044610,044646,"ld a,l","ld a,l","ld a,l",agon_graphics.asm,"LD	A, val"
9395,9395,9553,044611,044647,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9396,9396,9554,044615,04464b,"ld a,h","ld a,h","ld a,h",agon_graphics.asm,"LD	A, val"
9397,9397,9555,044616,04464c,call $043f00,call $043f30,call $000000,agon_graphics.asm,CALL	OSWRCH
9398,9398,9556,04461a,044650,call $040a22,call $040a22,call $000000,agon_graphics.asm,CALL	COMMA
9399,9399,9557,04461e,044654,push bc,push bc,push bc,agon_graphics.asm,PUSH	BC
9400,9400,9558,04461f,044655,call $0443a5,call $0443e6,call $000000,agon_graphics.asm,CALL	EXPR_W2		; Get X2 and Y2
9401,9401,9559,044623,044659,pop bc,pop bc,pop bc,agon_graphics.asm,POP	BC
9402,9402,9560,044624,04465a,jr $-$63,jr $-$63,jr $-$00,agon_graphics.asm,JR	PLOT_1		; Now DRAW the line to those positions
9403,9403,9561,044626,04465c,call $0443a5,call $0443e6,call $000000,agon_sound.asm,"SOUND:			CALL	EXPR_W2			; DE: Channel/Control, HL: Volume"
9404,9404,9562,04462a,044660,"ld a,l","ld a,l","ld a,l",agon_sound.asm,"LD	A, L 			;  A: Volume"
9405,9405,9563,04462b,044661,push af,push af,push af,agon_sound.asm,PUSH	AF
9406,9406,9564,04462c,044662,push de,push de,push de,agon_sound.asm,PUSH	DE
9407,9407,9565,04462d,044663,call $040a22,call $040a22,call $000000,agon_sound.asm,CALL	COMMA
9408,9408,9566,044631,044667,call $0443a5,call $0443e6,call $000000,agon_sound.asm,"CALL	EXPR_W2			; DE: Pitch, HL: Duration"
9409,9409,9567,044635,04466b,"ld d,e","ld d,e","ld d,e",agon_sound.asm,"LD	D, E			;  D: Pitch"
9410,9410,9568,044636,04466c,"ld e,l","ld e,l","ld e,l",agon_sound.asm,"LD	E, L 			;  E: Duration"
9411,9411,9569,044637,04466d,pop hl,pop hl,pop hl,agon_sound.asm,POP	HL 			; HL: Channel/Control
9412,9412,9570,044638,04466e,pop af,pop af,pop af,agon_sound.asm,POP	AF
9413,9413,9571,044639,04466f,neg,neg,neg,agon_sound.asm,NEG
9414,9414,9572,04463b,044671,cp $10,cp $10,cp $00,agon_sound.asm,CP	16			; Check volume is in bounds
9415,9415,9573,04463d,044673,"jp nc,$040b96","jp nc,$040b96","jp nc,$000000",agon_sound.asm,"JP	NC, XEQ			; Out of bounds, do nothing"
9416,9416,9574,044641,044677,"ld c,a","ld c,a","ld c,a",agon_sound.asm,"LD	C, A			; Store Volume in C"
9417,9417,9575,044642,044678,"ld a,l","ld a,l","ld a,l",agon_sound.asm,"LD	A, L"
9418,9418,9576,044643,044679,"ld ($044a00),a","ld ($044a00),a","ld ($000000),a",agon_sound.asm,"LD	(VDU_BUFFER+0), A	; Channel"
9419,9419,9577,044647,04467d,xor a,xor a,xor a,agon_sound.asm,XOR	A
9420,9420,9578,044648,04467e,"ld ($044a01),a","ld ($044a01),a","ld ($000000),a",agon_sound.asm,"LD	(VDU_BUFFER+1), A	; Waveform"
9421,9421,9579,04464c,044682,"ld b,$06","ld b,$06","ld b,$00",agon_sound.asm,"LD	B, 6			; C already contains the volume"
9422,9422,9580,04464e,044684,mlt bc,mlt bc,mlt bc,agon_sound.asm,MLT	BC			; Multiply by 6 (0-15 scales to 0-90)
9423,9423,9581,044650,044686,"ld a,c","ld a,c","ld a,c",agon_sound.asm,"LD	A, C"
9424,9424,9582,044651,044687,"ld ($044a02),a","ld ($044a02),a","ld ($000000),a",agon_sound.asm,"LD	(VDU_BUFFER+2), A"
9425,9425,9583,044655,04468b,"ld c,e","ld c,e","ld c,e",agon_sound.asm,"LD	C, E			; Store duration in C"
9426,9426,9584,044656,04468c,"ld h,$00","ld h,$00","ld h,$00",agon_sound.asm,"LD	H, 0			; Lookup the frequency"
9427,9427,9585,044658,04468e,"ld l,d","ld l,d","ld l,d",agon_sound.asm,"LD	L, D"
9428,9428,9586,044659,04468f,"ld de,$0446e0","ld de,$044716","ld de,$000000",agon_sound.asm,"LD	DE, SOUND_FREQ_LOOKUP"
9429,9429,9587,04465d,044693,"add hl,hl","add hl,hl","add hl,hl",agon_sound.asm,"ADD	HL, HL"
9430,9430,9588,04465e,044694,"add hl,de","add hl,de","add hl,de",agon_sound.asm,"ADD	HL, DE"
9431,9431,9589,04465f,044695,"ld a,(hl)","ld a,(hl)","ld a,(hl)",agon_sound.asm,"LD	A, (HL)"
9432,9432,9590,044660,044696,"ld ($044a03),a","ld ($044a03),a","ld ($000000),a",agon_sound.asm,"LD	(VDU_BUFFER+3), A"
9433,9433,9591,044664,04469a,inc hl,inc hl,inc hl,agon_sound.asm,INC	HL
9434,9434,9592,044665,04469b,"ld a,(hl)","ld a,(hl)","ld a,(hl)",agon_sound.asm,"LD	A, (HL)"
9435,9435,9593,044666,04469c,"ld ($044a04),a","ld ($044a04),a","ld ($000000),a",agon_sound.asm,"LD	(VDU_BUFFER+4), A"
9436,9436,9594,04466a,0446a0,"ld b,$32","ld b,$32","ld b,$00",agon_sound.asm,"LD	B, 50			; C contains the duration, so MLT by 50"
9437,9437,9595,04466c,0446a2,mlt bc,mlt bc,mlt bc,agon_sound.asm,MLT	BC
9438,9438,9596,04466e,0446a4,"ld ($044a05),bc","ld ($044a05),bc","ld ($000000),bc",agon_sound.asm,"LD	(VDU_BUFFER+5), BC"
9439,9439,9597,044673,0446a9,push ix,push ix,push ix,agon_sound.asm,PUSH	IX			; Get the system vars in IX
9440,9440,9598,044675,0446ab,"ld a,$08","ld a,$08","ld a,$00",agon_sound.asm,"LD	A, function"
9441,9441,9599,044677,0446ad,rst.lis $08,rst.lis $08,rst.lis $00,agon_sound.asm,RST.LIS	08h
9442,9442,9600,044679,0446af,"res.lil 3,(ix+$04)","res.lil 3,(ix+$04)","res.lil 3,(ix+$00)",agon_sound.asm,"SOUND0:			RES.LIL	3, (IX+sysvar_vpd_pflags)"
9443,9443,9601,04467e,0446b4,"ld a,$17","ld a,$17","ld a,$00",agon_sound.asm,"LD	A, val"
9444,9444,9602,044680,0446b6,call $043f00,call $043f30,call $000000,agon_sound.asm,CALL	OSWRCH
9445,9445,9603,044684,0446ba,"ld a,$00","ld a,$00","ld a,$00",agon_sound.asm,"LD	A, val"
9446,9446,9604,044686,0446bc,call $043f00,call $043f30,call $000000,agon_sound.asm,CALL	OSWRCH
9447,9447,9605,04468a,0446c0,"ld a,$85","ld a,$85","ld a,$00",agon_sound.asm,"LD	A, val"
9448,9448,9606,04468c,0446c2,call $043f00,call $043f30,call $000000,agon_sound.asm,CALL	OSWRCH
9449,9449,9607,044690,0446c6,"ld a,($044a00)","ld a,($044a00)","ld a,($000000)",agon_sound.asm,"LD	A, val"
9450,9450,9608,044694,0446ca,call $043f00,call $043f30,call $000000,agon_sound.asm,CALL	OSWRCH
9451,9451,9609,044698,0446ce,"ld a,($044a01)","ld a,($044a01)","ld a,($000000)",agon_sound.asm,"LD	A, val"
9452,9452,9610,04469c,0446d2,call $043f00,call $043f30,call $000000,agon_sound.asm,CALL	OSWRCH
9453,9453,9611,0446a0,0446d6,"ld a,($044a02)","ld a,($044a02)","ld a,($000000)",agon_sound.asm,"LD	A, val"
9454,9454,9612,0446a4,0446da,call $043f00,call $043f30,call $000000,agon_sound.asm,CALL	OSWRCH
9455,9455,9613,0446a8,0446de,"ld a,($044a03)","ld a,($044a03)","ld a,($000000)",agon_sound.asm,"LD	A, val"
9456,9456,9614,0446ac,0446e2,call $043f00,call $043f30,call $000000,agon_sound.asm,CALL	OSWRCH
9457,9457,9615,0446b0,0446e6,"ld a,($044a04)","ld a,($044a04)","ld a,($000000)",agon_sound.asm,"LD	A, val"
9458,9458,9616,0446b4,0446ea,call $043f00,call $043f30,call $000000,agon_sound.asm,CALL	OSWRCH
9459,9459,9617,0446b8,0446ee,"ld a,($044a05)","ld a,($044a05)","ld a,($000000)",agon_sound.asm,"LD	A, val"
9460,9460,9618,0446bc,0446f2,call $043f00,call $043f30,call $000000,agon_sound.asm,CALL	OSWRCH
9461,9461,9619,0446c0,0446f6,"ld a,($044a06)","ld a,($044a06)","ld a,($000000)",agon_sound.asm,"LD	A, val"
9462,9462,9620,0446c4,0446fa,call $043f00,call $043f30,call $000000,agon_sound.asm,CALL	OSWRCH
9463,9463,9621,0446c8,0446fe,"bit.lil 3,(ix+$04)","bit.lil 3,(ix+$04)","bit.lil 3,(ix+$00)",agon_sound.asm,"@@:			BIT.LIL	3, (IX+sysvar_vpd_pflags)"
9464,9464,9622,0446cd,044703,"jr z,$-$05","jr z,$-$05","jr z,$-$00",agon_sound.asm,"JR	Z, @B			; Wait for the result"
9465,9465,9623,0446cf,044705,call $043f71,call $043fa1,call $000000,agon_sound.asm,CALL	LTRAP			; Check for ESC
9466,9466,9624,0446d3,044709,"ld.lil a,(ix+$0e)","ld.lil a,(ix+$0e)","ld.lil a,(ix+$00)",agon_sound.asm,"LD.LIL	A, (IX+sysvar_audioSuccess)"
9467,9467,9625,0446d7,04470d,and a,and a,and a,agon_sound.asm,AND	A			; Check if VDP has queued the note
9468,9468,9626,0446d8,04470e,"jr z,$-$5f","jr z,$-$5f","jr z,$-$00",agon_sound.asm,"JR	Z, SOUND0		; No, so loop back and send again"
9469,9469,9627,0446da,044710,pop ix,pop ix,pop ix,agon_sound.asm,POP	IX
9470,9470,9628,0446dc,044712,jp $040b96,jp $040b96,jp $000000,agon_sound.asm,JP	XEQ
9471,9471,9629,0446e0,044716,"ld (hl),l","ld (hl),l","ld (hl),l",agon_sound.asm,"SOUND_FREQ_LOOKUP:	DW	 117,  118,  120,  122,  123,  131,  133,  135"
9472,9472,9630,0446e1,044717,nop,nop,nop,agon_sound.asm,
9473,9473,9631,0446e2,044718,halt,halt,halt,agon_sound.asm,
9474,9474,9632,0446e3,044719,nop,nop,nop,agon_sound.asm,
9474,9474,9632,0446e3,044719,nop,nop,nop,agon_sound.asm,
9475,9475,9633,0446e4,04471a,"ld a,b","ld a,b","ld a,b",agon_sound.asm,
9476,9476,9634,0446e5,04471b,nop,nop,nop,agon_sound.asm,
9477,9477,9635,0446e6,04471c,"ld a,d","ld a,d","ld a,d",agon_sound.asm,
9477,9477,9635,0446e6,04471c,"ld a,d","ld a,d","ld a,d",agon_sound.asm,
9478,9478,9636,0446e7,04471d,nop,nop,nop,agon_sound.asm,
9479,9479,9637,0446e8,04471e,"ld a,e","ld a,e","ld a,e",agon_sound.asm,
9480,9480,9638,0446e9,04471f,nop,nop,nop,agon_sound.asm,
9480,9480,9638,0446e9,04471f,nop,nop,nop,agon_sound.asm,
9481,9481,9639,0446ea,044720,"add a,e","add a,e","add a,e",agon_sound.asm,
9482,9482,9640,0446eb,044721,nop,nop,nop,agon_sound.asm,
9483,9483,9641,0446ec,044722,"add a,l","add a,l","add a,l",agon_sound.asm,
9484,9484,9642,0446ed,044723,nop,nop,nop,,
9485,9485,9643,0446ee,044724,"add a,a","add a,a","add a,a",,
9486,9486,9644,0446ef,044725,nop,nop,nop,,
9487,9487,9645,0446f0,044726,"adc a,c","adc a,c","adc a,c",agon_sound.asm,"DW	 137,  139,  141,  143,  145,  147,  149,  151"
9488,9488,9646,0446f1,044727,nop,nop,nop,agon_sound.asm,
9489,9489,9647,0446f2,044728,"adc a,e","adc a,e","adc a,e",agon_sound.asm,
9490,9490,9648,0446f3,044729,nop,nop,nop,agon_sound.asm,
9490,9490,9648,0446f3,044729,nop,nop,nop,agon_sound.asm,
9491,9491,9649,0446f4,04472a,"adc a,l","adc a,l","adc a,l",agon_sound.asm,
9492,9492,9650,0446f5,04472b,nop,nop,nop,agon_sound.asm,
9493,9493,9651,0446f6,04472c,"adc a,a","adc a,a","adc a,a",agon_sound.asm,
9493,9493,9651,0446f6,04472c,"adc a,a","adc a,a","adc a,a",agon_sound.asm,
9494,9494,9652,0446f7,04472d,nop,nop,nop,agon_sound.asm,
9495,9495,9653,0446f8,04472e,sub c,sub c,sub c,agon_sound.asm,
9496,9496,9654,0446f9,04472f,nop,nop,nop,agon_sound.asm,
9496,9496,9654,0446f9,04472f,nop,nop,nop,agon_sound.asm,
9497,9497,9655,0446fa,044730,sub e,sub e,sub e,agon_sound.asm,
9498,9498,9656,0446fb,044731,nop,nop,nop,agon_sound.asm,
9499,9499,9657,0446fc,044732,sub l,sub l,sub l,agon_sound.asm,
9500,9500,9658,0446fd,044733,nop,nop,nop,,
9501,9501,9659,0446fe,044734,sub a,sub a,sub a,,
9502,9502,9660,0446ff,044735,nop,nop,nop,,
9503,9503,9661,044700,044736,"sbc a,c","sbc a,c","sbc a,c",agon_sound.asm,"DW	 153,  156,  158,  160,  162,  165,  167,  170"
9504,9504,9662,044701,044737,nop,nop,nop,agon_sound.asm,
9505,9505,9663,044702,044738,"sbc a,h","sbc a,h","sbc a,h",agon_sound.asm,
9506,9506,9664,044703,044739,nop,nop,nop,agon_sound.asm,
9506,9506,9664,044703,044739,nop,nop,nop,agon_sound.asm,
9507,9507,9665,044704,04473a,"sbc a,(hl)","sbc a,(hl)","sbc a,(hl)",agon_sound.asm,
9508,9508,9666,044705,04473b,nop,nop,nop,agon_sound.asm,
9509,9509,9667,044706,04473c,and b,and b,and b,agon_sound.asm,
9509,9509,9667,044706,04473c,and b,and b,and b,agon_sound.asm,
9510,9510,9668,044707,04473d,nop,nop,nop,agon_sound.asm,
9511,9511,9669,044708,04473e,and d,and d,and d,agon_sound.asm,
9512,9512,9670,044709,04473f,nop,nop,nop,agon_sound.asm,
9512,9512,9670,044709,04473f,nop,nop,nop,agon_sound.asm,
9513,9513,9671,04470a,044740,and l,and l,and l,agon_sound.asm,
9514,9514,9672,04470b,044741,nop,nop,nop,agon_sound.asm,
9515,9515,9673,04470c,044742,and a,and a,and a,agon_sound.asm,
9516,9516,9674,04470d,044743,nop,nop,nop,,
9517,9517,9675,04470e,044744,xor d,xor d,xor d,,
9518,9518,9676,04470f,044745,nop,nop,nop,,
9519,9519,9677,044710,044746,xor h,xor h,xor h,agon_sound.asm,"DW	 172,  175,  177,  180,  182,  185,  188,  190"
9520,9520,9678,044711,044747,nop,nop,nop,agon_sound.asm,
9521,9521,9679,044712,044748,xor a,xor a,xor a,agon_sound.asm,
9522,9522,9680,044713,044749,nop,nop,nop,agon_sound.asm,
9522,9522,9680,044713,044749,nop,nop,nop,agon_sound.asm,
9523,9523,9681,044714,04474a,or c,or c,or c,agon_sound.asm,
9524,9524,9682,044715,04474b,nop,nop,nop,agon_sound.asm,
9525,9525,9683,044716,04474c,or h,or h,or h,agon_sound.asm,
9525,9525,9683,044716,04474c,or h,or h,or h,agon_sound.asm,
9526,9526,9684,044717,04474d,nop,nop,nop,agon_sound.asm,
9527,9527,9685,044718,04474e,or (hl),or (hl),or (hl),agon_sound.asm,
9528,9528,9686,044719,04474f,nop,nop,nop,agon_sound.asm,
9528,9528,9686,044719,04474f,nop,nop,nop,agon_sound.asm,
9529,9529,9687,04471a,044750,cp c,cp c,cp c,agon_sound.asm,
9530,9530,9688,04471b,044751,nop,nop,nop,agon_sound.asm,
9531,9531,9689,04471c,044752,cp h,cp h,cp h,agon_sound.asm,
9532,9532,9690,04471d,044753,nop,nop,nop,,
9533,9533,9691,04471e,044754,cp (hl),cp (hl),cp (hl),,
9534,9534,9692,04471f,044755,nop,nop,nop,,
9535,9535,9693,044720,044756,pop bc,pop bc,pop bc,agon_sound.asm,"DW	 193,  196,  199,  202,  205,  208,  211,  214"
9536,9536,9694,044721,044757,nop,nop,nop,agon_sound.asm,
9537,9537,9695,044722,044758,"call nz,$00c700","call nz,$00c700","call nz,$000000",agon_sound.asm,
9538,9538,9696,044726,04475c,"jp z,$00cd00","jp z,$00cd00","jp z,$000000",agon_sound.asm,
9538,9538,9696,044726,04475c,"jp z,$00cd00","jp z,$00cd00","jp z,$000000",agon_sound.asm,
9539,9539,9697,04472a,044760,ret nc,ret nc,ret nc,agon_sound.asm,
9540,9540,9698,04472b,044761,nop,nop,nop,agon_sound.asm,
9541,9541,9699,04472c,044762,"out ($00),a","out ($00),a","out ($00),a",agon_sound.asm,
9542,9542,9700,04472e,044764,sub $00,sub $00,sub $00,,
9543,9543,9701,044730,044766,exx,exx,exx,agon_sound.asm,"DW	 217,  220,  223,  226,  230,  233,  236,  240"
9544,9544,9702,044731,044767,nop,nop,nop,agon_sound.asm,
9545,9545,9703,044732,044768,"call c,$00df00","call c,$00df00","call c,$000000",agon_sound.asm,
9546,9546,9704,044736,04476c,"jp po,$00e600","jp po,$00e600","jp po,$000000",agon_sound.asm,
9546,9546,9704,044736,04476c,"jp po,$00e600","jp po,$00e600","jp po,$000000",agon_sound.asm,
9547,9547,9705,04473a,044770,jp (hl),jp (hl),jp (hl),agon_sound.asm,
9548,9548,9706,04473b,044771,nop,nop,nop,agon_sound.asm,
9549,9549,9707,04473c,044772,"call pe,$00f000","call pe,$00f000","call pe,$000000",agon_sound.asm,
9550,9550,9708,044740,044776,di,di,di,agon_sound.asm,"DW	 243,  247,  251,  254,  258,  262,  265,  269"
9551,9551,9709,044741,044777,nop,nop,nop,agon_sound.asm,
9552,9552,9710,044742,044778,rst $30,rst $30,rst $00,agon_sound.asm,
9553,9553,9711,044743,044779,nop,nop,nop,agon_sound.asm,
9553,9553,9711,044743,044779,nop,nop,nop,agon_sound.asm,
9554,9554,9712,044744,04477a,ei,ei,ei,agon_sound.asm,
9555,9555,9713,044745,04477b,nop,nop,nop,agon_sound.asm,
9556,9556,9714,044746,04477c,cp $00,cp $00,cp $00,agon_sound.asm,
9556,9556,9714,044746,04477c,cp $00,cp $00,cp $00,agon_sound.asm,
9557,9557,9715,044748,04477e,"ld (bc),a","ld (bc),a","ld (bc),a",agon_sound.asm,
9558,9558,9716,044749,04477f,"ld bc,$090106","ld bc,$090106","ld bc,$000000",agon_sound.asm,
9558,9558,9716,044749,04477f,"ld bc,$090106","ld bc,$090106","ld bc,$000000",agon_sound.asm,
9559,9559,9717,04474d,044783,"ld bc,$11010d","ld bc,$11010d","ld bc,$000000",,
9560,9560,9718,044751,044787,"ld bc,$190115","ld bc,$190115","ld bc,$000000",agon_sound.asm,
9561,9561,9719,044755,04478b,"ld bc,$21011d","ld bc,$21011d","ld bc,$000000",agon_sound.asm,
9562,9562,9720,044759,04478f,"ld bc,$2a0126","ld bc,$2a0126","ld bc,$000000",agon_sound.asm,
9562,9562,9720,044759,04478f,"ld bc,$2a0126","ld bc,$2a0126","ld bc,$000000",agon_sound.asm,
9563,9563,9721,04475d,044793,"ld bc,$33012e","ld bc,$33012e","ld bc,$000000",,
9564,9564,9722,044761,044797,"ld bc,$3c0137","ld bc,$3c0137","ld bc,$000000",agon_sound.asm,
9565,9565,9723,044765,04479b,"ld bc,$450140","ld bc,$450140","ld bc,$000000",agon_sound.asm,
9566,9566,9724,044769,04479f,"ld bc,$4e014a","ld bc,$4e014a","ld bc,$000000",agon_sound.asm,
9566,9566,9724,044769,04479f,"ld bc,$4e014a","ld bc,$4e014a","ld bc,$000000",agon_sound.asm,
9567,9567,9725,04476d,0447a3,"ld bc,$580153","ld bc,$580153","ld bc,$000000",,
9568,9568,9726,044771,0447a7,"ld bc,$62015d","ld bc,$62015d","ld bc,$000000",agon_sound.asm,
9569,9569,9727,044775,0447ab,"ld bc,$6d0167","ld bc,$6d0167","ld bc,$000000",agon_sound.asm,
9570,9570,9728,044779,0447af,"ld bc,$770172","ld bc,$770172","ld bc,$000000",agon_sound.asm,
9570,9570,9728,044779,0447af,"ld bc,$770172","ld bc,$770172","ld bc,$000000",agon_sound.asm,
9571,9571,9729,04477d,0447b3,"ld bc,$82017d","ld bc,$82017d","ld bc,$000000",,
9572,9572,9730,044781,0447b7,"ld bc,$8e0188","ld bc,$8e0188","ld bc,$000000",agon_sound.asm,
9573,9573,9731,044785,0447bb,"ld bc,$990193","ld bc,$990193","ld bc,$000000",agon_sound.asm,
9574,9574,9732,044789,0447bf,"ld bc,$a5019f","ld bc,$a5019f","ld bc,$000000",agon_sound.asm,
9574,9574,9732,044789,0447bf,"ld bc,$a5019f","ld bc,$a5019f","ld bc,$000000",agon_sound.asm,
9575,9575,9733,04478d,0447c3,"ld bc,$b201ab","ld bc,$b201ab","ld bc,$000000",,
9576,9576,9734,044791,0447c7,"ld bc,$be01b8","ld bc,$be01b8","ld bc,$000000",agon_sound.asm,
9577,9577,9735,044795,0447cb,"ld bc,$cb01c5","ld bc,$cb01c5","ld bc,$000000",agon_sound.asm,
9578,9578,9736,044799,0447cf,"ld bc,$d901d2","ld bc,$d901d2","ld bc,$000000",agon_sound.asm,
9578,9578,9736,044799,0447cf,"ld bc,$d901d2","ld bc,$d901d2","ld bc,$000000",agon_sound.asm,
9579,9579,9737,04479d,0447d3,"ld bc,$e701e0","ld bc,$e701e0","ld bc,$000000",,
9580,9580,9738,0447a1,0447d7,"ld bc,$f501ee","ld bc,$f501ee","ld bc,$000000",agon_sound.asm,
9581,9581,9739,0447a5,0447db,"ld bc,$0401fc","ld bc,$0401fc","ld bc,$000000",agon_sound.asm,
9582,9582,9740,0447a9,0447df,"ld (bc),a","ld (bc),a","ld (bc),a",agon_sound.asm,
9582,9582,9740,0447a9,0447df,"ld (bc),a","ld (bc),a","ld (bc),a",agon_sound.asm,
9583,9583,9741,0447aa,0447e0,dec bc,dec bc,dec bc,agon_sound.asm,
9584,9584,9742,0447ab,0447e1,"ld (bc),a","ld (bc),a","ld (bc),a",agon_sound.asm,
9585,9585,9743,0447ac,0447e2,inc de,inc de,inc de,agon_sound.asm,
9586,9586,9744,0447ad,0447e3,"ld (bc),a","ld (bc),a","ld (bc),a",,
9587,9587,9745,0447ae,0447e4,dec de,dec de,dec de,,
9588,9588,9746,0447af,0447e5,"ld (bc),a","ld (bc),a","ld (bc),a",,
9589,9589,9747,0447b0,0447e6,"ld ($022a02),hl","ld ($022a02),hl","ld ($000000),hl",agon_sound.asm,"DW	 546,  554,  562,  571,  579,  587,  596,  605"
9590,9590,9748,0447b4,0447ea,"ld ($023b02),a","ld ($023b02),a","ld ($000000),a",agon_sound.asm,
9591,9591,9749,0447b8,0447ee,"ld b,e","ld b,e","ld b,e",agon_sound.asm,
9592,9592,9750,0447b9,0447ef,"ld (bc),a","ld (bc),a","ld (bc),a",agon_sound.asm,
9592,9592,9750,0447b9,0447ef,"ld (bc),a","ld (bc),a","ld (bc),a",agon_sound.asm,
9593,9593,9751,0447ba,0447f0,"ld c,e","ld c,e","ld c,e",agon_sound.asm,
9594,9594,9752,0447bb,0447f1,"ld (bc),a","ld (bc),a","ld (bc),a",agon_sound.asm,
9595,9595,9753,0447bc,0447f2,"ld d,h","ld d,h","ld d,h",agon_sound.asm,
9596,9596,9754,0447bd,0447f3,"ld (bc),a","ld (bc),a","ld (bc),a",,
9597,9597,9755,0447be,0447f4,"ld e,l","ld e,l","ld e,l",,
9598,9598,9756,0447bf,0447f5,"ld (bc),a","ld (bc),a","ld (bc),a",,
9599,9599,9757,0447c0,0447f6,"ld h,l","ld h,l","ld h,l",agon_sound.asm,"DW	 613,  622,  631,  641,  650,  659,  669,  679"
9600,9600,9758,0447c1,0447f7,"ld (bc),a","ld (bc),a","ld (bc),a",agon_sound.asm,
9601,9601,9759,0447c2,0447f8,"ld l,(hl)","ld l,(hl)","ld l,(hl)",agon_sound.asm,
9602,9602,9760,0447c3,0447f9,"ld (bc),a","ld (bc),a","ld (bc),a",agon_sound.asm,
9602,9602,9760,0447c3,0447f9,"ld (bc),a","ld (bc),a","ld (bc),a",agon_sound.asm,
9603,9603,9761,0447c4,0447fa,"ld (hl),a","ld (hl),a","ld (hl),a",agon_sound.asm,
9604,9604,9762,0447c5,0447fb,"ld (bc),a","ld (bc),a","ld (bc),a",agon_sound.asm,
9605,9605,9763,0447c6,0447fc,"add a,c","add a,c","add a,c",agon_sound.asm,
9605,9605,9763,0447c6,0447fc,"add a,c","add a,c","add a,c",agon_sound.asm,
9606,9606,9764,0447c7,0447fd,"ld (bc),a","ld (bc),a","ld (bc),a",agon_sound.asm,
9607,9607,9765,0447c8,0447fe,"adc a,d","adc a,d","adc a,d",agon_sound.asm,
9608,9608,9766,0447c9,0447ff,"ld (bc),a","ld (bc),a","ld (bc),a",agon_sound.asm,
9608,9608,9766,0447c9,0447ff,"ld (bc),a","ld (bc),a","ld (bc),a",agon_sound.asm,
9609,9609,9767,0447ca,044800,sub e,sub e,sub e,agon_sound.asm,
9610,9610,9768,0447cb,044801,"ld (bc),a","ld (bc),a","ld (bc),a",agon_sound.asm,
9611,9611,9769,0447cc,044802,"sbc a,l","sbc a,l","sbc a,l",agon_sound.asm,
9612,9612,9770,0447cd,044803,"ld (bc),a","ld (bc),a","ld (bc),a",,
9613,9613,9771,0447ce,044804,and a,and a,and a,,
9614,9614,9772,0447cf,044805,"ld (bc),a","ld (bc),a","ld (bc),a",,
9615,9615,9773,0447d0,044806,or c,or c,or c,agon_sound.asm,"DW	 689,  699,  709,  719,  729,  740,  751,  762"
9616,9616,9774,0447d1,044807,"ld (bc),a","ld (bc),a","ld (bc),a",agon_sound.asm,
9617,9617,9775,0447d2,044808,cp e,cp e,cp e,agon_sound.asm,
9618,9618,9776,0447d3,044809,"ld (bc),a","ld (bc),a","ld (bc),a",agon_sound.asm,
9618,9618,9776,0447d3,044809,"ld (bc),a","ld (bc),a","ld (bc),a",agon_sound.asm,
9619,9619,9777,0447d4,04480a,push bc,push bc,push bc,agon_sound.asm,
9620,9620,9778,0447d5,04480b,"ld (bc),a","ld (bc),a","ld (bc),a",agon_sound.asm,
9621,9621,9779,0447d6,04480c,rst $08,rst $08,rst $00,agon_sound.asm,
9621,9621,9779,0447d6,04480c,rst $08,rst $08,rst $00,agon_sound.asm,
9622,9622,9780,0447d7,04480d,"ld (bc),a","ld (bc),a","ld (bc),a",agon_sound.asm,
9623,9623,9781,0447d8,04480e,exx,exx,exx,agon_sound.asm,
9624,9624,9782,0447d9,04480f,"ld (bc),a","ld (bc),a","ld (bc),a",agon_sound.asm,
9624,9624,9782,0447d9,04480f,"ld (bc),a","ld (bc),a","ld (bc),a",agon_sound.asm,
9625,9625,9783,0447da,044810,"call po,$02ef02","call po,$02ef02","call po,$000000",agon_sound.asm,
9626,9626,9784,0447de,044814,"jp m,$030502","jp m,$030502","jp m,$000000",,
9627,9627,9785,0447e2,044818,djnz $+$05,djnz $+$05,djnz $+$00,agon_sound.asm,
9628,9628,9786,0447e4,04481a,dec de,dec de,dec de,agon_sound.asm,
9629,9629,9787,0447e5,04481b,inc bc,inc bc,inc bc,agon_sound.asm,
9630,9630,9788,0447e6,04481c,daa,daa,daa,agon_sound.asm,
9630,9630,9788,0447e6,04481c,daa,daa,daa,agon_sound.asm,
9631,9631,9789,0447e7,04481d,inc bc,inc bc,inc bc,agon_sound.asm,
9632,9632,9790,0447e8,04481e,inc sp,inc sp,inc sp,agon_sound.asm,
9633,9633,9791,0447e9,04481f,inc bc,inc bc,inc bc,agon_sound.asm,
9633,9633,9791,0447e9,04481f,inc bc,inc bc,inc bc,agon_sound.asm,
9634,9634,9792,0447ea,044820,ccf,ccf,ccf,agon_sound.asm,
9635,9635,9793,0447eb,044821,inc bc,inc bc,inc bc,agon_sound.asm,
9636,9636,9794,0447ec,044822,"ld c,e","ld c,e","ld c,e",agon_sound.asm,
9637,9637,9795,0447ed,044823,inc bc,inc bc,inc bc,,
9638,9638,9796,0447ee,044824,"ld d,a","ld d,a","ld d,a",,
9639,9639,9797,0447ef,044825,inc bc,inc bc,inc bc,,
9640,9640,9798,0447f0,044826,"ld h,e","ld h,e","ld h,e",agon_sound.asm,"DW	 867,  880,  893,  906,  919,  932,  946,  960"
9641,9641,9799,0447f1,044827,inc bc,inc bc,inc bc,agon_sound.asm,
9642,9642,9800,0447f2,044828,"ld (hl),b","ld (hl),b","ld (hl),b",agon_sound.asm,
9643,9643,9801,0447f3,044829,inc bc,inc bc,inc bc,agon_sound.asm,
9643,9643,9801,0447f3,044829,inc bc,inc bc,inc bc,agon_sound.asm,
9644,9644,9802,0447f4,04482a,"ld a,l","ld a,l","ld a,l",agon_sound.asm,
9645,9645,9803,0447f5,04482b,inc bc,inc bc,inc bc,agon_sound.asm,
9646,9646,9804,0447f6,04482c,"adc a,d","adc a,d","adc a,d",agon_sound.asm,
9646,9646,9804,0447f6,04482c,"adc a,d","adc a,d","adc a,d",agon_sound.asm,
9647,9647,9805,0447f7,04482d,inc bc,inc bc,inc bc,agon_sound.asm,
9648,9648,9806,0447f8,04482e,sub a,sub a,sub a,agon_sound.asm,
9649,9649,9807,0447f9,04482f,inc bc,inc bc,inc bc,agon_sound.asm,
9649,9649,9807,0447f9,04482f,inc bc,inc bc,inc bc,agon_sound.asm,
9650,9650,9808,0447fa,044830,and h,and h,and h,agon_sound.asm,
9651,9651,9809,0447fb,044831,inc bc,inc bc,inc bc,agon_sound.asm,
9652,9652,9810,0447fc,044832,or d,or d,or d,agon_sound.asm,
9653,9653,9811,0447fd,044833,inc bc,inc bc,inc bc,,
9654,9654,9812,0447fe,044834,ret nz,ret nz,ret nz,,
9655,9655,9813,0447ff,044835,inc bc,inc bc,inc bc,,
9656,9656,9814,044800,044836,"adc a,$03","adc a,$03","adc a,$00",agon_sound.asm,"DW	 974,  988, 1002, 1017, 1032, 1047, 1062, 1078"
9657,9657,9815,044802,044838,"call c,$03ea03","call c,$03ea03","call c,$000000",agon_sound.asm,
9658,9658,9816,044806,04483c,"ld sp,hl","ld sp,hl","ld sp,hl",agon_sound.asm,
9658,9658,9816,044806,04483c,"ld sp,hl","ld sp,hl","ld sp,hl",agon_sound.asm,
9659,9659,9817,044807,04483d,inc bc,inc bc,inc bc,agon_sound.asm,
9660,9660,9818,044808,04483e,"ex af,af'","ex af,af'","ex af,af'",agon_sound.asm,
9661,9661,9819,044809,04483f,inc b,inc b,inc b,agon_sound.asm,
9661,9661,9819,044809,04483f,inc b,inc b,inc b,agon_sound.asm,
9662,9662,9820,04480a,044840,rla,rla,rla,agon_sound.asm,
9663,9663,9821,04480b,044841,inc b,inc b,inc b,agon_sound.asm,
9664,9664,9822,04480c,044842,"ld h,$04","ld h,$04","ld h,$00",agon_sound.asm,
9665,9665,9823,04480e,044844,"ld (hl),$04","ld (hl),$04","ld (hl),$00",,
9666,9666,9824,044810,044846,"ld b,l","ld b,l","ld b,l",agon_sound.asm,"DW	1093, 1109, 1125, 1142, 1158, 1175, 1192, 1210"
9667,9667,9825,044811,044847,inc b,inc b,inc b,agon_sound.asm,
9668,9668,9826,044812,044848,"ld d,l","ld d,l","ld d,l",agon_sound.asm,
9669,9669,9827,044813,044849,inc b,inc b,inc b,agon_sound.asm,
9669,9669,9827,044813,044849,inc b,inc b,inc b,agon_sound.asm,
9670,9670,9828,044814,04484a,"ld h,l","ld h,l","ld h,l",agon_sound.asm,
9671,9671,9829,044815,04484b,inc b,inc b,inc b,agon_sound.asm,
9672,9672,9830,044816,04484c,halt,halt,halt,agon_sound.asm,
9672,9672,9830,044816,04484c,halt,halt,halt,agon_sound.asm,
9673,9673,9831,044817,04484d,inc b,inc b,inc b,agon_sound.asm,
9674,9674,9832,044818,04484e,"add a,(hl)","add a,(hl)","add a,(hl)",agon_sound.asm,
9675,9675,9833,044819,04484f,inc b,inc b,inc b,agon_sound.asm,
9675,9675,9833,044819,04484f,inc b,inc b,inc b,agon_sound.asm,
9676,9676,9834,04481a,044850,sub a,sub a,sub a,agon_sound.asm,
9677,9677,9835,04481b,044851,inc b,inc b,inc b,agon_sound.asm,
9678,9678,9836,04481c,044852,xor b,xor b,xor b,agon_sound.asm,
9679,9679,9837,04481d,044853,inc b,inc b,inc b,,
9680,9680,9838,04481e,044854,cp d,cp d,cp d,,
9681,9681,9839,04481f,044855,inc b,inc b,inc b,,
9682,9682,9840,044820,044856,rlc h,rlc h,rlc h,agon_sound.asm,"DW	1227, 1245, 1263, 1282, 1300, 1319, 1338, 1358"
9683,9683,9841,044822,044858,trap,trap,trap,agon_sound.asm,
9684,9684,9842,044824,04485a,rst $28,rst $28,rst $00,agon_sound.asm,
9685,9685,9843,044825,04485b,inc b,inc b,inc b,agon_sound.asm,
9686,9686,9844,044826,04485c,"ld (bc),a","ld (bc),a","ld (bc),a",agon_sound.asm,
9686,9686,9844,044826,04485c,"ld (bc),a","ld (bc),a","ld (bc),a",agon_sound.asm,
9687,9687,9845,044827,04485d,dec b,dec b,dec b,agon_sound.asm,
9688,9688,9846,044828,04485e,inc d,inc d,inc d,agon_sound.asm,
9689,9689,9847,044829,04485f,dec b,dec b,dec b,agon_sound.asm,
9689,9689,9847,044829,04485f,dec b,dec b,dec b,agon_sound.asm,
9690,9690,9848,04482a,044860,daa,daa,daa,agon_sound.asm,
9691,9691,9849,04482b,044861,dec b,dec b,dec b,agon_sound.asm,
9692,9692,9850,04482c,044862,"ld a,($054e05)","ld a,($054e05)","ld a,($000000)",agon_sound.asm,
9693,9693,9851,044830,044866,"ld h,d","ld h,d","ld h,d",agon_sound.asm,"DW	1378, 1398, 1418, 1439, 1459, 1481, 1502, 1524"
9694,9694,9852,044831,044867,dec b,dec b,dec b,agon_sound.asm,
9695,9695,9853,044832,044868,halt,halt,halt,agon_sound.asm,
9696,9696,9854,044833,044869,dec b,dec b,dec b,agon_sound.asm,
9696,9696,9854,044833,044869,dec b,dec b,dec b,agon_sound.asm,
9697,9697,9855,044834,04486a,"adc a,d","adc a,d","adc a,d",agon_sound.asm,
9698,9698,9856,044835,04486b,dec b,dec b,dec b,agon_sound.asm,
9699,9699,9857,044836,04486c,"sbc a,a","sbc a,a","sbc a,a",agon_sound.asm,
9699,9699,9857,044836,04486c,"sbc a,a","sbc a,a","sbc a,a",agon_sound.asm,
9700,9700,9858,044837,04486d,dec b,dec b,dec b,agon_sound.asm,
9701,9701,9859,044838,04486e,or e,or e,or e,agon_sound.asm,
9702,9702,9860,044839,04486f,dec b,dec b,dec b,agon_sound.asm,
9702,9702,9860,044839,04486f,dec b,dec b,dec b,agon_sound.asm,
9703,9703,9861,04483a,044870,ret,ret,ret,agon_sound.asm,
9704,9704,9862,04483b,044871,dec b,dec b,dec b,agon_sound.asm,
9705,9705,9863,04483c,044872,"sbc a,$05","sbc a,$05","sbc a,$00",agon_sound.asm,
9706,9706,9864,04483e,044874,"call p,$060a05","call p,$060a05","call p,$000000",,
9707,9707,9865,044842,044878,"ld hl,$063806","ld hl,$063806","ld hl,$000000",agon_sound.asm,
9708,9708,9866,044846,04487c,"ld c,a","ld c,a","ld c,a",agon_sound.asm,
9708,9708,9866,044846,04487c,"ld c,a","ld c,a","ld c,a",agon_sound.asm,
9709,9709,9867,044847,04487d,"ld b,$66","ld b,$66","ld b,$00",agon_sound.asm,
9710,9710,9868,044849,04487f,"ld b,$7e","ld b,$7e","ld b,$00",agon_sound.asm,
9710,9710,9868,044849,04487f,"ld b,$7e","ld b,$7e","ld b,$00",agon_sound.asm,
9711,9711,9869,04484b,044881,"ld b,$96","ld b,$96","ld b,$00",agon_sound.asm,
9712,9712,9870,04484d,044883,"ld b,$af","ld b,$af","ld b,$00",,
9713,9713,9871,04484f,044885,"ld b,$c8","ld b,$c8","ld b,$00",,
9714,9714,9872,044851,044887,"ld b,$e1","ld b,$e1","ld b,$00",agon_sound.asm,
9715,9715,9873,044853,044889,"ld b,$fa","ld b,$fa","ld b,$00",agon_sound.asm,
9715,9715,9873,044853,044889,"ld b,$fa","ld b,$fa","ld b,$00",agon_sound.asm,
9716,9716,9874,044855,04488b,"ld b,$14","ld b,$14","ld b,$00",agon_sound.asm,
9717,9717,9875,044857,04488d,rlca,rlca,rlca,agon_sound.asm,
9718,9718,9876,044858,04488e,cpl,cpl,cpl,agon_sound.asm,
9719,9719,9877,044859,04488f,rlca,rlca,rlca,agon_sound.asm,
9719,9719,9877,044859,04488f,rlca,rlca,rlca,agon_sound.asm,
9720,9720,9878,04485a,044890,"ld c,d","ld c,d","ld c,d",agon_sound.asm,
9721,9721,9879,04485b,044891,rlca,rlca,rlca,agon_sound.asm,
9722,9722,9880,04485c,044892,"ld h,l","ld h,l","ld h,l",agon_sound.asm,
9723,9723,9881,04485d,044893,rlca,rlca,rlca,,
9724,9724,9882,04485e,044894,"add a,b","add a,b","add a,b",,
9725,9725,9883,04485f,044895,rlca,rlca,rlca,,
9726,9726,9884,044860,044896,"sbc a,h","sbc a,h","sbc a,h",agon_sound.asm,"DW	1948, 1976, 2005, 2034, 2064, 2093, 2123, 2154"
9727,9727,9885,044861,044897,rlca,rlca,rlca,agon_sound.asm,
9728,9728,9886,044862,044898,cp b,cp b,cp b,agon_sound.asm,
9729,9729,9887,044863,044899,rlca,rlca,rlca,agon_sound.asm,
9729,9729,9887,044863,044899,rlca,rlca,rlca,agon_sound.asm,
9730,9730,9888,044864,04489a,push de,push de,push de,agon_sound.asm,
9731,9731,9889,044865,04489b,rlca,rlca,rlca,agon_sound.asm,
9732,9732,9890,044866,04489c,"jp p,$081007","jp p,$081007","jp p,$000000",agon_sound.asm,
9732,9732,9890,044866,04489c,"jp p,$081007","jp p,$081007","jp p,$000000",agon_sound.asm,
9733,9733,9891,04486a,0448a0,dec l,dec l,dec l,agon_sound.asm,
9734,9734,9892,04486b,0448a1,"ex af,af'","ex af,af'","ex af,af'",agon_sound.asm,
9735,9735,9893,04486c,0448a2,"ld c,e","ld c,e","ld c,e",agon_sound.asm,
9736,9736,9894,04486d,0448a3,"ex af,af'","ex af,af'","ex af,af'",,
9737,9737,9895,04486e,0448a4,"ld l,d","ld l,d","ld l,d",,
9738,9738,9896,04486f,0448a5,"ex af,af'","ex af,af'","ex af,af'",,
9739,9739,9897,044870,0448a6,"adc a,d","adc a,d","adc a,d",agon_sound.asm,"DW	2186, 2217, 2250, 2282, 2316, 2349, 2383, 2418"
9740,9740,9898,044871,0448a7,"ex af,af'","ex af,af'","ex af,af'",agon_sound.asm,
9741,9741,9899,044872,0448a8,xor c,xor c,xor c,agon_sound.asm,
9742,9742,9900,044873,0448a9,"ex af,af'","ex af,af'","ex af,af'",agon_sound.asm,
9742,9742,9900,044873,0448a9,"ex af,af'","ex af,af'","ex af,af'",agon_sound.asm,
9743,9743,9901,044874,0448aa,"jp z,$08ea08","jp z,$08ea08","jp z,$000000",agon_sound.asm,
9744,9744,9902,044878,0448ae,inc c,inc c,inc c,agon_sound.asm,
9745,9745,9903,044879,0448af,"add hl,bc","add hl,bc","add hl,bc",agon_sound.asm,
9745,9745,9903,044879,0448af,"add hl,bc","add hl,bc","add hl,bc",agon_sound.asm,
9746,9746,9904,04487a,0448b0,dec l,dec l,dec l,agon_sound.asm,
9747,9747,9905,04487b,0448b1,"add hl,bc","add hl,bc","add hl,bc",agon_sound.asm,
9748,9748,9906,04487c,0448b2,"ld c,a","ld c,a","ld c,a",agon_sound.asm,
9749,9749,9907,04487d,0448b3,"add hl,bc","add hl,bc","add hl,bc",,
9750,9750,9908,04487e,0448b4,"ld (hl),d","ld (hl),d","ld (hl),d",,
9751,9751,9909,04487f,0448b5,"add hl,bc","add hl,bc","add hl,bc",,
9752,9752,9910,044880,0448b6,sub l,sub l,sub l,agon_sound.asm,"DW	2453, 2489, 2525, 2562, 2599, 2637, 2675, 2714"
9753,9753,9911,044881,0448b7,"add hl,bc","add hl,bc","add hl,bc",agon_sound.asm,
9754,9754,9912,044882,0448b8,cp c,cp c,cp c,agon_sound.asm,
9755,9755,9913,044883,0448b9,"add hl,bc","add hl,bc","add hl,bc",agon_sound.asm,
9755,9755,9913,044883,0448b9,"add hl,bc","add hl,bc","add hl,bc",agon_sound.asm,
9756,9756,9914,044884,0448ba,"add ix,bc","add ix,bc","add ix,bc",agon_sound.asm,
9757,9757,9915,044886,0448bc,"ld (bc),a","ld (bc),a","ld (bc),a",agon_sound.asm,
9757,9757,9915,044886,0448bc,"ld (bc),a","ld (bc),a","ld (bc),a",agon_sound.asm,
9758,9758,9916,044887,0448bd,"ld a,(bc)","ld a,(bc)","ld a,(bc)",agon_sound.asm,
9759,9759,9917,044888,0448be,daa,daa,daa,agon_sound.asm,
9760,9760,9918,044889,0448bf,"ld a,(bc)","ld a,(bc)","ld a,(bc)",agon_sound.asm,
9760,9760,9918,044889,0448bf,"ld a,(bc)","ld a,(bc)","ld a,(bc)",agon_sound.asm,
9761,9761,9919,04488a,0448c0,"ld c,l","ld c,l","ld c,l",agon_sound.asm,
9762,9762,9920,04488b,0448c1,"ld a,(bc)","ld a,(bc)","ld a,(bc)",agon_sound.asm,
9763,9763,9921,04488c,0448c2,"ld (hl),e","ld (hl),e","ld (hl),e",agon_sound.asm,
9764,9764,9922,04488d,0448c3,"ld a,(bc)","ld a,(bc)","ld a,(bc)",,
9765,9765,9923,04488e,0448c4,"sbc a,d","sbc a,d","sbc a,d",,
9766,9766,9924,04488f,0448c5,"ld a,(bc)","ld a,(bc)","ld a,(bc)",,
9767,9767,9925,044890,0448c6,"jp nz,$0aea0a","jp nz,$0aea0a","jp nz,$000000",agon_sound.asm,"DW	2754, 2794, 2834, 2876, 2918, 2960, 3003, 3047"
9768,9768,9926,044894,0448ca,"ld (de),a","ld (de),a","ld (de),a",agon_sound.asm,
9769,9769,9927,044895,0448cb,dec bc,dec bc,dec bc,agon_sound.asm,
9770,9770,9928,044896,0448cc,inc a,inc a,inc a,agon_sound.asm,
9770,9770,9928,044896,0448cc,inc a,inc a,inc a,agon_sound.asm,
9771,9771,9929,044897,0448cd,dec bc,dec bc,dec bc,agon_sound.asm,
9772,9772,9930,044898,0448ce,"ld h,(hl)","ld h,(hl)","ld h,(hl)",agon_sound.asm,
9773,9773,9931,044899,0448cf,dec bc,dec bc,dec bc,agon_sound.asm,
9773,9773,9931,044899,0448cf,dec bc,dec bc,dec bc,agon_sound.asm,
9774,9774,9932,04489a,0448d0,sub b,sub b,sub b,agon_sound.asm,
9775,9775,9933,04489b,0448d1,dec bc,dec bc,dec bc,agon_sound.asm,
9776,9776,9934,04489c,0448d2,cp e,cp e,cp e,agon_sound.asm,
9777,9777,9935,04489d,0448d3,dec bc,dec bc,dec bc,,
9778,9778,9936,04489e,0448d4,rst $20,rst $20,rst $00,,
9779,9779,9937,04489f,0448d5,dec bc,dec bc,dec bc,,
9780,9780,9938,0448a0,0448d6,inc de,inc de,inc de,agon_sound.asm,"DW	3091, 3136, 3182, 3228, 3275, 3322, 3371, 3420"
9781,9781,9939,0448a1,0448d7,inc c,inc c,inc c,agon_sound.asm,
9782,9782,9940,0448a2,0448d8,inc.sis c,inc.sis c,inc.sis c,agon_sound.asm,
9783,9783,9941,0448a4,0448da,"ld l,(hl)","ld l,(hl)","ld l,(hl)",agon_sound.asm,
9784,9784,9942,0448a5,0448db,inc c,inc c,inc c,agon_sound.asm,
9785,9785,9943,0448a6,0448dc,"sbc a,h","sbc a,h","sbc a,h",agon_sound.asm,
9785,9785,9943,0448a6,0448dc,"sbc a,h","sbc a,h","sbc a,h",agon_sound.asm,
9786,9786,9944,0448a7,0448dd,inc c,inc c,inc c,agon_sound.asm,
9787,9787,9945,0448a8,0448de,rrc h,rrc h,rrc h,agon_sound.asm,
9788,9788,9946,0448aa,0448e0,"jp m,$0d2b0c","jp m,$0d2b0c","jp m,$000000",agon_sound.asm,
9789,9789,9947,0448ae,0448e4,"ld e,h","ld e,h","ld e,h",,
9790,9790,9948,0448af,0448e5,dec c,dec c,dec c,,
9791,9791,9949,0448b0,0448e6,"adc a,(hl)","adc a,(hl)","adc a,(hl)",agon_sound.asm,"DW	3470, 3520, 3571, 3623, 3676, 3729, 3784, 3839"
9792,9792,9950,0448b1,0448e7,dec c,dec c,dec c,agon_sound.asm,
9793,9793,9951,0448b2,0448e8,ret nz,ret nz,ret nz,agon_sound.asm,
9794,9794,9952,0448b3,0448e9,dec c,dec c,dec c,agon_sound.asm,
9794,9794,9952,0448b3,0448e9,dec c,dec c,dec c,agon_sound.asm,
9795,9795,9953,0448b4,0448ea,di,di,di,agon_sound.asm,
9796,9796,9954,0448b5,0448eb,dec c,dec c,dec c,agon_sound.asm,
9797,9797,9955,0448b6,0448ec,daa,daa,daa,agon_sound.asm,
9797,9797,9955,0448b6,0448ec,daa,daa,daa,agon_sound.asm,
9798,9798,9956,0448b7,0448ed,"ld c,$5c","ld c,$5c","ld c,$00",agon_sound.asm,
9799,9799,9957,0448b9,0448ef,"ld c,$91","ld c,$91","ld c,$00",agon_sound.asm,
9799,9799,9957,0448b9,0448ef,"ld c,$91","ld c,$91","ld c,$00",agon_sound.asm,
9800,9800,9958,0448bb,0448f1,"ld c,$c8","ld c,$c8","ld c,$00",agon_sound.asm,
9801,9801,9959,0448bd,0448f3,"ld c,$ff","ld c,$ff","ld c,$00",,
9802,9802,9960,0448bf,0448f5,"ld c,$36","ld c,$36","ld c,$00",,
9803,9803,9961,0448c1,0448f7,rrca,rrca,rrca,agon_sound.asm,
9804,9804,9962,0448c2,0448f8,"ld l,a","ld l,a","ld l,a",agon_sound.asm,
9805,9805,9963,0448c3,0448f9,rrca,rrca,rrca,agon_sound.asm,
9805,9805,9963,0448c3,0448f9,rrca,rrca,rrca,agon_sound.asm,
9806,9806,9964,0448c4,0448fa,xor c,xor c,xor c,agon_sound.asm,
9807,9807,9965,0448c5,0448fb,rrca,rrca,rrca,agon_sound.asm,
9808,9808,9966,0448c6,0448fc,"ex (sp),hl","ex (sp),hl","ex (sp),hl",agon_sound.asm,
9808,9808,9966,0448c6,0448fc,"ex (sp),hl","ex (sp),hl","ex (sp),hl",agon_sound.asm,
9809,9809,9967,0448c7,0448fd,rrca,rrca,rrca,agon_sound.asm,
9810,9810,9968,0448c8,0448fe,"ld e,$10","ld e,$10","ld e,$00",agon_sound.asm,
9811,9811,9969,0448ca,044900,"ld e,d","ld e,d","ld e,d",agon_sound.asm,
9812,9812,9970,0448cb,044901,djnz $-$67,djnz $-$67,djnz $-$00,agon_sound.asm,
9813,9813,9971,0448cd,044903,djnz $-$29,djnz $-$29,djnz $-$00,,
9814,9814,9972,0448cf,044905,djnz $+$15,djnz $+$15,djnz $+$00,,
9815,9815,9973,0448d1,044907,"ld de,$931153","ld de,$931153","ld de,$000000",agon_sound.asm,
9816,9816,9974,0448d5,04490b,"ld de,$1711d5","ld de,$1711d5","ld de,$000000",agon_sound.asm,
9817,9817,9975,0448d9,04490f,"ld (de),a","ld (de),a","ld (de),a",agon_sound.asm,
9817,9817,9975,0448d9,04490f,"ld (de),a","ld (de),a","ld (de),a",agon_sound.asm,
9818,9818,9976,0448da,044910,"ld.lil (de),a","ld.lil (de),a","ld.lil (de),a",agon_sound.asm,
9819,9819,9977,0448dc,044912,"sbc a,a","sbc a,a","sbc a,a",agon_sound.asm,
9820,9820,9978,0448dd,044913,"ld (de),a","ld (de),a","ld (de),a",,
9821,9821,9979,0448de,044914,"call po,$21f312","call po,$21f312","call po,$000000",,
9822,9822,,0448e2,,dec (hl),,dec (hl),,
9823,9823,9981,0448e3,044919,inc.lis b,inc.lis b,inc.lis b,interrupts.asm,
9824,9824,9982,0448e5,04491b,"ld e,$32","ld e,$32","ld e,$00",interrupts.asm,"LD		E, 32h				; Set up the VBlank Interrupt Vector"
9825,9825,9983,0448e7,04491d,"ld a,$14","ld a,$14","ld a,$00",interrupts.asm,"LD	A, function"
9826,9826,9984,0448e9,04491f,rst.lis $08,rst.lis $08,rst.lis $00,interrupts.asm,RST.LIS	08h
9827,9827,9985,0448eb,044921,"ex de,hl","ex de,hl","ex de,hl",interrupts.asm,"ex de,hl"
9828,9828,9986,0448ec,044922,"ld hl,$044943","ld hl,$044979","ld hl,$000000",interrupts.asm,"LD		HL, VBLANK_HANDLER_JP + 1	; Pointer to the JP address in this segment"
9829,9829,9987,0448f0,044926,"ld (hl),de","ld (hl),de","ld (hl),de",interrupts.asm,"LD		(HL), DE			; Self-modify the code"
9830,9830,9988,0448f2,044928,ei,ei,ei,interrupts.asm,EI
9831,9831,9989,0448f3,044929,ret,ret,ret,interrupts.asm,RET
9832,9832,9990,0448f4,04492a,di,di,di,interrupts.asm,VBLANK_STOP:		DI
9833,9833,9991,0448f5,04492b,"ld hl,$044943","ld hl,$044979","ld hl,$000000",interrupts.asm,"LD		HL, VBLANK_HANDLER_JP + 1	; Pointer to the JP address in this segment"
9834,9834,9992,0448f9,04492f,"ld de,(hl)","ld de,(hl)","ld de,(hl)",interrupts.asm,"LD		DE, (HL)"
9835,9835,9993,0448fb,044931,"ex de,hl","ex de,hl","ex de,hl",interrupts.asm,"EX		DE, HL 				; HLU: Address of MOS interrupt vector"
9836,9836,9994,0448fc,044932,"ld e,$32","ld e,$32","ld e,$00",interrupts.asm,"LD		E, 32h"
9837,9837,9995,0448fe,044934,"ld a,$14","ld a,$14","ld a,$00",interrupts.asm,"LD	A, function"
9838,9838,9996,044900,044936,rst.lis $08,rst.lis $08,rst.lis $00,interrupts.asm,RST.LIS	08h
9839,9839,9997,044902,044938,ei,ei,ei,interrupts.asm,EI
9840,9840,9998,044903,044939,ret,ret,ret,interrupts.asm,RET
9841,9841,9999,044904,04493a,"ld a,$08","ld a,$08","ld a,$00",interrupts.asm,"LD	A, function"
9842,9842,10000,044906,04493c,rst.lis $08,rst.lis $08,rst.lis $00,interrupts.asm,RST.LIS	08h
9843,9843,10001,044908,04493e,"ld hl,$044d49","ld hl,$044d49","ld hl,$000000",interrupts.asm,"LD		HL, KEYCOUNT 			; Check whether the keycount has changed"
9844,9844,10002,04490c,044942,"ld a,(ix+$19)","ld a,(ix+$19)","ld a,(ix+$00)",interrupts.asm,"LD		A, (IX + sysvar_vkeycount)	; by comparing the MOS copy"
9845,9845,10003,04490f,044945,cp (hl),cp (hl),cp (hl),interrupts.asm,CP 		(HL)				; with our local copy
9846,9846,10004,044910,044946,"jr nz,$+$0c","jr nz,$+$0c","jr nz,$+$00",interrupts.asm,"JR		NZ, DO_KEYBOARD_1		; Yes it has, so jump to the next bit"
9847,9847,10005,044912,044948,xor a,xor a,xor a,interrupts.asm,DO_KEYBOARD_0:		XOR		A 				; Clear the keyboard values
9848,9848,10006,044913,044949,"ld ($044d48),a","ld ($044d48),a","ld ($000000),a",interrupts.asm,"LD		(KEYASCII), A"
9849,9849,10007,044917,04494d,"ld ($044d47),a","ld ($044d47),a","ld ($000000),a",interrupts.asm,"LD		(KEYDOWN), A"
9850,9850,10008,04491b,044951,ret,ret,ret,interrupts.asm,RET	 					; And return
9851,9851,10009,04491c,044952,"ld (hl),a","ld (hl),a","ld (hl),a",interrupts.asm,"DO_KEYBOARD_1:		LD		(HL), A 			; Store the updated local copy of keycount"
9852,9852,10010,04491d,044953,"ld a,(ix+$18)","ld a,(ix+$18)","ld a,(ix+$00)",interrupts.asm,"LD		A, (IX + sysvar_vkeydown)	; Fetch key down value (1 = key down, 0 = key up)"
9853,9853,10011,044920,044956,or a,or a,or a,interrupts.asm,OR		A
9854,9854,10012,044921,044957,"jr z,$-$0f","jr z,$-$0f","jr z,$-$00",interrupts.asm,"JR		Z, DO_KEYBOARD_0		; If it is key up, then clear the keyboard values"
9855,9855,10013,044923,044959,"ld ($044d47),a","ld ($044d47),a","ld ($000000),a",interrupts.asm,"LD		(KEYDOWN), A 			; Store the keydown value"
9856,9856,10014,044927,04495d,"ld a,(ix+$05)","ld a,(ix+$05)","ld a,(ix+$00)",interrupts.asm,"LD		A, (IX + sysvar_keyascii)	; Fetch key ASCII value"
9857,9857,10015,04492a,044960,"ld ($044d48),a","ld ($044d48),a","ld ($000000),a",interrupts.asm,"LD		(KEYASCII), A 			; Store locally"
9858,9858,10016,04492e,044964,cp $1b,cp $1b,cp $00,interrupts.asm,CP		1Bh				; Is it escape?
9859,9859,10017,044930,044966,"call z,$043f4c","call z,$043f7c","call z,$000000",interrupts.asm,"CALL		Z, ESCSET			; Yes, so set the escape flags"
9860,9860,10018,044934,04496a,ret,ret,ret,interrupts.asm,RET						; Return to the interrupt handler
9861,9861,10019,044935,04496b,di,di,di,interrupts.asm,VBLANK_HANDLER:		DI
9862,9862,10020,044936,04496c,push af,push af,push af,interrupts.asm,PUSH		AF
9863,9863,10021,044937,04496d,push hl,push hl,push hl,interrupts.asm,PUSH		HL
9864,9864,10022,044938,04496e,push ix,push ix,push ix,interrupts.asm,PUSH		IX
9865,9865,10023,04493a,044970,call $044904,call $04493a,call $000000,interrupts.asm,CALL		DO_KEYBOARD
9866,9866,10024,04493e,044974,pop ix,pop ix,pop ix,interrupts.asm,POP		IX
9867,9867,10025,044940,044976,pop hl,pop hl,pop hl,interrupts.asm,POP		HL
9868,9868,10026,044941,044977,pop af,pop af,pop af,interrupts.asm,POP		AF
9869,9869,10027,044942,044978,jp $000000,jp $000000,jp $000000,interrupts.asm,VBLANK_HANDLER_JP:	JP		0				; This is self-modified by VBLANK_INIT				; --- End interrupts.asm ---
